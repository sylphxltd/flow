---
description:
globs:
alwaysApply: true
---

# AI SDK Integration

   - Import only from `ai`, `@openrouter/ai-sdk-provider`, `@ai-sdk/svelte`.
   - Server endpoints must use `streamText`, `convertToModelMessages`, `toUIMessageStreamResponse`.
   - Always include `onFinish` for persistence.
   - Define tools with `tool()` and validate with Zod.
   - Client uses `Chat` with `id` and `initialMessages`; handle `tool-xxx` parts explicitly.