---
description: SvelteKit framework-specific rules and best practices
globs: ["**/*.{svelte,ts,js}", "**/src/**/*", "**/routes/**/*"]
alwaysApply: true
---

# SvelteKit Rules

## ğŸ—ï¸ Framework Patterns
- Use SvelteKit's file-based routing
- Leverage Svelte 5 runes: $state, $derived, $effect
- Server-side rendering with SSR
- API routes for server endpoints

## ğŸ“ Project Structure
```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.html          # Main template
â”‚   â”œâ”€â”€ lib/             # Shared utilities
â”‚   â”œâ”€â”€ routes/          # File-based routes
â”‚   â””â”€â”€ app.d.ts         # TypeScript declarations
â”œâ”€â”€ static/              # Static assets
â””â”€â”€ svelte.config.js     # SvelteKit config
```

## ğŸ¯ Component Design
- Use Svelte components with .svelte extension
- Leverage reactive statements and stores
- Event handling with Svelte's event system
- Component composition patterns

## ğŸ“Š State Management & Signals
- **Svelte 5 Runes ONLY**: $state, $derived, $effect for reactive state
- **Legacy `$:` forbidden**: Use runes instead of reactive statements
- Side effects handled inside `$effect` only
- Clean up resources using `$effect` return function
- Manage client state with `$state` and `$derived`
- Avoid module-level mutable singletons
- **Signals First**: Prefer runes over legacy stores when possible
- Svelte's built-in stores for global state (legacy compatibility)
- Reactive statements for derived state
- Context for component-specific state
- Proper store cleanup and subscriptions

## ğŸ”„ Data Fetching
- Load functions for server-side data
- Actions for form handling
- API routes for external integrations
- Proper loading states and error handling

## ğŸš€ Performance
- Svelte's compile-time optimizations
- Efficient reactive system usage
- Proper store subscriptions cleanup
- Bundle analysis and optimization

## ğŸš« Forbidden Practices
- Manual DOM manipulation (use Svelte's reactivity)
- Complex logic in templates (extract to scripts)
- Global style pollution (use scoped styles)
- Improper store cleanup

## ğŸ› ï¸ Recommended Tech Stack (Type-Safe)
- **Styling**: PandaCSS + Iconify (type-safe CSS)
- **Database**: Drizzle ORM + PostgreSQL (type-safe queries)
- **API**: tRPC for type-safe APIs
- **State**: Svelte stores + Zustand (if needed)
- **Linting**: Biome for code quality
- **Testing**: Vitest + Testing Library

## ğŸ¨ Styling Rules
- PandaCSS for type-safe styling
- Design tokens for consistent theming
- Responsive design patterns
- Component-level styling isolation

## ğŸ”§ Configuration
- Shared Biome configuration
- TypeScript strict mode enabled
- PandaCSS with design tokens
- Environment variables properly typed
- SvelteKit with TypeScript support

## ğŸ¯ Best Practices
- Use TypeScript for better DX
- Leverage Svelte's compiler features
- Proper error boundaries
- Accessibility considerations
- SEO optimization with SSR
- Type-safe configuration