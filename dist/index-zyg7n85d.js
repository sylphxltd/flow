import{K as rp,L as a,N as U}from"./index-f47z6pkn.js";var KR=a((xp,CC)=>{var ti,Ki,bi,ni,Ei,$i,pi,ri,Xi,Gi,xi,Fi,ei,AC,BD,li,di,ji,JA,ui,Zi,wi,Ui,Qi,fi,zi,Mi,vi,hC,Vi,mi,Yi;(function(R){var T=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd)define("tslib",["exports"],function(h){R(A(T,A(h)))});else if(typeof CC==="object"&&typeof xp==="object")R(A(T,A(xp)));else R(A(T));function A(h,C){if(h!==T)if(typeof Object.create==="function")Object.defineProperty(h,"__esModule",{value:!0});else h.__esModule=!0;return function(B,D){return h[B]=C?C(B,D):D}}})(function(R){var T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,D){B.__proto__=D}||function(B,D){for(var _ in D)if(Object.prototype.hasOwnProperty.call(D,_))B[_]=D[_]};ti=function(B,D){if(typeof D!=="function"&&D!==null)throw TypeError("Class extends value "+String(D)+" is not a constructor or null");T(B,D);function _(){this.constructor=B}B.prototype=D===null?Object.create(D):(_.prototype=D.prototype,new _)},Ki=Object.assign||function(B){for(var D,_=1,O=arguments.length;_<O;_++){D=arguments[_];for(var H in D)if(Object.prototype.hasOwnProperty.call(D,H))B[H]=D[H]}return B},bi=function(B,D){var _={};for(var O in B)if(Object.prototype.hasOwnProperty.call(B,O)&&D.indexOf(O)<0)_[O]=B[O];if(B!=null&&typeof Object.getOwnPropertySymbols==="function"){for(var H=0,O=Object.getOwnPropertySymbols(B);H<O.length;H++)if(D.indexOf(O[H])<0&&Object.prototype.propertyIsEnumerable.call(B,O[H]))_[O[H]]=B[O[H]]}return _},ni=function(B,D,_,O){var H=arguments.length,i=H<3?D:O===null?O=Object.getOwnPropertyDescriptor(D,_):O,J;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(B,D,_,O);else for(var P=B.length-1;P>=0;P--)if(J=B[P])i=(H<3?J(i):H>3?J(D,_,i):J(D,_))||i;return H>3&&i&&Object.defineProperty(D,_,i),i},Ei=function(B,D){return function(_,O){D(_,O,B)}},$i=function(B,D,_,O,H,i){function J(dT){if(dT!==void 0&&typeof dT!=="function")throw TypeError("Function expected");return dT}var P=O.kind,w=P==="getter"?"get":P==="setter"?"set":"value",t=!D&&B?O.static?B:B.prototype:null,Y=D||(t?Object.getOwnPropertyDescriptor(t,O.name):{}),WR,xR=!1;for(var AR=_.length-1;AR>=0;AR--){var FR={};for(var fR in O)FR[fR]=fR==="access"?{}:O[fR];for(var fR in O.access)FR.access[fR]=O.access[fR];FR.addInitializer=function(dT){if(xR)throw TypeError("Cannot add initializers after decoration has completed");i.push(J(dT||null))};var HT=(0,_[AR])(P==="accessor"?{get:Y.get,set:Y.set}:Y[w],FR);if(P==="accessor"){if(HT===void 0)continue;if(HT===null||typeof HT!=="object")throw TypeError("Object expected");if(WR=J(HT.get))Y.get=WR;if(WR=J(HT.set))Y.set=WR;if(WR=J(HT.init))H.unshift(WR)}else if(WR=J(HT))if(P==="field")H.unshift(WR);else Y[w]=WR}if(t)Object.defineProperty(t,O.name,Y);xR=!0},pi=function(B,D,_){var O=arguments.length>2;for(var H=0;H<D.length;H++)_=O?D[H].call(B,_):D[H].call(B);return O?_:void 0},ri=function(B){return typeof B==="symbol"?B:"".concat(B)},Xi=function(B,D,_){if(typeof D==="symbol")D=D.description?"[".concat(D.description,"]"):"";return Object.defineProperty(B,"name",{configurable:!0,value:_?"".concat(_," ",D):D})},Gi=function(B,D){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(B,D)},xi=function(B,D,_,O){function H(i){return i instanceof _?i:new _(function(J){J(i)})}return new(_||(_=Promise))(function(i,J){function P(Y){try{t(O.next(Y))}catch(WR){J(WR)}}function w(Y){try{t(O.throw(Y))}catch(WR){J(WR)}}function t(Y){Y.done?i(Y.value):H(Y.value).then(P,w)}t((O=O.apply(B,D||[])).next())})},Fi=function(B,D){var _={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},O,H,i,J=Object.create((typeof Iterator==="function"?Iterator:Object).prototype);return J.next=P(0),J.throw=P(1),J.return=P(2),typeof Symbol==="function"&&(J[Symbol.iterator]=function(){return this}),J;function P(t){return function(Y){return w([t,Y])}}function w(t){if(O)throw TypeError("Generator is already executing.");while(J&&(J=0,t[0]&&(_=0)),_)try{if(O=1,H&&(i=t[0]&2?H.return:t[0]?H.throw||((i=H.return)&&i.call(H),0):H.next)&&!(i=i.call(H,t[1])).done)return i;if(H=0,i)t=[t[0]&2,i.value];switch(t[0]){case 0:case 1:i=t;break;case 4:return _.label++,{value:t[1],done:!1};case 5:_.label++,H=t[1],t=[0];continue;case 7:t=_.ops.pop(),_.trys.pop();continue;default:if((i=_.trys,!(i=i.length>0&&i[i.length-1]))&&(t[0]===6||t[0]===2)){_=0;continue}if(t[0]===3&&(!i||t[1]>i[0]&&t[1]<i[3])){_.label=t[1];break}if(t[0]===6&&_.label<i[1]){_.label=i[1],i=t;break}if(i&&_.label<i[2]){_.label=i[2],_.ops.push(t);break}if(i[2])_.ops.pop();_.trys.pop();continue}t=D.call(B,_)}catch(Y){t=[6,Y],H=0}finally{O=i=0}if(t[0]&5)throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}},ei=function(B,D){for(var _ in B)if(_!=="default"&&!Object.prototype.hasOwnProperty.call(D,_))hC(D,B,_)},hC=Object.create?function(B,D,_,O){if(O===void 0)O=_;var H=Object.getOwnPropertyDescriptor(D,_);if(!H||("get"in H?!D.__esModule:H.writable||H.configurable))H={enumerable:!0,get:function(){return D[_]}};Object.defineProperty(B,O,H)}:function(B,D,_,O){if(O===void 0)O=_;B[O]=D[_]},AC=function(B){var D=typeof Symbol==="function"&&Symbol.iterator,_=D&&B[D],O=0;if(_)return _.call(B);if(B&&typeof B.length==="number")return{next:function(){if(B&&O>=B.length)B=void 0;return{value:B&&B[O++],done:!B}}};throw TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")},BD=function(B,D){var _=typeof Symbol==="function"&&B[Symbol.iterator];if(!_)return B;var O=_.call(B),H,i=[],J;try{while((D===void 0||D-- >0)&&!(H=O.next()).done)i.push(H.value)}catch(P){J={error:P}}finally{try{if(H&&!H.done&&(_=O.return))_.call(O)}finally{if(J)throw J.error}}return i},li=function(){for(var B=[],D=0;D<arguments.length;D++)B=B.concat(BD(arguments[D]));return B},di=function(){for(var B=0,D=0,_=arguments.length;D<_;D++)B+=arguments[D].length;for(var O=Array(B),H=0,D=0;D<_;D++)for(var i=arguments[D],J=0,P=i.length;J<P;J++,H++)O[H]=i[J];return O},ji=function(B,D,_){if(_||arguments.length===2){for(var O=0,H=D.length,i;O<H;O++)if(i||!(O in D)){if(!i)i=Array.prototype.slice.call(D,0,O);i[O]=D[O]}}return B.concat(i||Array.prototype.slice.call(D))},JA=function(B){return this instanceof JA?(this.v=B,this):new JA(B)},ui=function(B,D,_){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var O=_.apply(B,D||[]),H,i=[];return H=Object.create((typeof AsyncIterator==="function"?AsyncIterator:Object).prototype),P("next"),P("throw"),P("return",J),H[Symbol.asyncIterator]=function(){return this},H;function J(AR){return function(FR){return Promise.resolve(FR).then(AR,WR)}}function P(AR,FR){if(O[AR]){if(H[AR]=function(fR){return new Promise(function(HT,dT){i.push([AR,fR,HT,dT])>1||w(AR,fR)})},FR)H[AR]=FR(H[AR])}}function w(AR,FR){try{t(O[AR](FR))}catch(fR){xR(i[0][3],fR)}}function t(AR){AR.value instanceof JA?Promise.resolve(AR.value.v).then(Y,WR):xR(i[0][2],AR)}function Y(AR){w("next",AR)}function WR(AR){w("throw",AR)}function xR(AR,FR){if(AR(FR),i.shift(),i.length)w(i[0][0],i[0][1])}},Zi=function(B){var D,_;return D={},O("next"),O("throw",function(H){throw H}),O("return"),D[Symbol.iterator]=function(){return this},D;function O(H,i){D[H]=B[H]?function(J){return(_=!_)?{value:JA(B[H](J)),done:!1}:i?i(J):J}:i}},wi=function(B){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var D=B[Symbol.asyncIterator],_;return D?D.call(B):(B=typeof AC==="function"?AC(B):B[Symbol.iterator](),_={},O("next"),O("throw"),O("return"),_[Symbol.asyncIterator]=function(){return this},_);function O(i){_[i]=B[i]&&function(J){return new Promise(function(P,w){J=B[i](J),H(P,w,J.done,J.value)})}}function H(i,J,P,w){Promise.resolve(w).then(function(t){i({value:t,done:P})},J)}},Ui=function(B,D){if(Object.defineProperty)Object.defineProperty(B,"raw",{value:D});else B.raw=D;return B};var A=Object.create?function(B,D){Object.defineProperty(B,"default",{enumerable:!0,value:D})}:function(B,D){B.default=D},h=function(B){return h=Object.getOwnPropertyNames||function(D){var _=[];for(var O in D)if(Object.prototype.hasOwnProperty.call(D,O))_[_.length]=O;return _},h(B)};Qi=function(B){if(B&&B.__esModule)return B;var D={};if(B!=null){for(var _=h(B),O=0;O<_.length;O++)if(_[O]!=="default")hC(D,B,_[O])}return A(D,B),D},fi=function(B){return B&&B.__esModule?B:{default:B}},zi=function(B,D,_,O){if(_==="a"&&!O)throw TypeError("Private accessor was defined without a getter");if(typeof D==="function"?B!==D||!O:!D.has(B))throw TypeError("Cannot read private member from an object whose class did not declare it");return _==="m"?O:_==="a"?O.call(B):O?O.value:D.get(B)},Mi=function(B,D,_,O,H){if(O==="m")throw TypeError("Private method is not writable");if(O==="a"&&!H)throw TypeError("Private accessor was defined without a setter");if(typeof D==="function"?B!==D||!H:!D.has(B))throw TypeError("Cannot write private member to an object whose class did not declare it");return O==="a"?H.call(B,_):H?H.value=_:D.set(B,_),_},vi=function(B,D){if(D===null||typeof D!=="object"&&typeof D!=="function")throw TypeError("Cannot use 'in' operator on non-object");return typeof B==="function"?D===B:B.has(D)},Vi=function(B,D,_){if(D!==null&&D!==void 0){if(typeof D!=="object"&&typeof D!=="function")throw TypeError("Object expected.");var O,H;if(_){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");O=D[Symbol.asyncDispose]}if(O===void 0){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");if(O=D[Symbol.dispose],_)H=O}if(typeof O!=="function")throw TypeError("Object not disposable.");if(H)O=function(){try{H.call(this)}catch(i){return Promise.reject(i)}};B.stack.push({value:D,dispose:O,async:_})}else if(_)B.stack.push({async:!0});return D};var C=typeof SuppressedError==="function"?SuppressedError:function(B,D,_){var O=Error(_);return O.name="SuppressedError",O.error=B,O.suppressed=D,O};mi=function(B){function D(i){B.error=B.hasError?new C(i,B.error,"An error was suppressed during disposal."):i,B.hasError=!0}var _,O=0;function H(){while(_=B.stack.pop())try{if(!_.async&&O===1)return O=0,B.stack.push(_),Promise.resolve().then(H);if(_.dispose){var i=_.dispose.call(_.value);if(_.async)return O|=2,Promise.resolve(i).then(H,function(J){return D(J),H()})}else O|=1}catch(J){D(J)}if(O===1)return B.hasError?Promise.reject(B.error):Promise.resolve();if(B.hasError)throw B.error}return H()},Yi=function(B,D){if(typeof B==="string"&&/^\.\.?\//.test(B))return B.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(_,O,H,i,J){return O?D?".jsx":".js":H&&(!i||!J)?_:H+i+"."+J.toLowerCase()+"js"});return B},R("__extends",ti),R("__assign",Ki),R("__rest",bi),R("__decorate",ni),R("__param",Ei),R("__esDecorate",$i),R("__runInitializers",pi),R("__propKey",ri),R("__setFunctionName",Xi),R("__metadata",Gi),R("__awaiter",xi),R("__generator",Fi),R("__exportStar",ei),R("__createBinding",hC),R("__values",AC),R("__read",BD),R("__spread",li),R("__spreadArrays",di),R("__spreadArray",ji),R("__await",JA),R("__asyncGenerator",ui),R("__asyncDelegator",Zi),R("__asyncValues",wi),R("__makeTemplateObject",Ui),R("__importStar",Qi),R("__importDefault",fi),R("__classPrivateFieldGet",zi),R("__classPrivateFieldSet",Mi),R("__classPrivateFieldIn",vi),R("__addDisposableResource",Vi),R("__disposeResources",mi),R("__rewriteRelativeImportExtension",Yi)})});var T9=a((R7)=>{Object.defineProperty(R7,"__esModule",{value:!0});R7.encodeUtf8=R7.decodeUtf8=void 0;var oS=new TextDecoder("utf-8"),JS=(R)=>oS.decode(R);R7.decodeUtf8=JS;var IS=new TextEncoder,kS=(R)=>IS.encode(R);R7.encodeUtf8=kS});var jT=a((h7)=>{Object.defineProperty(h7,"__esModule",{value:!0});h7.isFlatbuffersByteBuffer=h7.isReadableNodeStream=h7.isWritableNodeStream=h7.isReadableDOMStream=h7.isWritableDOMStream=h7.isFetchResponse=h7.isFSReadStream=h7.isFileHandle=h7.isUnderlyingSink=h7.isIteratorResult=h7.isArrayLike=h7.isArrowJSON=h7.isAsyncIterable=h7.isIterable=h7.isObservable=h7.isPromise=h7.isObject=void 0;var DD=(R)=>typeof R==="number",A7=(R)=>typeof R==="boolean",LR=(R)=>typeof R==="function",yS=(R)=>R!=null&&Object(R)===R;h7.isObject=yS;var gS=(R)=>{return h7.isObject(R)&&LR(R.then)};h7.isPromise=gS;var sS=(R)=>{return h7.isObject(R)&&LR(R.subscribe)};h7.isObservable=sS;var PS=(R)=>{return h7.isObject(R)&&LR(R[Symbol.iterator])};h7.isIterable=PS;var tS=(R)=>{return h7.isObject(R)&&LR(R[Symbol.asyncIterator])};h7.isAsyncIterable=tS;var KS=(R)=>{return h7.isObject(R)&&h7.isObject(R.schema)};h7.isArrowJSON=KS;var bS=(R)=>{return h7.isObject(R)&&DD(R.length)};h7.isArrayLike=bS;var nS=(R)=>{return h7.isObject(R)&&"done"in R&&"value"in R};h7.isIteratorResult=nS;var ES=(R)=>{return h7.isObject(R)&&LR(R.abort)&&LR(R.close)&&LR(R.start)&&LR(R.write)};h7.isUnderlyingSink=ES;var $S=(R)=>{return h7.isObject(R)&&LR(R.stat)&&DD(R.fd)};h7.isFileHandle=$S;var pS=(R)=>{return h7.isReadableNodeStream(R)&&DD(R.bytesRead)};h7.isFSReadStream=pS;var rS=(R)=>{return h7.isObject(R)&&h7.isReadableDOMStream(R.body)};h7.isFetchResponse=rS;var BC=(R)=>("_getDOMStream"in R)&&("_getNodeStream"in R),XS=(R)=>{return h7.isObject(R)&&LR(R.abort)&&LR(R.getWriter)&&!BC(R)};h7.isWritableDOMStream=XS;var GS=(R)=>{return h7.isObject(R)&&LR(R.cancel)&&LR(R.getReader)&&!BC(R)};h7.isReadableDOMStream=GS;var xS=(R)=>{return h7.isObject(R)&&LR(R.end)&&LR(R.write)&&A7(R.writable)&&!BC(R)};h7.isWritableNodeStream=xS;var FS=(R)=>{return h7.isObject(R)&&LR(R.read)&&LR(R.pipe)&&A7(R.readable)&&!BC(R)};h7.isReadableNodeStream=FS;var eS=(R)=>{return h7.isObject(R)&&LR(R.clear)&&LR(R.bytes)&&LR(R.position)&&LR(R.setPosition)&&LR(R.capacity)&&LR(R.getBufferIdentifier)&&LR(R.createLong)};h7.isFlatbuffersByteBuffer=eS});var bR=a((_7)=>{Object.defineProperty(_7,"__esModule",{value:!0});_7.compareArrayLike=_7.rebaseValueOffsets=_7.toUint8ClampedArrayAsyncIterator=_7.toFloat64ArrayAsyncIterator=_7.toFloat32ArrayAsyncIterator=_7.toUint32ArrayAsyncIterator=_7.toUint16ArrayAsyncIterator=_7.toUint8ArrayAsyncIterator=_7.toInt32ArrayAsyncIterator=_7.toInt16ArrayAsyncIterator=_7.toInt8ArrayAsyncIterator=_7.toArrayBufferViewAsyncIterator=_7.toUint8ClampedArrayIterator=_7.toFloat64ArrayIterator=_7.toFloat32ArrayIterator=_7.toUint32ArrayIterator=_7.toUint16ArrayIterator=_7.toUint8ArrayIterator=_7.toInt32ArrayIterator=_7.toInt16ArrayIterator=_7.toInt8ArrayIterator=_7.toArrayBufferViewIterator=_7.toUint8ClampedArray=_7.toFloat64Array=_7.toFloat32Array=_7.toBigUint64Array=_7.toUint32Array=_7.toUint16Array=_7.toUint8Array=_7.toBigInt64Array=_7.toInt32Array=_7.toInt16Array=_7.toInt8Array=_7.toArrayBufferView=_7.joinUint8Arrays=_7.memcpy=void 0;var gR=KR(),mS=T9(),IA=jT(),HD=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function YS(R){let T=R[0]?[R[0]]:[],A,h,C,B;for(let D,_,O=0,H=0,i=R.length;++O<i;){if(D=T[H],_=R[O],!D||!_||D.buffer!==_.buffer||_.byteOffset<D.byteOffset){_&&(T[++H]=_);continue}if({byteOffset:A,byteLength:C}=D,{byteOffset:h,byteLength:B}=_,A+C<h||h+B<A){_&&(T[++H]=_);continue}T[H]=new Uint8Array(D.buffer,A,h-A+B)}return T}function _D(R,T,A=0,h=T.byteLength){let C=R.byteLength,B=new Uint8Array(R.buffer,R.byteOffset,C),D=new Uint8Array(T.buffer,T.byteOffset,Math.min(h,C));return B.set(D,A),R}_7.memcpy=_D;function Ry(R,T){let A=YS(R),h=A.reduce((i,J)=>i+J.byteLength,0),C,B,D,_=0,O=-1,H=Math.min(T||Number.POSITIVE_INFINITY,h);for(let i=A.length;++O<i;){if(C=A[O],B=C.subarray(0,Math.min(C.length,H-_)),H<=_+B.length){if(B.length<C.length)A[O]=C.subarray(B.length);else if(B.length===C.length)O++;D?_D(D,B,_):D=B;break}_D(D||(D=new Uint8Array(H)),B,_),_+=B.length}return[D||new Uint8Array(0),A.slice(O),h-(D?D.byteLength:0)]}_7.joinUint8Arrays=Ry;function eR(R,T){let A=(0,IA.isIteratorResult)(T)?T.value:T;if(A instanceof R){if(R===Uint8Array)return new R(A.buffer,A.byteOffset,A.byteLength);return A}if(!A)return new R(0);if(typeof A==="string")A=(0,mS.encodeUtf8)(A);if(A instanceof ArrayBuffer)return new R(A);if(A instanceof HD)return new R(A);if((0,IA.isFlatbuffersByteBuffer)(A))return eR(R,A.bytes());return!ArrayBuffer.isView(A)?R.from(A):A.byteLength<=0?new R(0):new R(A.buffer,A.byteOffset,A.byteLength/R.BYTES_PER_ELEMENT)}_7.toArrayBufferView=eR;var Ty=(R)=>eR(Int8Array,R);_7.toInt8Array=Ty;var Ay=(R)=>eR(Int16Array,R);_7.toInt16Array=Ay;var hy=(R)=>eR(Int32Array,R);_7.toInt32Array=hy;var Cy=(R)=>eR(BigInt64Array,R);_7.toBigInt64Array=Cy;var By=(R)=>eR(Uint8Array,R);_7.toUint8Array=By;var Dy=(R)=>eR(Uint16Array,R);_7.toUint16Array=Dy;var _y=(R)=>eR(Uint32Array,R);_7.toUint32Array=_y;var Oy=(R)=>eR(BigUint64Array,R);_7.toBigUint64Array=Oy;var Hy=(R)=>eR(Float32Array,R);_7.toFloat32Array=Hy;var iy=(R)=>eR(Float64Array,R);_7.toFloat64Array=iy;var qy=(R)=>eR(Uint8ClampedArray,R);_7.toUint8ClampedArray=qy;var OD=(R)=>{return R.next(),R};function*gT(R,T){let A=function*(C){yield C},h=typeof T==="string"?A(T):ArrayBuffer.isView(T)?A(T):T instanceof ArrayBuffer?A(T):T instanceof HD?A(T):!(0,IA.isIterable)(T)?A(T):T;return yield*OD(function*(C){let B=null;do B=C.next(yield eR(R,B));while(!B.done)}(h[Symbol.iterator]())),new R}_7.toArrayBufferViewIterator=gT;var ay=(R)=>gT(Int8Array,R);_7.toInt8ArrayIterator=ay;var Ly=(R)=>gT(Int16Array,R);_7.toInt16ArrayIterator=Ly;var Wy=(R)=>gT(Int32Array,R);_7.toInt32ArrayIterator=Wy;var Ny=(R)=>gT(Uint8Array,R);_7.toUint8ArrayIterator=Ny;var cy=(R)=>gT(Uint16Array,R);_7.toUint16ArrayIterator=cy;var oy=(R)=>gT(Uint32Array,R);_7.toUint32ArrayIterator=oy;var Jy=(R)=>gT(Float32Array,R);_7.toFloat32ArrayIterator=Jy;var Iy=(R)=>gT(Float64Array,R);_7.toFloat64ArrayIterator=Iy;var ky=(R)=>gT(Uint8ClampedArray,R);_7.toUint8ClampedArrayIterator=ky;function qT(R,T){return gR.__asyncGenerator(this,arguments,function*(){if((0,IA.isPromise)(T))return yield gR.__await(yield gR.__await(yield*gR.__asyncDelegator(gR.__asyncValues(qT(R,yield gR.__await(T))))));let h=function(D){return gR.__asyncGenerator(this,arguments,function*(){yield yield gR.__await(yield gR.__await(D))})},C=function(D){return gR.__asyncGenerator(this,arguments,function*(){yield gR.__await(yield*gR.__asyncDelegator(gR.__asyncValues(OD(function*(_){let O=null;do O=_.next(yield O===null||O===void 0?void 0:O.value);while(!O.done)}(D[Symbol.iterator]())))))})},B=typeof T==="string"?h(T):ArrayBuffer.isView(T)?h(T):T instanceof ArrayBuffer?h(T):T instanceof HD?h(T):(0,IA.isIterable)(T)?C(T):!(0,IA.isAsyncIterable)(T)?h(T):T;return yield gR.__await(yield*gR.__asyncDelegator(gR.__asyncValues(OD(function(D){return gR.__asyncGenerator(this,arguments,function*(){let _=null;do _=yield gR.__await(D.next(yield yield gR.__await(eR(R,_))));while(!_.done)})}(B[Symbol.asyncIterator]()))))),yield gR.__await(new R)})}_7.toArrayBufferViewAsyncIterator=qT;var Sy=(R)=>qT(Int8Array,R);_7.toInt8ArrayAsyncIterator=Sy;var yy=(R)=>qT(Int16Array,R);_7.toInt16ArrayAsyncIterator=yy;var gy=(R)=>qT(Int32Array,R);_7.toInt32ArrayAsyncIterator=gy;var sy=(R)=>qT(Uint8Array,R);_7.toUint8ArrayAsyncIterator=sy;var Py=(R)=>qT(Uint16Array,R);_7.toUint16ArrayAsyncIterator=Py;var ty=(R)=>qT(Uint32Array,R);_7.toUint32ArrayAsyncIterator=ty;var Ky=(R)=>qT(Float32Array,R);_7.toFloat32ArrayAsyncIterator=Ky;var by=(R)=>qT(Float64Array,R);_7.toFloat64ArrayAsyncIterator=by;var ny=(R)=>qT(Uint8ClampedArray,R);_7.toUint8ClampedArrayAsyncIterator=ny;function Ey(R,T,A){if(R!==0){A=A.slice(0,T);for(let h=-1,C=A.length;++h<C;)A[h]+=R}return A.subarray(0,T)}_7.rebaseValueOffsets=Ey;function $y(R,T){let A=0,h=R.length;if(h!==T.length)return!1;if(h>0)do if(R[A]!==T[A])return!1;while(++A<h);return!0}_7.compareArrayLike=$y});var kA=a((i7)=>{Object.defineProperty(i7,"__esModule",{value:!0});var HR=KR(),lR=bR();i7.default={fromIterable(R){return DC(Lg(R))},fromAsyncIterable(R){return DC(Wg(R))},fromDOMStream(R){return DC(Ng(R))},fromNodeStream(R){return DC(cg(R))},toDOMStream(R,T){throw Error('"toDOMStream" not available in this environment')},toNodeStream(R,T){throw Error('"toNodeStream" not available in this environment')}};var DC=(R)=>{return R.next(),R};function*Lg(R){let T,A=!1,h=[],C,B,D,_=0;function O(){if(B==="peek")return(0,lR.joinUint8Arrays)(h,D)[0];return[C,h,_]=(0,lR.joinUint8Arrays)(h,D),C}({cmd:B,size:D}=(yield(()=>null)())||{cmd:"read",size:0});let H=(0,lR.toUint8ArrayIterator)(R)[Symbol.iterator]();try{do{if({done:T,value:C}=Number.isNaN(D-_)?H.next():H.next(D-_),!T&&C.byteLength>0)h.push(C),_+=C.byteLength;if(T||D<=_)do({cmd:B,size:D}=yield O());while(D<_)}while(!T)}catch(i){(A=!0)&&typeof H.throw==="function"&&H.throw(i)}finally{A===!1&&typeof H.return==="function"&&H.return(null)}return null}function Wg(R){return HR.__asyncGenerator(this,arguments,function*(){let A,h=!1,C=[],B,D,_,O=0;function H(){if(D==="peek")return(0,lR.joinUint8Arrays)(C,_)[0];return[B,C,O]=(0,lR.joinUint8Arrays)(C,_),B}({cmd:D,size:_}=(yield yield HR.__await((()=>null)()))||{cmd:"read",size:0});let i=(0,lR.toUint8ArrayAsyncIterator)(R)[Symbol.asyncIterator]();try{do{if({done:A,value:B}=Number.isNaN(_-O)?yield HR.__await(i.next()):yield HR.__await(i.next(_-O)),!A&&B.byteLength>0)C.push(B),O+=B.byteLength;if(A||_<=O)do({cmd:D,size:_}=yield yield HR.__await(H()));while(_<O)}while(!A)}catch(J){(h=!0)&&typeof i.throw==="function"&&(yield HR.__await(i.throw(J)))}finally{h===!1&&typeof i.return==="function"&&(yield HR.__await(i.return(new Uint8Array(0))))}return yield HR.__await(null)})}function Ng(R){return HR.__asyncGenerator(this,arguments,function*(){let A=!1,h=!1,C=[],B,D,_,O=0;function H(){if(D==="peek")return(0,lR.joinUint8Arrays)(C,_)[0];return[B,C,O]=(0,lR.joinUint8Arrays)(C,_),B}({cmd:D,size:_}=(yield yield HR.__await((()=>null)()))||{cmd:"read",size:0});let i=new H7(R);try{do{if({done:A,value:B}=Number.isNaN(_-O)?yield HR.__await(i.read()):yield HR.__await(i.read(_-O)),!A&&B.byteLength>0)C.push((0,lR.toUint8Array)(B)),O+=B.byteLength;if(A||_<=O)do({cmd:D,size:_}=yield yield HR.__await(H()));while(_<O)}while(!A)}catch(J){(h=!0)&&(yield HR.__await(i.cancel(J)))}finally{h===!1?yield HR.__await(i.cancel()):R.locked&&i.releaseLock()}return yield HR.__await(null)})}class H7{constructor(R){this.source=R,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){if(this.reader)this.reader.releaseLock();this.reader=null}cancel(R){return HR.__awaiter(this,void 0,void 0,function*(){let{reader:T,source:A}=this;T&&(yield T.cancel(R).catch(()=>{})),A&&(A.locked&&this.releaseLock())})}read(R){return HR.__awaiter(this,void 0,void 0,function*(){if(R===0)return{done:this.reader==null,value:new Uint8Array(0)};let T=yield this.reader.read();return!T.done&&(T.value=(0,lR.toUint8Array)(T)),T})}}var iD=(R,T)=>{let A=(C)=>h([T,C]),h;return[T,A,new Promise((C)=>(h=C)&&R.once(T,A))]};function cg(R){return HR.__asyncGenerator(this,arguments,function*(){let A=[],h="error",C=!1,B=null,D,_,O=0,H=[],i;function J(){if(D==="peek")return(0,lR.joinUint8Arrays)(H,_)[0];return[i,H,O]=(0,lR.joinUint8Arrays)(H,_),i}if({cmd:D,size:_}=(yield yield HR.__await((()=>null)()))||{cmd:"read",size:0},R.isTTY)return yield yield HR.__await(new Uint8Array(0)),yield HR.__await(null);try{A[0]=iD(R,"end"),A[1]=iD(R,"error");do{if(A[2]=iD(R,"readable"),[h,B]=yield HR.__await(Promise.race(A.map((w)=>w[2]))),h==="error")break;if(!(C=h==="end")){if(!Number.isFinite(_-O))i=(0,lR.toUint8Array)(R.read());else if(i=(0,lR.toUint8Array)(R.read(_-O)),i.byteLength<_-O)i=(0,lR.toUint8Array)(R.read());if(i.byteLength>0)H.push(i),O+=i.byteLength}if(C||_<=O)do({cmd:D,size:_}=yield yield HR.__await(J()));while(_<O)}while(!C)}finally{yield HR.__await(P(A,h==="error"?B:null))}return yield HR.__await(null);function P(w,t){return i=H=null,new Promise((Y,WR)=>{for(let[xR,AR]of w)R.off(xR,AR);try{let xR=R.destroy;xR&&xR.call(R,t),t=void 0}catch(xR){t=xR||t}finally{t!=null?WR(t):Y()}})}})}});var _C=a((a7)=>{Object.defineProperty(a7,"__esModule",{value:!0});a7.MetadataVersion=void 0;var q7;(function(R){R[R.V1=0]="V1",R[R.V2=1]="V2",R[R.V3=2]="V3",R[R.V4=3]="V4",R[R.V5=4]="V5"})(q7||(a7.MetadataVersion=q7={}))});var qD=a((N7)=>{Object.defineProperty(N7,"__esModule",{value:!0});N7.UnionMode=void 0;var W7;(function(R){R[R.Sparse=0]="Sparse",R[R.Dense=1]="Dense"})(W7||(N7.UnionMode=W7={}))});var aD=a((J7)=>{Object.defineProperty(J7,"__esModule",{value:!0});J7.Precision=void 0;var o7;(function(R){R[R.HALF=0]="HALF",R[R.SINGLE=1]="SINGLE",R[R.DOUBLE=2]="DOUBLE"})(o7||(J7.Precision=o7={}))});var LD=a((S7)=>{Object.defineProperty(S7,"__esModule",{value:!0});S7.DateUnit=void 0;var k7;(function(R){R[R.DAY=0]="DAY",R[R.MILLISECOND=1]="MILLISECOND"})(k7||(S7.DateUnit=k7={}))});var Hh=a((s7)=>{Object.defineProperty(s7,"__esModule",{value:!0});s7.TimeUnit=void 0;var g7;(function(R){R[R.SECOND=0]="SECOND",R[R.MILLISECOND=1]="MILLISECOND",R[R.MICROSECOND=2]="MICROSECOND",R[R.NANOSECOND=3]="NANOSECOND"})(g7||(s7.TimeUnit=g7={}))});var WD=a((K7)=>{Object.defineProperty(K7,"__esModule",{value:!0});K7.IntervalUnit=void 0;var t7;(function(R){R[R.YEAR_MONTH=0]="YEAR_MONTH",R[R.DAY_TIME=1]="DAY_TIME",R[R.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(t7||(K7.IntervalUnit=t7={}))});var G9=a((n7)=>{Object.defineProperty(n7,"__esModule",{value:!0});n7.SIZE_PREFIX_LENGTH=n7.FILE_IDENTIFIER_LENGTH=n7.SIZEOF_INT=n7.SIZEOF_SHORT=void 0;n7.SIZEOF_SHORT=2;n7.SIZEOF_INT=4;n7.FILE_IDENTIFIER_LENGTH=4;n7.SIZE_PREFIX_LENGTH=4});var cD=a(($7)=>{Object.defineProperty($7,"__esModule",{value:!0});$7.isLittleEndian=$7.float64=$7.float32=$7.int32=void 0;$7.int32=new Int32Array(2);$7.float32=new Float32Array($7.int32.buffer);$7.float64=new Float64Array($7.int32.buffer);$7.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1});var oD=a((X7)=>{Object.defineProperty(X7,"__esModule",{value:!0});X7.Encoding=void 0;var r7;(function(R){R[R.UTF8_BYTES=1]="UTF8_BYTES",R[R.UTF16_STRING=2]="UTF16_STRING"})(r7||(X7.Encoding=r7={}))});var ID=a((x7)=>{Object.defineProperty(x7,"__esModule",{value:!0});x7.ByteBuffer=void 0;var sT=G9(),uR=cD(),gg=oD();class JD{constructor(R){this.bytes_=R,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(R){return new JD(new Uint8Array(R))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(R){this.position_=R}capacity(){return this.bytes_.length}readInt8(R){return this.readUint8(R)<<24>>24}readUint8(R){return this.bytes_[R]}readInt16(R){return this.readUint16(R)<<16>>16}readUint16(R){return this.bytes_[R]|this.bytes_[R+1]<<8}readInt32(R){return this.bytes_[R]|this.bytes_[R+1]<<8|this.bytes_[R+2]<<16|this.bytes_[R+3]<<24}readUint32(R){return this.readInt32(R)>>>0}readInt64(R){return BigInt.asIntN(64,BigInt(this.readUint32(R))+(BigInt(this.readUint32(R+4))<<BigInt(32)))}readUint64(R){return BigInt.asUintN(64,BigInt(this.readUint32(R))+(BigInt(this.readUint32(R+4))<<BigInt(32)))}readFloat32(R){return uR.int32[0]=this.readInt32(R),uR.float32[0]}readFloat64(R){return uR.int32[uR.isLittleEndian?0:1]=this.readInt32(R),uR.int32[uR.isLittleEndian?1:0]=this.readInt32(R+4),uR.float64[0]}writeInt8(R,T){this.bytes_[R]=T}writeUint8(R,T){this.bytes_[R]=T}writeInt16(R,T){this.bytes_[R]=T,this.bytes_[R+1]=T>>8}writeUint16(R,T){this.bytes_[R]=T,this.bytes_[R+1]=T>>8}writeInt32(R,T){this.bytes_[R]=T,this.bytes_[R+1]=T>>8,this.bytes_[R+2]=T>>16,this.bytes_[R+3]=T>>24}writeUint32(R,T){this.bytes_[R]=T,this.bytes_[R+1]=T>>8,this.bytes_[R+2]=T>>16,this.bytes_[R+3]=T>>24}writeInt64(R,T){this.writeInt32(R,Number(BigInt.asIntN(32,T))),this.writeInt32(R+4,Number(BigInt.asIntN(32,T>>BigInt(32))))}writeUint64(R,T){this.writeUint32(R,Number(BigInt.asUintN(32,T))),this.writeUint32(R+4,Number(BigInt.asUintN(32,T>>BigInt(32))))}writeFloat32(R,T){uR.float32[0]=T,this.writeInt32(R,uR.int32[0])}writeFloat64(R,T){uR.float64[0]=T,this.writeInt32(R,uR.int32[uR.isLittleEndian?0:1]),this.writeInt32(R+4,uR.int32[uR.isLittleEndian?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+sT.SIZEOF_INT+sT.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let R="";for(let T=0;T<sT.FILE_IDENTIFIER_LENGTH;T++)R+=String.fromCharCode(this.readInt8(this.position_+sT.SIZEOF_INT+T));return R}__offset(R,T){let A=R-this.readInt32(R);return T<this.readInt16(A)?this.readInt16(A+T):0}__union(R,T){return R.bb_pos=T+this.readInt32(T),R.bb=this,R}__string(R,T){R+=this.readInt32(R);let A=this.readInt32(R);R+=sT.SIZEOF_INT;let h=this.bytes_.subarray(R,R+A);if(T===gg.Encoding.UTF8_BYTES)return h;else return this.text_decoder_.decode(h)}__union_with_string(R,T){if(typeof R==="string")return this.__string(T);return this.__union(R,T)}__indirect(R){return R+this.readInt32(R)}__vector(R){return R+this.readInt32(R)+sT.SIZEOF_INT}__vector_len(R){return this.readInt32(R+this.readInt32(R))}__has_identifier(R){if(R.length!=sT.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+sT.FILE_IDENTIFIER_LENGTH);for(let T=0;T<sT.FILE_IDENTIFIER_LENGTH;T++)if(R.charCodeAt(T)!=this.readInt8(this.position()+sT.SIZEOF_INT+T))return!1;return!0}createScalarList(R,T){let A=[];for(let h=0;h<T;++h){let C=R(h);if(C!==null)A.push(C)}return A}createObjList(R,T){let A=[];for(let h=0;h<T;++h){let C=R(h);if(C!==null)A.push(C.unpack())}return A}}x7.ByteBuffer=JD});var j7=a((l7)=>{Object.defineProperty(l7,"__esModule",{value:!0});l7.Builder=void 0;var e7=ID(),zR=G9();class kD{constructor(R){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let T;if(!R)T=1024;else T=R;this.bb=e7.ByteBuffer.allocate(T),this.space=T}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(R){this.force_defaults=R}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(R,T){if(R>this.minalign)this.minalign=R;let A=~(this.bb.capacity()-this.space+T)+1&R-1;while(this.space<A+R+T){let h=this.bb.capacity();this.bb=kD.growByteBuffer(this.bb),this.space+=this.bb.capacity()-h}this.pad(A)}pad(R){for(let T=0;T<R;T++)this.bb.writeInt8(--this.space,0)}writeInt8(R){this.bb.writeInt8(this.space-=1,R)}writeInt16(R){this.bb.writeInt16(this.space-=2,R)}writeInt32(R){this.bb.writeInt32(this.space-=4,R)}writeInt64(R){this.bb.writeInt64(this.space-=8,R)}writeFloat32(R){this.bb.writeFloat32(this.space-=4,R)}writeFloat64(R){this.bb.writeFloat64(this.space-=8,R)}addInt8(R){this.prep(1,0),this.writeInt8(R)}addInt16(R){this.prep(2,0),this.writeInt16(R)}addInt32(R){this.prep(4,0),this.writeInt32(R)}addInt64(R){this.prep(8,0),this.writeInt64(R)}addFloat32(R){this.prep(4,0),this.writeFloat32(R)}addFloat64(R){this.prep(8,0),this.writeFloat64(R)}addFieldInt8(R,T,A){if(this.force_defaults||T!=A)this.addInt8(T),this.slot(R)}addFieldInt16(R,T,A){if(this.force_defaults||T!=A)this.addInt16(T),this.slot(R)}addFieldInt32(R,T,A){if(this.force_defaults||T!=A)this.addInt32(T),this.slot(R)}addFieldInt64(R,T,A){if(this.force_defaults||T!==A)this.addInt64(T),this.slot(R)}addFieldFloat32(R,T,A){if(this.force_defaults||T!=A)this.addFloat32(T),this.slot(R)}addFieldFloat64(R,T,A){if(this.force_defaults||T!=A)this.addFloat64(T),this.slot(R)}addFieldOffset(R,T,A){if(this.force_defaults||T!=A)this.addOffset(T),this.slot(R)}addFieldStruct(R,T,A){if(T!=A)this.nested(T),this.slot(R)}nested(R){if(R!=this.offset())throw TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw TypeError("FlatBuffers: object serialization must not be nested.")}slot(R){if(this.vtable!==null)this.vtable[R]=this.offset()}offset(){return this.bb.capacity()-this.space}static growByteBuffer(R){let T=R.capacity();if(T&3221225472)throw Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");let A=T<<1,h=e7.ByteBuffer.allocate(A);return h.setPosition(A-T),h.bytes().set(R.bytes(),A-T),h}addOffset(R){this.prep(zR.SIZEOF_INT,0),this.writeInt32(this.offset()-R+zR.SIZEOF_INT)}startObject(R){if(this.notNested(),this.vtable==null)this.vtable=[];this.vtable_in_use=R;for(let T=0;T<R;T++)this.vtable[T]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw Error("FlatBuffers: endObject called without startObject");this.addInt32(0);let R=this.offset(),T=this.vtable_in_use-1;for(;T>=0&&this.vtable[T]==0;T--);let A=T+1;for(;T>=0;T--)this.addInt16(this.vtable[T]!=0?R-this.vtable[T]:0);let h=2;this.addInt16(R-this.object_start);let C=(A+h)*zR.SIZEOF_SHORT;this.addInt16(C);let B=0,D=this.space;R:for(T=0;T<this.vtables.length;T++){let _=this.bb.capacity()-this.vtables[T];if(C==this.bb.readInt16(_)){for(let O=zR.SIZEOF_SHORT;O<C;O+=zR.SIZEOF_SHORT)if(this.bb.readInt16(D+O)!=this.bb.readInt16(_+O))continue R;B=this.vtables[T];break}}if(B)this.space=this.bb.capacity()-R,this.bb.writeInt32(this.space,B-R);else this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-R,this.offset()-R);return this.isNested=!1,R}finish(R,T,A){let h=A?zR.SIZE_PREFIX_LENGTH:0;if(T){let C=T;if(this.prep(this.minalign,zR.SIZEOF_INT+zR.FILE_IDENTIFIER_LENGTH+h),C.length!=zR.FILE_IDENTIFIER_LENGTH)throw TypeError("FlatBuffers: file identifier must be length "+zR.FILE_IDENTIFIER_LENGTH);for(let B=zR.FILE_IDENTIFIER_LENGTH-1;B>=0;B--)this.writeInt8(C.charCodeAt(B))}if(this.prep(this.minalign,zR.SIZEOF_INT+h),this.addOffset(R),h)this.addInt32(this.bb.capacity()-this.space);this.bb.setPosition(this.space)}finishSizePrefixed(R,T){this.finish(R,T,!0)}requiredField(R,T){let A=this.bb.capacity()-R,h=A-this.bb.readInt32(A);if(!(T<this.bb.readInt16(h)&&this.bb.readInt16(h+T)!=0))throw TypeError("FlatBuffers: field "+T+" must be set")}startVector(R,T,A){this.notNested(),this.vector_num_elems=T,this.prep(zR.SIZEOF_INT,R*T),this.prep(A,R*T)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(R){if(!R)return 0;if(!this.string_maps)this.string_maps=new Map;if(this.string_maps.has(R))return this.string_maps.get(R);let T=this.createString(R);return this.string_maps.set(R,T),T}createString(R){if(R===null||R===void 0)return 0;let T;if(R instanceof Uint8Array)T=R;else T=this.text_encoder.encode(R);return this.addInt8(0),this.startVector(1,T.length,1),this.bb.setPosition(this.space-=T.length),this.bb.bytes().set(T,this.space),this.endVector()}createByteVector(R){if(R===null||R===void 0)return 0;return this.startVector(1,R.length,1),this.bb.setPosition(this.space-=R.length),this.bb.bytes().set(R,this.space),this.endVector()}createObjectOffset(R){if(R===null)return 0;if(typeof R==="string")return this.createString(R);else return R.pack(this)}createObjectOffsetList(R){let T=[];for(let A=0;A<R.length;++A){let h=R[A];if(h!==null)T.push(this.createObjectOffset(h));else throw TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return T}createStructOffsetList(R,T){return T(this,R.length),this.createObjectOffsetList(R.slice().reverse()),this.endVector()}}l7.Builder=kD});var f=a((MR)=>{Object.defineProperty(MR,"__esModule",{value:!0});MR.ByteBuffer=MR.Builder=MR.Encoding=MR.isLittleEndian=MR.float64=MR.float32=MR.int32=MR.SIZE_PREFIX_LENGTH=MR.FILE_IDENTIFIER_LENGTH=MR.SIZEOF_INT=MR.SIZEOF_SHORT=void 0;var sg=G9();Object.defineProperty(MR,"SIZEOF_SHORT",{enumerable:!0,get:function(){return sg.SIZEOF_SHORT}});var Pg=G9();Object.defineProperty(MR,"SIZEOF_INT",{enumerable:!0,get:function(){return Pg.SIZEOF_INT}});var tg=G9();Object.defineProperty(MR,"FILE_IDENTIFIER_LENGTH",{enumerable:!0,get:function(){return tg.FILE_IDENTIFIER_LENGTH}});var Kg=G9();Object.defineProperty(MR,"SIZE_PREFIX_LENGTH",{enumerable:!0,get:function(){return Kg.SIZE_PREFIX_LENGTH}});var OC=cD();Object.defineProperty(MR,"int32",{enumerable:!0,get:function(){return OC.int32}});Object.defineProperty(MR,"float32",{enumerable:!0,get:function(){return OC.float32}});Object.defineProperty(MR,"float64",{enumerable:!0,get:function(){return OC.float64}});Object.defineProperty(MR,"isLittleEndian",{enumerable:!0,get:function(){return OC.isLittleEndian}});var bg=oD();Object.defineProperty(MR,"Encoding",{enumerable:!0,get:function(){return bg.Encoding}});var ng=j7();Object.defineProperty(MR,"Builder",{enumerable:!0,get:function(){return ng.Builder}});var Eg=ID();Object.defineProperty(MR,"ByteBuffer",{enumerable:!0,get:function(){return Eg.ByteBuffer}})});var U7=a((Z7)=>{Object.defineProperty(Z7,"__esModule",{value:!0});Z7.BodyCompressionMethod=void 0;var u7;(function(R){R[R.BUFFER=0]="BUFFER"})(u7||(Z7.BodyCompressionMethod=u7={}))});var M7=a((f7)=>{Object.defineProperty(f7,"__esModule",{value:!0});f7.CompressionType=void 0;var Q7;(function(R){R[R.LZ4_FRAME=0]="LZ4_FRAME",R[R.ZSTD=1]="ZSTD"})(Q7||(f7.CompressionType=Q7={}))});var Rq=a((m7)=>{Object.defineProperty(m7,"__esModule",{value:!0});m7.BodyCompression=void 0;var pg=f(),v7=U7(),V7=M7();class A9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsBodyCompression(R,T){return(T||new A9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsBodyCompression(R,T){return R.setPosition(R.position()+pg.SIZE_PREFIX_LENGTH),(T||new A9).__init(R.readInt32(R.position())+R.position(),R)}codec(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt8(this.bb_pos+R):V7.CompressionType.LZ4_FRAME}method(){let R=this.bb.__offset(this.bb_pos,6);return R?this.bb.readInt8(this.bb_pos+R):v7.BodyCompressionMethod.BUFFER}static startBodyCompression(R){R.startObject(2)}static addCodec(R,T){R.addFieldInt8(0,T,V7.CompressionType.LZ4_FRAME)}static addMethod(R,T){R.addFieldInt8(1,T,v7.BodyCompressionMethod.BUFFER)}static endBodyCompression(R){return R.endObject()}static createBodyCompression(R,T,A){return A9.startBodyCompression(R),A9.addCodec(R,T),A9.addMethod(R,A),A9.endBodyCompression(R)}}m7.BodyCompression=A9});var h9=a((Aq)=>{Object.defineProperty(Aq,"__esModule",{value:!0});Aq.Buffer=void 0;class Tq{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(R,T,A){return R.prep(8,16),R.writeInt64(BigInt(A!==null&&A!==void 0?A:0)),R.writeInt64(BigInt(T!==null&&T!==void 0?T:0)),R.offset()}}Aq.Buffer=Tq});var SD=a((Bq)=>{Object.defineProperty(Bq,"__esModule",{value:!0});Bq.FieldNode=void 0;class Cq{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(R,T,A){return R.prep(8,16),R.writeInt64(BigInt(A!==null&&A!==void 0?A:0)),R.writeInt64(BigInt(T!==null&&T!==void 0?T:0)),R.offset()}}Bq.FieldNode=Cq});var iC=a((_q)=>{Object.defineProperty(_q,"__esModule",{value:!0});_q.RecordBatch=void 0;var rg=f(),Xg=Rq(),Gg=h9(),xg=SD();class HC{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsRecordBatch(R,T){return(T||new HC).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsRecordBatch(R,T){return R.setPosition(R.position()+rg.SIZE_PREFIX_LENGTH),(T||new HC).__init(R.readInt32(R.position())+R.position(),R)}length(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt64(this.bb_pos+R):BigInt("0")}nodes(R,T){let A=this.bb.__offset(this.bb_pos,6);return A?(T||new xg.FieldNode).__init(this.bb.__vector(this.bb_pos+A)+R*16,this.bb):null}nodesLength(){let R=this.bb.__offset(this.bb_pos,6);return R?this.bb.__vector_len(this.bb_pos+R):0}buffers(R,T){let A=this.bb.__offset(this.bb_pos,8);return A?(T||new Gg.Buffer).__init(this.bb.__vector(this.bb_pos+A)+R*16,this.bb):null}buffersLength(){let R=this.bb.__offset(this.bb_pos,8);return R?this.bb.__vector_len(this.bb_pos+R):0}compression(R){let T=this.bb.__offset(this.bb_pos,10);return T?(R||new Xg.BodyCompression).__init(this.bb.__indirect(this.bb_pos+T),this.bb):null}static startRecordBatch(R){R.startObject(4)}static addLength(R,T){R.addFieldInt64(0,T,BigInt("0"))}static addNodes(R,T){R.addFieldOffset(1,T,0)}static startNodesVector(R,T){R.startVector(16,T,8)}static addBuffers(R,T){R.addFieldOffset(2,T,0)}static startBuffersVector(R,T){R.startVector(16,T,8)}static addCompression(R,T){R.addFieldOffset(3,T,0)}static endRecordBatch(R){return R.endObject()}}_q.RecordBatch=HC});var yD=a((Hq)=>{Object.defineProperty(Hq,"__esModule",{value:!0});Hq.DictionaryBatch=void 0;var Fg=f(),eg=iC();class qC{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsDictionaryBatch(R,T){return(T||new qC).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsDictionaryBatch(R,T){return R.setPosition(R.position()+Fg.SIZE_PREFIX_LENGTH),(T||new qC).__init(R.readInt32(R.position())+R.position(),R)}id(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt64(this.bb_pos+R):BigInt("0")}data(R){let T=this.bb.__offset(this.bb_pos,6);return T?(R||new eg.RecordBatch).__init(this.bb.__indirect(this.bb_pos+T),this.bb):null}isDelta(){let R=this.bb.__offset(this.bb_pos,8);return R?!!this.bb.readInt8(this.bb_pos+R):!1}static startDictionaryBatch(R){R.startObject(3)}static addId(R,T){R.addFieldInt64(0,T,BigInt("0"))}static addData(R,T){R.addFieldOffset(1,T,0)}static addIsDelta(R,T){R.addFieldInt8(2,+T,0)}static endDictionaryBatch(R){return R.endObject()}}Hq.DictionaryBatch=qC});var gD=a((aq)=>{Object.defineProperty(aq,"__esModule",{value:!0});aq.Endianness=void 0;var qq;(function(R){R[R.Little=0]="Little",R[R.Big=1]="Big"})(qq||(aq.Endianness=qq={}))});var oq=a((Nq)=>{Object.defineProperty(Nq,"__esModule",{value:!0});Nq.DictionaryKind=void 0;var Wq;(function(R){R[R.DenseArray=0]="DenseArray"})(Wq||(Nq.DictionaryKind=Wq={}))});var B9=a((Jq)=>{Object.defineProperty(Jq,"__esModule",{value:!0});Jq.Int=void 0;var lg=f();class C9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsInt(R,T){return(T||new C9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsInt(R,T){return R.setPosition(R.position()+lg.SIZE_PREFIX_LENGTH),(T||new C9).__init(R.readInt32(R.position())+R.position(),R)}bitWidth(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt32(this.bb_pos+R):0}isSigned(){let R=this.bb.__offset(this.bb_pos,6);return R?!!this.bb.readInt8(this.bb_pos+R):!1}static startInt(R){R.startObject(2)}static addBitWidth(R,T){R.addFieldInt32(0,T,0)}static addIsSigned(R,T){R.addFieldInt8(1,+T,0)}static endInt(R){return R.endObject()}static createInt(R,T,A){return C9.startInt(R),C9.addBitWidth(R,T),C9.addIsSigned(R,A),C9.endInt(R)}}Jq.Int=C9});var sD=a((Sq)=>{Object.defineProperty(Sq,"__esModule",{value:!0});Sq.DictionaryEncoding=void 0;var dg=f(),kq=oq(),jg=B9();class aC{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsDictionaryEncoding(R,T){return(T||new aC).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsDictionaryEncoding(R,T){return R.setPosition(R.position()+dg.SIZE_PREFIX_LENGTH),(T||new aC).__init(R.readInt32(R.position())+R.position(),R)}id(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt64(this.bb_pos+R):BigInt("0")}indexType(R){let T=this.bb.__offset(this.bb_pos,6);return T?(R||new jg.Int).__init(this.bb.__indirect(this.bb_pos+T),this.bb):null}isOrdered(){let R=this.bb.__offset(this.bb_pos,8);return R?!!this.bb.readInt8(this.bb_pos+R):!1}dictionaryKind(){let R=this.bb.__offset(this.bb_pos,10);return R?this.bb.readInt16(this.bb_pos+R):kq.DictionaryKind.DenseArray}static startDictionaryEncoding(R){R.startObject(4)}static addId(R,T){R.addFieldInt64(0,T,BigInt("0"))}static addIndexType(R,T){R.addFieldOffset(1,T,0)}static addIsOrdered(R,T){R.addFieldInt8(2,+T,0)}static addDictionaryKind(R,T){R.addFieldInt16(3,T,kq.DictionaryKind.DenseArray)}static endDictionaryEncoding(R){return R.endObject()}}Sq.DictionaryEncoding=aC});var SA=a((gq)=>{Object.defineProperty(gq,"__esModule",{value:!0});gq.KeyValue=void 0;var ug=f();class D9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsKeyValue(R,T){return(T||new D9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsKeyValue(R,T){return R.setPosition(R.position()+ug.SIZE_PREFIX_LENGTH),(T||new D9).__init(R.readInt32(R.position())+R.position(),R)}key(R){let T=this.bb.__offset(this.bb_pos,4);return T?this.bb.__string(this.bb_pos+T,R):null}value(R){let T=this.bb.__offset(this.bb_pos,6);return T?this.bb.__string(this.bb_pos+T,R):null}static startKeyValue(R){R.startObject(2)}static addKey(R,T){R.addFieldOffset(0,T,0)}static addValue(R,T){R.addFieldOffset(1,T,0)}static endKeyValue(R){return R.endObject()}static createKeyValue(R,T,A){return D9.startKeyValue(R),D9.addKey(R,T),D9.addValue(R,A),D9.endKeyValue(R)}}gq.KeyValue=D9});var PD=a((Pq)=>{Object.defineProperty(Pq,"__esModule",{value:!0});Pq.Binary=void 0;var Zg=f();class yA{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsBinary(R,T){return(T||new yA).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsBinary(R,T){return R.setPosition(R.position()+Zg.SIZE_PREFIX_LENGTH),(T||new yA).__init(R.readInt32(R.position())+R.position(),R)}static startBinary(R){R.startObject(0)}static endBinary(R){return R.endObject()}static createBinary(R){return yA.startBinary(R),yA.endBinary(R)}}Pq.Binary=yA});var tD=a((Kq)=>{Object.defineProperty(Kq,"__esModule",{value:!0});Kq.Bool=void 0;var wg=f();class gA{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsBool(R,T){return(T||new gA).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsBool(R,T){return R.setPosition(R.position()+wg.SIZE_PREFIX_LENGTH),(T||new gA).__init(R.readInt32(R.position())+R.position(),R)}static startBool(R){R.startObject(0)}static endBool(R){return R.endObject()}static createBool(R){return gA.startBool(R),gA.endBool(R)}}Kq.Bool=gA});var LC=a((Eq)=>{Object.defineProperty(Eq,"__esModule",{value:!0});Eq.Date=void 0;var Ug=f(),nq=LD();class x9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsDate(R,T){return(T||new x9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsDate(R,T){return R.setPosition(R.position()+Ug.SIZE_PREFIX_LENGTH),(T||new x9).__init(R.readInt32(R.position())+R.position(),R)}unit(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt16(this.bb_pos+R):nq.DateUnit.MILLISECOND}static startDate(R){R.startObject(1)}static addUnit(R,T){R.addFieldInt16(0,T,nq.DateUnit.MILLISECOND)}static endDate(R){return R.endObject()}static createDate(R,T){return x9.startDate(R),x9.addUnit(R,T),x9.endDate(R)}}Eq.Date=x9});var WC=a((pq)=>{Object.defineProperty(pq,"__esModule",{value:!0});pq.Decimal=void 0;var Qg=f();class uT{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsDecimal(R,T){return(T||new uT).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsDecimal(R,T){return R.setPosition(R.position()+Qg.SIZE_PREFIX_LENGTH),(T||new uT).__init(R.readInt32(R.position())+R.position(),R)}precision(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt32(this.bb_pos+R):0}scale(){let R=this.bb.__offset(this.bb_pos,6);return R?this.bb.readInt32(this.bb_pos+R):0}bitWidth(){let R=this.bb.__offset(this.bb_pos,8);return R?this.bb.readInt32(this.bb_pos+R):128}static startDecimal(R){R.startObject(3)}static addPrecision(R,T){R.addFieldInt32(0,T,0)}static addScale(R,T){R.addFieldInt32(1,T,0)}static addBitWidth(R,T){R.addFieldInt32(2,T,128)}static endDecimal(R){return R.endObject()}static createDecimal(R,T,A,h){return uT.startDecimal(R),uT.addPrecision(R,T),uT.addScale(R,A),uT.addBitWidth(R,h),uT.endDecimal(R)}}pq.Decimal=uT});var NC=a((Gq)=>{Object.defineProperty(Gq,"__esModule",{value:!0});Gq.Duration=void 0;var fg=f(),Xq=Hh();class F9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsDuration(R,T){return(T||new F9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsDuration(R,T){return R.setPosition(R.position()+fg.SIZE_PREFIX_LENGTH),(T||new F9).__init(R.readInt32(R.position())+R.position(),R)}unit(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt16(this.bb_pos+R):Xq.TimeUnit.MILLISECOND}static startDuration(R){R.startObject(1)}static addUnit(R,T){R.addFieldInt16(0,T,Xq.TimeUnit.MILLISECOND)}static endDuration(R){return R.endObject()}static createDuration(R,T){return F9.startDuration(R),F9.addUnit(R,T),F9.endDuration(R)}}Gq.Duration=F9});var cC=a((Fq)=>{Object.defineProperty(Fq,"__esModule",{value:!0});Fq.FixedSizeBinary=void 0;var zg=f();class e9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsFixedSizeBinary(R,T){return(T||new e9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsFixedSizeBinary(R,T){return R.setPosition(R.position()+zg.SIZE_PREFIX_LENGTH),(T||new e9).__init(R.readInt32(R.position())+R.position(),R)}byteWidth(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt32(this.bb_pos+R):0}static startFixedSizeBinary(R){R.startObject(1)}static addByteWidth(R,T){R.addFieldInt32(0,T,0)}static endFixedSizeBinary(R){return R.endObject()}static createFixedSizeBinary(R,T){return e9.startFixedSizeBinary(R),e9.addByteWidth(R,T),e9.endFixedSizeBinary(R)}}Fq.FixedSizeBinary=e9});var oC=a((lq)=>{Object.defineProperty(lq,"__esModule",{value:!0});lq.FixedSizeList=void 0;var Mg=f();class l9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsFixedSizeList(R,T){return(T||new l9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsFixedSizeList(R,T){return R.setPosition(R.position()+Mg.SIZE_PREFIX_LENGTH),(T||new l9).__init(R.readInt32(R.position())+R.position(),R)}listSize(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt32(this.bb_pos+R):0}static startFixedSizeList(R){R.startObject(1)}static addListSize(R,T){R.addFieldInt32(0,T,0)}static endFixedSizeList(R){return R.endObject()}static createFixedSizeList(R,T){return l9.startFixedSizeList(R),l9.addListSize(R,T),l9.endFixedSizeList(R)}}lq.FixedSizeList=l9});var JC=a((uq)=>{Object.defineProperty(uq,"__esModule",{value:!0});uq.FloatingPoint=void 0;var vg=f(),jq=aD();class d9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsFloatingPoint(R,T){return(T||new d9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsFloatingPoint(R,T){return R.setPosition(R.position()+vg.SIZE_PREFIX_LENGTH),(T||new d9).__init(R.readInt32(R.position())+R.position(),R)}precision(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt16(this.bb_pos+R):jq.Precision.HALF}static startFloatingPoint(R){R.startObject(1)}static addPrecision(R,T){R.addFieldInt16(0,T,jq.Precision.HALF)}static endFloatingPoint(R){return R.endObject()}static createFloatingPoint(R,T){return d9.startFloatingPoint(R),d9.addPrecision(R,T),d9.endFloatingPoint(R)}}uq.FloatingPoint=d9});var IC=a((Uq)=>{Object.defineProperty(Uq,"__esModule",{value:!0});Uq.Interval=void 0;var Vg=f(),wq=WD();class j9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsInterval(R,T){return(T||new j9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsInterval(R,T){return R.setPosition(R.position()+Vg.SIZE_PREFIX_LENGTH),(T||new j9).__init(R.readInt32(R.position())+R.position(),R)}unit(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt16(this.bb_pos+R):wq.IntervalUnit.YEAR_MONTH}static startInterval(R){R.startObject(1)}static addUnit(R,T){R.addFieldInt16(0,T,wq.IntervalUnit.YEAR_MONTH)}static endInterval(R){return R.endObject()}static createInterval(R,T){return j9.startInterval(R),j9.addUnit(R,T),j9.endInterval(R)}}Uq.Interval=j9});var KD=a((fq)=>{Object.defineProperty(fq,"__esModule",{value:!0});fq.LargeBinary=void 0;var mg=f();class sA{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsLargeBinary(R,T){return(T||new sA).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsLargeBinary(R,T){return R.setPosition(R.position()+mg.SIZE_PREFIX_LENGTH),(T||new sA).__init(R.readInt32(R.position())+R.position(),R)}static startLargeBinary(R){R.startObject(0)}static endLargeBinary(R){return R.endObject()}static createLargeBinary(R){return sA.startLargeBinary(R),sA.endLargeBinary(R)}}fq.LargeBinary=sA});var Vq=a((Mq)=>{Object.defineProperty(Mq,"__esModule",{value:!0});Mq.LargeList=void 0;var Yg=f();class PA{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsLargeList(R,T){return(T||new PA).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsLargeList(R,T){return R.setPosition(R.position()+Yg.SIZE_PREFIX_LENGTH),(T||new PA).__init(R.readInt32(R.position())+R.position(),R)}static startLargeList(R){R.startObject(0)}static endLargeList(R){return R.endObject()}static createLargeList(R){return PA.startLargeList(R),PA.endLargeList(R)}}Mq.LargeList=PA});var bD=a((mq)=>{Object.defineProperty(mq,"__esModule",{value:!0});mq.LargeUtf8=void 0;var R4=f();class tA{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsLargeUtf8(R,T){return(T||new tA).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsLargeUtf8(R,T){return R.setPosition(R.position()+R4.SIZE_PREFIX_LENGTH),(T||new tA).__init(R.readInt32(R.position())+R.position(),R)}static startLargeUtf8(R){R.startObject(0)}static endLargeUtf8(R){return R.endObject()}static createLargeUtf8(R){return tA.startLargeUtf8(R),tA.endLargeUtf8(R)}}mq.LargeUtf8=tA});var nD=a((Ra)=>{Object.defineProperty(Ra,"__esModule",{value:!0});Ra.List=void 0;var T4=f();class KA{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsList(R,T){return(T||new KA).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsList(R,T){return R.setPosition(R.position()+T4.SIZE_PREFIX_LENGTH),(T||new KA).__init(R.readInt32(R.position())+R.position(),R)}static startList(R){R.startObject(0)}static endList(R){return R.endObject()}static createList(R){return KA.startList(R),KA.endList(R)}}Ra.List=KA});var kC=a((Aa)=>{Object.defineProperty(Aa,"__esModule",{value:!0});Aa.Map=void 0;var A4=f();class u9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsMap(R,T){return(T||new u9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsMap(R,T){return R.setPosition(R.position()+A4.SIZE_PREFIX_LENGTH),(T||new u9).__init(R.readInt32(R.position())+R.position(),R)}keysSorted(){let R=this.bb.__offset(this.bb_pos,4);return R?!!this.bb.readInt8(this.bb_pos+R):!1}static startMap(R){R.startObject(1)}static addKeysSorted(R,T){R.addFieldInt8(0,+T,0)}static endMap(R){return R.endObject()}static createMap(R,T){return u9.startMap(R),u9.addKeysSorted(R,T),u9.endMap(R)}}Aa.Map=u9});var ED=a((Ca)=>{Object.defineProperty(Ca,"__esModule",{value:!0});Ca.Null=void 0;var h4=f();class bA{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsNull(R,T){return(T||new bA).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsNull(R,T){return R.setPosition(R.position()+h4.SIZE_PREFIX_LENGTH),(T||new bA).__init(R.readInt32(R.position())+R.position(),R)}static startNull(R){R.startObject(0)}static endNull(R){return R.endObject()}static createNull(R){return bA.startNull(R),bA.endNull(R)}}Ca.Null=bA});var Oa=a((Da)=>{Object.defineProperty(Da,"__esModule",{value:!0});Da.RunEndEncoded=void 0;var C4=f();class nA{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsRunEndEncoded(R,T){return(T||new nA).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsRunEndEncoded(R,T){return R.setPosition(R.position()+C4.SIZE_PREFIX_LENGTH),(T||new nA).__init(R.readInt32(R.position())+R.position(),R)}static startRunEndEncoded(R){R.startObject(0)}static endRunEndEncoded(R){return R.endObject()}static createRunEndEncoded(R){return nA.startRunEndEncoded(R),nA.endRunEndEncoded(R)}}Da.RunEndEncoded=nA});var $D=a((Ha)=>{Object.defineProperty(Ha,"__esModule",{value:!0});Ha.Struct_=void 0;var B4=f();class EA{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsStruct_(R,T){return(T||new EA).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsStruct_(R,T){return R.setPosition(R.position()+B4.SIZE_PREFIX_LENGTH),(T||new EA).__init(R.readInt32(R.position())+R.position(),R)}static startStruct_(R){R.startObject(0)}static endStruct_(R){return R.endObject()}static createStruct_(R){return EA.startStruct_(R),EA.endStruct_(R)}}Ha.Struct_=EA});var SC=a((aa)=>{Object.defineProperty(aa,"__esModule",{value:!0});aa.Time=void 0;var D4=f(),qa=Hh();class _9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsTime(R,T){return(T||new _9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsTime(R,T){return R.setPosition(R.position()+D4.SIZE_PREFIX_LENGTH),(T||new _9).__init(R.readInt32(R.position())+R.position(),R)}unit(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt16(this.bb_pos+R):qa.TimeUnit.MILLISECOND}bitWidth(){let R=this.bb.__offset(this.bb_pos,6);return R?this.bb.readInt32(this.bb_pos+R):32}static startTime(R){R.startObject(2)}static addUnit(R,T){R.addFieldInt16(0,T,qa.TimeUnit.MILLISECOND)}static addBitWidth(R,T){R.addFieldInt32(1,T,32)}static endTime(R){return R.endObject()}static createTime(R,T,A){return _9.startTime(R),_9.addUnit(R,T),_9.addBitWidth(R,A),_9.endTime(R)}}aa.Time=_9});var yC=a((Na)=>{Object.defineProperty(Na,"__esModule",{value:!0});Na.Timestamp=void 0;var _4=f(),Wa=Hh();class O9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsTimestamp(R,T){return(T||new O9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsTimestamp(R,T){return R.setPosition(R.position()+_4.SIZE_PREFIX_LENGTH),(T||new O9).__init(R.readInt32(R.position())+R.position(),R)}unit(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt16(this.bb_pos+R):Wa.TimeUnit.SECOND}timezone(R){let T=this.bb.__offset(this.bb_pos,6);return T?this.bb.__string(this.bb_pos+T,R):null}static startTimestamp(R){R.startObject(2)}static addUnit(R,T){R.addFieldInt16(0,T,Wa.TimeUnit.SECOND)}static addTimezone(R,T){R.addFieldOffset(1,T,0)}static endTimestamp(R){return R.endObject()}static createTimestamp(R,T,A){return O9.startTimestamp(R),O9.addUnit(R,T),O9.addTimezone(R,A),O9.endTimestamp(R)}}Na.Timestamp=O9});var gC=a((Ja)=>{Object.defineProperty(Ja,"__esModule",{value:!0});Ja.Union=void 0;var O4=f(),oa=qD();class H9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsUnion(R,T){return(T||new H9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsUnion(R,T){return R.setPosition(R.position()+O4.SIZE_PREFIX_LENGTH),(T||new H9).__init(R.readInt32(R.position())+R.position(),R)}mode(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt16(this.bb_pos+R):oa.UnionMode.Sparse}typeIds(R){let T=this.bb.__offset(this.bb_pos,6);return T?this.bb.readInt32(this.bb.__vector(this.bb_pos+T)+R*4):0}typeIdsLength(){let R=this.bb.__offset(this.bb_pos,6);return R?this.bb.__vector_len(this.bb_pos+R):0}typeIdsArray(){let R=this.bb.__offset(this.bb_pos,6);return R?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+R),this.bb.__vector_len(this.bb_pos+R)):null}static startUnion(R){R.startObject(2)}static addMode(R,T){R.addFieldInt16(0,T,oa.UnionMode.Sparse)}static addTypeIds(R,T){R.addFieldOffset(1,T,0)}static createTypeIdsVector(R,T){R.startVector(4,T.length,4);for(let A=T.length-1;A>=0;A--)R.addInt32(T[A]);return R.endVector()}static startTypeIdsVector(R,T){R.startVector(4,T,4)}static endUnion(R){return R.endObject()}static createUnion(R,T,A){return H9.startUnion(R),H9.addMode(R,T),H9.addTypeIds(R,A),H9.endUnion(R)}}Ja.Union=H9});var pD=a((ka)=>{Object.defineProperty(ka,"__esModule",{value:!0});ka.Utf8=void 0;var H4=f();class $A{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsUtf8(R,T){return(T||new $A).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsUtf8(R,T){return R.setPosition(R.position()+H4.SIZE_PREFIX_LENGTH),(T||new $A).__init(R.readInt32(R.position())+R.position(),R)}static startUtf8(R){R.startObject(0)}static endUtf8(R){return R.endObject()}static createUtf8(R){return $A.startUtf8(R),$A.endUtf8(R)}}ka.Utf8=$A});var pA=a((wa)=>{Object.defineProperty(wa,"__esModule",{value:!0});wa.unionListToType=wa.unionToType=wa.Type=void 0;var ya=PD(),ga=tD(),sa=LC(),Pa=WC(),ta=NC(),Ka=cC(),ba=oC(),na=JC(),Ea=B9(),$a=IC(),pa=KD(),ra=Vq(),Xa=bD(),Ga=nD(),xa=kC(),Fa=ED(),ea=Oa(),la=$D(),da=SC(),ja=yC(),ua=gC(),Za=pD(),sC;(function(R){R[R.NONE=0]="NONE",R[R.Null=1]="Null",R[R.Int=2]="Int",R[R.FloatingPoint=3]="FloatingPoint",R[R.Binary=4]="Binary",R[R.Utf8=5]="Utf8",R[R.Bool=6]="Bool",R[R.Decimal=7]="Decimal",R[R.Date=8]="Date",R[R.Time=9]="Time",R[R.Timestamp=10]="Timestamp",R[R.Interval=11]="Interval",R[R.List=12]="List",R[R.Struct_=13]="Struct_",R[R.Union=14]="Union",R[R.FixedSizeBinary=15]="FixedSizeBinary",R[R.FixedSizeList=16]="FixedSizeList",R[R.Map=17]="Map",R[R.Duration=18]="Duration",R[R.LargeBinary=19]="LargeBinary",R[R.LargeUtf8=20]="LargeUtf8",R[R.LargeList=21]="LargeList",R[R.RunEndEncoded=22]="RunEndEncoded"})(sC||(wa.Type=sC={}));function i4(R,T){switch(sC[R]){case"NONE":return null;case"Null":return T(new Fa.Null);case"Int":return T(new Ea.Int);case"FloatingPoint":return T(new na.FloatingPoint);case"Binary":return T(new ya.Binary);case"Utf8":return T(new Za.Utf8);case"Bool":return T(new ga.Bool);case"Decimal":return T(new Pa.Decimal);case"Date":return T(new sa.Date);case"Time":return T(new da.Time);case"Timestamp":return T(new ja.Timestamp);case"Interval":return T(new $a.Interval);case"List":return T(new Ga.List);case"Struct_":return T(new la.Struct_);case"Union":return T(new ua.Union);case"FixedSizeBinary":return T(new Ka.FixedSizeBinary);case"FixedSizeList":return T(new ba.FixedSizeList);case"Map":return T(new xa.Map);case"Duration":return T(new ta.Duration);case"LargeBinary":return T(new pa.LargeBinary);case"LargeUtf8":return T(new Xa.LargeUtf8);case"LargeList":return T(new ra.LargeList);case"RunEndEncoded":return T(new ea.RunEndEncoded);default:return null}}wa.unionToType=i4;function q4(R,T,A){switch(sC[R]){case"NONE":return null;case"Null":return T(A,new Fa.Null);case"Int":return T(A,new Ea.Int);case"FloatingPoint":return T(A,new na.FloatingPoint);case"Binary":return T(A,new ya.Binary);case"Utf8":return T(A,new Za.Utf8);case"Bool":return T(A,new ga.Bool);case"Decimal":return T(A,new Pa.Decimal);case"Date":return T(A,new sa.Date);case"Time":return T(A,new da.Time);case"Timestamp":return T(A,new ja.Timestamp);case"Interval":return T(A,new $a.Interval);case"List":return T(A,new Ga.List);case"Struct_":return T(A,new la.Struct_);case"Union":return T(A,new ua.Union);case"FixedSizeBinary":return T(A,new Ka.FixedSizeBinary);case"FixedSizeList":return T(A,new ba.FixedSizeList);case"Map":return T(A,new xa.Map);case"Duration":return T(A,new ta.Duration);case"LargeBinary":return T(A,new pa.LargeBinary);case"LargeUtf8":return T(A,new Xa.LargeUtf8);case"LargeList":return T(A,new ra.LargeList);case"RunEndEncoded":return T(A,new ea.RunEndEncoded);default:return null}}wa.unionListToType=q4});var rD=a((fa)=>{Object.defineProperty(fa,"__esModule",{value:!0});fa.Field=void 0;var W4=f(),N4=sD(),c4=SA(),Qa=pA();class ih{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsField(R,T){return(T||new ih).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsField(R,T){return R.setPosition(R.position()+W4.SIZE_PREFIX_LENGTH),(T||new ih).__init(R.readInt32(R.position())+R.position(),R)}name(R){let T=this.bb.__offset(this.bb_pos,4);return T?this.bb.__string(this.bb_pos+T,R):null}nullable(){let R=this.bb.__offset(this.bb_pos,6);return R?!!this.bb.readInt8(this.bb_pos+R):!1}typeType(){let R=this.bb.__offset(this.bb_pos,8);return R?this.bb.readUint8(this.bb_pos+R):Qa.Type.NONE}type(R){let T=this.bb.__offset(this.bb_pos,10);return T?this.bb.__union(R,this.bb_pos+T):null}dictionary(R){let T=this.bb.__offset(this.bb_pos,12);return T?(R||new N4.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+T),this.bb):null}children(R,T){let A=this.bb.__offset(this.bb_pos,14);return A?(T||new ih).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+A)+R*4),this.bb):null}childrenLength(){let R=this.bb.__offset(this.bb_pos,14);return R?this.bb.__vector_len(this.bb_pos+R):0}customMetadata(R,T){let A=this.bb.__offset(this.bb_pos,16);return A?(T||new c4.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+A)+R*4),this.bb):null}customMetadataLength(){let R=this.bb.__offset(this.bb_pos,16);return R?this.bb.__vector_len(this.bb_pos+R):0}static startField(R){R.startObject(7)}static addName(R,T){R.addFieldOffset(0,T,0)}static addNullable(R,T){R.addFieldInt8(1,+T,0)}static addTypeType(R,T){R.addFieldInt8(2,T,Qa.Type.NONE)}static addType(R,T){R.addFieldOffset(3,T,0)}static addDictionary(R,T){R.addFieldOffset(4,T,0)}static addChildren(R,T){R.addFieldOffset(5,T,0)}static createChildrenVector(R,T){R.startVector(4,T.length,4);for(let A=T.length-1;A>=0;A--)R.addOffset(T[A]);return R.endVector()}static startChildrenVector(R,T){R.startVector(4,T,4)}static addCustomMetadata(R,T){R.addFieldOffset(6,T,0)}static createCustomMetadataVector(R,T){R.startVector(4,T.length,4);for(let A=T.length-1;A>=0;A--)R.addOffset(T[A]);return R.endVector()}static startCustomMetadataVector(R,T){R.startVector(4,T,4)}static endField(R){return R.endObject()}}fa.Field=ih});var PC=a((va)=>{Object.defineProperty(va,"__esModule",{value:!0});va.Schema=void 0;var o4=f(),Ma=gD(),J4=rD(),I4=SA();class PT{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsSchema(R,T){return(T||new PT).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsSchema(R,T){return R.setPosition(R.position()+o4.SIZE_PREFIX_LENGTH),(T||new PT).__init(R.readInt32(R.position())+R.position(),R)}endianness(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt16(this.bb_pos+R):Ma.Endianness.Little}fields(R,T){let A=this.bb.__offset(this.bb_pos,6);return A?(T||new J4.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+A)+R*4),this.bb):null}fieldsLength(){let R=this.bb.__offset(this.bb_pos,6);return R?this.bb.__vector_len(this.bb_pos+R):0}customMetadata(R,T){let A=this.bb.__offset(this.bb_pos,8);return A?(T||new I4.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+A)+R*4),this.bb):null}customMetadataLength(){let R=this.bb.__offset(this.bb_pos,8);return R?this.bb.__vector_len(this.bb_pos+R):0}features(R){let T=this.bb.__offset(this.bb_pos,10);return T?this.bb.readInt64(this.bb.__vector(this.bb_pos+T)+R*8):BigInt(0)}featuresLength(){let R=this.bb.__offset(this.bb_pos,10);return R?this.bb.__vector_len(this.bb_pos+R):0}static startSchema(R){R.startObject(4)}static addEndianness(R,T){R.addFieldInt16(0,T,Ma.Endianness.Little)}static addFields(R,T){R.addFieldOffset(1,T,0)}static createFieldsVector(R,T){R.startVector(4,T.length,4);for(let A=T.length-1;A>=0;A--)R.addOffset(T[A]);return R.endVector()}static startFieldsVector(R,T){R.startVector(4,T,4)}static addCustomMetadata(R,T){R.addFieldOffset(2,T,0)}static createCustomMetadataVector(R,T){R.startVector(4,T.length,4);for(let A=T.length-1;A>=0;A--)R.addOffset(T[A]);return R.endVector()}static startCustomMetadataVector(R,T){R.startVector(4,T,4)}static addFeatures(R,T){R.addFieldOffset(3,T,0)}static createFeaturesVector(R,T){R.startVector(8,T.length,8);for(let A=T.length-1;A>=0;A--)R.addInt64(T[A]);return R.endVector()}static startFeaturesVector(R,T){R.startVector(8,T,8)}static endSchema(R){return R.endObject()}static finishSchemaBuffer(R,T){R.finish(T)}static finishSizePrefixedSchemaBuffer(R,T){R.finish(T,void 0,!0)}static createSchema(R,T,A,h,C){return PT.startSchema(R),PT.addEndianness(R,T),PT.addFields(R,A),PT.addCustomMetadata(R,h),PT.addFeatures(R,C),PT.endSchema(R)}}va.Schema=PT});var TL=a((Ya)=>{Object.defineProperty(Ya,"__esModule",{value:!0});Ya.SparseMatrixCompressedAxis=void 0;var ma;(function(R){R[R.Row=0]="Row",R[R.Column=1]="Column"})(ma||(Ya.SparseMatrixCompressedAxis=ma={}))});var _L=a((BL)=>{Object.defineProperty(BL,"__esModule",{value:!0});BL.SparseMatrixIndexCSX=void 0;var k4=f(),AL=h9(),hL=B9(),CL=TL();class tC{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsSparseMatrixIndexCSX(R,T){return(T||new tC).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsSparseMatrixIndexCSX(R,T){return R.setPosition(R.position()+k4.SIZE_PREFIX_LENGTH),(T||new tC).__init(R.readInt32(R.position())+R.position(),R)}compressedAxis(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt16(this.bb_pos+R):CL.SparseMatrixCompressedAxis.Row}indptrType(R){let T=this.bb.__offset(this.bb_pos,6);return T?(R||new hL.Int).__init(this.bb.__indirect(this.bb_pos+T),this.bb):null}indptrBuffer(R){let T=this.bb.__offset(this.bb_pos,8);return T?(R||new AL.Buffer).__init(this.bb_pos+T,this.bb):null}indicesType(R){let T=this.bb.__offset(this.bb_pos,10);return T?(R||new hL.Int).__init(this.bb.__indirect(this.bb_pos+T),this.bb):null}indicesBuffer(R){let T=this.bb.__offset(this.bb_pos,12);return T?(R||new AL.Buffer).__init(this.bb_pos+T,this.bb):null}static startSparseMatrixIndexCSX(R){R.startObject(5)}static addCompressedAxis(R,T){R.addFieldInt16(0,T,CL.SparseMatrixCompressedAxis.Row)}static addIndptrType(R,T){R.addFieldOffset(1,T,0)}static addIndptrBuffer(R,T){R.addFieldStruct(2,T,0)}static addIndicesType(R,T){R.addFieldOffset(3,T,0)}static addIndicesBuffer(R,T){R.addFieldStruct(4,T,0)}static endSparseMatrixIndexCSX(R){let T=R.endObject();return R.requiredField(T,6),R.requiredField(T,8),R.requiredField(T,10),R.requiredField(T,12),T}}BL.SparseMatrixIndexCSX=tC});var iL=a((OL)=>{Object.defineProperty(OL,"__esModule",{value:!0});OL.SparseTensorIndexCOO=void 0;var S4=f(),y4=h9(),g4=B9();class KC{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsSparseTensorIndexCOO(R,T){return(T||new KC).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsSparseTensorIndexCOO(R,T){return R.setPosition(R.position()+S4.SIZE_PREFIX_LENGTH),(T||new KC).__init(R.readInt32(R.position())+R.position(),R)}indicesType(R){let T=this.bb.__offset(this.bb_pos,4);return T?(R||new g4.Int).__init(this.bb.__indirect(this.bb_pos+T),this.bb):null}indicesStrides(R){let T=this.bb.__offset(this.bb_pos,6);return T?this.bb.readInt64(this.bb.__vector(this.bb_pos+T)+R*8):BigInt(0)}indicesStridesLength(){let R=this.bb.__offset(this.bb_pos,6);return R?this.bb.__vector_len(this.bb_pos+R):0}indicesBuffer(R){let T=this.bb.__offset(this.bb_pos,8);return T?(R||new y4.Buffer).__init(this.bb_pos+T,this.bb):null}isCanonical(){let R=this.bb.__offset(this.bb_pos,10);return R?!!this.bb.readInt8(this.bb_pos+R):!1}static startSparseTensorIndexCOO(R){R.startObject(4)}static addIndicesType(R,T){R.addFieldOffset(0,T,0)}static addIndicesStrides(R,T){R.addFieldOffset(1,T,0)}static createIndicesStridesVector(R,T){R.startVector(8,T.length,8);for(let A=T.length-1;A>=0;A--)R.addInt64(T[A]);return R.endVector()}static startIndicesStridesVector(R,T){R.startVector(8,T,8)}static addIndicesBuffer(R,T){R.addFieldStruct(2,T,0)}static addIsCanonical(R,T){R.addFieldInt8(3,+T,0)}static endSparseTensorIndexCOO(R){let T=R.endObject();return R.requiredField(T,4),R.requiredField(T,8),T}}OL.SparseTensorIndexCOO=KC});var NL=a((LL)=>{Object.defineProperty(LL,"__esModule",{value:!0});LL.SparseTensorIndexCSF=void 0;var s4=f(),qL=h9(),aL=B9();class bC{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsSparseTensorIndexCSF(R,T){return(T||new bC).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsSparseTensorIndexCSF(R,T){return R.setPosition(R.position()+s4.SIZE_PREFIX_LENGTH),(T||new bC).__init(R.readInt32(R.position())+R.position(),R)}indptrType(R){let T=this.bb.__offset(this.bb_pos,4);return T?(R||new aL.Int).__init(this.bb.__indirect(this.bb_pos+T),this.bb):null}indptrBuffers(R,T){let A=this.bb.__offset(this.bb_pos,6);return A?(T||new qL.Buffer).__init(this.bb.__vector(this.bb_pos+A)+R*16,this.bb):null}indptrBuffersLength(){let R=this.bb.__offset(this.bb_pos,6);return R?this.bb.__vector_len(this.bb_pos+R):0}indicesType(R){let T=this.bb.__offset(this.bb_pos,8);return T?(R||new aL.Int).__init(this.bb.__indirect(this.bb_pos+T),this.bb):null}indicesBuffers(R,T){let A=this.bb.__offset(this.bb_pos,10);return A?(T||new qL.Buffer).__init(this.bb.__vector(this.bb_pos+A)+R*16,this.bb):null}indicesBuffersLength(){let R=this.bb.__offset(this.bb_pos,10);return R?this.bb.__vector_len(this.bb_pos+R):0}axisOrder(R){let T=this.bb.__offset(this.bb_pos,12);return T?this.bb.readInt32(this.bb.__vector(this.bb_pos+T)+R*4):0}axisOrderLength(){let R=this.bb.__offset(this.bb_pos,12);return R?this.bb.__vector_len(this.bb_pos+R):0}axisOrderArray(){let R=this.bb.__offset(this.bb_pos,12);return R?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+R),this.bb.__vector_len(this.bb_pos+R)):null}static startSparseTensorIndexCSF(R){R.startObject(5)}static addIndptrType(R,T){R.addFieldOffset(0,T,0)}static addIndptrBuffers(R,T){R.addFieldOffset(1,T,0)}static startIndptrBuffersVector(R,T){R.startVector(16,T,8)}static addIndicesType(R,T){R.addFieldOffset(2,T,0)}static addIndicesBuffers(R,T){R.addFieldOffset(3,T,0)}static startIndicesBuffersVector(R,T){R.startVector(16,T,8)}static addAxisOrder(R,T){R.addFieldOffset(4,T,0)}static createAxisOrderVector(R,T){R.startVector(4,T.length,4);for(let A=T.length-1;A>=0;A--)R.addInt32(T[A]);return R.endVector()}static startAxisOrderVector(R,T){R.startVector(4,T,4)}static endSparseTensorIndexCSF(R){let T=R.endObject();return R.requiredField(T,4),R.requiredField(T,6),R.requiredField(T,8),R.requiredField(T,10),R.requiredField(T,12),T}}LL.SparseTensorIndexCSF=bC});var SL=a((IL)=>{Object.defineProperty(IL,"__esModule",{value:!0});IL.unionListToSparseTensorIndex=IL.unionToSparseTensorIndex=IL.SparseTensorIndex=void 0;var cL=_L(),oL=iL(),JL=NL(),nC;(function(R){R[R.NONE=0]="NONE",R[R.SparseTensorIndexCOO=1]="SparseTensorIndexCOO",R[R.SparseMatrixIndexCSX=2]="SparseMatrixIndexCSX",R[R.SparseTensorIndexCSF=3]="SparseTensorIndexCSF"})(nC||(IL.SparseTensorIndex=nC={}));function P4(R,T){switch(nC[R]){case"NONE":return null;case"SparseTensorIndexCOO":return T(new oL.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return T(new cL.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return T(new JL.SparseTensorIndexCSF);default:return null}}IL.unionToSparseTensorIndex=P4;function t4(R,T,A){switch(nC[R]){case"NONE":return null;case"SparseTensorIndexCOO":return T(A,new oL.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return T(A,new cL.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return T(A,new JL.SparseTensorIndexCSF);default:return null}}IL.unionListToSparseTensorIndex=t4});var XD=a((yL)=>{Object.defineProperty(yL,"__esModule",{value:!0});yL.TensorDim=void 0;var n4=f();class i9{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsTensorDim(R,T){return(T||new i9).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsTensorDim(R,T){return R.setPosition(R.position()+n4.SIZE_PREFIX_LENGTH),(T||new i9).__init(R.readInt32(R.position())+R.position(),R)}size(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt64(this.bb_pos+R):BigInt("0")}name(R){let T=this.bb.__offset(this.bb_pos,6);return T?this.bb.__string(this.bb_pos+T,R):null}static startTensorDim(R){R.startObject(2)}static addSize(R,T){R.addFieldInt64(0,T,BigInt("0"))}static addName(R,T){R.addFieldOffset(1,T,0)}static endTensorDim(R){return R.endObject()}static createTensorDim(R,T,A){return i9.startTensorDim(R),i9.addSize(R,T),i9.addName(R,A),i9.endTensorDim(R)}}yL.TensorDim=i9});var bL=a((tL)=>{Object.defineProperty(tL,"__esModule",{value:!0});tL.SparseTensor=void 0;var E4=f(),$4=h9(),sL=SL(),p4=XD(),PL=pA();class EC{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsSparseTensor(R,T){return(T||new EC).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsSparseTensor(R,T){return R.setPosition(R.position()+E4.SIZE_PREFIX_LENGTH),(T||new EC).__init(R.readInt32(R.position())+R.position(),R)}typeType(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readUint8(this.bb_pos+R):PL.Type.NONE}type(R){let T=this.bb.__offset(this.bb_pos,6);return T?this.bb.__union(R,this.bb_pos+T):null}shape(R,T){let A=this.bb.__offset(this.bb_pos,8);return A?(T||new p4.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+A)+R*4),this.bb):null}shapeLength(){let R=this.bb.__offset(this.bb_pos,8);return R?this.bb.__vector_len(this.bb_pos+R):0}nonZeroLength(){let R=this.bb.__offset(this.bb_pos,10);return R?this.bb.readInt64(this.bb_pos+R):BigInt("0")}sparseIndexType(){let R=this.bb.__offset(this.bb_pos,12);return R?this.bb.readUint8(this.bb_pos+R):sL.SparseTensorIndex.NONE}sparseIndex(R){let T=this.bb.__offset(this.bb_pos,14);return T?this.bb.__union(R,this.bb_pos+T):null}data(R){let T=this.bb.__offset(this.bb_pos,16);return T?(R||new $4.Buffer).__init(this.bb_pos+T,this.bb):null}static startSparseTensor(R){R.startObject(7)}static addTypeType(R,T){R.addFieldInt8(0,T,PL.Type.NONE)}static addType(R,T){R.addFieldOffset(1,T,0)}static addShape(R,T){R.addFieldOffset(2,T,0)}static createShapeVector(R,T){R.startVector(4,T.length,4);for(let A=T.length-1;A>=0;A--)R.addOffset(T[A]);return R.endVector()}static startShapeVector(R,T){R.startVector(4,T,4)}static addNonZeroLength(R,T){R.addFieldInt64(3,T,BigInt("0"))}static addSparseIndexType(R,T){R.addFieldInt8(4,T,sL.SparseTensorIndex.NONE)}static addSparseIndex(R,T){R.addFieldOffset(5,T,0)}static addData(R,T){R.addFieldStruct(6,T,0)}static endSparseTensor(R){let T=R.endObject();return R.requiredField(T,6),R.requiredField(T,8),R.requiredField(T,14),R.requiredField(T,16),T}static finishSparseTensorBuffer(R,T){R.finish(T)}static finishSizePrefixedSparseTensorBuffer(R,T){R.finish(T,void 0,!0)}}tL.SparseTensor=EC});var pL=a((EL)=>{Object.defineProperty(EL,"__esModule",{value:!0});EL.Tensor=void 0;var r4=f(),X4=h9(),G4=XD(),nL=pA();class $C{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsTensor(R,T){return(T||new $C).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsTensor(R,T){return R.setPosition(R.position()+r4.SIZE_PREFIX_LENGTH),(T||new $C).__init(R.readInt32(R.position())+R.position(),R)}typeType(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readUint8(this.bb_pos+R):nL.Type.NONE}type(R){let T=this.bb.__offset(this.bb_pos,6);return T?this.bb.__union(R,this.bb_pos+T):null}shape(R,T){let A=this.bb.__offset(this.bb_pos,8);return A?(T||new G4.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+A)+R*4),this.bb):null}shapeLength(){let R=this.bb.__offset(this.bb_pos,8);return R?this.bb.__vector_len(this.bb_pos+R):0}strides(R){let T=this.bb.__offset(this.bb_pos,10);return T?this.bb.readInt64(this.bb.__vector(this.bb_pos+T)+R*8):BigInt(0)}stridesLength(){let R=this.bb.__offset(this.bb_pos,10);return R?this.bb.__vector_len(this.bb_pos+R):0}data(R){let T=this.bb.__offset(this.bb_pos,12);return T?(R||new X4.Buffer).__init(this.bb_pos+T,this.bb):null}static startTensor(R){R.startObject(5)}static addTypeType(R,T){R.addFieldInt8(0,T,nL.Type.NONE)}static addType(R,T){R.addFieldOffset(1,T,0)}static addShape(R,T){R.addFieldOffset(2,T,0)}static createShapeVector(R,T){R.startVector(4,T.length,4);for(let A=T.length-1;A>=0;A--)R.addOffset(T[A]);return R.endVector()}static startShapeVector(R,T){R.startVector(4,T,4)}static addStrides(R,T){R.addFieldOffset(3,T,0)}static createStridesVector(R,T){R.startVector(8,T.length,8);for(let A=T.length-1;A>=0;A--)R.addInt64(T[A]);return R.endVector()}static startStridesVector(R,T){R.startVector(8,T,8)}static addData(R,T){R.addFieldStruct(4,T,0)}static endTensor(R){let T=R.endObject();return R.requiredField(T,6),R.requiredField(T,8),R.requiredField(T,12),T}static finishTensorBuffer(R,T){R.finish(T)}static finishSizePrefixedTensorBuffer(R,T){R.finish(T,void 0,!0)}}EL.Tensor=$C});var rC=a((eL)=>{Object.defineProperty(eL,"__esModule",{value:!0});eL.unionListToMessageHeader=eL.unionToMessageHeader=eL.MessageHeader=void 0;var rL=yD(),XL=iC(),GL=PC(),xL=bL(),FL=pL(),pC;(function(R){R[R.NONE=0]="NONE",R[R.Schema=1]="Schema",R[R.DictionaryBatch=2]="DictionaryBatch",R[R.RecordBatch=3]="RecordBatch",R[R.Tensor=4]="Tensor",R[R.SparseTensor=5]="SparseTensor"})(pC||(eL.MessageHeader=pC={}));function x4(R,T){switch(pC[R]){case"NONE":return null;case"Schema":return T(new GL.Schema);case"DictionaryBatch":return T(new rL.DictionaryBatch);case"RecordBatch":return T(new XL.RecordBatch);case"Tensor":return T(new FL.Tensor);case"SparseTensor":return T(new xL.SparseTensor);default:return null}}eL.unionToMessageHeader=x4;function F4(R,T,A){switch(pC[R]){case"NONE":return null;case"Schema":return T(A,new GL.Schema);case"DictionaryBatch":return T(A,new rL.DictionaryBatch);case"RecordBatch":return T(A,new XL.RecordBatch);case"Tensor":return T(A,new FL.Tensor);case"SparseTensor":return T(A,new xL.SparseTensor);default:return null}}eL.unionListToMessageHeader=F4});var NR=a((ZT)=>{Object.defineProperty(ZT,"__esModule",{value:!0});ZT.BufferType=ZT.Type=ZT.MessageHeader=ZT.IntervalUnit=ZT.TimeUnit=ZT.DateUnit=ZT.Precision=ZT.UnionMode=ZT.MetadataVersion=void 0;var d4=_C();Object.defineProperty(ZT,"MetadataVersion",{enumerable:!0,get:function(){return d4.MetadataVersion}});var j4=qD();Object.defineProperty(ZT,"UnionMode",{enumerable:!0,get:function(){return j4.UnionMode}});var u4=aD();Object.defineProperty(ZT,"Precision",{enumerable:!0,get:function(){return u4.Precision}});var Z4=LD();Object.defineProperty(ZT,"DateUnit",{enumerable:!0,get:function(){return Z4.DateUnit}});var w4=Hh();Object.defineProperty(ZT,"TimeUnit",{enumerable:!0,get:function(){return w4.TimeUnit}});var U4=WD();Object.defineProperty(ZT,"IntervalUnit",{enumerable:!0,get:function(){return U4.IntervalUnit}});var Q4=rC();Object.defineProperty(ZT,"MessageHeader",{enumerable:!0,get:function(){return Q4.MessageHeader}});var dL;(function(R){R[R.NONE=0]="NONE",R[R.Null=1]="Null",R[R.Int=2]="Int",R[R.Float=3]="Float",R[R.Binary=4]="Binary",R[R.Utf8=5]="Utf8",R[R.Bool=6]="Bool",R[R.Decimal=7]="Decimal",R[R.Date=8]="Date",R[R.Time=9]="Time",R[R.Timestamp=10]="Timestamp",R[R.Interval=11]="Interval",R[R.List=12]="List",R[R.Struct=13]="Struct",R[R.Union=14]="Union",R[R.FixedSizeBinary=15]="FixedSizeBinary",R[R.FixedSizeList=16]="FixedSizeList",R[R.Map=17]="Map",R[R.Duration=18]="Duration",R[R.LargeBinary=19]="LargeBinary",R[R.LargeUtf8=20]="LargeUtf8",R[R.Dictionary=-1]="Dictionary",R[R.Int8=-2]="Int8",R[R.Int16=-3]="Int16",R[R.Int32=-4]="Int32",R[R.Int64=-5]="Int64",R[R.Uint8=-6]="Uint8",R[R.Uint16=-7]="Uint16",R[R.Uint32=-8]="Uint32",R[R.Uint64=-9]="Uint64",R[R.Float16=-10]="Float16",R[R.Float32=-11]="Float32",R[R.Float64=-12]="Float64",R[R.DateDay=-13]="DateDay",R[R.DateMillisecond=-14]="DateMillisecond",R[R.TimestampSecond=-15]="TimestampSecond",R[R.TimestampMillisecond=-16]="TimestampMillisecond",R[R.TimestampMicrosecond=-17]="TimestampMicrosecond",R[R.TimestampNanosecond=-18]="TimestampNanosecond",R[R.TimeSecond=-19]="TimeSecond",R[R.TimeMillisecond=-20]="TimeMillisecond",R[R.TimeMicrosecond=-21]="TimeMicrosecond",R[R.TimeNanosecond=-22]="TimeNanosecond",R[R.DenseUnion=-23]="DenseUnion",R[R.SparseUnion=-24]="SparseUnion",R[R.IntervalDayTime=-25]="IntervalDayTime",R[R.IntervalYearMonth=-26]="IntervalYearMonth",R[R.DurationSecond=-27]="DurationSecond",R[R.DurationMillisecond=-28]="DurationMillisecond",R[R.DurationMicrosecond=-29]="DurationMicrosecond",R[R.DurationNanosecond=-30]="DurationNanosecond"})(dL||(ZT.Type=dL={}));var jL;(function(R){R[R.OFFSET=0]="OFFSET",R[R.DATA=1]="DATA",R[R.VALIDITY=2]="VALIDITY",R[R.TYPE=3]="TYPE"})(jL||(ZT.BufferType=jL={}))});var qh=a((wL)=>{Object.defineProperty(wL,"__esModule",{value:!0});wL.valueToString=void 0;var z4=void 0;function ZL(R){if(R===null)return"null";if(R===z4)return"undefined";switch(typeof R){case"number":return`${R}`;case"bigint":return`${R}`;case"string":return`"${R}"`}if(typeof R[Symbol.toPrimitive]==="function")return R[Symbol.toPrimitive]("string");if(ArrayBuffer.isView(R)){if(R instanceof BigInt64Array||R instanceof BigUint64Array)return`[${[...R].map((T)=>ZL(T))}]`;return`[${R}]`}return ArrayBuffer.isView(R)?`[${R}]`:JSON.stringify(R,(T,A)=>typeof A==="bigint"?`${A}`:A)}wL.valueToString=ZL});var q9=a((QL)=>{Object.defineProperty(QL,"__esModule",{value:!0});QL.divideBigInts=QL.bigIntToNumber=void 0;function XC(R){if(typeof R==="bigint"&&(R<Number.MIN_SAFE_INTEGER||R>Number.MAX_SAFE_INTEGER))throw TypeError(`${R} is not safe to convert to a number.`);return Number(R)}QL.bigIntToNumber=XC;function M4(R,T){return XC(R/T)+XC(R%T)/XC(T)}QL.divideBigInts=M4});var xC=a((ML)=>{Object.defineProperty(ML,"__esModule",{value:!0});ML.BN=ML.bigNumToBigInt=ML.bigNumToString=ML.bigNumToNumber=ML.isArrowBigNumSymbol=void 0;var V4=bR(),GC=q9();ML.isArrowBigNumSymbol=Symbol.for("isArrowBigNum");function aT(R,...T){if(T.length===0)return Object.setPrototypeOf((0,V4.toArrayBufferView)(this.TypedArray,R),this.constructor.prototype);return Object.setPrototypeOf(new this.TypedArray(R,...T),this.constructor.prototype)}aT.prototype[ML.isArrowBigNumSymbol]=!0;aT.prototype.toJSON=function(){return`"${GA(this)}"`};aT.prototype.valueOf=function(R){return xD(this,R)};aT.prototype.toString=function(){return GA(this)};aT.prototype[Symbol.toPrimitive]=function(R="default"){switch(R){case"number":return xD(this);case"string":return GA(this);case"default":return zL(this)}return GA(this)};function rA(...R){return aT.apply(this,R)}function XA(...R){return aT.apply(this,R)}function ah(...R){return aT.apply(this,R)}Object.setPrototypeOf(rA.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(XA.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(ah.prototype,Object.create(Uint32Array.prototype));Object.assign(rA.prototype,aT.prototype,{constructor:rA,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(XA.prototype,aT.prototype,{constructor:XA,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(ah.prototype,aT.prototype,{constructor:ah,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});var m4=BigInt(4294967296)*BigInt(4294967296),Y4=m4-BigInt(1);function xD(R,T){let{buffer:A,byteOffset:h,byteLength:C,signed:B}=R,D=new BigUint64Array(A,h,C/8),_=B&&D.at(-1)&BigInt(1)<<BigInt(63),O=BigInt(0),H=0;if(_){for(let i of D)O|=(i^Y4)*(BigInt(1)<<BigInt(64*H++));O*=BigInt(-1),O-=BigInt(1)}else for(let i of D)O|=i*(BigInt(1)<<BigInt(64*H++));if(typeof T==="number"){let i=BigInt(Math.pow(10,T)),J=O/i,P=O%i;return(0,GC.bigIntToNumber)(J)+(0,GC.bigIntToNumber)(P)/(0,GC.bigIntToNumber)(i)}return(0,GC.bigIntToNumber)(O)}ML.bigNumToNumber=xD;function GA(R){if(R.byteLength===8)return`${new R.BigIntArray(R.buffer,R.byteOffset,1)[0]}`;if(!R.signed)return GD(R);let T=new Uint16Array(R.buffer,R.byteOffset,R.byteLength/2);if(new Int16Array([T.at(-1)])[0]>=0)return GD(R);T=T.slice();let h=1;for(let B=0;B<T.length;B++){let D=T[B],_=~D+h;T[B]=_,h&=D===0?1:0}return`-${GD(T)}`}ML.bigNumToString=GA;function zL(R){if(R.byteLength===8)return new R.BigIntArray(R.buffer,R.byteOffset,1)[0];else return GA(R)}ML.bigNumToBigInt=zL;function GD(R){let T="",A=new Uint32Array(2),h=new Uint16Array(R.buffer,R.byteOffset,R.byteLength/2),C=new Uint32Array((h=new Uint16Array(h).reverse()).buffer),B=-1,D=h.length-1;do{for(A[0]=h[B=0];B<D;)h[B++]=A[1]=A[0]/10,A[0]=(A[0]-A[1]*10<<16)+h[B];h[B]=A[1]=A[0]/10,A[0]=A[0]-A[1]*10,T=`${A[0]}${T}`}while(C[0]||C[1]||C[2]||C[3]);return T!==null&&T!==void 0?T:"0"}class FD{static new(R,T){switch(T){case!0:return new rA(R);case!1:return new XA(R)}switch(R.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new rA(R)}if(R.byteLength===16)return new ah(R);return new XA(R)}static signed(R){return new rA(R)}static unsigned(R){return new XA(R)}static decimal(R){return new ah(R)}constructor(R,T){return FD.new(R,T)}}ML.BN=FD});var iR=a((eW)=>{var mL,YL,RW,TW,AW,hW,CW,BW,DW,_W,OW,HW,iW,qW,aW,LW,WW,NW,cW,oW,JW,IW;Object.defineProperty(eW,"__esModule",{value:!0});eW.Map_=eW.FixedSizeList=eW.FixedSizeBinary=eW.SparseUnion=eW.DenseUnion=eW.Union=eW.Struct=eW.List=eW.DurationNanosecond=eW.DurationMicrosecond=eW.DurationMillisecond=eW.DurationSecond=eW.Duration=eW.IntervalYearMonth=eW.IntervalDayTime=eW.Interval=eW.TimestampNanosecond=eW.TimestampMicrosecond=eW.TimestampMillisecond=eW.TimestampSecond=eW.Timestamp=eW.TimeNanosecond=eW.TimeMicrosecond=eW.TimeMillisecond=eW.TimeSecond=eW.Time=eW.DateMillisecond=eW.DateDay=eW.Date_=eW.Decimal=eW.Bool=eW.LargeUtf8=eW.Utf8=eW.LargeBinary=eW.Binary=eW.Float64=eW.Float32=eW.Float16=eW.Float=eW.Uint64=eW.Uint32=eW.Uint16=eW.Uint8=eW.Int64=eW.Int32=eW.Int16=eW.Int8=eW.Int=eW.Null=eW.DataType=void 0;eW.strideForType=eW.Dictionary=void 0;var hs=q9(),g=NR();class CR{static isNull(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Null}static isInt(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Int}static isFloat(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Float}static isBinary(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Binary}static isLargeBinary(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.LargeBinary}static isUtf8(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Utf8}static isLargeUtf8(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.LargeUtf8}static isBool(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Bool}static isDecimal(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Decimal}static isDate(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Date}static isTime(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Time}static isTimestamp(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Timestamp}static isInterval(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Interval}static isDuration(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Duration}static isList(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.List}static isStruct(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Struct}static isUnion(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Union}static isFixedSizeBinary(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.FixedSizeBinary}static isFixedSizeList(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.FixedSizeList}static isMap(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Map}static isDictionary(R){return(R===null||R===void 0?void 0:R.typeId)===g.Type.Dictionary}static isDenseUnion(R){return CR.isUnion(R)&&R.mode===g.UnionMode.Dense}static isSparseUnion(R){return CR.isUnion(R)&&R.mode===g.UnionMode.Sparse}constructor(R){this.typeId=R}}eW.DataType=CR;mL=Symbol.toStringTag;CR[mL]=((R)=>{return R.children=null,R.ArrayType=Array,R.OffsetArrayType=Int32Array,R[Symbol.toStringTag]="DataType"})(CR.prototype);class FC extends CR{constructor(){super(g.Type.Null)}toString(){return"Null"}}eW.Null=FC;YL=Symbol.toStringTag;FC[YL]=((R)=>R[Symbol.toStringTag]="Null")(FC.prototype);class mR extends CR{constructor(R,T){super(g.Type.Int);this.isSigned=R,this.bitWidth=T}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}eW.Int=mR;RW=Symbol.toStringTag;mR[RW]=((R)=>{return R.isSigned=null,R.bitWidth=null,R[Symbol.toStringTag]="Int"})(mR.prototype);class eD extends mR{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}eW.Int8=eD;class lD extends mR{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}eW.Int16=lD;class dD extends mR{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}eW.Int32=dD;class jD extends mR{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}eW.Int64=jD;class uD extends mR{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}eW.Uint8=uD;class ZD extends mR{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}eW.Uint16=ZD;class wD extends mR{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}eW.Uint32=wD;class UD extends mR{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}eW.Uint64=UD;Object.defineProperty(eD.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(lD.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(dD.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(jD.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(uD.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(ZD.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(wD.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(UD.prototype,"ArrayType",{value:BigUint64Array});class Z9 extends CR{constructor(R){super(g.Type.Float);this.precision=R}get ArrayType(){switch(this.precision){case g.Precision.HALF:return Uint16Array;case g.Precision.SINGLE:return Float32Array;case g.Precision.DOUBLE:return Float64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}eW.Float=Z9;TW=Symbol.toStringTag;Z9[TW]=((R)=>{return R.precision=null,R[Symbol.toStringTag]="Float"})(Z9.prototype);class QD extends Z9{constructor(){super(g.Precision.HALF)}}eW.Float16=QD;class fD extends Z9{constructor(){super(g.Precision.SINGLE)}}eW.Float32=fD;class zD extends Z9{constructor(){super(g.Precision.DOUBLE)}}eW.Float64=zD;Object.defineProperty(QD.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(fD.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(zD.prototype,"ArrayType",{value:Float64Array});class eC extends CR{constructor(){super(g.Type.Binary)}toString(){return"Binary"}}eW.Binary=eC;AW=Symbol.toStringTag;eC[AW]=((R)=>{return R.ArrayType=Uint8Array,R[Symbol.toStringTag]="Binary"})(eC.prototype);class lC extends CR{constructor(){super(g.Type.LargeBinary)}toString(){return"LargeBinary"}}eW.LargeBinary=lC;hW=Symbol.toStringTag;lC[hW]=((R)=>{return R.ArrayType=Uint8Array,R.OffsetArrayType=BigInt64Array,R[Symbol.toStringTag]="LargeBinary"})(lC.prototype);class dC extends CR{constructor(){super(g.Type.Utf8)}toString(){return"Utf8"}}eW.Utf8=dC;CW=Symbol.toStringTag;dC[CW]=((R)=>{return R.ArrayType=Uint8Array,R[Symbol.toStringTag]="Utf8"})(dC.prototype);class jC extends CR{constructor(){super(g.Type.LargeUtf8)}toString(){return"LargeUtf8"}}eW.LargeUtf8=jC;BW=Symbol.toStringTag;jC[BW]=((R)=>{return R.ArrayType=Uint8Array,R.OffsetArrayType=BigInt64Array,R[Symbol.toStringTag]="LargeUtf8"})(jC.prototype);class uC extends CR{constructor(){super(g.Type.Bool)}toString(){return"Bool"}}eW.Bool=uC;DW=Symbol.toStringTag;uC[DW]=((R)=>{return R.ArrayType=Uint8Array,R[Symbol.toStringTag]="Bool"})(uC.prototype);class ZC extends CR{constructor(R,T,A=128){super(g.Type.Decimal);this.scale=R,this.precision=T,this.bitWidth=A}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}eW.Decimal=ZC;_W=Symbol.toStringTag;ZC[_W]=((R)=>{return R.scale=null,R.precision=null,R.ArrayType=Uint32Array,R[Symbol.toStringTag]="Decimal"})(ZC.prototype);class xA extends CR{constructor(R){super(g.Type.Date);this.unit=R}toString(){return`Date${(this.unit+1)*32}<${g.DateUnit[this.unit]}>`}get ArrayType(){return this.unit===g.DateUnit.DAY?Int32Array:BigInt64Array}}eW.Date_=xA;OW=Symbol.toStringTag;xA[OW]=((R)=>{return R.unit=null,R[Symbol.toStringTag]="Date"})(xA.prototype);class kW extends xA{constructor(){super(g.DateUnit.DAY)}}eW.DateDay=kW;class SW extends xA{constructor(){super(g.DateUnit.MILLISECOND)}}eW.DateMillisecond=SW;class a9 extends CR{constructor(R,T){super(g.Type.Time);this.unit=R,this.bitWidth=T}toString(){return`Time${this.bitWidth}<${g.TimeUnit[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}eW.Time=a9;HW=Symbol.toStringTag;a9[HW]=((R)=>{return R.unit=null,R.bitWidth=null,R[Symbol.toStringTag]="Time"})(a9.prototype);class yW extends a9{constructor(){super(g.TimeUnit.SECOND,32)}}eW.TimeSecond=yW;class gW extends a9{constructor(){super(g.TimeUnit.MILLISECOND,32)}}eW.TimeMillisecond=gW;class sW extends a9{constructor(){super(g.TimeUnit.MICROSECOND,64)}}eW.TimeMicrosecond=sW;class PW extends a9{constructor(){super(g.TimeUnit.NANOSECOND,64)}}eW.TimeNanosecond=PW;class L9 extends CR{constructor(R,T){super(g.Type.Timestamp);this.unit=R,this.timezone=T}toString(){return`Timestamp<${g.TimeUnit[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}eW.Timestamp=L9;iW=Symbol.toStringTag;L9[iW]=((R)=>{return R.unit=null,R.timezone=null,R.ArrayType=BigInt64Array,R[Symbol.toStringTag]="Timestamp"})(L9.prototype);class tW extends L9{constructor(R){super(g.TimeUnit.SECOND,R)}}eW.TimestampSecond=tW;class KW extends L9{constructor(R){super(g.TimeUnit.MILLISECOND,R)}}eW.TimestampMillisecond=KW;class bW extends L9{constructor(R){super(g.TimeUnit.MICROSECOND,R)}}eW.TimestampMicrosecond=bW;class nW extends L9{constructor(R){super(g.TimeUnit.NANOSECOND,R)}}eW.TimestampNanosecond=nW;class FA extends CR{constructor(R){super(g.Type.Interval);this.unit=R}toString(){return`Interval<${g.IntervalUnit[this.unit]}>`}}eW.Interval=FA;qW=Symbol.toStringTag;FA[qW]=((R)=>{return R.unit=null,R.ArrayType=Int32Array,R[Symbol.toStringTag]="Interval"})(FA.prototype);class EW extends FA{constructor(){super(g.IntervalUnit.DAY_TIME)}}eW.IntervalDayTime=EW;class $W extends FA{constructor(){super(g.IntervalUnit.YEAR_MONTH)}}eW.IntervalYearMonth=$W;class W9 extends CR{constructor(R){super(g.Type.Duration);this.unit=R}toString(){return`Duration<${g.TimeUnit[this.unit]}>`}}eW.Duration=W9;aW=Symbol.toStringTag;W9[aW]=((R)=>{return R.unit=null,R.ArrayType=BigInt64Array,R[Symbol.toStringTag]="Duration"})(W9.prototype);class pW extends W9{constructor(){super(g.TimeUnit.SECOND)}}eW.DurationSecond=pW;class rW extends W9{constructor(){super(g.TimeUnit.MILLISECOND)}}eW.DurationMillisecond=rW;class XW extends W9{constructor(){super(g.TimeUnit.MICROSECOND)}}eW.DurationMicrosecond=XW;class GW extends W9{constructor(){super(g.TimeUnit.NANOSECOND)}}eW.DurationNanosecond=GW;class wC extends CR{constructor(R){super(g.Type.List);this.children=[R]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}eW.List=wC;LW=Symbol.toStringTag;wC[LW]=((R)=>{return R.children=null,R[Symbol.toStringTag]="List"})(wC.prototype);class UC extends CR{constructor(R){super(g.Type.Struct);this.children=R}toString(){return`Struct<{${this.children.map((R)=>`${R.name}:${R.type}`).join(", ")}}>`}}eW.Struct=UC;WW=Symbol.toStringTag;UC[WW]=((R)=>{return R.children=null,R[Symbol.toStringTag]="Struct"})(UC.prototype);class eA extends CR{constructor(R,T,A){super(g.Type.Union);this.mode=R,this.children=A,this.typeIds=T=Int32Array.from(T),this.typeIdToChildIndex=T.reduce((h,C,B)=>(h[C]=B)&&h||h,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((R)=>`${R.type}`).join(" | ")}>`}}eW.Union=eA;NW=Symbol.toStringTag;eA[NW]=((R)=>{return R.mode=null,R.typeIds=null,R.children=null,R.typeIdToChildIndex=null,R.ArrayType=Int8Array,R[Symbol.toStringTag]="Union"})(eA.prototype);class xW extends eA{constructor(R,T){super(g.UnionMode.Dense,R,T)}}eW.DenseUnion=xW;class FW extends eA{constructor(R,T){super(g.UnionMode.Sparse,R,T)}}eW.SparseUnion=FW;class QC extends CR{constructor(R){super(g.Type.FixedSizeBinary);this.byteWidth=R}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}eW.FixedSizeBinary=QC;cW=Symbol.toStringTag;QC[cW]=((R)=>{return R.byteWidth=null,R.ArrayType=Uint8Array,R[Symbol.toStringTag]="FixedSizeBinary"})(QC.prototype);class fC extends CR{constructor(R,T){super(g.Type.FixedSizeList);this.listSize=R,this.children=[T]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}eW.FixedSizeList=fC;oW=Symbol.toStringTag;fC[oW]=((R)=>{return R.children=null,R.listSize=null,R[Symbol.toStringTag]="FixedSizeList"})(fC.prototype);class zC extends CR{constructor(R,T=!1){var A,h,C;super(g.Type.Map);if(this.children=[R],this.keysSorted=T,R){if(R.name="entries",(A=R===null||R===void 0?void 0:R.type)===null||A===void 0?void 0:A.children){let B=(h=R===null||R===void 0?void 0:R.type)===null||h===void 0?void 0:h.children[0];if(B)B.name="key";let D=(C=R===null||R===void 0?void 0:R.type)===null||C===void 0?void 0:C.children[1];if(D)D.name="value"}}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map((R)=>`${R.name}:${R.type}`).join(", ")}}>`}}eW.Map_=zC;JW=Symbol.toStringTag;zC[JW]=((R)=>{return R.children=null,R.keysSorted=null,R[Symbol.toStringTag]="Map_"})(zC.prototype);var Cs=((R)=>()=>++R)(-1);class MC extends CR{constructor(R,T,A,h){super(g.Type.Dictionary);this.indices=T,this.dictionary=R,this.isOrdered=h||!1,this.id=A==null?Cs():(0,hs.bigIntToNumber)(A)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}eW.Dictionary=MC;IW=Symbol.toStringTag;MC[IW]=((R)=>{return R.id=null,R.indices=null,R.isOrdered=null,R.dictionary=null,R[Symbol.toStringTag]="Dictionary"})(MC.prototype);function Bs(R){let T=R;switch(R.typeId){case g.Type.Decimal:return R.bitWidth/32;case g.Type.Interval:return 1+T.unit;case g.Type.FixedSizeList:return T.listSize;case g.Type.FixedSizeBinary:return T.byteWidth;default:return 1}}eW.strideForType=Bs});var ZR=a((ZW)=>{Object.defineProperty(ZW,"__esModule",{value:!0});ZW.Visitor=void 0;var c=NR(),jW=iR();class m{visitMany(R,...T){return R.map((A,h)=>this.visit(A,...T.map((C)=>C[h])))}visit(...R){return this.getVisitFn(R[0],!1).apply(this,R)}getVisitFn(R,T=!0){return AP(this,R,T)}getVisitFnByTypeId(R,T=!0){return lA(this,R,T)}visitNull(R,...T){return null}visitBool(R,...T){return null}visitInt(R,...T){return null}visitFloat(R,...T){return null}visitUtf8(R,...T){return null}visitLargeUtf8(R,...T){return null}visitBinary(R,...T){return null}visitLargeBinary(R,...T){return null}visitFixedSizeBinary(R,...T){return null}visitDate(R,...T){return null}visitTimestamp(R,...T){return null}visitTime(R,...T){return null}visitDecimal(R,...T){return null}visitList(R,...T){return null}visitStruct(R,...T){return null}visitUnion(R,...T){return null}visitDictionary(R,...T){return null}visitInterval(R,...T){return null}visitDuration(R,...T){return null}visitFixedSizeList(R,...T){return null}visitMap(R,...T){return null}}ZW.Visitor=m;function AP(R,T,A=!0){if(typeof T==="number")return lA(R,T,A);if(typeof T==="string"&&T in c.Type)return lA(R,c.Type[T],A);if(T&&T instanceof jW.DataType)return lA(R,uW(T),A);if((T===null||T===void 0?void 0:T.type)&&T.type instanceof jW.DataType)return lA(R,uW(T.type),A);return lA(R,c.Type.NONE,A)}function lA(R,T,A=!0){let h=null;switch(T){case c.Type.Null:h=R.visitNull;break;case c.Type.Bool:h=R.visitBool;break;case c.Type.Int:h=R.visitInt;break;case c.Type.Int8:h=R.visitInt8||R.visitInt;break;case c.Type.Int16:h=R.visitInt16||R.visitInt;break;case c.Type.Int32:h=R.visitInt32||R.visitInt;break;case c.Type.Int64:h=R.visitInt64||R.visitInt;break;case c.Type.Uint8:h=R.visitUint8||R.visitInt;break;case c.Type.Uint16:h=R.visitUint16||R.visitInt;break;case c.Type.Uint32:h=R.visitUint32||R.visitInt;break;case c.Type.Uint64:h=R.visitUint64||R.visitInt;break;case c.Type.Float:h=R.visitFloat;break;case c.Type.Float16:h=R.visitFloat16||R.visitFloat;break;case c.Type.Float32:h=R.visitFloat32||R.visitFloat;break;case c.Type.Float64:h=R.visitFloat64||R.visitFloat;break;case c.Type.Utf8:h=R.visitUtf8;break;case c.Type.LargeUtf8:h=R.visitLargeUtf8;break;case c.Type.Binary:h=R.visitBinary;break;case c.Type.LargeBinary:h=R.visitLargeBinary;break;case c.Type.FixedSizeBinary:h=R.visitFixedSizeBinary;break;case c.Type.Date:h=R.visitDate;break;case c.Type.DateDay:h=R.visitDateDay||R.visitDate;break;case c.Type.DateMillisecond:h=R.visitDateMillisecond||R.visitDate;break;case c.Type.Timestamp:h=R.visitTimestamp;break;case c.Type.TimestampSecond:h=R.visitTimestampSecond||R.visitTimestamp;break;case c.Type.TimestampMillisecond:h=R.visitTimestampMillisecond||R.visitTimestamp;break;case c.Type.TimestampMicrosecond:h=R.visitTimestampMicrosecond||R.visitTimestamp;break;case c.Type.TimestampNanosecond:h=R.visitTimestampNanosecond||R.visitTimestamp;break;case c.Type.Time:h=R.visitTime;break;case c.Type.TimeSecond:h=R.visitTimeSecond||R.visitTime;break;case c.Type.TimeMillisecond:h=R.visitTimeMillisecond||R.visitTime;break;case c.Type.TimeMicrosecond:h=R.visitTimeMicrosecond||R.visitTime;break;case c.Type.TimeNanosecond:h=R.visitTimeNanosecond||R.visitTime;break;case c.Type.Decimal:h=R.visitDecimal;break;case c.Type.List:h=R.visitList;break;case c.Type.Struct:h=R.visitStruct;break;case c.Type.Union:h=R.visitUnion;break;case c.Type.DenseUnion:h=R.visitDenseUnion||R.visitUnion;break;case c.Type.SparseUnion:h=R.visitSparseUnion||R.visitUnion;break;case c.Type.Dictionary:h=R.visitDictionary;break;case c.Type.Interval:h=R.visitInterval;break;case c.Type.IntervalDayTime:h=R.visitIntervalDayTime||R.visitInterval;break;case c.Type.IntervalYearMonth:h=R.visitIntervalYearMonth||R.visitInterval;break;case c.Type.Duration:h=R.visitDuration;break;case c.Type.DurationSecond:h=R.visitDurationSecond||R.visitDuration;break;case c.Type.DurationMillisecond:h=R.visitDurationMillisecond||R.visitDuration;break;case c.Type.DurationMicrosecond:h=R.visitDurationMicrosecond||R.visitDuration;break;case c.Type.DurationNanosecond:h=R.visitDurationNanosecond||R.visitDuration;break;case c.Type.FixedSizeList:h=R.visitFixedSizeList;break;case c.Type.Map:h=R.visitMap;break}if(typeof h==="function")return h;if(!A)return()=>null;throw Error(`Unrecognized type '${c.Type[T]}'`)}function uW(R){switch(R.typeId){case c.Type.Null:return c.Type.Null;case c.Type.Int:{let{bitWidth:T,isSigned:A}=R;switch(T){case 8:return A?c.Type.Int8:c.Type.Uint8;case 16:return A?c.Type.Int16:c.Type.Uint16;case 32:return A?c.Type.Int32:c.Type.Uint32;case 64:return A?c.Type.Int64:c.Type.Uint64}return c.Type.Int}case c.Type.Float:switch(R.precision){case c.Precision.HALF:return c.Type.Float16;case c.Precision.SINGLE:return c.Type.Float32;case c.Precision.DOUBLE:return c.Type.Float64}return c.Type.Float;case c.Type.Binary:return c.Type.Binary;case c.Type.LargeBinary:return c.Type.LargeBinary;case c.Type.Utf8:return c.Type.Utf8;case c.Type.LargeUtf8:return c.Type.LargeUtf8;case c.Type.Bool:return c.Type.Bool;case c.Type.Decimal:return c.Type.Decimal;case c.Type.Time:switch(R.unit){case c.TimeUnit.SECOND:return c.Type.TimeSecond;case c.TimeUnit.MILLISECOND:return c.Type.TimeMillisecond;case c.TimeUnit.MICROSECOND:return c.Type.TimeMicrosecond;case c.TimeUnit.NANOSECOND:return c.Type.TimeNanosecond}return c.Type.Time;case c.Type.Timestamp:switch(R.unit){case c.TimeUnit.SECOND:return c.Type.TimestampSecond;case c.TimeUnit.MILLISECOND:return c.Type.TimestampMillisecond;case c.TimeUnit.MICROSECOND:return c.Type.TimestampMicrosecond;case c.TimeUnit.NANOSECOND:return c.Type.TimestampNanosecond}return c.Type.Timestamp;case c.Type.Date:switch(R.unit){case c.DateUnit.DAY:return c.Type.DateDay;case c.DateUnit.MILLISECOND:return c.Type.DateMillisecond}return c.Type.Date;case c.Type.Interval:switch(R.unit){case c.IntervalUnit.DAY_TIME:return c.Type.IntervalDayTime;case c.IntervalUnit.YEAR_MONTH:return c.Type.IntervalYearMonth}return c.Type.Interval;case c.Type.Duration:switch(R.unit){case c.TimeUnit.SECOND:return c.Type.DurationSecond;case c.TimeUnit.MILLISECOND:return c.Type.DurationMillisecond;case c.TimeUnit.MICROSECOND:return c.Type.DurationMicrosecond;case c.TimeUnit.NANOSECOND:return c.Type.DurationNanosecond}return c.Type.Duration;case c.Type.Map:return c.Type.Map;case c.Type.List:return c.Type.List;case c.Type.Struct:return c.Type.Struct;case c.Type.Union:switch(R.mode){case c.UnionMode.Dense:return c.Type.DenseUnion;case c.UnionMode.Sparse:return c.Type.SparseUnion}return c.Type.Union;case c.Type.FixedSizeBinary:return c.Type.FixedSizeBinary;case c.Type.FixedSizeList:return c.Type.FixedSizeList;case c.Type.Dictionary:return c.Type.Dictionary}throw Error(`Unrecognized type '${c.Type[R.typeId]}'`)}m.prototype.visitInt8=null;m.prototype.visitInt16=null;m.prototype.visitInt32=null;m.prototype.visitInt64=null;m.prototype.visitUint8=null;m.prototype.visitUint16=null;m.prototype.visitUint32=null;m.prototype.visitUint64=null;m.prototype.visitFloat16=null;m.prototype.visitFloat32=null;m.prototype.visitFloat64=null;m.prototype.visitDateDay=null;m.prototype.visitDateMillisecond=null;m.prototype.visitTimestampSecond=null;m.prototype.visitTimestampMillisecond=null;m.prototype.visitTimestampMicrosecond=null;m.prototype.visitTimestampNanosecond=null;m.prototype.visitTimeSecond=null;m.prototype.visitTimeMillisecond=null;m.prototype.visitTimeMicrosecond=null;m.prototype.visitTimeNanosecond=null;m.prototype.visitDenseUnion=null;m.prototype.visitSparseUnion=null;m.prototype.visitIntervalDayTime=null;m.prototype.visitIntervalYearMonth=null;m.prototype.visitDuration=null;m.prototype.visitDurationSecond=null;m.prototype.visitDurationMillisecond=null;m.prototype.visitDurationMicrosecond=null;m.prototype.visitDurationNanosecond=null});var Lh=a((QW)=>{Object.defineProperty(QW,"__esModule",{value:!0});QW.float64ToUint16=QW.uint16ToFloat64=void 0;var UW=new Float64Array(1),dA=new Uint32Array(UW.buffer);function hP(R){let T=(R&31744)>>10,A=(R&1023)/1024,h=Math.pow(-1,(R&32768)>>15);switch(T){case 31:return h*(A?Number.NaN:1/0);case 0:return h*(A?0.00006103515625*A:0)}return h*Math.pow(2,T-15)*(1+A)}QW.uint16ToFloat64=hP;function CP(R){if(R!==R)return 32256;UW[0]=R;let T=(dA[1]&2147483648)>>16&65535,A=dA[1]&2146435072,h=0;if(A>=1089470464)if(dA[0]>0)A=31744;else A=(A&2080374784)>>16,h=(dA[1]&1048575)>>10;else if(A<=1056964608)h=1048576+(dA[1]&1048575),h=1048576+(h<<(A>>20)-998)>>21,A=0;else A=A-1056964608>>10,h=(dA[1]&1048575)+512>>10;return T|A|h&65535}QW.float64ToUint16=CP});var vR=a((YW)=>{Object.defineProperty(YW,"__esModule",{value:!0});YW.instance=YW.setDuration=YW.setDurationNanosecond=YW.setDurationMicrosecond=YW.setDurationMillisecond=YW.setDurationSecond=YW.setIntervalYearMonth=YW.setIntervalDayTime=YW.setIntervalValue=YW.setDecimal=YW.setTime=YW.setTimeNanosecond=YW.setTimeMicrosecond=YW.setTimeMillisecond=YW.setTimeSecond=YW.setTimestamp=YW.setTimestampNanosecond=YW.setTimestampMicrosecond=YW.setTimestampMillisecond=YW.setTimestampSecond=YW.setDate=YW.setFixedSizeBinary=YW.setDateMillisecond=YW.setDateDay=YW.setAnyFloat=YW.setFloat16=YW.setFloat=YW.setInt=YW.setVariableWidthBytes=YW.setEpochMsToDays=YW.SetVisitor=void 0;var DP=dR(),_P=ZR(),zW=q9(),OP=T9(),HP=Lh(),nR=NR();class G extends _P.Visitor{}YW.SetVisitor=G;function d(R){return(T,A,h)=>{if(T.setValid(A,h!=null))return R(T,A,h)}}var iP=(R,T,A)=>{R[T]=Math.floor(A/86400000)};YW.setEpochMsToDays=iP;var qP=(R,T,A,h)=>{if(A+1<T.length){let C=(0,zW.bigIntToNumber)(T[A]),B=(0,zW.bigIntToNumber)(T[A+1]);R.set(h.subarray(0,B-C),C)}};YW.setVariableWidthBytes=qP;var aP=({offset:R,values:T},A,h)=>{let C=R+A;h?T[C>>3]|=1<<C%8:T[C>>3]&=~(1<<C%8)},LP=({values:R},T,A)=>{R[T]=A};YW.setInt=LP;var WP=({values:R},T,A)=>{R[T]=A};YW.setFloat=WP;var NP=({values:R},T,A)=>{R[T]=(0,HP.float64ToUint16)(A)};YW.setFloat16=NP;var cP=(R,T,A)=>{switch(R.type.precision){case nR.Precision.HALF:return YW.setFloat16(R,T,A);case nR.Precision.SINGLE:case nR.Precision.DOUBLE:return YW.setFloat(R,T,A)}};YW.setAnyFloat=cP;var oP=({values:R},T,A)=>{YW.setEpochMsToDays(R,T,A.valueOf())};YW.setDateDay=oP;var JP=({values:R},T,A)=>{R[T]=BigInt(A)};YW.setDateMillisecond=JP;var IP=({stride:R,values:T},A,h)=>{T.set(h.subarray(0,R),R*A)};YW.setFixedSizeBinary=IP;var MW=({values:R,valueOffsets:T},A,h)=>YW.setVariableWidthBytes(R,T,A,h),vW=({values:R,valueOffsets:T},A,h)=>YW.setVariableWidthBytes(R,T,A,(0,OP.encodeUtf8)(h)),kP=(R,T,A)=>{R.type.unit===nR.DateUnit.DAY?YW.setDateDay(R,T,A):YW.setDateMillisecond(R,T,A)};YW.setDate=kP;var SP=({values:R},T,A)=>{R[T]=BigInt(A/1000)};YW.setTimestampSecond=SP;var yP=({values:R},T,A)=>{R[T]=BigInt(A)};YW.setTimestampMillisecond=yP;var gP=({values:R},T,A)=>{R[T]=BigInt(A*1000)};YW.setTimestampMicrosecond=gP;var sP=({values:R},T,A)=>{R[T]=BigInt(A*1e6)};YW.setTimestampNanosecond=sP;var PP=(R,T,A)=>{switch(R.type.unit){case nR.TimeUnit.SECOND:return YW.setTimestampSecond(R,T,A);case nR.TimeUnit.MILLISECOND:return YW.setTimestampMillisecond(R,T,A);case nR.TimeUnit.MICROSECOND:return YW.setTimestampMicrosecond(R,T,A);case nR.TimeUnit.NANOSECOND:return YW.setTimestampNanosecond(R,T,A)}};YW.setTimestamp=PP;var tP=({values:R},T,A)=>{R[T]=A};YW.setTimeSecond=tP;var KP=({values:R},T,A)=>{R[T]=A};YW.setTimeMillisecond=KP;var bP=({values:R},T,A)=>{R[T]=A};YW.setTimeMicrosecond=bP;var nP=({values:R},T,A)=>{R[T]=A};YW.setTimeNanosecond=nP;var EP=(R,T,A)=>{switch(R.type.unit){case nR.TimeUnit.SECOND:return YW.setTimeSecond(R,T,A);case nR.TimeUnit.MILLISECOND:return YW.setTimeMillisecond(R,T,A);case nR.TimeUnit.MICROSECOND:return YW.setTimeMicrosecond(R,T,A);case nR.TimeUnit.NANOSECOND:return YW.setTimeNanosecond(R,T,A)}};YW.setTime=EP;var $P=({values:R,stride:T},A,h)=>{R.set(h.subarray(0,T),T*A)};YW.setDecimal=$P;var pP=(R,T,A)=>{let h=R.children[0],C=R.valueOffsets,B=YW.instance.getVisitFn(h);if(Array.isArray(A))for(let D=-1,_=C[T],O=C[T+1];_<O;)B(h,_++,A[++D]);else for(let D=-1,_=C[T],O=C[T+1];_<O;)B(h,_++,A.get(++D))},rP=(R,T,A)=>{let h=R.children[0],{valueOffsets:C}=R,B=YW.instance.getVisitFn(h),{[T]:D,[T+1]:_}=C,O=A instanceof Map?A.entries():Object.entries(A);for(let H of O)if(B(h,D,H),++D>=_)break},XP=(R,T)=>(A,h,C,B)=>h&&A(h,R,T[B]),GP=(R,T)=>(A,h,C,B)=>h&&A(h,R,T.get(B)),xP=(R,T)=>(A,h,C,B)=>h&&A(h,R,T.get(C.name)),FP=(R,T)=>(A,h,C,B)=>h&&A(h,R,T[C.name]),eP=(R,T,A)=>{let h=R.type.children.map((B)=>YW.instance.getVisitFn(B.type)),C=A instanceof Map?xP(T,A):A instanceof DP.Vector?GP(T,A):Array.isArray(A)?XP(T,A):FP(T,A);R.type.children.forEach((B,D)=>C(h[D],R.children[D],B,D))},lP=(R,T,A)=>{R.type.mode===nR.UnionMode.Dense?VW(R,T,A):mW(R,T,A)},VW=(R,T,A)=>{let h=R.type.typeIdToChildIndex[R.typeIds[T]],C=R.children[h];YW.instance.visit(C,R.valueOffsets[T],A)},mW=(R,T,A)=>{let h=R.type.typeIdToChildIndex[R.typeIds[T]],C=R.children[h];YW.instance.visit(C,T,A)},dP=(R,T,A)=>{var h;(h=R.dictionary)===null||h===void 0||h.set(R.values[T],A)},jP=(R,T,A)=>{R.type.unit===nR.IntervalUnit.DAY_TIME?YW.setIntervalDayTime(R,T,A):YW.setIntervalYearMonth(R,T,A)};YW.setIntervalValue=jP;var uP=({values:R},T,A)=>{R.set(A.subarray(0,2),2*T)};YW.setIntervalDayTime=uP;var ZP=({values:R},T,A)=>{R[T]=A[0]*12+A[1]%12};YW.setIntervalYearMonth=ZP;var wP=({values:R},T,A)=>{R[T]=A};YW.setDurationSecond=wP;var UP=({values:R},T,A)=>{R[T]=A};YW.setDurationMillisecond=UP;var QP=({values:R},T,A)=>{R[T]=A};YW.setDurationMicrosecond=QP;var fP=({values:R},T,A)=>{R[T]=A};YW.setDurationNanosecond=fP;var zP=(R,T,A)=>{switch(R.type.unit){case nR.TimeUnit.SECOND:return YW.setDurationSecond(R,T,A);case nR.TimeUnit.MILLISECOND:return YW.setDurationMillisecond(R,T,A);case nR.TimeUnit.MICROSECOND:return YW.setDurationMicrosecond(R,T,A);case nR.TimeUnit.NANOSECOND:return YW.setDurationNanosecond(R,T,A)}};YW.setDuration=zP;var MP=(R,T,A)=>{let{stride:h}=R,C=R.children[0],B=YW.instance.getVisitFn(C);if(Array.isArray(A))for(let D=-1,_=T*h;++D<h;)B(C,_+D,A[D]);else for(let D=-1,_=T*h;++D<h;)B(C,_+D,A.get(D))};G.prototype.visitBool=d(aP);G.prototype.visitInt=d(YW.setInt);G.prototype.visitInt8=d(YW.setInt);G.prototype.visitInt16=d(YW.setInt);G.prototype.visitInt32=d(YW.setInt);G.prototype.visitInt64=d(YW.setInt);G.prototype.visitUint8=d(YW.setInt);G.prototype.visitUint16=d(YW.setInt);G.prototype.visitUint32=d(YW.setInt);G.prototype.visitUint64=d(YW.setInt);G.prototype.visitFloat=d(YW.setAnyFloat);G.prototype.visitFloat16=d(YW.setFloat16);G.prototype.visitFloat32=d(YW.setFloat);G.prototype.visitFloat64=d(YW.setFloat);G.prototype.visitUtf8=d(vW);G.prototype.visitLargeUtf8=d(vW);G.prototype.visitBinary=d(MW);G.prototype.visitLargeBinary=d(MW);G.prototype.visitFixedSizeBinary=d(YW.setFixedSizeBinary);G.prototype.visitDate=d(YW.setDate);G.prototype.visitDateDay=d(YW.setDateDay);G.prototype.visitDateMillisecond=d(YW.setDateMillisecond);G.prototype.visitTimestamp=d(YW.setTimestamp);G.prototype.visitTimestampSecond=d(YW.setTimestampSecond);G.prototype.visitTimestampMillisecond=d(YW.setTimestampMillisecond);G.prototype.visitTimestampMicrosecond=d(YW.setTimestampMicrosecond);G.prototype.visitTimestampNanosecond=d(YW.setTimestampNanosecond);G.prototype.visitTime=d(YW.setTime);G.prototype.visitTimeSecond=d(YW.setTimeSecond);G.prototype.visitTimeMillisecond=d(YW.setTimeMillisecond);G.prototype.visitTimeMicrosecond=d(YW.setTimeMicrosecond);G.prototype.visitTimeNanosecond=d(YW.setTimeNanosecond);G.prototype.visitDecimal=d(YW.setDecimal);G.prototype.visitList=d(pP);G.prototype.visitStruct=d(eP);G.prototype.visitUnion=d(lP);G.prototype.visitDenseUnion=d(VW);G.prototype.visitSparseUnion=d(mW);G.prototype.visitDictionary=d(dP);G.prototype.visitInterval=d(YW.setIntervalValue);G.prototype.visitIntervalDayTime=d(YW.setIntervalDayTime);G.prototype.visitIntervalYearMonth=d(YW.setIntervalYearMonth);G.prototype.visitDuration=d(YW.setDuration);G.prototype.visitDurationSecond=d(YW.setDurationSecond);G.prototype.visitDurationMillisecond=d(YW.setDurationMillisecond);G.prototype.visitDurationMicrosecond=d(YW.setDurationMicrosecond);G.prototype.visitDurationNanosecond=d(YW.setDurationNanosecond);G.prototype.visitFixedSizeList=d(MP);G.prototype.visitMap=d(rP);YW.instance=new G});var VC=a((aN)=>{Object.defineProperty(aN,"__esModule",{value:!0});aN.StructRow=void 0;var HN=qh(),L_=w9(),VP=vR(),LT=Symbol.for("parent"),jA=Symbol.for("rowIndex");class W_{constructor(R,T){return this[LT]=R,this[jA]=T,new Proxy(this,mP)}toArray(){return Object.values(this.toJSON())}toJSON(){let R=this[jA],T=this[LT],A=T.type.children,h={};for(let C=-1,B=A.length;++C<B;)h[A[C].name]=L_.instance.visit(T.children[C],R);return h}toString(){return`{${[...this].map(([R,T])=>`${(0,HN.valueToString)(R)}: ${(0,HN.valueToString)(T)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new iN(this[LT],this[jA])}}aN.StructRow=W_;class iN{constructor(R,T){this.childIndex=0,this.children=R.children,this.rowIndex=T,this.childFields=R.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){let R=this.childIndex;if(R<this.numChildren)return this.childIndex=R+1,{done:!1,value:[this.childFields[R].name,L_.instance.visit(this.children[R],this.rowIndex)]};return{done:!0,value:null}}}Object.defineProperties(W_.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[LT]:{writable:!0,enumerable:!1,configurable:!1,value:null},[jA]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class qN{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(R){return R[LT].type.children.map((T)=>T.name)}has(R,T){return R[LT].type.children.some((A)=>A.name===T)}getOwnPropertyDescriptor(R,T){if(R[LT].type.children.some((A)=>A.name===T))return{writable:!0,enumerable:!0,configurable:!0};return}get(R,T){if(Reflect.has(R,T))return R[T];let A=R[LT].type.children.findIndex((h)=>h.name===T);if(A!==-1){let h=L_.instance.visit(R[LT].children[A],R[jA]);return Reflect.set(R,T,h),h}}set(R,T,A){let h=R[LT].type.children.findIndex((C)=>C.name===T);if(h!==-1)return VP.instance.visit(R[LT].children[h],R[jA],A),Reflect.set(R,T,A);else if(Reflect.has(R,T)||typeof T==="symbol")return Reflect.set(R,T,A);return!1}}var mP=new qN});var w9=a((eN)=>{Object.defineProperty(eN,"__esModule",{value:!0});eN.instance=eN.GetVisitor=void 0;var YP=xC(),WN=dR(),R3=ZR(),T3=Wh(),A3=VC(),U9=q9(),h3=T9(),NN=Lh(),XR=NR();class $ extends R3.Visitor{}eN.GetVisitor=$;function F(R){return(T,A)=>T.getValid(A)?R(T,A):null}var C3=(R,T)=>86400000*R[T],B3=(R,T)=>null,cN=(R,T,A)=>{if(A+1>=T.length)return null;let h=(0,U9.bigIntToNumber)(T[A]),C=(0,U9.bigIntToNumber)(T[A+1]);return R.subarray(h,C)},D3=({offset:R,values:T},A)=>{let h=R+A;return(T[h>>3]&1<<h%8)!==0},oN=({values:R},T)=>C3(R,T),JN=({values:R},T)=>(0,U9.bigIntToNumber)(R[T]),c9=({stride:R,values:T},A)=>T[R*A],_3=({stride:R,values:T},A)=>(0,NN.uint16ToFloat64)(T[R*A]),IN=({values:R},T)=>R[T],O3=({stride:R,values:T},A)=>T.subarray(R*A,R*(A+1)),kN=({values:R,valueOffsets:T},A)=>cN(R,T,A),SN=({values:R,valueOffsets:T},A)=>{let h=cN(R,T,A);return h!==null?(0,h3.decodeUtf8)(h):null},H3=({values:R},T)=>R[T],i3=({type:R,values:T},A)=>R.precision!==XR.Precision.HALF?T[A]:(0,NN.uint16ToFloat64)(T[A]),q3=(R,T)=>R.type.unit===XR.DateUnit.DAY?oN(R,T):JN(R,T),yN=({values:R},T)=>1000*(0,U9.bigIntToNumber)(R[T]),gN=({values:R},T)=>(0,U9.bigIntToNumber)(R[T]),sN=({values:R},T)=>(0,U9.divideBigInts)(R[T],BigInt(1000)),PN=({values:R},T)=>(0,U9.divideBigInts)(R[T],BigInt(1e6)),a3=(R,T)=>{switch(R.type.unit){case XR.TimeUnit.SECOND:return yN(R,T);case XR.TimeUnit.MILLISECOND:return gN(R,T);case XR.TimeUnit.MICROSECOND:return sN(R,T);case XR.TimeUnit.NANOSECOND:return PN(R,T)}},tN=({values:R},T)=>R[T],KN=({values:R},T)=>R[T],bN=({values:R},T)=>R[T],nN=({values:R},T)=>R[T],L3=(R,T)=>{switch(R.type.unit){case XR.TimeUnit.SECOND:return tN(R,T);case XR.TimeUnit.MILLISECOND:return KN(R,T);case XR.TimeUnit.MICROSECOND:return bN(R,T);case XR.TimeUnit.NANOSECOND:return nN(R,T)}},W3=({values:R,stride:T},A)=>YP.BN.decimal(R.subarray(T*A,T*(A+1))),N3=(R,T)=>{let{valueOffsets:A,stride:h,children:C}=R,{[T*h]:B,[T*h+1]:D}=A,O=C[0].slice(B,D-B);return new WN.Vector([O])},c3=(R,T)=>{let{valueOffsets:A,children:h}=R,{[T]:C,[T+1]:B}=A,D=h[0];return new T3.MapRow(D.slice(C,B-C))},o3=(R,T)=>{return new A3.StructRow(R,T)},J3=(R,T)=>{return R.type.mode===XR.UnionMode.Dense?EN(R,T):$N(R,T)},EN=(R,T)=>{let A=R.type.typeIdToChildIndex[R.typeIds[T]],h=R.children[A];return eN.instance.visit(h,R.valueOffsets[T])},$N=(R,T)=>{let A=R.type.typeIdToChildIndex[R.typeIds[T]],h=R.children[A];return eN.instance.visit(h,T)},I3=(R,T)=>{var A;return(A=R.dictionary)===null||A===void 0?void 0:A.get(R.values[T])},k3=(R,T)=>R.type.unit===XR.IntervalUnit.DAY_TIME?pN(R,T):rN(R,T),pN=({values:R},T)=>R.subarray(2*T,2*(T+1)),rN=({values:R},T)=>{let A=R[T],h=new Int32Array(2);return h[0]=Math.trunc(A/12),h[1]=Math.trunc(A%12),h},XN=({values:R},T)=>R[T],GN=({values:R},T)=>R[T],xN=({values:R},T)=>R[T],FN=({values:R},T)=>R[T],S3=(R,T)=>{switch(R.type.unit){case XR.TimeUnit.SECOND:return XN(R,T);case XR.TimeUnit.MILLISECOND:return GN(R,T);case XR.TimeUnit.MICROSECOND:return xN(R,T);case XR.TimeUnit.NANOSECOND:return FN(R,T)}},y3=(R,T)=>{let{stride:A,children:h}=R,B=h[0].slice(T*A,A);return new WN.Vector([B])};$.prototype.visitNull=F(B3);$.prototype.visitBool=F(D3);$.prototype.visitInt=F(H3);$.prototype.visitInt8=F(c9);$.prototype.visitInt16=F(c9);$.prototype.visitInt32=F(c9);$.prototype.visitInt64=F(IN);$.prototype.visitUint8=F(c9);$.prototype.visitUint16=F(c9);$.prototype.visitUint32=F(c9);$.prototype.visitUint64=F(IN);$.prototype.visitFloat=F(i3);$.prototype.visitFloat16=F(_3);$.prototype.visitFloat32=F(c9);$.prototype.visitFloat64=F(c9);$.prototype.visitUtf8=F(SN);$.prototype.visitLargeUtf8=F(SN);$.prototype.visitBinary=F(kN);$.prototype.visitLargeBinary=F(kN);$.prototype.visitFixedSizeBinary=F(O3);$.prototype.visitDate=F(q3);$.prototype.visitDateDay=F(oN);$.prototype.visitDateMillisecond=F(JN);$.prototype.visitTimestamp=F(a3);$.prototype.visitTimestampSecond=F(yN);$.prototype.visitTimestampMillisecond=F(gN);$.prototype.visitTimestampMicrosecond=F(sN);$.prototype.visitTimestampNanosecond=F(PN);$.prototype.visitTime=F(L3);$.prototype.visitTimeSecond=F(tN);$.prototype.visitTimeMillisecond=F(KN);$.prototype.visitTimeMicrosecond=F(bN);$.prototype.visitTimeNanosecond=F(nN);$.prototype.visitDecimal=F(W3);$.prototype.visitList=F(N3);$.prototype.visitStruct=F(o3);$.prototype.visitUnion=F(J3);$.prototype.visitDenseUnion=F(EN);$.prototype.visitSparseUnion=F($N);$.prototype.visitDictionary=F(I3);$.prototype.visitInterval=F(k3);$.prototype.visitIntervalDayTime=F(pN);$.prototype.visitIntervalYearMonth=F(rN);$.prototype.visitDuration=F(S3);$.prototype.visitDurationSecond=F(XN);$.prototype.visitDurationMillisecond=F(GN);$.prototype.visitDurationMicrosecond=F(xN);$.prototype.visitDurationNanosecond=F(FN);$.prototype.visitFixedSizeList=F(y3);$.prototype.visitMap=F(c3);eN.instance=new $});var Wh=a((uN)=>{Object.defineProperty(uN,"__esModule",{value:!0});uN.MapRow=uN._kKeysAsStrings=uN.kKeysAsStrings=uN.kVals=uN.kKeys=void 0;var s3=dR(),lN=qh(),N_=w9(),P3=vR();uN.kKeys=Symbol.for("keys");uN.kVals=Symbol.for("vals");uN.kKeysAsStrings=Symbol.for("kKeysAsStrings");uN._kKeysAsStrings=Symbol.for("_kKeysAsStrings");class c_{constructor(R){return this[uN.kKeys]=new s3.Vector([R.children[0]]).memoize(),this[uN.kVals]=R.children[1],new Proxy(this,new jN)}get[uN.kKeysAsStrings](){return this[uN._kKeysAsStrings]||(this[uN._kKeysAsStrings]=Array.from(this[uN.kKeys].toArray(),String))}[Symbol.iterator](){return new dN(this[uN.kKeys],this[uN.kVals])}get size(){return this[uN.kKeys].length}toArray(){return Object.values(this.toJSON())}toJSON(){let R=this[uN.kKeys],T=this[uN.kVals],A={};for(let h=-1,C=R.length;++h<C;)A[R.get(h)]=N_.instance.visit(T,h);return A}toString(){return`{${[...this].map(([R,T])=>`${(0,lN.valueToString)(R)}: ${(0,lN.valueToString)(T)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}uN.MapRow=c_;class dN{constructor(R,T){this.keys=R,this.vals=T,this.keyIndex=0,this.numKeys=R.length}[Symbol.iterator](){return this}next(){let R=this.keyIndex;if(R===this.numKeys)return{done:!0,value:null};return this.keyIndex++,{done:!1,value:[this.keys.get(R),N_.instance.visit(this.vals,R)]}}}class jN{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(R){return R[uN.kKeysAsStrings]}has(R,T){return R[uN.kKeysAsStrings].includes(T)}getOwnPropertyDescriptor(R,T){if(R[uN.kKeysAsStrings].indexOf(T)!==-1)return{writable:!0,enumerable:!0,configurable:!0};return}get(R,T){if(Reflect.has(R,T))return R[T];let A=R[uN.kKeysAsStrings].indexOf(T);if(A!==-1){let h=N_.instance.visit(Reflect.get(R,uN.kVals),A);return Reflect.set(R,T,h),h}}set(R,T,A){let h=R[uN.kKeysAsStrings].indexOf(T);if(h!==-1)return P3.instance.visit(Reflect.get(R,uN.kVals),h,A),Reflect.set(R,T,A);else if(Reflect.has(R,T))return Reflect.set(R,T,A);return!1}}Object.defineProperties(c_.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[uN.kKeys]:{writable:!0,enumerable:!1,configurable:!1,value:null},[uN.kVals]:{writable:!0,enumerable:!1,configurable:!1,value:null},[uN._kKeysAsStrings]:{writable:!0,enumerable:!1,configurable:!1,value:null}})});var uA=a((zN)=>{Object.defineProperty(zN,"__esModule",{value:!0});zN.createElementComparator=zN.wrapIndex=zN.clampRange=void 0;var fN=dR(),t3=Wh(),K3=VC(),b3=bR(),wN;function n3(R,T,A,h){let{length:C=0}=R,B=typeof T!=="number"?0:T,D=typeof A!=="number"?C:A;return B<0&&(B=(B%C+C)%C),D<0&&(D=(D%C+C)%C),D<B&&(wN=B,B=D,D=wN),D>C&&(D=C),h?h(R,B,D):[B,D]}zN.clampRange=n3;var E3=(R,T)=>R<0?T+R:R;zN.wrapIndex=E3;var UN=(R)=>R!==R;function Nh(R){if(typeof R!=="object"||R===null){if(UN(R))return UN;return(A)=>A===R}if(R instanceof Date){let A=R.valueOf();return(h)=>h instanceof Date?h.valueOf()===A:!1}if(ArrayBuffer.isView(R))return(A)=>A?(0,b3.compareArrayLike)(R,A):!1;if(R instanceof Map)return p3(R);if(Array.isArray(R))return $3(R);if(R instanceof fN.Vector)return r3(R);return X3(R,!0)}zN.createElementComparator=Nh;function $3(R){let T=[];for(let A=-1,h=R.length;++A<h;)T[A]=Nh(R[A]);return RB(T)}function p3(R){let T=-1,A=[];for(let h of R.values())A[++T]=Nh(h);return RB(A)}function r3(R){let T=[];for(let A=-1,h=R.length;++A<h;)T[A]=Nh(R.get(A));return RB(T)}function X3(R,T=!1){let A=Object.keys(R);if(!T&&A.length===0)return()=>!1;let h=[];for(let C=-1,B=A.length;++C<B;)h[C]=Nh(R[A[C]]);return RB(h,A)}function RB(R,T){return(A)=>{if(!A||typeof A!=="object")return!1;switch(A.constructor){case Array:return G3(R,A);case Map:return QN(R,A,A.keys());case t3.MapRow:case K3.StructRow:case Object:case void 0:return QN(R,A,T||Object.keys(A))}return A instanceof fN.Vector?x3(R,A):!1}}function G3(R,T){let A=R.length;if(T.length!==A)return!1;for(let h=-1;++h<A;)if(!R[h](T[h]))return!1;return!0}function x3(R,T){let A=R.length;if(T.length!==A)return!1;for(let h=-1;++h<A;)if(!R[h](T.get(h)))return!1;return!0}function QN(R,T,A){let h=A[Symbol.iterator](),C=T instanceof Map?T.keys():Object.keys(T)[Symbol.iterator](),B=T instanceof Map?T.values():Object.values(T)[Symbol.iterator](),D=0,_=R.length,O=B.next(),H=h.next(),i=C.next();for(;D<_&&!H.done&&!i.done&&!O.done;++D,H=h.next(),i=C.next(),O=B.next())if(H.value!==i.value||!R[D](O.value))break;if(D===_&&H.done&&i.done&&O.done)return!0;return h.return&&h.return(),C.return&&C.return(),B.return&&B.return(),!1}});var M9=a((Rc)=>{Object.defineProperty(Rc,"__esModule",{value:!0});Rc.popcnt_uint32=Rc.popcnt_array=Rc.popcnt_bit_range=Rc.BitIterator=Rc.packBools=Rc.truncateBitmap=Rc.setBool=Rc.getBit=Rc.getBool=void 0;function vN(R,T,A,h){return(A&1<<h)!==0}Rc.getBool=vN;function VN(R,T,A,h){return(A&1<<h)>>h}Rc.getBit=VN;function l3(R,T,A){return A?!!(R[T>>3]|=1<<T%8)||!0:!(R[T>>3]&=~(1<<T%8))&&!1}Rc.setBool=l3;function d3(R,T,A){let h=A.byteLength+7&-8;if(R>0||A.byteLength<h){let C=new Uint8Array(h);return C.set(R%8===0?A.subarray(R>>3):mN(new AB(A,R,T,null,vN)).subarray(0,h)),C}return A}Rc.truncateBitmap=d3;function mN(R){let T=[],A=0,h=0,C=0;for(let D of R)if(D&&(C|=1<<h),++h===8)T[A++]=C,C=h=0;if(A===0||h>0)T[A++]=C;let B=new Uint8Array(T.length+7&-8);return B.set(T),B}Rc.packBools=mN;class AB{constructor(R,T,A,h,C){this.bytes=R,this.length=A,this.context=h,this.get=C,this.bit=T%8,this.byteIndex=T>>3,this.byte=R[this.byteIndex++],this.index=0}next(){if(this.index<this.length){if(this.bit===8)this.bit=0,this.byte=this.bytes[this.byteIndex++];return{value:this.get(this.context,this.index++,this.byte,this.bit++)}}return{done:!0,value:null}}[Symbol.iterator](){return this}}Rc.BitIterator=AB;function o_(R,T,A){if(A-T<=0)return 0;if(A-T<8){let B=0;for(let D of new AB(R,T,A-T,R,VN))B+=D;return B}let h=A>>3<<3,C=T+(T%8===0?0:8-T%8);return o_(R,T,C)+o_(R,h,A)+YN(R,C>>3,h-C>>3)}Rc.popcnt_bit_range=o_;function YN(R,T,A){let h=0,C=Math.trunc(T),B=new DataView(R.buffer,R.byteOffset,R.byteLength),D=A===void 0?R.byteLength:C+A;while(D-C>=4)h+=TB(B.getUint32(C)),C+=4;while(D-C>=2)h+=TB(B.getUint16(C)),C+=2;while(D-C>=1)h+=TB(B.getUint8(C)),C+=1;return h}Rc.popcnt_array=YN;function TB(R){let T=Math.trunc(R);return T=T-(T>>>1&1431655765),T=(T&858993459)+(T>>>2&858993459),(T+(T>>>4)&252645135)*16843009>>>24}Rc.popcnt_uint32=TB});var bT=a((Ac)=>{Object.defineProperty(Ac,"__esModule",{value:!0});Ac.makeData=Ac.Data=Ac.kUnknownNullCount=void 0;var M3=dR(),KT=NR(),wR=iR(),J_=M9();Ac.kUnknownNullCount=-1;class BR{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){let{type:R}=this;if(wR.DataType.isSparseUnion(R))return this.children.some((T)=>T.nullable);else if(wR.DataType.isDenseUnion(R))return this.children.some((T)=>T.nullable);return this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let R=0,{valueOffsets:T,values:A,nullBitmap:h,typeIds:C}=this;return T&&(R+=T.byteLength),A&&(R+=A.byteLength),h&&(R+=h.byteLength),C&&(R+=C.byteLength),this.children.reduce((B,D)=>B+D.byteLength,R)}get nullCount(){if(wR.DataType.isUnion(this.type))return this.children.reduce((A,h)=>A+h.nullCount,0);let R=this._nullCount,T;if(R<=Ac.kUnknownNullCount&&(T=this.nullBitmap))this._nullCount=R=T.length===0?0:this.length-(0,J_.popcnt_bit_range)(T,this.offset,this.offset+this.length);return R}constructor(R,T,A,h,C,B=[],D){this.type=R,this.children=B,this.dictionary=D,this.offset=Math.floor(Math.max(T||0,0)),this.length=Math.floor(Math.max(A||0,0)),this._nullCount=Math.floor(Math.max(h||0,-1));let _;if(C instanceof BR)this.stride=C.stride,this.values=C.values,this.typeIds=C.typeIds,this.nullBitmap=C.nullBitmap,this.valueOffsets=C.valueOffsets;else if(this.stride=(0,wR.strideForType)(R),C)(_=C[0])&&(this.valueOffsets=_),(_=C[1])&&(this.values=_),(_=C[2])&&(this.nullBitmap=_),(_=C[3])&&(this.typeIds=_)}getValid(R){let{type:T}=this;if(wR.DataType.isUnion(T)){let A=T,h=this.children[A.typeIdToChildIndex[this.typeIds[R]]],C=A.mode===KT.UnionMode.Dense?this.valueOffsets[R]:R;return h.getValid(C)}if(this.nullable&&this.nullCount>0){let A=this.offset+R;return(this.nullBitmap[A>>3]&1<<A%8)!==0}return!0}setValid(R,T){let A,{type:h}=this;if(wR.DataType.isUnion(h)){let C=h,B=this.children[C.typeIdToChildIndex[this.typeIds[R]]],D=C.mode===KT.UnionMode.Dense?this.valueOffsets[R]:R;A=B.getValid(D),B.setValid(D,T)}else{let{nullBitmap:C}=this,{offset:B,length:D}=this,_=B+R,O=1<<_%8,H=_>>3;if(!C||C.byteLength<=H)if(C=new Uint8Array((B+D+63&-64)>>3).fill(255),this.nullCount>0)C.set((0,J_.truncateBitmap)(B,D,this.nullBitmap),0),Object.assign(this,{nullBitmap:C});else Object.assign(this,{nullBitmap:C,_nullCount:0});let i=C[H];A=(i&O)!==0,C[H]=T?i|O:i&~O}if(A!==!!T)this._nullCount=this.nullCount+(T?-1:1);return T}clone(R=this.type,T=this.offset,A=this.length,h=this._nullCount,C=this,B=this.children){return new BR(R,T,A,h,C,B,this.dictionary)}slice(R,T){let{stride:A,typeId:h,children:C}=this,B=+(this._nullCount===0)-1,D=h===16?A:1,_=this._sliceBuffers(R,T,A,h);return this.clone(this.type,this.offset+R,T,B,_,C.length===0||this.valueOffsets?C:this._sliceChildren(C,D*R,D*T))}_changeLengthAndBackfillNullBitmap(R){if(this.typeId===KT.Type.Null)return this.clone(this.type,0,R,0);let{length:T,nullCount:A}=this,h=new Uint8Array((R+63&-64)>>3).fill(255,0,T>>3);if(h[T>>3]=(1<<T-(T&-8))-1,A>0)h.set((0,J_.truncateBitmap)(this.offset,T,this.nullBitmap),0);let C=this.buffers;return C[KT.BufferType.VALIDITY]=h,this.clone(this.type,0,R,A+(R-T),C)}_sliceBuffers(R,T,A,h){let C,{buffers:B}=this;return(C=B[KT.BufferType.TYPE])&&(B[KT.BufferType.TYPE]=C.subarray(R,R+T)),(C=B[KT.BufferType.OFFSET])&&(B[KT.BufferType.OFFSET]=C.subarray(R,R+T+1))||(C=B[KT.BufferType.DATA])&&(B[KT.BufferType.DATA]=h===6?C:C.subarray(A*R,A*(R+T))),B}_sliceChildren(R,T,A){return R.map((h)=>h.slice(T,A))}}Ac.Data=BR;BR.prototype.children=Object.freeze([]);var v3=ZR(),Q=bR();class ch extends v3.Visitor{visit(R){return this.getVisitFn(R.type).call(this,R)}visitNull(R){let{["type"]:T,["offset"]:A=0,["length"]:h=0}=R;return new BR(T,A,h,h)}visitBool(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.nullBitmap),C=(0,Q.toArrayBufferView)(T.ArrayType,R.data),{["length"]:B=C.length>>3,["nullCount"]:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,C,h])}visitInt(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.nullBitmap),C=(0,Q.toArrayBufferView)(T.ArrayType,R.data),{["length"]:B=C.length,["nullCount"]:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,C,h])}visitFloat(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.nullBitmap),C=(0,Q.toArrayBufferView)(T.ArrayType,R.data),{["length"]:B=C.length,["nullCount"]:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,C,h])}visitUtf8(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.data),C=(0,Q.toUint8Array)(R.nullBitmap),B=(0,Q.toInt32Array)(R.valueOffsets),{["length"]:D=B.length-1,["nullCount"]:_=R.nullBitmap?-1:0}=R;return new BR(T,A,D,_,[B,h,C])}visitLargeUtf8(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.data),C=(0,Q.toUint8Array)(R.nullBitmap),B=(0,Q.toBigInt64Array)(R.valueOffsets),{["length"]:D=B.length-1,["nullCount"]:_=R.nullBitmap?-1:0}=R;return new BR(T,A,D,_,[B,h,C])}visitBinary(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.data),C=(0,Q.toUint8Array)(R.nullBitmap),B=(0,Q.toInt32Array)(R.valueOffsets),{["length"]:D=B.length-1,["nullCount"]:_=R.nullBitmap?-1:0}=R;return new BR(T,A,D,_,[B,h,C])}visitLargeBinary(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.data),C=(0,Q.toUint8Array)(R.nullBitmap),B=(0,Q.toBigInt64Array)(R.valueOffsets),{["length"]:D=B.length-1,["nullCount"]:_=R.nullBitmap?-1:0}=R;return new BR(T,A,D,_,[B,h,C])}visitFixedSizeBinary(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.nullBitmap),C=(0,Q.toArrayBufferView)(T.ArrayType,R.data),{["length"]:B=C.length/(0,wR.strideForType)(T),["nullCount"]:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,C,h])}visitDate(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.nullBitmap),C=(0,Q.toArrayBufferView)(T.ArrayType,R.data),{["length"]:B=C.length/(0,wR.strideForType)(T),["nullCount"]:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,C,h])}visitTimestamp(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.nullBitmap),C=(0,Q.toArrayBufferView)(T.ArrayType,R.data),{["length"]:B=C.length/(0,wR.strideForType)(T),["nullCount"]:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,C,h])}visitTime(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.nullBitmap),C=(0,Q.toArrayBufferView)(T.ArrayType,R.data),{["length"]:B=C.length/(0,wR.strideForType)(T),["nullCount"]:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,C,h])}visitDecimal(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.nullBitmap),C=(0,Q.toArrayBufferView)(T.ArrayType,R.data),{["length"]:B=C.length/(0,wR.strideForType)(T),["nullCount"]:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,C,h])}visitList(R){let{["type"]:T,["offset"]:A=0,["child"]:h}=R,C=(0,Q.toUint8Array)(R.nullBitmap),B=(0,Q.toInt32Array)(R.valueOffsets),{["length"]:D=B.length-1,["nullCount"]:_=R.nullBitmap?-1:0}=R;return new BR(T,A,D,_,[B,void 0,C],[h])}visitStruct(R){let{["type"]:T,["offset"]:A=0,["children"]:h=[]}=R,C=(0,Q.toUint8Array)(R.nullBitmap),{length:B=h.reduce((_,{length:O})=>Math.max(_,O),0),nullCount:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,void 0,C],h)}visitUnion(R){let{["type"]:T,["offset"]:A=0,["children"]:h=[]}=R,C=(0,Q.toArrayBufferView)(T.ArrayType,R.typeIds),{["length"]:B=C.length,["nullCount"]:D=-1}=R;if(wR.DataType.isSparseUnion(T))return new BR(T,A,B,D,[void 0,void 0,void 0,C],h);let _=(0,Q.toInt32Array)(R.valueOffsets);return new BR(T,A,B,D,[_,void 0,void 0,C],h)}visitDictionary(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.nullBitmap),C=(0,Q.toArrayBufferView)(T.indices.ArrayType,R.data),{["dictionary"]:B=new M3.Vector([new ch().visit({type:T.dictionary})])}=R,{["length"]:D=C.length,["nullCount"]:_=R.nullBitmap?-1:0}=R;return new BR(T,A,D,_,[void 0,C,h],[],B)}visitInterval(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.nullBitmap),C=(0,Q.toArrayBufferView)(T.ArrayType,R.data),{["length"]:B=C.length/(0,wR.strideForType)(T),["nullCount"]:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,C,h])}visitDuration(R){let{["type"]:T,["offset"]:A=0}=R,h=(0,Q.toUint8Array)(R.nullBitmap),C=(0,Q.toArrayBufferView)(T.ArrayType,R.data),{["length"]:B=C.length,["nullCount"]:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,C,h])}visitFixedSizeList(R){let{["type"]:T,["offset"]:A=0,["child"]:h=new ch().visit({type:T.valueType})}=R,C=(0,Q.toUint8Array)(R.nullBitmap),{["length"]:B=h.length/(0,wR.strideForType)(T),["nullCount"]:D=R.nullBitmap?-1:0}=R;return new BR(T,A,B,D,[void 0,void 0,C],[h])}visitMap(R){let{["type"]:T,["offset"]:A=0,["child"]:h=new ch().visit({type:T.childType})}=R,C=(0,Q.toUint8Array)(R.nullBitmap),B=(0,Q.toInt32Array)(R.valueOffsets),{["length"]:D=B.length-1,["nullCount"]:_=R.nullBitmap?-1:0}=R;return new BR(T,A,D,_,[B,void 0,C],[h])}}var V3=new ch;function m3(R){return V3.visit(R)}Ac.makeData=m3});var CB=a((Dc)=>{Object.defineProperty(Dc,"__esModule",{value:!0});Dc.wrapChunkedIndexOf=Dc.wrapChunkedCall2=Dc.wrapChunkedCall1=Dc.isChunkedValid=Dc.binarySearch=Dc.sliceChunks=Dc.computeChunkOffsets=Dc.computeChunkNullCounts=Dc.computeChunkNullable=Dc.ChunkedIterator=void 0;class Bc{constructor(R=0,T){this.numChunks=R,this.getChunkIterator=T,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){while(this.chunkIndex<this.numChunks){let R=this.chunkIterator.next();if(!R.done)return R;if(++this.chunkIndex<this.numChunks)this.chunkIterator=this.getChunkIterator(this.chunkIndex)}return{done:!0,value:null}}[Symbol.iterator](){return this}}Dc.ChunkedIterator=Bc;function Rt(R){return R.some((T)=>T.nullable)}Dc.computeChunkNullable=Rt;function Tt(R){return R.reduce((T,A)=>T+A.nullCount,0)}Dc.computeChunkNullCounts=Tt;function At(R){return R.reduce((T,A,h)=>{return T[h+1]=T[h]+A.length,T},new Uint32Array(R.length+1))}Dc.computeChunkOffsets=At;function ht(R,T,A,h){let C=[];for(let B=-1,D=R.length;++B<D;){let _=R[B],O=T[B],{length:H}=_;if(O>=h)break;if(A>=O+H)continue;if(O>=A&&O+H<=h){C.push(_);continue}let i=Math.max(0,A-O),J=Math.min(h-O,H);C.push(_.slice(i,J-i))}if(C.length===0)C.push(R[0].slice(0,0));return C}Dc.sliceChunks=ht;function hB(R,T,A,h){let C=0,B=0,D=T.length-1;do{if(C>=D-1)return A<T[D]?h(R,C,A-T[C]):null;B=C+Math.trunc((D-C)*0.5),A<T[B]?D=B:C=B}while(C<D)}Dc.binarySearch=hB;function Ct(R,T){return R.getValid(T)}Dc.isChunkedValid=Ct;function Bt(R){function T(A,h,C){return R(A[h],C)}return function(A){let h=this.data;return hB(h,this._offsets,A,T)}}Dc.wrapChunkedCall1=Bt;function Dt(R){let T;function A(h,C,B){return R(h[C],B,T)}return function(h,C){let B=this.data;T=C;let D=hB(B,this._offsets,h,A);return T=void 0,D}}Dc.wrapChunkedCall2=Dt;function _t(R){let T;function A(h,C,B){let D=B,_=0,O=0;for(let H=C-1,i=h.length;++H<i;){let J=h[H];if(~(_=R(J,T,D)))return O+_;D=0,O+=J.length}return-1}return function(h,C){T=h;let B=this.data,D=typeof C!=="number"?A(B,0,0):hB(B,this._offsets,C,A);return T=void 0,D}}Dc.wrapChunkedIndexOf=_t});var BB=a((Lc)=>{Object.defineProperty(Lc,"__esModule",{value:!0});Lc.instance=Lc.IndexOfVisitor=void 0;var Oc=NR(),ot=ZR(),ic=w9(),Hc=M9(),qc=uA();class p extends ot.Visitor{}Lc.IndexOfVisitor=p;function Jt(R,T){return T===null&&R.length>0?0:-1}function It(R,T){let{nullBitmap:A}=R;if(!A||R.nullCount<=0)return-1;let h=0;for(let C of new Hc.BitIterator(A,R.offset+(T||0),R.length,A,Hc.getBool)){if(!C)return h;++h}return-1}function j(R,T,A){if(T===void 0)return-1;if(T===null)switch(R.typeId){case Oc.Type.Union:break;case Oc.Type.Dictionary:break;default:return It(R,A)}let h=ic.instance.getVisitFn(R),C=(0,qc.createElementComparator)(T);for(let B=(A||0)-1,D=R.length;++B<D;)if(C(h(R,B)))return B;return-1}function ac(R,T,A){let h=ic.instance.getVisitFn(R),C=(0,qc.createElementComparator)(T);for(let B=(A||0)-1,D=R.length;++B<D;)if(C(h(R,B)))return B;return-1}p.prototype.visitNull=Jt;p.prototype.visitBool=j;p.prototype.visitInt=j;p.prototype.visitInt8=j;p.prototype.visitInt16=j;p.prototype.visitInt32=j;p.prototype.visitInt64=j;p.prototype.visitUint8=j;p.prototype.visitUint16=j;p.prototype.visitUint32=j;p.prototype.visitUint64=j;p.prototype.visitFloat=j;p.prototype.visitFloat16=j;p.prototype.visitFloat32=j;p.prototype.visitFloat64=j;p.prototype.visitUtf8=j;p.prototype.visitLargeUtf8=j;p.prototype.visitBinary=j;p.prototype.visitLargeBinary=j;p.prototype.visitFixedSizeBinary=j;p.prototype.visitDate=j;p.prototype.visitDateDay=j;p.prototype.visitDateMillisecond=j;p.prototype.visitTimestamp=j;p.prototype.visitTimestampSecond=j;p.prototype.visitTimestampMillisecond=j;p.prototype.visitTimestampMicrosecond=j;p.prototype.visitTimestampNanosecond=j;p.prototype.visitTime=j;p.prototype.visitTimeSecond=j;p.prototype.visitTimeMillisecond=j;p.prototype.visitTimeMicrosecond=j;p.prototype.visitTimeNanosecond=j;p.prototype.visitDecimal=j;p.prototype.visitList=j;p.prototype.visitStruct=j;p.prototype.visitUnion=j;p.prototype.visitDenseUnion=ac;p.prototype.visitSparseUnion=ac;p.prototype.visitDictionary=j;p.prototype.visitInterval=j;p.prototype.visitIntervalDayTime=j;p.prototype.visitIntervalYearMonth=j;p.prototype.visitDuration=j;p.prototype.visitDurationSecond=j;p.prototype.visitDurationMillisecond=j;p.prototype.visitDurationMicrosecond=j;p.prototype.visitDurationNanosecond=j;p.prototype.visitFixedSizeList=j;p.prototype.visitMap=j;Lc.instance=new p});var DB=a((oc)=>{Object.defineProperty(oc,"__esModule",{value:!0});oc.instance=oc.IteratorVisitor=void 0;var St=ZR(),yt=NR(),I_=iR(),Nc=CB();class r extends St.Visitor{}oc.IteratorVisitor=r;function e(R){let{type:T}=R;if(R.nullCount===0&&R.stride===1&&(I_.DataType.isInt(T)&&T.bitWidth!==64||I_.DataType.isTime(T)&&T.bitWidth!==64||I_.DataType.isFloat(T)&&T.precision!==yt.Precision.HALF))return new Nc.ChunkedIterator(R.data.length,(h)=>{let C=R.data[h];return C.values.subarray(0,C.length)[Symbol.iterator]()});let A=0;return new Nc.ChunkedIterator(R.data.length,(h)=>{let B=R.data[h].length,D=R.slice(A,A+B);return A+=B,new cc(D)})}class cc{constructor(R){this.vector=R,this.index=0}next(){if(this.index<this.vector.length)return{value:this.vector.get(this.index++)};return{done:!0,value:null}}[Symbol.iterator](){return this}}r.prototype.visitNull=e;r.prototype.visitBool=e;r.prototype.visitInt=e;r.prototype.visitInt8=e;r.prototype.visitInt16=e;r.prototype.visitInt32=e;r.prototype.visitInt64=e;r.prototype.visitUint8=e;r.prototype.visitUint16=e;r.prototype.visitUint32=e;r.prototype.visitUint64=e;r.prototype.visitFloat=e;r.prototype.visitFloat16=e;r.prototype.visitFloat32=e;r.prototype.visitFloat64=e;r.prototype.visitUtf8=e;r.prototype.visitLargeUtf8=e;r.prototype.visitBinary=e;r.prototype.visitLargeBinary=e;r.prototype.visitFixedSizeBinary=e;r.prototype.visitDate=e;r.prototype.visitDateDay=e;r.prototype.visitDateMillisecond=e;r.prototype.visitTimestamp=e;r.prototype.visitTimestampSecond=e;r.prototype.visitTimestampMillisecond=e;r.prototype.visitTimestampMicrosecond=e;r.prototype.visitTimestampNanosecond=e;r.prototype.visitTime=e;r.prototype.visitTimeSecond=e;r.prototype.visitTimeMillisecond=e;r.prototype.visitTimeMicrosecond=e;r.prototype.visitTimeNanosecond=e;r.prototype.visitDecimal=e;r.prototype.visitList=e;r.prototype.visitStruct=e;r.prototype.visitUnion=e;r.prototype.visitDenseUnion=e;r.prototype.visitSparseUnion=e;r.prototype.visitDictionary=e;r.prototype.visitInterval=e;r.prototype.visitIntervalDayTime=e;r.prototype.visitIntervalYearMonth=e;r.prototype.visitDuration=e;r.prototype.visitDurationSecond=e;r.prototype.visitDurationMillisecond=e;r.prototype.visitDurationMicrosecond=e;r.prototype.visitDurationNanosecond=e;r.prototype.visitFixedSizeList=e;r.prototype.visitMap=e;oc.instance=new r});var dR=a((Kc)=>{var gc;Object.defineProperty(Kc,"__esModule",{value:!0});Kc.makeVector=Kc.Vector=void 0;var wT=NR(),Ic=uA(),ZA=iR(),UR=bT(),ET=CB(),kc=w9(),Sc=vR(),yc=BB(),st=DB(),sc={},Pc={};class hR{constructor(R){var T,A,h;let C=R[0]instanceof hR?R.flatMap((D)=>D.data):R;if(C.length===0||C.some((D)=>!(D instanceof UR.Data)))throw TypeError("Vector constructor expects an Array of Data instances.");let B=(T=C[0])===null||T===void 0?void 0:T.type;switch(C.length){case 0:this._offsets=[0];break;case 1:{let{get:D,set:_,indexOf:O}=sc[B.typeId],H=C[0];this.isValid=(i)=>(0,ET.isChunkedValid)(H,i),this.get=(i)=>D(H,i),this.set=(i,J)=>_(H,i,J),this.indexOf=(i)=>O(H,i),this._offsets=[0,H.length];break}default:Object.setPrototypeOf(this,Pc[B.typeId]),this._offsets=(0,ET.computeChunkOffsets)(C);break}this.data=C,this.type=B,this.stride=(0,ZA.strideForType)(B),this.numChildren=(h=(A=B.children)===null||A===void 0?void 0:A.length)!==null&&h!==void 0?h:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((R,T)=>R+T.byteLength,0)}get nullable(){return(0,ET.computeChunkNullable)(this.data)}get nullCount(){return(0,ET.computeChunkNullCounts)(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${wT.Type[this.type.typeId]}Vector`}isValid(R){return!1}get(R){return null}at(R){return this.get((0,Ic.wrapIndex)(R,this.length))}set(R,T){return}indexOf(R,T){return-1}includes(R,T){return this.indexOf(R,T)>-1}[Symbol.iterator](){return st.instance.visit(this)}concat(...R){return new hR(this.data.concat(R.flatMap((T)=>T.data).flat(Number.POSITIVE_INFINITY)))}slice(R,T){return new hR((0,Ic.clampRange)(this,R,T,({data:A,_offsets:h},C,B)=>(0,ET.sliceChunks)(A,h,C,B)))}toJSON(){return[...this]}toArray(){let{type:R,data:T,length:A,stride:h,ArrayType:C}=this;switch(R.typeId){case wT.Type.Int:case wT.Type.Float:case wT.Type.Decimal:case wT.Type.Time:case wT.Type.Timestamp:switch(T.length){case 0:return new C;case 1:return T[0].values.subarray(0,A*h);default:return T.reduce((B,{values:D,length:_})=>{return B.array.set(D.subarray(0,_*h),B.offset),B.offset+=_*h,B},{array:new C(A*h),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(R){var T;return this.getChildAt((T=this.type.children)===null||T===void 0?void 0:T.findIndex((A)=>A.name===R))}getChildAt(R){if(R>-1&&R<this.numChildren)return new hR(this.data.map(({children:T})=>T[R]));return null}get isMemoized(){if(ZA.DataType.isDictionary(this.type))return this.data[0].dictionary.isMemoized;return!1}memoize(){if(ZA.DataType.isDictionary(this.type)){let R=new _B(this.data[0].dictionary),T=this.data.map((A)=>{let h=A.clone();return h.dictionary=R,h});return new hR(T)}return new _B(this)}unmemoize(){if(ZA.DataType.isDictionary(this.type)&&this.isMemoized){let R=this.data[0].dictionary.unmemoize(),T=this.data.map((A)=>{let h=A.clone();return h.dictionary=R,h});return new hR(T)}return this}}Kc.Vector=hR;gc=Symbol.toStringTag;hR[gc]=((R)=>{R.type=ZA.DataType.prototype,R.data=[],R.length=0,R.stride=1,R.numChildren=0,R._offsets=new Uint32Array([0]),R[Symbol.isConcatSpreadable]=!0;let T=Object.keys(wT.Type).map((A)=>wT.Type[A]).filter((A)=>typeof A==="number"&&A!==wT.Type.NONE);for(let A of T){let h=kc.instance.getVisitFnByTypeId(A),C=Sc.instance.getVisitFnByTypeId(A),B=yc.instance.getVisitFnByTypeId(A);sc[A]={get:h,set:C,indexOf:B},Pc[A]=Object.create(R,{["isValid"]:{value:(0,ET.wrapChunkedCall1)(ET.isChunkedValid)},["get"]:{value:(0,ET.wrapChunkedCall1)(kc.instance.getVisitFnByTypeId(A))},["set"]:{value:(0,ET.wrapChunkedCall2)(Sc.instance.getVisitFnByTypeId(A))},["indexOf"]:{value:(0,ET.wrapChunkedIndexOf)(yc.instance.getVisitFnByTypeId(A))}})}return"Vector"})(hR.prototype);class _B extends hR{constructor(R){super(R.data);let T=this.get,A=this.set,h=this.slice,C=Array(this.length);Object.defineProperty(this,"get",{value(B){let D=C[B];if(D!==void 0)return D;let _=T.call(this,B);return C[B]=_,_}}),Object.defineProperty(this,"set",{value(B,D){A.call(this,B,D),C[B]=D}}),Object.defineProperty(this,"slice",{value:(B,D)=>new _B(h.call(this,B,D))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new hR(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}var nT=iR();function tc(R){if(R){if(R instanceof UR.Data)return new hR([R]);if(R instanceof hR)return new hR(R.data);if(R.type instanceof ZA.DataType)return new hR([(0,UR.makeData)(R)]);if(Array.isArray(R))return new hR(R.flatMap((T)=>Pt(T)));if(ArrayBuffer.isView(R)){if(R instanceof DataView)R=new Uint8Array(R.buffer);let T={offset:0,length:R.length,nullCount:-1,data:R};if(R instanceof Int8Array)return new hR([(0,UR.makeData)(Object.assign(Object.assign({},T),{type:new nT.Int8}))]);if(R instanceof Int16Array)return new hR([(0,UR.makeData)(Object.assign(Object.assign({},T),{type:new nT.Int16}))]);if(R instanceof Int32Array)return new hR([(0,UR.makeData)(Object.assign(Object.assign({},T),{type:new nT.Int32}))]);if(R instanceof BigInt64Array)return new hR([(0,UR.makeData)(Object.assign(Object.assign({},T),{type:new nT.Int64}))]);if(R instanceof Uint8Array||R instanceof Uint8ClampedArray)return new hR([(0,UR.makeData)(Object.assign(Object.assign({},T),{type:new nT.Uint8}))]);if(R instanceof Uint16Array)return new hR([(0,UR.makeData)(Object.assign(Object.assign({},T),{type:new nT.Uint16}))]);if(R instanceof Uint32Array)return new hR([(0,UR.makeData)(Object.assign(Object.assign({},T),{type:new nT.Uint32}))]);if(R instanceof BigUint64Array)return new hR([(0,UR.makeData)(Object.assign(Object.assign({},T),{type:new nT.Uint64}))]);if(R instanceof Float32Array)return new hR([(0,UR.makeData)(Object.assign(Object.assign({},T),{type:new nT.Float32}))]);if(R instanceof Float64Array)return new hR([(0,UR.makeData)(Object.assign(Object.assign({},T),{type:new nT.Float64}))]);throw Error("Unrecognized input")}}throw Error("Unrecognized input")}Kc.makeVector=tc;function Pt(R){return R instanceof UR.Data?[R]:R instanceof hR?R.data:tc(R).data}});var pc=a((Ec)=>{Object.defineProperty(Ec,"__esModule",{value:!0});Ec.createIsValidFunction=void 0;var nc=qh();function Kt(R){if(!R||R.length<=0)return function(C){return!0};let T="",A=R.filter((h)=>h===h);if(A.length>0)T=`
    switch (x) {${A.map((h)=>`
        case ${bt(h)}:`).join("")}
            return false;
    }`;if(R.length!==A.length)T=`if (x !== x) return false;
${T}`;return Function("x",`${T}
return true;`)}Ec.createIsValidFunction=Kt;function bt(R){if(typeof R!=="bigint")return(0,nc.valueToString)(R);return`${(0,nc.valueToString)(R)}n`}});var UT=a((xc)=>{Object.defineProperty(xc,"__esModule",{value:!0});xc.OffsetsBufferBuilder=xc.BitmapBufferBuilder=xc.DataBufferBuilder=xc.BufferBuilder=void 0;var nt=bR();function k_(R,T){let A=Math.ceil(R)*T-1;return(A-A%64+64||64)/T}function rc(R,T=0){return R.length>=T?R.subarray(0,T):(0,nt.memcpy)(new R.constructor(T),R,0)}class S_{constructor(R,T=0,A=1){this.length=Math.ceil(T/A),this.buffer=new R(this.length),this.stride=A,this.BYTES_PER_ELEMENT=R.BYTES_PER_ELEMENT,this.ArrayType=R}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(R,T){return this}append(R){return this.set(this.length,R)}reserve(R){if(R>0){this.length+=R;let T=this.stride,A=this.length*T,h=this.buffer.length;if(A>=h)this._resize(h===0?k_(A*1,this.BYTES_PER_ELEMENT):k_(A*2,this.BYTES_PER_ELEMENT))}return this}flush(R=this.length){R=k_(R*this.stride,this.BYTES_PER_ELEMENT);let T=rc(this.buffer,R);return this.clear(),T}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(R){return this.buffer=rc(this.buffer,R)}}xc.BufferBuilder=S_;class OB extends S_{last(){return this.get(this.length-1)}get(R){return this.buffer[R]}set(R,T){return this.reserve(R-this.length+1),this.buffer[R*this.stride]=T,this}}xc.DataBufferBuilder=OB;class Xc extends OB{constructor(){super(Uint8Array,0,0.125);this.numValid=0}get numInvalid(){return this.length-this.numValid}get(R){return this.buffer[R>>3]>>R%8&1}set(R,T){let{buffer:A}=this.reserve(R-this.length+1),h=R>>3,C=R%8,B=A[h]>>C&1;return T?B===0&&(A[h]|=1<<C,++this.numValid):B===1&&(A[h]&=~(1<<C),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}xc.BitmapBufferBuilder=Xc;class Gc extends OB{constructor(R){super(R.OffsetArrayType,1,1)}append(R){return this.set(this.length-1,R)}set(R,T){let A=this.length-1,h=this.reserve(R-A+1).buffer;if(A<R++&&A>=0)h.fill(h[A],A,R);return h[R]=h[R-1]+T,this}flush(R=this.length-1){if(R>this.length)this.set(R-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0);return super.flush(R+1)}}xc.OffsetsBufferBuilder=Gc});var aR=a((jc)=>{Object.defineProperty(jc,"__esModule",{value:!0});jc.VariableWidthBuilder=jc.FixedWidthBuilder=jc.Builder=void 0;var rt=dR(),Xt=bT(),ec=Wh(),Gt=iR(),xt=pc(),y_=UT();class $T{static throughNode(R){throw Error('"throughNode" not available in this environment')}static throughDOM(R){throw Error('"throughDOM" not available in this environment')}constructor({type:R,nullValues:T}){if(this.length=0,this.finished=!1,this.type=R,this.children=[],this.nullValues=T,this.stride=(0,Gt.strideForType)(R),this._nulls=new y_.BitmapBufferBuilder,T&&T.length>0)this._isValid=(0,xt.createIsValidFunction)(T)}toVector(){return new rt.Vector([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let R=0,{_offsets:T,_values:A,_nulls:h,_typeIds:C,children:B}=this;return T&&(R+=T.byteLength),A&&(R+=A.byteLength),h&&(R+=h.byteLength),C&&(R+=C.byteLength),B.reduce((D,_)=>D+_.byteLength,R)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let R=0;return this._offsets&&(R+=this._offsets.reservedByteLength),this._values&&(R+=this._values.reservedByteLength),this._nulls&&(R+=this._nulls.reservedByteLength),this._typeIds&&(R+=this._typeIds.reservedByteLength),this.children.reduce((T,A)=>T+A.reservedByteLength,R)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(R){return this.set(this.length,R)}isValid(R){return this._isValid(R)}set(R,T){if(this.setValid(R,this.isValid(T)))this.setValue(R,T);return this}setValue(R,T){this._setValue(this,R,T)}setValid(R,T){return this.length=this._nulls.set(R,+T).length,T}addChild(R,T=`${this.numChildren}`){throw Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(R){return this.children[R]||null}flush(){let R,T,A,h,{type:C,length:B,nullCount:D,_typeIds:_,_offsets:O,_values:H,_nulls:i}=this;if(T=_===null||_===void 0?void 0:_.flush(B))h=O===null||O===void 0?void 0:O.flush(B);else if(h=O===null||O===void 0?void 0:O.flush(B))R=H===null||H===void 0?void 0:H.flush(O.last());else R=H===null||H===void 0?void 0:H.flush(B);if(D>0)A=i===null||i===void 0?void 0:i.flush(B);let J=this.children.map((P)=>P.flush());return this.clear(),(0,Xt.makeData)({type:C,length:B,nullCount:D,children:J,child:J[0],data:R,typeIds:T,nullBitmap:A,valueOffsets:h})}finish(){this.finished=!0;for(let R of this.children)R.finish();return this}clear(){var R,T,A,h;this.length=0,(R=this._nulls)===null||R===void 0||R.clear(),(T=this._values)===null||T===void 0||T.clear(),(A=this._offsets)===null||A===void 0||A.clear(),(h=this._typeIds)===null||h===void 0||h.clear();for(let C of this.children)C.clear();return this}}jc.Builder=$T;$T.prototype.length=1;$T.prototype.stride=1;$T.prototype.children=null;$T.prototype.finished=!1;$T.prototype.nullValues=null;$T.prototype._isValid=()=>!0;class lc extends $T{constructor(R){super(R);this._values=new y_.DataBufferBuilder(this.ArrayType,0,this.stride)}setValue(R,T){let A=this._values;return A.reserve(R-A.length+1),super.setValue(R,T)}}jc.FixedWidthBuilder=lc;class dc extends $T{constructor(R){super(R);this._pendingLength=0,this._offsets=new y_.OffsetsBufferBuilder(R.type)}setValue(R,T){let A=this._pending||(this._pending=new Map),h=A.get(R);h&&(this._pendingLength-=h.length),this._pendingLength+=T instanceof ec.MapRow?T[ec.kKeys].length:T.length,A.set(R,T)}setValid(R,T){if(!super.setValid(R,T))return(this._pending||(this._pending=new Map)).set(R,void 0),!1;return!0}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){let R=this._pending,T=this._pendingLength;if(this._pendingLength=0,this._pending=void 0,R&&R.size>0)this._flushPending(R,T);return this}}jc.VariableWidthBuilder=dc});var g_=a((wc)=>{Object.defineProperty(wc,"__esModule",{value:!0});wc.Block=void 0;class Zc{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(R,T,A,h){return R.prep(8,24),R.writeInt64(BigInt(h!==null&&h!==void 0?h:0)),R.pad(4),R.writeInt32(A),R.writeInt64(BigInt(T!==null&&T!==void 0?T:0)),R.offset()}}wc.Block=Zc});var vc=a((zc)=>{Object.defineProperty(zc,"__esModule",{value:!0});zc.Footer=void 0;var lt=f(),Qc=g_(),dt=SA(),fc=_C(),jt=PC();class HB{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsFooter(R,T){return(T||new HB).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsFooter(R,T){return R.setPosition(R.position()+lt.SIZE_PREFIX_LENGTH),(T||new HB).__init(R.readInt32(R.position())+R.position(),R)}version(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt16(this.bb_pos+R):fc.MetadataVersion.V1}schema(R){let T=this.bb.__offset(this.bb_pos,6);return T?(R||new jt.Schema).__init(this.bb.__indirect(this.bb_pos+T),this.bb):null}dictionaries(R,T){let A=this.bb.__offset(this.bb_pos,8);return A?(T||new Qc.Block).__init(this.bb.__vector(this.bb_pos+A)+R*24,this.bb):null}dictionariesLength(){let R=this.bb.__offset(this.bb_pos,8);return R?this.bb.__vector_len(this.bb_pos+R):0}recordBatches(R,T){let A=this.bb.__offset(this.bb_pos,10);return A?(T||new Qc.Block).__init(this.bb.__vector(this.bb_pos+A)+R*24,this.bb):null}recordBatchesLength(){let R=this.bb.__offset(this.bb_pos,10);return R?this.bb.__vector_len(this.bb_pos+R):0}customMetadata(R,T){let A=this.bb.__offset(this.bb_pos,12);return A?(T||new dt.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+A)+R*4),this.bb):null}customMetadataLength(){let R=this.bb.__offset(this.bb_pos,12);return R?this.bb.__vector_len(this.bb_pos+R):0}static startFooter(R){R.startObject(5)}static addVersion(R,T){R.addFieldInt16(0,T,fc.MetadataVersion.V1)}static addSchema(R,T){R.addFieldOffset(1,T,0)}static addDictionaries(R,T){R.addFieldOffset(2,T,0)}static startDictionariesVector(R,T){R.startVector(24,T,8)}static addRecordBatches(R,T){R.addFieldOffset(3,T,0)}static startRecordBatchesVector(R,T){R.startVector(24,T,8)}static addCustomMetadata(R,T){R.addFieldOffset(4,T,0)}static createCustomMetadataVector(R,T){R.startVector(4,T.length,4);for(let A=T.length-1;A>=0;A--)R.addOffset(T[A]);return R.endVector()}static startCustomMetadataVector(R,T){R.startVector(4,T,4)}static endFooter(R){return R.endObject()}static finishFooterBuffer(R,T){R.finish(T)}static finishSizePrefixedFooterBuffer(R,T){R.finish(T,void 0,!0)}}zc.Footer=HB});var QR=a((Vc)=>{Object.defineProperty(Vc,"__esModule",{value:!0});Vc.Field=Vc.Schema=void 0;var ut=NR(),Zt=iR();class WT{constructor(R=[],T,A,h=ut.MetadataVersion.V5){if(this.fields=R||[],this.metadata=T||new Map,!A)A=s_(this.fields);this.dictionaries=A,this.metadataVersion=h}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((R)=>R.name)}toString(){return`Schema<{ ${this.fields.map((R,T)=>`${T}: ${R}`).join(", ")} }>`}select(R){let T=new Set(R),A=this.fields.filter((h)=>T.has(h.name));return new WT(A,this.metadata)}selectAt(R){let T=R.map((A)=>this.fields[A]).filter(Boolean);return new WT(T,this.metadata)}assign(...R){let T=R[0]instanceof WT?R[0]:Array.isArray(R[0])?new WT(R[0]):new WT(R),A=[...this.fields],h=iB(iB(new Map,this.metadata),T.metadata),C=T.fields.filter((D)=>{let _=A.findIndex((O)=>O.name===D.name);return~_?(A[_]=D.clone({metadata:iB(iB(new Map,A[_].metadata),D.metadata)}))&&!1:!0}),B=s_(C,new Map);return new WT([...A,...C],h,new Map([...this.dictionaries,...B]))}}Vc.Schema=WT;WT.prototype.fields=null;WT.prototype.metadata=null;WT.prototype.dictionaries=null;class o9{static new(...R){let[T,A,h,C]=R;if(R[0]&&typeof R[0]==="object")({name:T}=R[0]),A===void 0&&(A=R[0].type),h===void 0&&(h=R[0].nullable),C===void 0&&(C=R[0].metadata);return new o9(`${T}`,A,h,C)}constructor(R,T,A=!1,h){this.name=R,this.type=T,this.nullable=A,this.metadata=h||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...R){let[T,A,h,C]=R;return!R[0]||typeof R[0]!=="object"?[T=this.name,A=this.type,h=this.nullable,C=this.metadata]=R:{name:T=this.name,type:A=this.type,nullable:h=this.nullable,metadata:C=this.metadata}=R[0],o9.new(T,A,h,C)}}Vc.Field=o9;o9.prototype.type=null;o9.prototype.name=null;o9.prototype.nullable=null;o9.prototype.metadata=null;function iB(R,T){return new Map([...R||new Map,...T||new Map])}function s_(R,T=new Map){for(let A=-1,h=R.length;++A<h;){let B=R[A].type;if(Zt.DataType.isDictionary(B)){if(!T.has(B.id))T.set(B.id,B.dictionary);else if(T.get(B.id)!==B.dictionary)throw Error("Cannot create Schema containing two different dictionaries with the same Id")}if(B.children&&B.children.length>0)s_(B.children,T)}return T}});var t_=a((Co)=>{Object.defineProperty(Co,"__esModule",{value:!0});Co.FileBlock=Co.Footer=void 0;var Ut=g_(),pT=vc(),Ao=f(),Qt=Ao.Builder,ft=Ao.ByteBuffer,Yc=QR(),Ro=NR(),zt=bR(),To=q9();class P_{static decode(R){R=new ft((0,zt.toUint8Array)(R));let T=pT.Footer.getRootAsFooter(R),A=Yc.Schema.decode(T.schema(),new Map,T.version());return new ho(A,T)}static encode(R){let T=new Qt,A=Yc.Schema.encode(T,R.schema);pT.Footer.startRecordBatchesVector(T,R.numRecordBatches);for(let B of[...R.recordBatches()].slice().reverse())v9.encode(T,B);let h=T.endVector();pT.Footer.startDictionariesVector(T,R.numDictionaries);for(let B of[...R.dictionaryBatches()].slice().reverse())v9.encode(T,B);let C=T.endVector();return pT.Footer.startFooter(T),pT.Footer.addSchema(T,A),pT.Footer.addVersion(T,Ro.MetadataVersion.V5),pT.Footer.addRecordBatches(T,h),pT.Footer.addDictionaries(T,C),pT.Footer.finishFooterBuffer(T,pT.Footer.endFooter(T)),T.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(R,T=Ro.MetadataVersion.V5,A,h){this.schema=R,this.version=T,A&&(this._recordBatches=A),h&&(this._dictionaryBatches=h)}*recordBatches(){for(let R,T=-1,A=this.numRecordBatches;++T<A;)if(R=this.getRecordBatch(T))yield R}*dictionaryBatches(){for(let R,T=-1,A=this.numDictionaries;++T<A;)if(R=this.getDictionaryBatch(T))yield R}getRecordBatch(R){return R>=0&&R<this.numRecordBatches&&this._recordBatches[R]||null}getDictionaryBatch(R){return R>=0&&R<this.numDictionaries&&this._dictionaryBatches[R]||null}}Co.Footer=P_;class ho extends P_{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(R,T){super(R,T.version());this._footer=T}getRecordBatch(R){if(R>=0&&R<this.numRecordBatches){let T=this._footer.recordBatches(R);if(T)return v9.decode(T)}return null}getDictionaryBatch(R){if(R>=0&&R<this.numDictionaries){let T=this._footer.dictionaries(R);if(T)return v9.decode(T)}return null}}class v9{static decode(R){return new v9(R.metaDataLength(),R.bodyLength(),R.offset())}static encode(R,T){let{metaDataLength:A}=T,h=BigInt(T.offset),C=BigInt(T.bodyLength);return Ut.Block.createBlock(R,h,A,C)}constructor(R,T,A){this.metaDataLength=R,this.offset=(0,To.bigIntToNumber)(A),this.bodyLength=(0,To.bigIntToNumber)(T)}}Co.FileBlock=v9});var Ih=a((Ho)=>{Object.defineProperty(Ho,"__esModule",{value:!0});Ho.AsyncQueue=Ho.ReadableInterop=Ho.ArrowJSON=Ho.ITERATOR_DONE=void 0;var oh=KR(),Do=kA();Ho.ITERATOR_DONE=Object.freeze({done:!0,value:void 0});class _o{constructor(R){this._json=R}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}Ho.ArrowJSON=_o;class K_{tee(){return this._getDOMStream().tee()}pipe(R,T){return this._getNodeStream().pipe(R,T)}pipeTo(R,T){return this._getDOMStream().pipeTo(R,T)}pipeThrough(R,T){return this._getDOMStream().pipeThrough(R,T)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}Ho.ReadableInterop=K_;class Oo extends K_{constructor(){super();this._values=[],this.resolvers=[],this._closedPromise=new Promise((R)=>this._closedPromiseResolve=R)}get closed(){return this._closedPromise}cancel(R){return oh.__awaiter(this,void 0,void 0,function*(){yield this.return(R)})}write(R){if(this._ensureOpen())this.resolvers.length<=0?this._values.push(R):this.resolvers.shift().resolve({done:!1,value:R})}abort(R){if(this._closedPromiseResolve)this.resolvers.length<=0?this._error={error:R}:this.resolvers.shift().reject({done:!0,value:R})}close(){if(this._closedPromiseResolve){let{resolvers:R}=this;while(R.length>0)R.shift().resolve(Ho.ITERATOR_DONE);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(R){return Do.default.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,R)}toNodeStream(R){return Do.default.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,R)}throw(R){return oh.__awaiter(this,void 0,void 0,function*(){return yield this.abort(R),Ho.ITERATOR_DONE})}return(R){return oh.__awaiter(this,void 0,void 0,function*(){return yield this.close(),Ho.ITERATOR_DONE})}read(R){return oh.__awaiter(this,void 0,void 0,function*(){return(yield this.next(R,"read")).value})}peek(R){return oh.__awaiter(this,void 0,void 0,function*(){return(yield this.next(R,"peek")).value})}next(...R){if(this._values.length>0)return Promise.resolve({done:!1,value:this._values.shift()});else if(this._error)return Promise.reject({done:!0,value:this._error.error});else if(!this._closedPromiseResolve)return Promise.resolve(Ho.ITERATOR_DONE);else return new Promise((T,A)=>{this.resolvers.push({resolve:T,reject:A})})}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw Error("AsyncQueue is closed")}}Ho.AsyncQueue=Oo});var rT=a((Wo)=>{Object.defineProperty(Wo,"__esModule",{value:!0});Wo.AsyncByteStream=Wo.ByteStream=Wo.AsyncByteQueue=void 0;var k9=KR(),J9=kA(),qo=T9(),kh=Ih(),b_=bR(),wA=jT();class n_ extends kh.AsyncQueue{write(R){if((R=(0,b_.toUint8Array)(R)).byteLength>0)return super.write(R)}toString(R=!1){return R?(0,qo.decodeUtf8)(this.toUint8Array(!0)):this.toUint8Array(!1).then(qo.decodeUtf8)}toUint8Array(R=!1){return R?(0,b_.joinUint8Arrays)(this._values)[0]:(()=>k9.__awaiter(this,void 0,void 0,function*(){var T,A,h,C;let B=[],D=0;try{for(var _=!0,O=k9.__asyncValues(this),H;H=yield O.next(),T=H.done,!T;_=!0){C=H.value,_=!1;let i=C;B.push(i),D+=i.byteLength}}catch(i){A={error:i}}finally{try{if(!_&&!T&&(h=O.return))yield h.call(O)}finally{if(A)throw A.error}}return(0,b_.joinUint8Arrays)(B,D)[0]}))()}}Wo.AsyncByteQueue=n_;class ao{constructor(R){if(R)this.source=new Lo(J9.default.fromIterable(R))}[Symbol.iterator](){return this}next(R){return this.source.next(R)}throw(R){return this.source.throw(R)}return(R){return this.source.return(R)}peek(R){return this.source.peek(R)}read(R){return this.source.read(R)}}Wo.ByteStream=ao;class E_{constructor(R){if(R instanceof E_)this.source=R.source;else if(R instanceof n_)this.source=new I9(J9.default.fromAsyncIterable(R));else if((0,wA.isReadableNodeStream)(R))this.source=new I9(J9.default.fromNodeStream(R));else if((0,wA.isReadableDOMStream)(R))this.source=new I9(J9.default.fromDOMStream(R));else if((0,wA.isFetchResponse)(R))this.source=new I9(J9.default.fromDOMStream(R.body));else if((0,wA.isIterable)(R))this.source=new I9(J9.default.fromIterable(R));else if((0,wA.isPromise)(R))this.source=new I9(J9.default.fromAsyncIterable(R));else if((0,wA.isAsyncIterable)(R))this.source=new I9(J9.default.fromAsyncIterable(R))}[Symbol.asyncIterator](){return this}next(R){return this.source.next(R)}throw(R){return this.source.throw(R)}return(R){return this.source.return(R)}get closed(){return this.source.closed}cancel(R){return this.source.cancel(R)}peek(R){return this.source.peek(R)}read(R){return this.source.read(R)}}Wo.AsyncByteStream=E_;class Lo{constructor(R){this.source=R}cancel(R){this.return(R)}peek(R){return this.next(R,"peek").value}read(R){return this.next(R,"read").value}next(R,T="read"){return this.source.next({cmd:T,size:R})}throw(R){return Object.create(this.source.throw&&this.source.throw(R)||kh.ITERATOR_DONE)}return(R){return Object.create(this.source.return&&this.source.return(R)||kh.ITERATOR_DONE)}}class I9{constructor(R){this.source=R,this._closedPromise=new Promise((T)=>this._closedPromiseResolve=T)}cancel(R){return k9.__awaiter(this,void 0,void 0,function*(){yield this.return(R)})}get closed(){return this._closedPromise}read(R){return k9.__awaiter(this,void 0,void 0,function*(){return(yield this.next(R,"read")).value})}peek(R){return k9.__awaiter(this,void 0,void 0,function*(){return(yield this.next(R,"peek")).value})}next(R){return k9.__awaiter(this,arguments,void 0,function*(T,A="read"){return yield this.source.next({cmd:A,size:T})})}throw(R){return k9.__awaiter(this,void 0,void 0,function*(){let T=this.source.throw&&(yield this.source.throw(R))||kh.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(T)})}return(R){return k9.__awaiter(this,void 0,void 0,function*(){let T=this.source.return&&(yield this.source.return(R))||kh.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(T)})}}});var $_=a((Io)=>{Object.defineProperty(Io,"__esModule",{value:!0});Io.AsyncRandomAccessFile=Io.RandomAccessFile=void 0;var S9=KR(),co=rT(),RK=bR();class oo extends co.ByteStream{constructor(R,T){super();this.position=0,this.buffer=(0,RK.toUint8Array)(R),this.size=T===void 0?this.buffer.byteLength:T}readInt32(R){let{buffer:T,byteOffset:A}=this.readAt(R,4);return new DataView(T,A).getInt32(0,!0)}seek(R){return this.position=Math.min(R,this.size),R<this.size}read(R){let{buffer:T,size:A,position:h}=this;if(T&&h<A){if(typeof R!=="number")R=Number.POSITIVE_INFINITY;return this.position=Math.min(A,h+Math.min(A-h,R)),T.subarray(h,this.position)}return null}readAt(R,T){let A=this.buffer,h=Math.min(this.size,R+T);return A?A.subarray(R,h):new Uint8Array(T)}close(){this.buffer&&(this.buffer=null)}throw(R){return this.close(),{done:!0,value:R}}return(R){return this.close(),{done:!0,value:R}}}Io.RandomAccessFile=oo;class Jo extends co.AsyncByteStream{constructor(R,T){super();if(this.position=0,this._handle=R,typeof T==="number")this.size=T;else this._pending=(()=>S9.__awaiter(this,void 0,void 0,function*(){this.size=(yield R.stat()).size,delete this._pending}))()}readInt32(R){return S9.__awaiter(this,void 0,void 0,function*(){let{buffer:T,byteOffset:A}=yield this.readAt(R,4);return new DataView(T,A).getInt32(0,!0)})}seek(R){return S9.__awaiter(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(R,this.size),R<this.size})}read(R){return S9.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:T,size:A,position:h}=this;if(T&&h<A){if(typeof R!=="number")R=Number.POSITIVE_INFINITY;let C=h,B=0,D=0,_=Math.min(A,C+Math.min(A-C,R)),O=new Uint8Array(Math.max(0,(this.position=_)-C));while((C+=D)<_&&(B+=D)<O.byteLength)({bytesRead:D}=yield T.read(O,B,O.byteLength-B,C));return O}return null})}readAt(R,T){return S9.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:A,size:h}=this;if(A&&R+T<h){let C=Math.min(h,R+T),B=new Uint8Array(C-R);return(yield A.read(B,0,T,R)).buffer}return new Uint8Array(T)})}close(){return S9.__awaiter(this,void 0,void 0,function*(){let R=this._handle;this._handle=null,R&&(yield R.close())})}throw(R){return S9.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:R}})}return(R){return S9.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:R}})}}Io.AsyncRandomAccessFile=Jo});var r_=a((So)=>{Object.defineProperty(So,"__esModule",{value:!0});So.Int128=So.Int64=So.Uint64=So.BaseInt64=void 0;var AK=65536;function UA(R){if(R<0)R=4294967295+R+1;return`0x${R.toString(16)}`}var QA=8,p_=[1,10,100,1000,1e4,1e5,1e6,1e7,1e8];class qB{constructor(R){this.buffer=R}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(R){let T=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),A=new Uint32Array([R.buffer[1]>>>16,R.buffer[1]&65535,R.buffer[0]>>>16,R.buffer[0]&65535]),h=T[3]*A[3];this.buffer[0]=h&65535;let C=h>>>16;return h=T[2]*A[3],C+=h,h=T[3]*A[2]>>>0,C+=h,this.buffer[0]+=C<<16,this.buffer[1]=C>>>0<h?AK:0,this.buffer[1]+=C>>>16,this.buffer[1]+=T[1]*A[3]+T[2]*A[2]+T[3]*A[1],this.buffer[1]+=T[0]*A[3]+T[1]*A[2]+T[2]*A[1]+T[3]*A[0]<<16,this}_plus(R){let T=this.buffer[0]+R.buffer[0]>>>0;if(this.buffer[1]+=R.buffer[1],T<this.buffer[0]>>>0)++this.buffer[1];this.buffer[0]=T}lessThan(R){return this.buffer[1]<R.buffer[1]||this.buffer[1]===R.buffer[1]&&this.buffer[0]<R.buffer[0]}equals(R){return this.buffer[1]===R.buffer[1]&&this.buffer[0]==R.buffer[0]}greaterThan(R){return R.lessThan(this)}hex(){return`${UA(this.buffer[1])} ${UA(this.buffer[0])}`}}So.BaseInt64=qB;class RR extends qB{times(R){return this._times(R),this}plus(R){return this._plus(R),this}static from(R,T=new Uint32Array(2)){return RR.fromString(typeof R==="string"?R:R.toString(),T)}static fromNumber(R,T=new Uint32Array(2)){return RR.fromString(R.toString(),T)}static fromString(R,T=new Uint32Array(2)){let A=R.length,h=new RR(T);for(let C=0;C<A;){let B=QA<A-C?QA:A-C,D=new RR(new Uint32Array([Number.parseInt(R.slice(C,C+B),10),0])),_=new RR(new Uint32Array([p_[B],0]));h.times(_),h.plus(D),C+=B}return h}static convertArray(R){let T=new Uint32Array(R.length*2);for(let A=-1,h=R.length;++A<h;)RR.from(R[A],new Uint32Array(T.buffer,T.byteOffset+2*A*4,2));return T}static multiply(R,T){return new RR(new Uint32Array(R.buffer)).times(T)}static add(R,T){return new RR(new Uint32Array(R.buffer)).plus(T)}}So.Uint64=RR;class YR extends qB{negate(){if(this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0)++this.buffer[1];return this}times(R){return this._times(R),this}plus(R){return this._plus(R),this}lessThan(R){let T=this.buffer[1]<<0,A=R.buffer[1]<<0;return T<A||T===A&&this.buffer[0]<R.buffer[0]}static from(R,T=new Uint32Array(2)){return YR.fromString(typeof R==="string"?R:R.toString(),T)}static fromNumber(R,T=new Uint32Array(2)){return YR.fromString(R.toString(),T)}static fromString(R,T=new Uint32Array(2)){let A=R.startsWith("-"),h=R.length,C=new YR(T);for(let B=A?1:0;B<h;){let D=QA<h-B?QA:h-B,_=new YR(new Uint32Array([Number.parseInt(R.slice(B,B+D),10),0])),O=new YR(new Uint32Array([p_[D],0]));C.times(O),C.plus(_),B+=D}return A?C.negate():C}static convertArray(R){let T=new Uint32Array(R.length*2);for(let A=-1,h=R.length;++A<h;)YR.from(R[A],new Uint32Array(T.buffer,T.byteOffset+2*A*4,2));return T}static multiply(R,T){return new YR(new Uint32Array(R.buffer)).times(T)}static add(R,T){return new YR(new Uint32Array(R.buffer)).plus(T)}}So.Int64=YR;class XT{constructor(R){this.buffer=R}high(){return new YR(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new YR(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){if(this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0)++this.buffer[1];if(this.buffer[1]==0)++this.buffer[2];if(this.buffer[2]==0)++this.buffer[3];return this}times(R){let T=new RR(new Uint32Array([this.buffer[3],0])),A=new RR(new Uint32Array([this.buffer[2],0])),h=new RR(new Uint32Array([this.buffer[1],0])),C=new RR(new Uint32Array([this.buffer[0],0])),B=new RR(new Uint32Array([R.buffer[3],0])),D=new RR(new Uint32Array([R.buffer[2],0])),_=new RR(new Uint32Array([R.buffer[1],0])),O=new RR(new Uint32Array([R.buffer[0],0])),H=RR.multiply(C,O);this.buffer[0]=H.low();let i=new RR(new Uint32Array([H.high(),0]));return H=RR.multiply(h,O),i.plus(H),H=RR.multiply(C,_),i.plus(H),this.buffer[1]=i.low(),this.buffer[3]=i.lessThan(H)?1:0,this.buffer[2]=i.high(),new RR(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(RR.multiply(A,O)).plus(RR.multiply(h,_)).plus(RR.multiply(C,D)),this.buffer[3]+=RR.multiply(T,O).plus(RR.multiply(A,_)).plus(RR.multiply(h,D)).plus(RR.multiply(C,B)).low(),this}plus(R){let T=new Uint32Array(4);if(T[3]=this.buffer[3]+R.buffer[3]>>>0,T[2]=this.buffer[2]+R.buffer[2]>>>0,T[1]=this.buffer[1]+R.buffer[1]>>>0,T[0]=this.buffer[0]+R.buffer[0]>>>0,T[0]<this.buffer[0]>>>0)++T[1];if(T[1]<this.buffer[1]>>>0)++T[2];if(T[2]<this.buffer[2]>>>0)++T[3];return this.buffer[3]=T[3],this.buffer[2]=T[2],this.buffer[1]=T[1],this.buffer[0]=T[0],this}hex(){return`${UA(this.buffer[3])} ${UA(this.buffer[2])} ${UA(this.buffer[1])} ${UA(this.buffer[0])}`}static multiply(R,T){return new XT(new Uint32Array(R.buffer)).times(T)}static add(R,T){return new XT(new Uint32Array(R.buffer)).plus(T)}static from(R,T=new Uint32Array(4)){return XT.fromString(typeof R==="string"?R:R.toString(),T)}static fromNumber(R,T=new Uint32Array(4)){return XT.fromString(R.toString(),T)}static fromString(R,T=new Uint32Array(4)){let A=R.startsWith("-"),h=R.length,C=new XT(T);for(let B=A?1:0;B<h;){let D=QA<h-B?QA:h-B,_=new XT(new Uint32Array([Number.parseInt(R.slice(B,B+D),10),0,0,0])),O=new XT(new Uint32Array([p_[D],0,0,0]));C.times(O),C.plus(_),B+=D}return A?C.negate():C}static convertArray(R){let T=new Uint32Array(R.length*4);for(let A=-1,h=R.length;++A<h;)XT.from(R[A],new Uint32Array(T.buffer,T.byteOffset+16*A,4));return T}}So.Int128=XT});var Ko=a((Po)=>{Object.defineProperty(Po,"__esModule",{value:!0});Po.JSONVectorLoader=Po.VectorLoader=void 0;var oR=bT(),DK=QR(),RT=iR(),_K=ZR(),go=M9(),OK=T9(),aB=r_(),LB=NR(),GT=bR();class X_ extends _K.Visitor{constructor(R,T,A,h,C=LB.MetadataVersion.V5){super();this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=R,this.nodes=T,this.buffers=A,this.dictionaries=h,this.metadataVersion=C}visit(R){return super.visit(R instanceof DK.Field?R.type:R)}visitNull(R,{length:T}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T})}visitBool(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),data:this.readData(R)})}visitInt(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),data:this.readData(R)})}visitFloat(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),data:this.readData(R)})}visitUtf8(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),valueOffsets:this.readOffsets(R),data:this.readData(R)})}visitLargeUtf8(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),valueOffsets:this.readOffsets(R),data:this.readData(R)})}visitBinary(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),valueOffsets:this.readOffsets(R),data:this.readData(R)})}visitLargeBinary(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),valueOffsets:this.readOffsets(R),data:this.readData(R)})}visitFixedSizeBinary(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),data:this.readData(R)})}visitDate(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),data:this.readData(R)})}visitTimestamp(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),data:this.readData(R)})}visitTime(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),data:this.readData(R)})}visitDecimal(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),data:this.readData(R)})}visitList(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),valueOffsets:this.readOffsets(R),child:this.visit(R.children[0])})}visitStruct(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),children:this.visitMany(R.children)})}visitUnion(R,{length:T,nullCount:A}=this.nextFieldNode()){if(this.metadataVersion<LB.MetadataVersion.V5)this.readNullBitmap(R,A);return R.mode===LB.UnionMode.Sparse?this.visitSparseUnion(R,{length:T,nullCount:A}):this.visitDenseUnion(R,{length:T,nullCount:A})}visitDenseUnion(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,typeIds:this.readTypeIds(R),valueOffsets:this.readOffsets(R),children:this.visitMany(R.children)})}visitSparseUnion(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,typeIds:this.readTypeIds(R),children:this.visitMany(R.children)})}visitDictionary(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),data:this.readData(R.indices),dictionary:this.readDictionary(R)})}visitInterval(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),data:this.readData(R)})}visitDuration(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),data:this.readData(R)})}visitFixedSizeList(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),child:this.visit(R.children[0])})}visitMap(R,{length:T,nullCount:A}=this.nextFieldNode()){return(0,oR.makeData)({type:R,length:T,nullCount:A,nullBitmap:this.readNullBitmap(R,A),valueOffsets:this.readOffsets(R),child:this.visit(R.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(R,T,A=this.nextBufferRange()){return T>0&&this.readData(R,A)||new Uint8Array(0)}readOffsets(R,T){return this.readData(R,T)}readTypeIds(R,T){return this.readData(R,T)}readData(R,{length:T,offset:A}=this.nextBufferRange()){return this.bytes.subarray(A,A+T)}readDictionary(R){return this.dictionaries.get(R.id)}}Po.VectorLoader=X_;class so extends X_{constructor(R,T,A,h,C){super(new Uint8Array(0),T,A,h,C);this.sources=R}readNullBitmap(R,T,{offset:A}=this.nextBufferRange()){return T<=0?new Uint8Array(0):(0,go.packBools)(this.sources[A])}readOffsets(R,{offset:T}=this.nextBufferRange()){return(0,GT.toArrayBufferView)(Uint8Array,(0,GT.toArrayBufferView)(R.OffsetArrayType,this.sources[T]))}readTypeIds(R,{offset:T}=this.nextBufferRange()){return(0,GT.toArrayBufferView)(Uint8Array,(0,GT.toArrayBufferView)(R.ArrayType,this.sources[T]))}readData(R,{offset:T}=this.nextBufferRange()){let{sources:A}=this;if(RT.DataType.isTimestamp(R))return(0,GT.toArrayBufferView)(Uint8Array,aB.Int64.convertArray(A[T]));else if((RT.DataType.isInt(R)||RT.DataType.isTime(R))&&R.bitWidth===64||RT.DataType.isDuration(R))return(0,GT.toArrayBufferView)(Uint8Array,aB.Int64.convertArray(A[T]));else if(RT.DataType.isDate(R)&&R.unit===LB.DateUnit.MILLISECOND)return(0,GT.toArrayBufferView)(Uint8Array,aB.Int64.convertArray(A[T]));else if(RT.DataType.isDecimal(R))return(0,GT.toArrayBufferView)(Uint8Array,aB.Int128.convertArray(A[T]));else if(RT.DataType.isBinary(R)||RT.DataType.isLargeBinary(R)||RT.DataType.isFixedSizeBinary(R))return HK(A[T]);else if(RT.DataType.isBool(R))return(0,go.packBools)(A[T]);else if(RT.DataType.isUtf8(R)||RT.DataType.isLargeUtf8(R))return(0,OK.encodeUtf8)(A[T].join(""));return(0,GT.toArrayBufferView)(Uint8Array,(0,GT.toArrayBufferView)(R.ArrayType,A[T].map((h)=>+h)))}}Po.JSONVectorLoader=so;function HK(R){let T=R.join(""),A=new Uint8Array(T.length/2);for(let h=0;h<T.length;h+=2)A[h>>1]=Number.parseInt(T.slice(h,h+2),16);return A}});var WB=a((no)=>{Object.defineProperty(no,"__esModule",{value:!0});no.BinaryBuilder=void 0;var qK=UT(),aK=aR(),LK=bR();class bo extends aK.VariableWidthBuilder{constructor(R){super(R);this._values=new qK.BufferBuilder(Uint8Array)}get byteLength(){let R=this._pendingLength+this.length*4;return this._offsets&&(R+=this._offsets.byteLength),this._values&&(R+=this._values.byteLength),this._nulls&&(R+=this._nulls.byteLength),R}setValue(R,T){return super.setValue(R,(0,LK.toUint8Array)(T))}_flushPending(R,T){let A=this._offsets,h=this._values.reserve(T).buffer,C=0;for(let[B,D]of R)if(D===void 0)A.set(B,0);else{let _=D.length;h.set(D,C),A.set(B,_),C+=_}}}no.BinaryBuilder=bo});var NB=a((po)=>{Object.defineProperty(po,"__esModule",{value:!0});po.LargeBinaryBuilder=void 0;var WK=bR(),NK=UT(),cK=aR();class $o extends cK.VariableWidthBuilder{constructor(R){super(R);this._values=new NK.BufferBuilder(Uint8Array)}get byteLength(){let R=this._pendingLength+this.length*4;return this._offsets&&(R+=this._offsets.byteLength),this._values&&(R+=this._values.byteLength),this._nulls&&(R+=this._nulls.byteLength),R}setValue(R,T){return super.setValue(R,(0,WK.toUint8Array)(T))}_flushPending(R,T){let A=this._offsets,h=this._values.reserve(T).buffer,C=0;for(let[B,D]of R)if(D===void 0)A.set(B,BigInt(0));else{let _=D.length;h.set(D,C),A.set(B,BigInt(_)),C+=_}}}po.LargeBinaryBuilder=$o});var G_=a((Go)=>{Object.defineProperty(Go,"__esModule",{value:!0});Go.BoolBuilder=void 0;var oK=UT(),JK=aR();class Xo extends JK.Builder{constructor(R){super(R);this._values=new oK.BitmapBufferBuilder}setValue(R,T){this._values.set(R,+T)}}Go.BoolBuilder=Xo});var l_=a((Fo)=>{Object.defineProperty(Fo,"__esModule",{value:!0});Fo.DateMillisecondBuilder=Fo.DateDayBuilder=Fo.DateBuilder=void 0;var IK=aR(),x_=vR();class Sh extends IK.FixedWidthBuilder{}Fo.DateBuilder=Sh;Sh.prototype._setValue=x_.setDate;class F_ extends Sh{}Fo.DateDayBuilder=F_;F_.prototype._setValue=x_.setDateDay;class e_ extends Sh{}Fo.DateMillisecondBuilder=e_;e_.prototype._setValue=x_.setDateMillisecond});var j_=a((lo)=>{Object.defineProperty(lo,"__esModule",{value:!0});lo.DecimalBuilder=void 0;var yK=aR(),gK=vR();class d_ extends yK.FixedWidthBuilder{}lo.DecimalBuilder=d_;d_.prototype._setValue=gK.setDecimal});var u_=a((wo)=>{Object.defineProperty(wo,"__esModule",{value:!0});wo.DictionaryBuilder=void 0;var sK=iR(),PK=aR(),uo=fA();class Zo extends PK.Builder{constructor({type:R,nullValues:T,dictionaryHashFunction:A}){super({type:new sK.Dictionary(R.dictionary,R.indices,R.id,R.isOrdered)});if(this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=(0,uo.makeBuilder)({type:this.type.indices,nullValues:T}),this.dictionary=(0,uo.makeBuilder)({type:this.type.dictionary,nullValues:null}),typeof A==="function")this.valueToKey=A}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(R){return this.indices.isValid(R)}setValid(R,T){let A=this.indices;return T=A.setValid(R,T),this.length=A.length,T}setValue(R,T){let A=this._keysToIndices,h=this.valueToKey(T),C=A[h];if(C===void 0)A[h]=C=this._dictionaryOffset+this.dictionary.append(T).length-1;return this.indices.setValue(R,C)}flush(){let R=this.type,T=this._dictionary,A=this.dictionary.toVector(),h=this.indices.flush().clone(R);return h.dictionary=T?T.concat(A):A,this.finished||(this._dictionaryOffset+=A.length),this._dictionary=h.dictionary,this.clear(),h}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(R){return typeof R==="string"?R:`${R}`}}wo.DictionaryBuilder=Zo});var w_=a((Qo)=>{Object.defineProperty(Qo,"__esModule",{value:!0});Qo.FixedSizeBinaryBuilder=void 0;var tK=aR(),KK=vR();class Z_ extends tK.FixedWidthBuilder{}Qo.FixedSizeBinaryBuilder=Z_;Z_.prototype._setValue=KK.setFixedSizeBinary});var U_=a((Mo)=>{Object.defineProperty(Mo,"__esModule",{value:!0});Mo.FixedSizeListBuilder=void 0;var bK=QR(),nK=aR(),EK=iR();class zo extends nK.Builder{setValue(R,T){let[A]=this.children,h=R*this.stride;for(let C=-1,B=T.length;++C<B;)A.set(h+C,T[C])}addChild(R,T="0"){if(this.numChildren>0)throw Error("FixedSizeListBuilder can only have one child.");let A=this.children.push(R);return this.type=new EK.FixedSizeList(this.type.listSize,new bK.Field(T,R.type,!0)),A}}Mo.FixedSizeListBuilder=zo});var Q_=a((R8)=>{Object.defineProperty(R8,"__esModule",{value:!0});R8.Float64Builder=R8.Float32Builder=R8.Float16Builder=R8.FloatBuilder=void 0;var $K=Lh(),pK=aR();class yh extends pK.FixedWidthBuilder{setValue(R,T){this._values.set(R,T)}}R8.FloatBuilder=yh;class Vo extends yh{setValue(R,T){super.setValue(R,(0,$K.float64ToUint16)(T))}}R8.Float16Builder=Vo;class mo extends yh{}R8.Float32Builder=mo;class Yo extends yh{}R8.Float64Builder=Yo});var v_=a((A8)=>{Object.defineProperty(A8,"__esModule",{value:!0});A8.IntervalYearMonthBuilder=A8.IntervalDayTimeBuilder=A8.IntervalBuilder=void 0;var xK=aR(),f_=vR();class gh extends xK.FixedWidthBuilder{}A8.IntervalBuilder=gh;gh.prototype._setValue=f_.setIntervalValue;class z_ extends gh{}A8.IntervalDayTimeBuilder=z_;z_.prototype._setValue=f_.setIntervalDayTime;class M_ extends gh{}A8.IntervalYearMonthBuilder=M_;M_.prototype._setValue=f_.setIntervalYearMonth});var TO=a((C8)=>{Object.defineProperty(C8,"__esModule",{value:!0});C8.DurationNanosecondBuilder=C8.DurationMicrosecondBuilder=C8.DurationMillisecondBuilder=C8.DurationSecondBuilder=C8.DurationBuilder=void 0;var lK=aR(),sh=vR();class V9 extends lK.FixedWidthBuilder{}C8.DurationBuilder=V9;V9.prototype._setValue=sh.setDuration;class V_ extends V9{}C8.DurationSecondBuilder=V_;V_.prototype._setValue=sh.setDurationSecond;class m_ extends V9{}C8.DurationMillisecondBuilder=m_;m_.prototype._setValue=sh.setDurationMillisecond;class Y_ extends V9{}C8.DurationMicrosecondBuilder=Y_;Y_.prototype._setValue=sh.setDurationMicrosecond;class RO extends V9{}C8.DurationNanosecondBuilder=RO;RO.prototype._setValue=sh.setDurationNanosecond});var AO=a((W8)=>{Object.defineProperty(W8,"__esModule",{value:!0});W8.Uint64Builder=W8.Uint32Builder=W8.Uint16Builder=W8.Uint8Builder=W8.Int64Builder=W8.Int32Builder=W8.Int16Builder=W8.Int8Builder=W8.IntBuilder=void 0;var wK=aR();class xT extends wK.FixedWidthBuilder{setValue(R,T){this._values.set(R,T)}}W8.IntBuilder=xT;class D8 extends xT{}W8.Int8Builder=D8;class _8 extends xT{}W8.Int16Builder=_8;class O8 extends xT{}W8.Int32Builder=O8;class H8 extends xT{}W8.Int64Builder=H8;class i8 extends xT{}W8.Uint8Builder=i8;class q8 extends xT{}W8.Uint16Builder=q8;class a8 extends xT{}W8.Uint32Builder=a8;class L8 extends xT{}W8.Uint64Builder=L8});var hO=a((o8)=>{Object.defineProperty(o8,"__esModule",{value:!0});o8.ListBuilder=void 0;var YK=QR(),R5=iR(),T5=UT(),A5=aR();class c8 extends A5.VariableWidthBuilder{constructor(R){super(R);this._offsets=new T5.OffsetsBufferBuilder(R.type)}addChild(R,T="0"){if(this.numChildren>0)throw Error("ListBuilder can only have one child.");return this.children[this.numChildren]=R,this.type=new R5.List(new YK.Field(T,R.type,!0)),this.numChildren-1}_flushPending(R){let T=this._offsets,[A]=this.children;for(let[h,C]of R)if(typeof C>"u")T.set(h,0);else{let B=C,D=B.length,_=T.set(h,D).buffer[h];for(let O=-1;++O<D;)A.set(_+O,B[O])}}}o8.ListBuilder=c8});var CO=a((k8)=>{Object.defineProperty(k8,"__esModule",{value:!0});k8.MapBuilder=void 0;var h5=QR(),C5=iR(),B5=aR();class I8 extends B5.VariableWidthBuilder{set(R,T){return super.set(R,T)}setValue(R,T){let A=T instanceof Map?T:new Map(Object.entries(T)),h=this._pending||(this._pending=new Map),C=h.get(R);C&&(this._pendingLength-=C.size),this._pendingLength+=A.size,h.set(R,A)}addChild(R,T=`${this.numChildren}`){if(this.numChildren>0)throw Error("ListBuilder can only have one child.");return this.children[this.numChildren]=R,this.type=new C5.Map_(new h5.Field(T,R.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(R){let T=this._offsets,[A]=this.children;for(let[h,C]of R)if(C===void 0)T.set(h,0);else{let{[h]:B,[h+1]:D}=T.set(h,C.size).buffer;for(let _ of C.entries())if(A.set(B,_),++B>=D)break}}}k8.MapBuilder=I8});var BO=a((g8)=>{Object.defineProperty(g8,"__esModule",{value:!0});g8.NullBuilder=void 0;var D5=aR();class y8 extends D5.Builder{setValue(R,T){}setValid(R,T){return this.length=Math.max(R+1,this.length),T}}g8.NullBuilder=y8});var DO=a((t8)=>{Object.defineProperty(t8,"__esModule",{value:!0});t8.StructBuilder=void 0;var _5=QR(),O5=aR(),H5=iR();class P8 extends O5.Builder{setValue(R,T){let{children:A,type:h}=this;switch(Array.isArray(T)||T.constructor){case!0:return h.children.forEach((C,B)=>A[B].set(R,T[B]));case Map:return h.children.forEach((C,B)=>A[B].set(R,T.get(C.name)));default:return h.children.forEach((C,B)=>A[B].set(R,T[C.name]))}}setValid(R,T){if(!super.setValid(R,T))this.children.forEach((A)=>A.setValid(R,T));return T}addChild(R,T=`${this.numChildren}`){let A=this.children.push(R);return this.type=new H5.Struct([...this.type.children,new _5.Field(T,R.type,!0)]),A}}t8.StructBuilder=P8});var qO=a((b8)=>{Object.defineProperty(b8,"__esModule",{value:!0});b8.TimestampNanosecondBuilder=b8.TimestampMicrosecondBuilder=b8.TimestampMillisecondBuilder=b8.TimestampSecondBuilder=b8.TimestampBuilder=void 0;var i5=aR(),Ph=vR();class m9 extends i5.FixedWidthBuilder{}b8.TimestampBuilder=m9;m9.prototype._setValue=Ph.setTimestamp;class _O extends m9{}b8.TimestampSecondBuilder=_O;_O.prototype._setValue=Ph.setTimestampSecond;class OO extends m9{}b8.TimestampMillisecondBuilder=OO;OO.prototype._setValue=Ph.setTimestampMillisecond;class HO extends m9{}b8.TimestampMicrosecondBuilder=HO;HO.prototype._setValue=Ph.setTimestampMicrosecond;class iO extends m9{}b8.TimestampNanosecondBuilder=iO;iO.prototype._setValue=Ph.setTimestampNanosecond});var cO=a((E8)=>{Object.defineProperty(E8,"__esModule",{value:!0});E8.TimeNanosecondBuilder=E8.TimeMicrosecondBuilder=E8.TimeMillisecondBuilder=E8.TimeSecondBuilder=E8.TimeBuilder=void 0;var N5=aR(),th=vR();class Y9 extends N5.FixedWidthBuilder{}E8.TimeBuilder=Y9;Y9.prototype._setValue=th.setTime;class aO extends Y9{}E8.TimeSecondBuilder=aO;aO.prototype._setValue=th.setTimeSecond;class LO extends Y9{}E8.TimeMillisecondBuilder=LO;LO.prototype._setValue=th.setTimeMillisecond;class WO extends Y9{}E8.TimeMicrosecondBuilder=WO;WO.prototype._setValue=th.setTimeMicrosecond;class NO extends Y9{}E8.TimeNanosecondBuilder=NO;NO.prototype._setValue=th.setTimeNanosecond});var oO=a((G8)=>{Object.defineProperty(G8,"__esModule",{value:!0});G8.DenseUnionBuilder=G8.SparseUnionBuilder=G8.UnionBuilder=void 0;var k5=QR(),p8=UT(),S5=aR(),y5=iR();class cB extends S5.Builder{constructor(R){super(R);if(this._typeIds=new p8.DataBufferBuilder(Int8Array,0,1),typeof R.valueToChildTypeId==="function")this._valueToChildTypeId=R.valueToChildTypeId}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(R,T){return this.set(this.length,R,T)}set(R,T,A){if(A===void 0)A=this._valueToChildTypeId(this,T,R);return this.setValue(R,T,A),this}setValue(R,T,A){this._typeIds.set(R,A);let h=this.type.typeIdToChildIndex[A],C=this.children[h];C===null||C===void 0||C.set(R,T)}addChild(R,T=`${this.children.length}`){let A=this.children.push(R),{type:{children:h,mode:C,typeIds:B}}=this,D=[...h,new k5.Field(T,R.type)];return this.type=new y5.Union(C,[...B,A],D),A}_valueToChildTypeId(R,T,A){throw Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}G8.UnionBuilder=cB;class r8 extends cB{}G8.SparseUnionBuilder=r8;class X8 extends cB{constructor(R){super(R);this._offsets=new p8.DataBufferBuilder(Int32Array)}setValue(R,T,A){let h=this._typeIds.set(R,A).buffer[R],C=this.getChildAt(this.type.typeIdToChildIndex[h]),B=this._offsets.set(R,C.length).buffer[R];C===null||C===void 0||C.set(B,T)}}G8.DenseUnionBuilder=X8});var IO=a((F8)=>{Object.defineProperty(F8,"__esModule",{value:!0});F8.Utf8Builder=void 0;var P5=T9(),t5=WB(),K5=UT(),b5=aR();class JO extends b5.VariableWidthBuilder{constructor(R){super(R);this._values=new K5.BufferBuilder(Uint8Array)}get byteLength(){let R=this._pendingLength+this.length*4;return this._offsets&&(R+=this._offsets.byteLength),this._values&&(R+=this._values.byteLength),this._nulls&&(R+=this._nulls.byteLength),R}setValue(R,T){return super.setValue(R,(0,P5.encodeUtf8)(T))}_flushPending(R,T){}}F8.Utf8Builder=JO;JO.prototype._flushPending=t5.BinaryBuilder.prototype._flushPending});var SO=a((l8)=>{Object.defineProperty(l8,"__esModule",{value:!0});l8.LargeUtf8Builder=void 0;var n5=T9(),E5=UT(),$5=aR(),p5=NB();class kO extends $5.VariableWidthBuilder{constructor(R){super(R);this._values=new E5.BufferBuilder(Uint8Array)}get byteLength(){let R=this._pendingLength+this.length*4;return this._offsets&&(R+=this._offsets.byteLength),this._values&&(R+=this._values.byteLength),this._nulls&&(R+=this._nulls.byteLength),R}setValue(R,T){return super.setValue(R,(0,n5.encodeUtf8)(T))}_flushPending(R,T){}}l8.LargeUtf8Builder=kO;kO.prototype._flushPending=p5.LargeBinaryBuilder.prototype._flushPending});var Z8=a((j8)=>{Object.defineProperty(j8,"__esModule",{value:!0});j8.instance=j8.GetBuilderCtor=void 0;var r5=ZR(),X5=WB(),G5=NB(),x5=G_(),yO=l_(),F5=j_(),e5=u_(),l5=w_(),d5=U_(),oB=Q_(),gO=v_(),Kh=TO(),QT=AO(),j5=hO(),u5=CO(),Z5=BO(),w5=DO(),bh=qO(),nh=cO(),sO=oO(),U5=IO(),Q5=SO();class PO extends r5.Visitor{visitNull(){return Z5.NullBuilder}visitBool(){return x5.BoolBuilder}visitInt(){return QT.IntBuilder}visitInt8(){return QT.Int8Builder}visitInt16(){return QT.Int16Builder}visitInt32(){return QT.Int32Builder}visitInt64(){return QT.Int64Builder}visitUint8(){return QT.Uint8Builder}visitUint16(){return QT.Uint16Builder}visitUint32(){return QT.Uint32Builder}visitUint64(){return QT.Uint64Builder}visitFloat(){return oB.FloatBuilder}visitFloat16(){return oB.Float16Builder}visitFloat32(){return oB.Float32Builder}visitFloat64(){return oB.Float64Builder}visitUtf8(){return U5.Utf8Builder}visitLargeUtf8(){return Q5.LargeUtf8Builder}visitBinary(){return X5.BinaryBuilder}visitLargeBinary(){return G5.LargeBinaryBuilder}visitFixedSizeBinary(){return l5.FixedSizeBinaryBuilder}visitDate(){return yO.DateBuilder}visitDateDay(){return yO.DateDayBuilder}visitDateMillisecond(){return yO.DateMillisecondBuilder}visitTimestamp(){return bh.TimestampBuilder}visitTimestampSecond(){return bh.TimestampSecondBuilder}visitTimestampMillisecond(){return bh.TimestampMillisecondBuilder}visitTimestampMicrosecond(){return bh.TimestampMicrosecondBuilder}visitTimestampNanosecond(){return bh.TimestampNanosecondBuilder}visitTime(){return nh.TimeBuilder}visitTimeSecond(){return nh.TimeSecondBuilder}visitTimeMillisecond(){return nh.TimeMillisecondBuilder}visitTimeMicrosecond(){return nh.TimeMicrosecondBuilder}visitTimeNanosecond(){return nh.TimeNanosecondBuilder}visitDecimal(){return F5.DecimalBuilder}visitList(){return j5.ListBuilder}visitStruct(){return w5.StructBuilder}visitUnion(){return sO.UnionBuilder}visitDenseUnion(){return sO.DenseUnionBuilder}visitSparseUnion(){return sO.SparseUnionBuilder}visitDictionary(){return e5.DictionaryBuilder}visitInterval(){return gO.IntervalBuilder}visitIntervalDayTime(){return gO.IntervalDayTimeBuilder}visitIntervalYearMonth(){return gO.IntervalYearMonthBuilder}visitDuration(){return Kh.DurationBuilder}visitDurationSecond(){return Kh.DurationSecondBuilder}visitDurationMillisecond(){return Kh.DurationMillisecondBuilder}visitDurationMicrosecond(){return Kh.DurationMicrosecondBuilder}visitDurationNanosecond(){return Kh.DurationNanosecondBuilder}visitFixedSizeList(){return d5.FixedSizeListBuilder}visitMap(){return u5.MapBuilder}}j8.GetBuilderCtor=PO;j8.instance=new PO});var rh=a((w8)=>{Object.defineProperty(w8,"__esModule",{value:!0});w8.compareTypes=w8.compareFields=w8.compareSchemas=w8.instance=w8.TypeComparator=void 0;var z5=ZR();class X extends z5.Visitor{compareSchemas(R,T){return R===T||T instanceof R.constructor&&this.compareManyFields(R.fields,T.fields)}compareManyFields(R,T){return R===T||Array.isArray(R)&&Array.isArray(T)&&R.length===T.length&&R.every((A,h)=>this.compareFields(A,T[h]))}compareFields(R,T){return R===T||T instanceof R.constructor&&R.name===T.name&&R.nullable===T.nullable&&this.visit(R.type,T.type)}}w8.TypeComparator=X;function jR(R,T){return T instanceof R.constructor}function RA(R,T){return R===T||jR(R,T)}function fT(R,T){return R===T||jR(R,T)&&R.bitWidth===T.bitWidth&&R.isSigned===T.isSigned}function JB(R,T){return R===T||jR(R,T)&&R.precision===T.precision}function M5(R,T){return R===T||jR(R,T)&&R.byteWidth===T.byteWidth}function tO(R,T){return R===T||jR(R,T)&&R.unit===T.unit}function Eh(R,T){return R===T||jR(R,T)&&R.unit===T.unit&&R.timezone===T.timezone}function $h(R,T){return R===T||jR(R,T)&&R.unit===T.unit&&R.bitWidth===T.bitWidth}function v5(R,T){return R===T||jR(R,T)&&R.children.length===T.children.length&&w8.instance.compareManyFields(R.children,T.children)}function V5(R,T){return R===T||jR(R,T)&&R.children.length===T.children.length&&w8.instance.compareManyFields(R.children,T.children)}function KO(R,T){return R===T||jR(R,T)&&R.mode===T.mode&&R.typeIds.every((A,h)=>A===T.typeIds[h])&&w8.instance.compareManyFields(R.children,T.children)}function m5(R,T){return R===T||jR(R,T)&&R.id===T.id&&R.isOrdered===T.isOrdered&&w8.instance.visit(R.indices,T.indices)&&w8.instance.visit(R.dictionary,T.dictionary)}function bO(R,T){return R===T||jR(R,T)&&R.unit===T.unit}function ph(R,T){return R===T||jR(R,T)&&R.unit===T.unit}function Y5(R,T){return R===T||jR(R,T)&&R.listSize===T.listSize&&R.children.length===T.children.length&&w8.instance.compareManyFields(R.children,T.children)}function Rb(R,T){return R===T||jR(R,T)&&R.keysSorted===T.keysSorted&&R.children.length===T.children.length&&w8.instance.compareManyFields(R.children,T.children)}X.prototype.visitNull=RA;X.prototype.visitBool=RA;X.prototype.visitInt=fT;X.prototype.visitInt8=fT;X.prototype.visitInt16=fT;X.prototype.visitInt32=fT;X.prototype.visitInt64=fT;X.prototype.visitUint8=fT;X.prototype.visitUint16=fT;X.prototype.visitUint32=fT;X.prototype.visitUint64=fT;X.prototype.visitFloat=JB;X.prototype.visitFloat16=JB;X.prototype.visitFloat32=JB;X.prototype.visitFloat64=JB;X.prototype.visitUtf8=RA;X.prototype.visitLargeUtf8=RA;X.prototype.visitBinary=RA;X.prototype.visitLargeBinary=RA;X.prototype.visitFixedSizeBinary=M5;X.prototype.visitDate=tO;X.prototype.visitDateDay=tO;X.prototype.visitDateMillisecond=tO;X.prototype.visitTimestamp=Eh;X.prototype.visitTimestampSecond=Eh;X.prototype.visitTimestampMillisecond=Eh;X.prototype.visitTimestampMicrosecond=Eh;X.prototype.visitTimestampNanosecond=Eh;X.prototype.visitTime=$h;X.prototype.visitTimeSecond=$h;X.prototype.visitTimeMillisecond=$h;X.prototype.visitTimeMicrosecond=$h;X.prototype.visitTimeNanosecond=$h;X.prototype.visitDecimal=RA;X.prototype.visitList=v5;X.prototype.visitStruct=V5;X.prototype.visitUnion=KO;X.prototype.visitDenseUnion=KO;X.prototype.visitSparseUnion=KO;X.prototype.visitDictionary=m5;X.prototype.visitInterval=bO;X.prototype.visitIntervalDayTime=bO;X.prototype.visitIntervalYearMonth=bO;X.prototype.visitDuration=ph;X.prototype.visitDurationSecond=ph;X.prototype.visitDurationMillisecond=ph;X.prototype.visitDurationMicrosecond=ph;X.prototype.visitDurationNanosecond=ph;X.prototype.visitFixedSizeList=Y5;X.prototype.visitMap=Rb;w8.instance=new X;function Tb(R,T){return w8.instance.compareSchemas(R,T)}w8.compareSchemas=Tb;function Ab(R,T){return w8.instance.compareFields(R,T)}w8.compareFields=Ab;function hb(R,T){return w8.instance.visit(R,T)}w8.compareTypes=hb});var fA=a((M8)=>{Object.defineProperty(M8,"__esModule",{value:!0});M8.builderThroughAsyncIterable=M8.builderThroughIterable=M8.tableFromJSON=M8.vectorFromArray=M8.makeBuilder=void 0;var zA=KR(),nO=QR(),TT=iR(),_b=bT(),Q8=dR(),Ob=Z8(),Hb=MA(),ib=y9(),qb=rh();function kB(R){let T=R.type,A=new(Ob.instance.getVisitFn(T)())(R);if(T.children&&T.children.length>0){let h=R.children||[],C={nullValues:R.nullValues},B=Array.isArray(h)?(D,_)=>h[_]||C:({name:D})=>h[D]||C;for(let[D,_]of T.children.entries()){let{type:O}=_,H=B(_,D);A.children.push(kB(Object.assign(Object.assign({},H),{type:O})))}}return A}M8.makeBuilder=kB;function f8(R,T){if(R instanceof _b.Data||R instanceof Q8.Vector||R.type instanceof TT.DataType||ArrayBuffer.isView(R))return(0,Q8.makeVector)(R);let A={type:T!==null&&T!==void 0?T:IB(R),nullValues:[null]},h=[...z8(A)(R)],C=h.length===1?h[0]:h.reduce((B,D)=>B.concat(D));if(TT.DataType.isDictionary(C.type))return C.memoize();return C}M8.vectorFromArray=f8;function ab(R){let T=f8(R),A=new ib.RecordBatch(new nO.Schema(T.type.children),T.data[0]);return new Hb.Table(A)}M8.tableFromJSON=ab;function IB(R){if(R.length===0)return new TT.Null;let T=0,A=0,h=0,C=0,B=0,D=0,_=0,O=0;for(let H of R){if(H==null){++T;continue}switch(typeof H){case"bigint":++D;continue;case"boolean":++_;continue;case"number":++C;continue;case"string":++B;continue;case"object":if(Array.isArray(H))++A;else if(Object.prototype.toString.call(H)==="[object Date]")++O;else++h;continue}throw TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}if(C+T===R.length)return new TT.Float64;else if(B+T===R.length)return new TT.Dictionary(new TT.Utf8,new TT.Int32);else if(D+T===R.length)return new TT.Int64;else if(_+T===R.length)return new TT.Bool;else if(O+T===R.length)return new TT.TimestampMillisecond;else if(A+T===R.length){let H=R,i=IB(H[H.findIndex((J)=>J!=null)]);if(H.every((J)=>J==null||(0,qb.compareTypes)(i,IB(J))))return new TT.List(new nO.Field("",i,!0))}else if(h+T===R.length){let H=new Map;for(let i of R)for(let J of Object.keys(i))if(!H.has(J)&&i[J]!=null)H.set(J,new nO.Field(J,IB([i[J]]),!0));return new TT.Struct([...H.values()])}throw TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}function z8(R){let{["queueingStrategy"]:T="count"}=R,{["highWaterMark"]:A=T!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=R,h=T!=="bytes"?"length":"byteLength";return function*(C){let B=0,D=kB(R);for(let _ of C)if(D.append(_)[h]>=A)++B&&(yield D.toVector());if(D.finish().length>0||B===0)yield D.toVector()}}M8.builderThroughIterable=z8;function Lb(R){let{["queueingStrategy"]:T="count"}=R,{["highWaterMark"]:A=T!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=R,h=T!=="bytes"?"length":"byteLength";return function(C){return zA.__asyncGenerator(this,arguments,function*(){var B,D,_,O;let H=0,i=kB(R);try{for(var J=!0,P=zA.__asyncValues(C),w;w=yield zA.__await(P.next()),B=w.done,!B;J=!0){O=w.value,J=!1;let t=O;if(i.append(t)[h]>=A)++H&&(yield yield zA.__await(i.toVector()))}}catch(t){D={error:t}}finally{try{if(!J&&!B&&(_=P.return))yield zA.__await(_.call(P))}finally{if(D)throw D.error}}if(i.finish().length>0||H===0)yield yield zA.__await(i.toVector())})}}M8.builderThroughAsyncIterable=Lb});var RJ=a((m8)=>{Object.defineProperty(m8,"__esModule",{value:!0});m8.distributeVectorsIntoRecordBatches=void 0;var V8=bT(),Jb=iR(),Ib=y9();function kb(R,T){return Sb(R,T.map((A)=>A.data.concat()))}m8.distributeVectorsIntoRecordBatches=kb;function Sb(R,T){let A=[...R.fields],h=[],C={numBatches:T.reduce((J,P)=>Math.max(J,P.length),0)},B=0,D=0,_=-1,O=T.length,H,i=[];while(C.numBatches-- >0){for(D=Number.POSITIVE_INFINITY,_=-1;++_<O;)i[_]=H=T[_].shift(),D=Math.min(D,H?H.length:D);if(Number.isFinite(D)){if(i=yb(A,D,i,T,C),D>0)h[B++]=(0,V8.makeData)({type:new Jb.Struct(A),length:D,nullCount:0,children:i.slice()})}}return[R=R.assign(A),h.map((J)=>new Ib.RecordBatch(R,J))]}function yb(R,T,A,h,C){var B;let D=(T+63&-64)>>3;for(let _=-1,O=h.length;++_<O;){let H=A[_],i=H===null||H===void 0?void 0:H.length;if(i>=T)if(i===T)A[_]=H;else A[_]=H.slice(0,T),C.numBatches=Math.max(C.numBatches,h[_].unshift(H.slice(T,i-T)));else{let J=R[_];R[_]=J.clone({nullable:!0}),A[_]=(B=H===null||H===void 0?void 0:H._changeLengthAndBackfillNullBitmap(T))!==null&&B!==void 0?B:(0,V8.makeData)({type:J.type,length:T,nullCount:T,nullBitmap:new Uint8Array(D)})}}return A}});var MA=a((CJ)=>{var hJ;Object.defineProperty(CJ,"__esModule",{value:!0});CJ.tableFromArrays=CJ.makeTable=CJ.Table=void 0;var EO=NR(),$O=bT(),gb=fA(),Xh=dR(),TA=QR(),TJ=iR(),sb=rh(),pO=RJ(),g9=CB(),Pb=w9(),tb=vR(),Kb=BB(),bb=DB(),AJ=uA(),vA=y9();class AT{constructor(...R){var T,A;if(R.length===0)return this.batches=[],this.schema=new TA.Schema([]),this._offsets=[0],this;let h,C;if(R[0]instanceof TA.Schema)h=R.shift();if(R.at(-1)instanceof Uint32Array)C=R.pop();let B=(_)=>{if(_){if(_ instanceof vA.RecordBatch)return[_];else if(_ instanceof AT)return _.batches;else if(_ instanceof $O.Data){if(_.type instanceof TJ.Struct)return[new vA.RecordBatch(new TA.Schema(_.type.children),_)]}else if(Array.isArray(_))return _.flatMap((O)=>B(O));else if(typeof _[Symbol.iterator]==="function")return[..._].flatMap((O)=>B(O));else if(typeof _==="object"){let O=Object.keys(_),H=O.map((P)=>new Xh.Vector([_[P]])),i=h!==null&&h!==void 0?h:new TA.Schema(O.map((P,w)=>new TA.Field(String(P),H[w].type,H[w].nullable))),[,J]=(0,pO.distributeVectorsIntoRecordBatches)(i,H);return J.length===0?[new vA.RecordBatch(_)]:J}}return[]},D=R.flatMap((_)=>B(_));if(h=(A=h!==null&&h!==void 0?h:(T=D[0])===null||T===void 0?void 0:T.schema)!==null&&A!==void 0?A:new TA.Schema([]),!(h instanceof TA.Schema))throw TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(let _ of D){if(!(_ instanceof vA.RecordBatch))throw TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!(0,sb.compareSchemas)(h,_.schema))throw TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=h,this.batches=D,this._offsets=C!==null&&C!==void 0?C:(0,g9.computeChunkOffsets)(this.data)}get data(){return this.batches.map(({data:R})=>R)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((R,T)=>R+T.length,0)}get nullCount(){if(this._nullCount===-1)this._nullCount=(0,g9.computeChunkNullCounts)(this.data);return this._nullCount}isValid(R){return!1}get(R){return null}at(R){return this.get((0,AJ.wrapIndex)(R,this.numRows))}set(R,T){return}indexOf(R,T){return-1}[Symbol.iterator](){if(this.batches.length>0)return bb.instance.visit(new Xh.Vector(this.data));return[][Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...R){let T=this.schema,A=this.data.concat(R.flatMap(({data:h})=>h));return new AT(T,A.map((h)=>new vA.RecordBatch(T,h)))}slice(R,T){let A=this.schema;[R,T]=(0,AJ.clampRange)({length:this.numRows},R,T);let h=(0,g9.sliceChunks)(this.data,this._offsets,R,T);return new AT(A,h.map((C)=>new vA.RecordBatch(A,C)))}getChild(R){return this.getChildAt(this.schema.fields.findIndex((T)=>T.name===R))}getChildAt(R){if(R>-1&&R<this.schema.fields.length){let T=this.data.map((A)=>A.children[R]);if(T.length===0){let{type:A}=this.schema.fields[R],h=(0,$O.makeData)({type:A,length:0,nullCount:0});T.push(h._changeLengthAndBackfillNullBitmap(this.numRows))}return new Xh.Vector(T)}return null}setChild(R,T){var A;return this.setChildAt((A=this.schema.fields)===null||A===void 0?void 0:A.findIndex((h)=>h.name===R),T)}setChildAt(R,T){let A=this.schema,h=[...this.batches];if(R>-1&&R<this.numCols){if(!T)T=new Xh.Vector([(0,$O.makeData)({type:new TJ.Null,length:this.numRows})]);let C=A.fields.slice(),B=C[R].clone({type:T.type}),D=this.schema.fields.map((_,O)=>this.getChildAt(O));[C[R],D[R]]=[B,T],[A,h]=(0,pO.distributeVectorsIntoRecordBatches)(A,D)}return new AT(A,h)}select(R){let T=this.schema.fields.reduce((A,h,C)=>A.set(h.name,C),new Map);return this.selectAt(R.map((A)=>T.get(A)).filter((A)=>A>-1))}selectAt(R){let T=this.schema.selectAt(R),A=this.batches.map((h)=>h.selectAt(R));return new AT(T,A)}assign(R){let T=this.schema.fields,[A,h]=R.schema.fields.reduce((D,_,O)=>{let[H,i]=D,J=T.findIndex((P)=>P.name===_.name);return~J?i[J]=O:H.push(O),D},[[],[]]),C=this.schema.assign(R.schema),B=[...T.map((D,_)=>[_,h[_]]).map(([D,_])=>_===void 0?this.getChildAt(D):R.getChildAt(_)),...A.map((D)=>R.getChildAt(D))].filter(Boolean);return new AT(...(0,pO.distributeVectorsIntoRecordBatches)(C,B))}}CJ.Table=AT;hJ=Symbol.toStringTag;AT[hJ]=((R)=>{return R.schema=null,R.batches=[],R._offsets=new Uint32Array([0]),R._nullCount=-1,R[Symbol.isConcatSpreadable]=!0,R.isValid=(0,g9.wrapChunkedCall1)(g9.isChunkedValid),R.get=(0,g9.wrapChunkedCall1)(Pb.instance.getVisitFn(EO.Type.Struct)),R.set=(0,g9.wrapChunkedCall2)(tb.instance.getVisitFn(EO.Type.Struct)),R.indexOf=(0,g9.wrapChunkedIndexOf)(Kb.instance.getVisitFn(EO.Type.Struct)),"Table"})(AT.prototype);function nb(R){let T={},A=Object.entries(R);for(let[h,C]of A)T[h]=(0,Xh.makeVector)(C);return new AT(T)}CJ.makeTable=nb;function Eb(R){let T={},A=Object.entries(R);for(let[h,C]of A)T[h]=(0,gb.vectorFromArray)(C);return new AT(T)}CJ.tableFromArrays=Eb});var y9=a((iJ)=>{var _J;Object.defineProperty(iJ,"__esModule",{value:!0});iJ._InternalEmptyPlaceholderRecordBatch=iJ.RecordBatch=void 0;var hT=bT(),rb=MA(),SB=dR(),yB=QR(),zT=iR(),Xb=uA(),Gb=w9(),xb=vR(),Fb=BB(),eb=DB();class MT{constructor(...R){switch(R.length){case 2:{if([this.schema]=R,!(this.schema instanceof yB.Schema))throw TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=(0,hT.makeData)({nullCount:0,type:new zT.Struct(this.schema.fields),children:this.schema.fields.map((T)=>(0,hT.makeData)({type:T.type,nullCount:0}))})]=R,!(this.data instanceof hT.Data))throw TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=DJ(this.schema,this.data.children);break}case 1:{let[T]=R,{fields:A,children:h,length:C}=Object.keys(T).reduce((_,O,H)=>{return _.children[H]=T[O],_.length=Math.max(_.length,T[O].length),_.fields[H]=yB.Field.new({name:O,type:T[O].type,nullable:!0}),_},{length:0,fields:[],children:[]}),B=new yB.Schema(A),D=(0,hT.makeData)({type:new zT.Struct(A),length:C,children:h,nullCount:0});[this.schema,this.data]=DJ(B,D.children,C);break}default:throw TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=OJ(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(R){return this.data.getValid(R)}get(R){return Gb.instance.visit(this.data,R)}at(R){return this.get((0,Xb.wrapIndex)(R,this.numRows))}set(R,T){return xb.instance.visit(this.data,R,T)}indexOf(R,T){return Fb.instance.visit(this.data,R,T)}[Symbol.iterator](){return eb.instance.visit(new SB.Vector([this.data]))}toArray(){return[...this]}concat(...R){return new rb.Table(this.schema,[this,...R])}slice(R,T){let[A]=new SB.Vector([this.data]).slice(R,T).data;return new MT(this.schema,A)}getChild(R){var T;return this.getChildAt((T=this.schema.fields)===null||T===void 0?void 0:T.findIndex((A)=>A.name===R))}getChildAt(R){if(R>-1&&R<this.schema.fields.length)return new SB.Vector([this.data.children[R]]);return null}setChild(R,T){var A;return this.setChildAt((A=this.schema.fields)===null||A===void 0?void 0:A.findIndex((h)=>h.name===R),T)}setChildAt(R,T){let A=this.schema,h=this.data;if(R>-1&&R<this.numCols){if(!T)T=new SB.Vector([(0,hT.makeData)({type:new zT.Null,length:this.numRows})]);let C=A.fields.slice(),B=h.children.slice(),D=C[R].clone({type:T.type});[C[R],B[R]]=[D,T.data[0]],A=new yB.Schema(C,new Map(this.schema.metadata)),h=(0,hT.makeData)({type:new zT.Struct(C),children:B})}return new MT(A,h)}select(R){let T=this.schema.select(R),A=new zT.Struct(T.fields),h=[];for(let C of R){let B=this.schema.fields.findIndex((D)=>D.name===C);if(~B)h[B]=this.data.children[B]}return new MT(T,(0,hT.makeData)({type:A,length:this.numRows,children:h}))}selectAt(R){let T=this.schema.selectAt(R),A=R.map((C)=>this.data.children[C]).filter(Boolean),h=(0,hT.makeData)({type:new zT.Struct(T.fields),length:this.numRows,children:A});return new MT(T,h)}}iJ.RecordBatch=MT;_J=Symbol.toStringTag;MT[_J]=((R)=>{return R._nullCount=-1,R[Symbol.isConcatSpreadable]=!0,"RecordBatch"})(MT.prototype);function DJ(R,T,A=T.reduce((h,C)=>Math.max(h,C.length),0)){var h;let C=[...R.fields],B=[...T],D=(A+63&-64)>>3;for(let[_,O]of R.fields.entries()){let H=T[_];if(!H||H.length!==A)C[_]=O.clone({nullable:!0}),B[_]=(h=H===null||H===void 0?void 0:H._changeLengthAndBackfillNullBitmap(A))!==null&&h!==void 0?h:(0,hT.makeData)({type:O.type,length:A,nullCount:A,nullBitmap:new Uint8Array(D)})}return[R.assign(C),(0,hT.makeData)({type:new zT.Struct(C),length:A,children:B})]}function OJ(R,T,A=new Map){var h,C;if(((h=R===null||R===void 0?void 0:R.length)!==null&&h!==void 0?h:0)>0&&(R===null||R===void 0?void 0:R.length)===(T===null||T===void 0?void 0:T.length))for(let B=-1,D=R.length;++B<D;){let{type:_}=R[B],O=T[B];for(let H of[O,...((C=O===null||O===void 0?void 0:O.dictionary)===null||C===void 0?void 0:C.data)||[]])OJ(_.children,H===null||H===void 0?void 0:H.children,A);if(zT.DataType.isDictionary(_)){let{id:H}=_;if(!A.has(H)){if(O===null||O===void 0?void 0:O.dictionary)A.set(H,O.dictionary)}else if(A.get(H)!==O.dictionary)throw Error("Cannot create Schema containing two different dictionaries with the same Id")}}return A}class HJ extends MT{constructor(R){let T=R.fields.map((h)=>(0,hT.makeData)({type:h.type})),A=(0,hT.makeData)({type:new zT.Struct(R.fields),nullCount:0,children:T});super(R,A)}}iJ._InternalEmptyPlaceholderRecordBatch=HJ});var cJ=a((WJ)=>{Object.defineProperty(WJ,"__esModule",{value:!0});WJ.Message=void 0;var db=f(),jb=SA(),aJ=rC(),LJ=_C();class cT{constructor(){this.bb=null,this.bb_pos=0}__init(R,T){return this.bb_pos=R,this.bb=T,this}static getRootAsMessage(R,T){return(T||new cT).__init(R.readInt32(R.position())+R.position(),R)}static getSizePrefixedRootAsMessage(R,T){return R.setPosition(R.position()+db.SIZE_PREFIX_LENGTH),(T||new cT).__init(R.readInt32(R.position())+R.position(),R)}version(){let R=this.bb.__offset(this.bb_pos,4);return R?this.bb.readInt16(this.bb_pos+R):LJ.MetadataVersion.V1}headerType(){let R=this.bb.__offset(this.bb_pos,6);return R?this.bb.readUint8(this.bb_pos+R):aJ.MessageHeader.NONE}header(R){let T=this.bb.__offset(this.bb_pos,8);return T?this.bb.__union(R,this.bb_pos+T):null}bodyLength(){let R=this.bb.__offset(this.bb_pos,10);return R?this.bb.readInt64(this.bb_pos+R):BigInt("0")}customMetadata(R,T){let A=this.bb.__offset(this.bb_pos,12);return A?(T||new jb.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+A)+R*4),this.bb):null}customMetadataLength(){let R=this.bb.__offset(this.bb_pos,12);return R?this.bb.__vector_len(this.bb_pos+R):0}static startMessage(R){R.startObject(5)}static addVersion(R,T){R.addFieldInt16(0,T,LJ.MetadataVersion.V1)}static addHeaderType(R,T){R.addFieldInt8(1,T,aJ.MessageHeader.NONE)}static addHeader(R,T){R.addFieldOffset(2,T,0)}static addBodyLength(R,T){R.addFieldInt64(3,T,BigInt("0"))}static addCustomMetadata(R,T){R.addFieldOffset(4,T,0)}static createCustomMetadataVector(R,T){R.startVector(4,T.length,4);for(let A=T.length-1;A>=0;A--)R.addOffset(T[A]);return R.endVector()}static startCustomMetadataVector(R,T){R.startVector(4,T,4)}static endMessage(R){return R.endObject()}static finishMessageBuffer(R,T){R.finish(T)}static finishSizePrefixedMessageBuffer(R,T){R.finish(T,void 0,!0)}static createMessage(R,T,A,h,C,B){return cT.startMessage(R),cT.addVersion(R,T),cT.addHeaderType(R,A),cT.addHeader(R,h),cT.addBodyLength(R,C),cT.addCustomMetadata(R,B),cT.endMessage(R)}}WJ.Message=cT});var KJ=a((PJ)=>{Object.defineProperty(PJ,"__esModule",{value:!0});PJ.instance=PJ.TypeAssembler=void 0;var ub=ZR(),oJ=ED(),gB=B9(),rO=JC(),JJ=PD(),IJ=KD(),kJ=tD(),SJ=pD(),yJ=bD(),Gh=WC(),XO=LC(),sB=SC(),PB=yC(),GO=IC(),xO=NC(),gJ=nD(),sJ=$D(),VA=gC(),xh=sD(),FO=cC(),eO=oC(),lO=kC();class dO extends ub.Visitor{visit(R,T){return R==null||T==null?void 0:super.visit(R,T)}visitNull(R,T){return oJ.Null.startNull(T),oJ.Null.endNull(T)}visitInt(R,T){return gB.Int.startInt(T),gB.Int.addBitWidth(T,R.bitWidth),gB.Int.addIsSigned(T,R.isSigned),gB.Int.endInt(T)}visitFloat(R,T){return rO.FloatingPoint.startFloatingPoint(T),rO.FloatingPoint.addPrecision(T,R.precision),rO.FloatingPoint.endFloatingPoint(T)}visitBinary(R,T){return JJ.Binary.startBinary(T),JJ.Binary.endBinary(T)}visitLargeBinary(R,T){return IJ.LargeBinary.startLargeBinary(T),IJ.LargeBinary.endLargeBinary(T)}visitBool(R,T){return kJ.Bool.startBool(T),kJ.Bool.endBool(T)}visitUtf8(R,T){return SJ.Utf8.startUtf8(T),SJ.Utf8.endUtf8(T)}visitLargeUtf8(R,T){return yJ.LargeUtf8.startLargeUtf8(T),yJ.LargeUtf8.endLargeUtf8(T)}visitDecimal(R,T){return Gh.Decimal.startDecimal(T),Gh.Decimal.addScale(T,R.scale),Gh.Decimal.addPrecision(T,R.precision),Gh.Decimal.addBitWidth(T,R.bitWidth),Gh.Decimal.endDecimal(T)}visitDate(R,T){return XO.Date.startDate(T),XO.Date.addUnit(T,R.unit),XO.Date.endDate(T)}visitTime(R,T){return sB.Time.startTime(T),sB.Time.addUnit(T,R.unit),sB.Time.addBitWidth(T,R.bitWidth),sB.Time.endTime(T)}visitTimestamp(R,T){let A=R.timezone&&T.createString(R.timezone)||void 0;if(PB.Timestamp.startTimestamp(T),PB.Timestamp.addUnit(T,R.unit),A!==void 0)PB.Timestamp.addTimezone(T,A);return PB.Timestamp.endTimestamp(T)}visitInterval(R,T){return GO.Interval.startInterval(T),GO.Interval.addUnit(T,R.unit),GO.Interval.endInterval(T)}visitDuration(R,T){return xO.Duration.startDuration(T),xO.Duration.addUnit(T,R.unit),xO.Duration.endDuration(T)}visitList(R,T){return gJ.List.startList(T),gJ.List.endList(T)}visitStruct(R,T){return sJ.Struct_.startStruct_(T),sJ.Struct_.endStruct_(T)}visitUnion(R,T){VA.Union.startTypeIdsVector(T,R.typeIds.length);let A=VA.Union.createTypeIdsVector(T,R.typeIds);return VA.Union.startUnion(T),VA.Union.addMode(T,R.mode),VA.Union.addTypeIds(T,A),VA.Union.endUnion(T)}visitDictionary(R,T){let A=this.visit(R.indices,T);if(xh.DictionaryEncoding.startDictionaryEncoding(T),xh.DictionaryEncoding.addId(T,BigInt(R.id)),xh.DictionaryEncoding.addIsOrdered(T,R.isOrdered),A!==void 0)xh.DictionaryEncoding.addIndexType(T,A);return xh.DictionaryEncoding.endDictionaryEncoding(T)}visitFixedSizeBinary(R,T){return FO.FixedSizeBinary.startFixedSizeBinary(T),FO.FixedSizeBinary.addByteWidth(T,R.byteWidth),FO.FixedSizeBinary.endFixedSizeBinary(T)}visitFixedSizeList(R,T){return eO.FixedSizeList.startFixedSizeList(T),eO.FixedSizeList.addListSize(T,R.listSize),eO.FixedSizeList.endFixedSizeList(T)}visitMap(R,T){return lO.Map.startMap(T),lO.Map.addKeysSorted(T,R.keysSorted),lO.Map.endMap(T)}}PJ.TypeAssembler=dO;PJ.instance=new dO});var xJ=a((XJ)=>{Object.defineProperty(XJ,"__esModule",{value:!0});XJ.fieldFromJSON=XJ.dictionaryBatchFromJSON=XJ.recordBatchFromJSON=XJ.schemaFromJSON=void 0;var mA=QR(),DR=iR(),hA=CA(),AA=NR();function wb(R,T=new Map){return new mA.Schema(Qb(R,T),tB(R.metadata),T)}XJ.schemaFromJSON=wb;function $J(R){return new hA.RecordBatch(R.count,pJ(R.columns),rJ(R.columns))}XJ.recordBatchFromJSON=$J;function Ub(R){return new hA.DictionaryBatch($J(R.data),R.id,R.isDelta)}XJ.dictionaryBatchFromJSON=Ub;function Qb(R,T){return(R.fields||[]).filter(Boolean).map((A)=>mA.Field.fromJSON(A,T))}function bJ(R,T){return(R.children||[]).filter(Boolean).map((A)=>mA.Field.fromJSON(A,T))}function pJ(R){return(R||[]).reduce((T,A)=>[...T,new hA.FieldNode(A.count,fb(A.VALIDITY)),...pJ(A.children)],[])}function rJ(R,T=[]){for(let A=-1,h=(R||[]).length;++A<h;){let C=R[A];C.VALIDITY&&T.push(new hA.BufferRegion(T.length,C.VALIDITY.length)),C.TYPE_ID&&T.push(new hA.BufferRegion(T.length,C.TYPE_ID.length)),C.OFFSET&&T.push(new hA.BufferRegion(T.length,C.OFFSET.length)),C.DATA&&T.push(new hA.BufferRegion(T.length,C.DATA.length)),T=rJ(C.children,T)}return T}function fb(R){return(R||[]).reduce((T,A)=>T+ +(A===0),0)}function zb(R,T){let A,h,C,B,D,_;if(!T||!(B=R.dictionary))D=EJ(R,bJ(R,T)),C=new mA.Field(R.name,D,R.nullable,tB(R.metadata));else if(!T.has(A=B.id))h=(h=B.indexType)?nJ(h):new DR.Int32,T.set(A,D=EJ(R,bJ(R,T))),_=new DR.Dictionary(D,h,A,B.isOrdered),C=new mA.Field(R.name,_,R.nullable,tB(R.metadata));else h=(h=B.indexType)?nJ(h):new DR.Int32,_=new DR.Dictionary(T.get(A),h,A,B.isOrdered),C=new mA.Field(R.name,_,R.nullable,tB(R.metadata));return C||null}XJ.fieldFromJSON=zb;function tB(R=[]){return new Map(R.map(({key:T,value:A})=>[T,A]))}function nJ(R){return new DR.Int(R.isSigned,R.bitWidth)}function EJ(R,T){let A=R.type.name;switch(A){case"NONE":return new DR.Null;case"null":return new DR.Null;case"binary":return new DR.Binary;case"largebinary":return new DR.LargeBinary;case"utf8":return new DR.Utf8;case"largeutf8":return new DR.LargeUtf8;case"bool":return new DR.Bool;case"list":return new DR.List((T||[])[0]);case"struct":return new DR.Struct(T||[]);case"struct_":return new DR.Struct(T||[])}switch(A){case"int":{let h=R.type;return new DR.Int(h.isSigned,h.bitWidth)}case"floatingpoint":{let h=R.type;return new DR.Float(AA.Precision[h.precision])}case"decimal":{let h=R.type;return new DR.Decimal(h.scale,h.precision,h.bitWidth)}case"date":{let h=R.type;return new DR.Date_(AA.DateUnit[h.unit])}case"time":{let h=R.type;return new DR.Time(AA.TimeUnit[h.unit],h.bitWidth)}case"timestamp":{let h=R.type;return new DR.Timestamp(AA.TimeUnit[h.unit],h.timezone)}case"interval":{let h=R.type;return new DR.Interval(AA.IntervalUnit[h.unit])}case"duration":{let h=R.type;return new DR.Duration(AA.TimeUnit[h.unit])}case"union":{let h=R.type,[C,...B]=(h.mode+"").toLowerCase(),D=C.toUpperCase()+B.join("");return new DR.Union(AA.UnionMode[D],h.typeIds||[],T||[])}case"fixedsizebinary":{let h=R.type;return new DR.FixedSizeBinary(h.byteWidth)}case"fixedsizelist":{let h=R.type;return new DR.FixedSizeList(h.listSize,(T||[])[0])}case"map":{let h=R.type;return new DR.Map_((T||[])[0],h.keysSorted)}}throw Error(`Unrecognized type: "${A}"`)}});var CA=a((uJ)=>{Object.defineProperty(uJ,"__esModule",{value:!0});uJ.FieldNode=uJ.BufferRegion=uJ.DictionaryBatch=uJ.RecordBatch=uJ.Message=void 0;var jJ=f(),vT=PC(),mb=B9(),P9=iC(),YA=yD(),Yb=h9(),oT=rD(),R0=SD(),JR=pA(),t9=SA(),FJ=gD(),T0=JC(),A0=WC(),h0=LC(),C0=SC(),B0=yC(),D0=IC(),_0=NC(),O0=gC(),H0=cC(),i0=oC(),q0=kC(),s9=cJ(),ER=QR(),a0=bR(),K9=q9(),cR=NR(),jO=KJ(),bB=xJ(),L0=jJ.Builder,W0=jJ.ByteBuffer,_R=iR();class BA{static fromJSON(R,T){let A=new BA(0,cR.MetadataVersion.V5,T);return A._createHeader=N0(R,T),A}static decode(R){R=new W0((0,a0.toUint8Array)(R));let T=s9.Message.getRootAsMessage(R),A=T.bodyLength(),h=T.version(),C=T.headerType(),B=new BA(A,h,C);return B._createHeader=c0(T,C),B}static encode(R){let T=new L0,A=-1;if(R.isSchema())A=ER.Schema.encode(T,R.header());else if(R.isRecordBatch())A=CT.encode(T,R.header());else if(R.isDictionaryBatch())A=FT.encode(T,R.header());return s9.Message.startMessage(T),s9.Message.addVersion(T,cR.MetadataVersion.V5),s9.Message.addHeader(T,A),s9.Message.addHeaderType(T,R.headerType),s9.Message.addBodyLength(T,BigInt(R.bodyLength)),s9.Message.finishMessageBuffer(T,s9.Message.endMessage(T)),T.asUint8Array()}static from(R,T=0){if(R instanceof ER.Schema)return new BA(0,cR.MetadataVersion.V5,cR.MessageHeader.Schema,R);if(R instanceof CT)return new BA(T,cR.MetadataVersion.V5,cR.MessageHeader.RecordBatch,R);if(R instanceof FT)return new BA(T,cR.MetadataVersion.V5,cR.MessageHeader.DictionaryBatch,R);throw Error(`Unrecognized Message header: ${R}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===cR.MessageHeader.Schema}isRecordBatch(){return this.headerType===cR.MessageHeader.RecordBatch}isDictionaryBatch(){return this.headerType===cR.MessageHeader.DictionaryBatch}constructor(R,T,A,h){this._version=T,this._headerType=A,this.body=new Uint8Array(0),h&&(this._createHeader=()=>h),this._bodyLength=(0,K9.bigIntToNumber)(R)}}uJ.Message=BA;class CT{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(R,T,A){this._nodes=T,this._buffers=A,this._length=(0,K9.bigIntToNumber)(R)}}uJ.RecordBatch=CT;class FT{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(R,T,A=!1){this._data=R,this._isDelta=A,this._id=(0,K9.bigIntToNumber)(T)}}uJ.DictionaryBatch=FT;class DA{constructor(R,T){this.offset=(0,K9.bigIntToNumber)(R),this.length=(0,K9.bigIntToNumber)(T)}}uJ.BufferRegion=DA;class _A{constructor(R,T){this.length=(0,K9.bigIntToNumber)(R),this.nullCount=(0,K9.bigIntToNumber)(T)}}uJ.FieldNode=_A;function N0(R,T){return()=>{switch(T){case cR.MessageHeader.Schema:return ER.Schema.fromJSON(R);case cR.MessageHeader.RecordBatch:return CT.fromJSON(R);case cR.MessageHeader.DictionaryBatch:return FT.fromJSON(R)}throw Error(`Unrecognized Message type: { name: ${cR.MessageHeader[T]}, type: ${T} }`)}}function c0(R,T){return()=>{switch(T){case cR.MessageHeader.Schema:return ER.Schema.decode(R.header(new vT.Schema),new Map,R.version());case cR.MessageHeader.RecordBatch:return CT.decode(R.header(new P9.RecordBatch),R.version());case cR.MessageHeader.DictionaryBatch:return FT.decode(R.header(new YA.DictionaryBatch),R.version())}throw Error(`Unrecognized Message type: { name: ${cR.MessageHeader[T]}, type: ${T} }`)}}ER.Field.encode=K0;ER.Field.decode=P0;ER.Field.fromJSON=bB.fieldFromJSON;ER.Schema.encode=t0;ER.Schema.decode=o0;ER.Schema.fromJSON=bB.schemaFromJSON;CT.encode=b0;CT.decode=J0;CT.fromJSON=bB.recordBatchFromJSON;FT.encode=n0;FT.decode=I0;FT.fromJSON=bB.dictionaryBatchFromJSON;_A.encode=E0;_A.decode=S0;DA.encode=$0;DA.decode=k0;function o0(R,T=new Map,A=cR.MetadataVersion.V5){let h=s0(R,T);return new ER.Schema(h,KB(R),T,A)}function J0(R,T=cR.MetadataVersion.V5){if(R.compression()!==null)throw Error("Record batch compression not implemented");return new CT(R.length(),y0(R),g0(R,T))}function I0(R,T=cR.MetadataVersion.V5){return new FT(CT.decode(R.data(),T),R.id(),R.isDelta())}function k0(R){return new DA(R.offset(),R.length())}function S0(R){return new _A(R.length(),R.nullCount())}function y0(R){let T=[];for(let A,h=-1,C=-1,B=R.nodesLength();++h<B;)if(A=R.nodes(h))T[++C]=_A.decode(A);return T}function g0(R,T){let A=[];for(let h,C=-1,B=-1,D=R.buffersLength();++C<D;)if(h=R.buffers(C)){if(T<cR.MetadataVersion.V4)h.bb_pos+=8*(C+1);A[++B]=DA.decode(h)}return A}function s0(R,T){let A=[];for(let h,C=-1,B=-1,D=R.fieldsLength();++C<D;)if(h=R.fields(C))A[++B]=ER.Field.decode(h,T);return A}function eJ(R,T){let A=[];for(let h,C=-1,B=-1,D=R.childrenLength();++C<D;)if(h=R.children(C))A[++B]=ER.Field.decode(h,T);return A}function P0(R,T){let A,h,C,B,D,_;if(!T||!(_=R.dictionary()))C=dJ(R,eJ(R,T)),h=new ER.Field(R.name(),C,R.nullable(),KB(R));else if(!T.has(A=(0,K9.bigIntToNumber)(_.id())))B=(B=_.indexType())?lJ(B):new _R.Int32,T.set(A,C=dJ(R,eJ(R,T))),D=new _R.Dictionary(C,B,A,_.isOrdered()),h=new ER.Field(R.name(),D,R.nullable(),KB(R));else B=(B=_.indexType())?lJ(B):new _R.Int32,D=new _R.Dictionary(T.get(A),B,A,_.isOrdered()),h=new ER.Field(R.name(),D,R.nullable(),KB(R));return h||null}function KB(R){let T=new Map;if(R){for(let A,h,C=-1,B=Math.trunc(R.customMetadataLength());++C<B;)if((A=R.customMetadata(C))&&(h=A.key())!=null)T.set(h,A.value())}return T}function lJ(R){return new _R.Int(R.isSigned(),R.bitWidth())}function dJ(R,T){let A=R.typeType();switch(A){case JR.Type.NONE:return new _R.Null;case JR.Type.Null:return new _R.Null;case JR.Type.Binary:return new _R.Binary;case JR.Type.LargeBinary:return new _R.LargeBinary;case JR.Type.Utf8:return new _R.Utf8;case JR.Type.LargeUtf8:return new _R.LargeUtf8;case JR.Type.Bool:return new _R.Bool;case JR.Type.List:return new _R.List((T||[])[0]);case JR.Type.Struct_:return new _R.Struct(T||[])}switch(A){case JR.Type.Int:{let h=R.type(new mb.Int);return new _R.Int(h.isSigned(),h.bitWidth())}case JR.Type.FloatingPoint:{let h=R.type(new T0.FloatingPoint);return new _R.Float(h.precision())}case JR.Type.Decimal:{let h=R.type(new A0.Decimal);return new _R.Decimal(h.scale(),h.precision(),h.bitWidth())}case JR.Type.Date:{let h=R.type(new h0.Date);return new _R.Date_(h.unit())}case JR.Type.Time:{let h=R.type(new C0.Time);return new _R.Time(h.unit(),h.bitWidth())}case JR.Type.Timestamp:{let h=R.type(new B0.Timestamp);return new _R.Timestamp(h.unit(),h.timezone())}case JR.Type.Interval:{let h=R.type(new D0.Interval);return new _R.Interval(h.unit())}case JR.Type.Duration:{let h=R.type(new _0.Duration);return new _R.Duration(h.unit())}case JR.Type.Union:{let h=R.type(new O0.Union);return new _R.Union(h.mode(),h.typeIdsArray()||[],T||[])}case JR.Type.FixedSizeBinary:{let h=R.type(new H0.FixedSizeBinary);return new _R.FixedSizeBinary(h.byteWidth())}case JR.Type.FixedSizeList:{let h=R.type(new i0.FixedSizeList);return new _R.FixedSizeList(h.listSize(),(T||[])[0])}case JR.Type.Map:{let h=R.type(new q0.Map);return new _R.Map_((T||[])[0],h.keysSorted())}}throw Error(`Unrecognized type: "${JR.Type[A]}" (${A})`)}function t0(R,T){let A=T.fields.map((B)=>ER.Field.encode(R,B));vT.Schema.startFieldsVector(R,A.length);let h=vT.Schema.createFieldsVector(R,A),C=!(T.metadata&&T.metadata.size>0)?-1:vT.Schema.createCustomMetadataVector(R,[...T.metadata].map(([B,D])=>{let _=R.createString(`${B}`),O=R.createString(`${D}`);return t9.KeyValue.startKeyValue(R),t9.KeyValue.addKey(R,_),t9.KeyValue.addValue(R,O),t9.KeyValue.endKeyValue(R)}));if(vT.Schema.startSchema(R),vT.Schema.addFields(R,h),vT.Schema.addEndianness(R,p0?FJ.Endianness.Little:FJ.Endianness.Big),C!==-1)vT.Schema.addCustomMetadata(R,C);return vT.Schema.endSchema(R)}function K0(R,T){let A=-1,h=-1,C=-1,B=T.type,D=T.typeId;if(!_R.DataType.isDictionary(B))h=jO.instance.visit(B,R);else D=B.dictionary.typeId,C=jO.instance.visit(B,R),h=jO.instance.visit(B.dictionary,R);let _=(B.children||[]).map((i)=>ER.Field.encode(R,i)),O=oT.Field.createChildrenVector(R,_),H=!(T.metadata&&T.metadata.size>0)?-1:oT.Field.createCustomMetadataVector(R,[...T.metadata].map(([i,J])=>{let P=R.createString(`${i}`),w=R.createString(`${J}`);return t9.KeyValue.startKeyValue(R),t9.KeyValue.addKey(R,P),t9.KeyValue.addValue(R,w),t9.KeyValue.endKeyValue(R)}));if(T.name)A=R.createString(T.name);if(oT.Field.startField(R),oT.Field.addType(R,h),oT.Field.addTypeType(R,D),oT.Field.addChildren(R,O),oT.Field.addNullable(R,!!T.nullable),A!==-1)oT.Field.addName(R,A);if(C!==-1)oT.Field.addDictionary(R,C);if(H!==-1)oT.Field.addCustomMetadata(R,H);return oT.Field.endField(R)}function b0(R,T){let A=T.nodes||[],h=T.buffers||[];P9.RecordBatch.startNodesVector(R,A.length);for(let D of A.slice().reverse())_A.encode(R,D);let C=R.endVector();P9.RecordBatch.startBuffersVector(R,h.length);for(let D of h.slice().reverse())DA.encode(R,D);let B=R.endVector();return P9.RecordBatch.startRecordBatch(R),P9.RecordBatch.addLength(R,BigInt(T.length)),P9.RecordBatch.addNodes(R,C),P9.RecordBatch.addBuffers(R,B),P9.RecordBatch.endRecordBatch(R)}function n0(R,T){let A=CT.encode(R,T.data);return YA.DictionaryBatch.startDictionaryBatch(R),YA.DictionaryBatch.addId(R,BigInt(T.id)),YA.DictionaryBatch.addIsDelta(R,T.isDelta),YA.DictionaryBatch.addData(R,A),YA.DictionaryBatch.endDictionaryBatch(R)}function E0(R,T){return R0.FieldNode.createFieldNode(R,BigInt(T.length),BigInt(T.nullCount))}function $0(R,T){return Yb.Buffer.createBuffer(R,BigInt(T.offset),BigInt(T.length))}var p0=(()=>{let R=new ArrayBuffer(2);return new DataView(R).setInt16(0,256,!0),new Int16Array(R)[0]===256})()});var $B=a((vJ)=>{Object.defineProperty(vJ,"__esModule",{value:!0});vJ.magicX2AndPadding=vJ.magicAndPadding=vJ.magicLength=vJ.checkForMagicArrowString=vJ.MAGIC=vJ.MAGIC_STR=vJ.PADDING=vJ.JSONMessageReader=vJ.AsyncMessageReader=vJ.MessageReader=void 0;var b9=KR(),n9=NR(),wJ=f(),Fh=CA(),F0=jT(),e0=$_(),UJ=bR(),nB=rT(),JT=Ih(),uO=(R)=>`Expected ${n9.MessageHeader[R]} Message in stream, but was null or length 0.`,ZO=(R)=>`Header pointer of flatbuffer-encoded ${n9.MessageHeader[R]} Message is null or length 0.`,QJ=(R,T)=>`Expected to read ${R} metadata bytes, but only read ${T}.`,fJ=(R,T)=>`Expected to read ${R} bytes for message body, but only read ${T}.`;class wO{constructor(R){this.source=R instanceof nB.ByteStream?R:new nB.ByteStream(R)}[Symbol.iterator](){return this}next(){let R;if((R=this.readMetadataLength()).done)return JT.ITERATOR_DONE;if(R.value===-1&&(R=this.readMetadataLength()).done)return JT.ITERATOR_DONE;if((R=this.readMetadata(R.value)).done)return JT.ITERATOR_DONE;return R}throw(R){return this.source.throw(R)}return(R){return this.source.return(R)}readMessage(R){let T;if((T=this.next()).done)return null;if(R!=null&&T.value.headerType!==R)throw Error(uO(R));return T.value}readMessageBody(R){if(R<=0)return new Uint8Array(0);let T=(0,UJ.toUint8Array)(this.source.read(R));if(T.byteLength<R)throw Error(fJ(R,T.byteLength));return T.byteOffset%8===0&&T.byteOffset+T.byteLength<=T.buffer.byteLength?T:T.slice()}readSchema(R=!1){let T=n9.MessageHeader.Schema,A=this.readMessage(T),h=A===null||A===void 0?void 0:A.header();if(R&&!h)throw Error(ZO(T));return h}readMetadataLength(){let R=this.source.read(vJ.PADDING),T=R&&new wJ.ByteBuffer(R),A=(T===null||T===void 0?void 0:T.readInt32(0))||0;return{done:A===0,value:A}}readMetadata(R){let T=this.source.read(R);if(!T)return JT.ITERATOR_DONE;if(T.byteLength<R)throw Error(QJ(R,T.byteLength));return{done:!1,value:Fh.Message.decode(T)}}}vJ.MessageReader=wO;class zJ{constructor(R,T){this.source=R instanceof nB.AsyncByteStream?R:(0,F0.isFileHandle)(R)?new e0.AsyncRandomAccessFile(R,T):new nB.AsyncByteStream(R)}[Symbol.asyncIterator](){return this}next(){return b9.__awaiter(this,void 0,void 0,function*(){let R;if((R=yield this.readMetadataLength()).done)return JT.ITERATOR_DONE;if(R.value===-1&&(R=yield this.readMetadataLength()).done)return JT.ITERATOR_DONE;if((R=yield this.readMetadata(R.value)).done)return JT.ITERATOR_DONE;return R})}throw(R){return b9.__awaiter(this,void 0,void 0,function*(){return yield this.source.throw(R)})}return(R){return b9.__awaiter(this,void 0,void 0,function*(){return yield this.source.return(R)})}readMessage(R){return b9.__awaiter(this,void 0,void 0,function*(){let T;if((T=yield this.next()).done)return null;if(R!=null&&T.value.headerType!==R)throw Error(uO(R));return T.value})}readMessageBody(R){return b9.__awaiter(this,void 0,void 0,function*(){if(R<=0)return new Uint8Array(0);let T=(0,UJ.toUint8Array)(yield this.source.read(R));if(T.byteLength<R)throw Error(fJ(R,T.byteLength));return T.byteOffset%8===0&&T.byteOffset+T.byteLength<=T.buffer.byteLength?T:T.slice()})}readSchema(){return b9.__awaiter(this,arguments,void 0,function*(R=!1){let T=n9.MessageHeader.Schema,A=yield this.readMessage(T),h=A===null||A===void 0?void 0:A.header();if(R&&!h)throw Error(ZO(T));return h})}readMetadataLength(){return b9.__awaiter(this,void 0,void 0,function*(){let R=yield this.source.read(vJ.PADDING),T=R&&new wJ.ByteBuffer(R),A=(T===null||T===void 0?void 0:T.readInt32(0))||0;return{done:A===0,value:A}})}readMetadata(R){return b9.__awaiter(this,void 0,void 0,function*(){let T=yield this.source.read(R);if(!T)return JT.ITERATOR_DONE;if(T.byteLength<R)throw Error(QJ(R,T.byteLength));return{done:!1,value:Fh.Message.decode(T)}})}}vJ.AsyncMessageReader=zJ;class MJ extends wO{constructor(R){super(new Uint8Array(0));this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=R instanceof JT.ArrowJSON?R:new JT.ArrowJSON(R)}next(){let{_json:R}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Fh.Message.fromJSON(R.schema,n9.MessageHeader.Schema)};if(this._dictionaryIndex<R.dictionaries.length){let T=R.dictionaries[this._dictionaryIndex++];return this._body=T.data.columns,{done:!1,value:Fh.Message.fromJSON(T,n9.MessageHeader.DictionaryBatch)}}if(this._batchIndex<R.batches.length){let T=R.batches[this._batchIndex++];return this._body=T.columns,{done:!1,value:Fh.Message.fromJSON(T,n9.MessageHeader.RecordBatch)}}return this._body=[],JT.ITERATOR_DONE}readMessageBody(R){return T(this._body);function T(A){return(A||[]).reduce((h,C)=>[...h,...C.VALIDITY&&[C.VALIDITY]||[],...C.TYPE_ID&&[C.TYPE_ID]||[],...C.OFFSET&&[C.OFFSET]||[],...C.DATA&&[C.DATA]||[],...T(C.children)],[])}}readMessage(R){let T;if((T=this.next()).done)return null;if(R!=null&&T.value.headerType!==R)throw Error(uO(R));return T.value}readSchema(){let R=n9.MessageHeader.Schema,T=this.readMessage(R),A=T===null||T===void 0?void 0:T.header();if(!T||!A)throw Error(ZO(R));return A}}vJ.JSONMessageReader=MJ;vJ.PADDING=4;vJ.MAGIC_STR="ARROW1";vJ.MAGIC=new Uint8Array(vJ.MAGIC_STR.length);for(let R=0;R<vJ.MAGIC_STR.length;R+=1)vJ.MAGIC[R]=vJ.MAGIC_STR.codePointAt(R);function l0(R,T=0){for(let A=-1,h=vJ.MAGIC.length;++A<h;)if(vJ.MAGIC[A]!==R[T+A])return!1;return!0}vJ.checkForMagicArrowString=l0;vJ.magicLength=vJ.MAGIC.length;vJ.magicAndPadding=vJ.magicLength+vJ.PADDING;vJ.magicX2AndPadding=vJ.magicLength*2+vJ.PADDING});var HA=a((OI)=>{Object.defineProperty(OI,"__esModule",{value:!0});OI.AsyncRecordBatchFileReader=OI.RecordBatchFileReader=OI.AsyncRecordBatchStreamReader=OI.RecordBatchStreamReader=OI.RecordBatchReader=void 0;var OR=KR(),U0=bT(),mJ=dR(),Q0=iR(),pB=NR(),hI=t_(),YJ=kA(),RI=rT(),dh=$_(),CI=Ko(),QO=y9(),OA=Ih(),DT=$B(),BT=jT();class VT extends OA.ReadableInterop{constructor(R){super();this._impl=R}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(R){return this._impl.throw(R)}return(R){return this._impl.return(R)}cancel(){return this._impl.cancel()}reset(R){return this._impl.reset(R),this._DOMStream=void 0,this._nodeStream=void 0,this}open(R){let T=this._impl.open(R);return(0,BT.isPromise)(T)?T.then(()=>this):this}readRecordBatch(R){return this._impl.isFile()?this._impl.readRecordBatch(R):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return YJ.default.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return YJ.default.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(R){throw Error('"throughNode" not available in this environment')}static throughDOM(R,T){throw Error('"throughDOM" not available in this environment')}static from(R){if(R instanceof VT)return R;else if((0,BT.isArrowJSON)(R))return f0(R);else if((0,BT.isFileHandle)(R))return v0(R);else if((0,BT.isPromise)(R))return(()=>OR.__awaiter(this,void 0,void 0,function*(){return yield VT.from(yield R)}))();else if((0,BT.isFetchResponse)(R)||(0,BT.isReadableDOMStream)(R)||(0,BT.isReadableNodeStream)(R)||(0,BT.isAsyncIterable)(R))return M0(new RI.AsyncByteStream(R));return z0(new RI.ByteStream(R))}static readAll(R){if(R instanceof VT)return R.isSync()?TI(R):AI(R);else if((0,BT.isArrowJSON)(R)||ArrayBuffer.isView(R)||(0,BT.isIterable)(R)||(0,BT.isIteratorResult)(R))return TI(R);return AI(R)}}OI.RecordBatchReader=VT;class Rh extends VT{constructor(R){super(R);this._impl=R}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return OR.__asyncGenerator(this,arguments,function*(){yield OR.__await(yield*OR.__asyncDelegator(OR.__asyncValues(this[Symbol.iterator]())))})}}OI.RecordBatchStreamReader=Rh;class Th extends VT{constructor(R){super(R);this._impl=R}readAll(){return OR.__awaiter(this,void 0,void 0,function*(){var R,T,A,h;let C=[];try{for(var B=!0,D=OR.__asyncValues(this),_;_=yield D.next(),R=_.done,!R;B=!0){h=_.value,B=!1;let O=h;C.push(O)}}catch(O){T={error:O}}finally{try{if(!B&&!R&&(A=D.return))yield A.call(D)}finally{if(T)throw T.error}}return C})}[Symbol.iterator](){throw Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}OI.AsyncRecordBatchStreamReader=Th;class rB extends Rh{constructor(R){super(R);this._impl=R}}OI.RecordBatchFileReader=rB;class fO extends Th{constructor(R){super(R);this._impl=R}}OI.AsyncRecordBatchFileReader=fO;class zO{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(R=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=R}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(R){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=R,this.dictionaries=new Map,this}_loadRecordBatch(R,T){let A=this._loadVectors(R,T,this.schema.fields),h=(0,U0.makeData)({type:new Q0.Struct(this.schema.fields),length:R.length,children:A});return new QO.RecordBatch(this.schema,h)}_loadDictionaryBatch(R,T){let{id:A,isDelta:h}=R,{dictionaries:C,schema:B}=this,D=C.get(A),_=B.dictionaries.get(A),O=this._loadVectors(R.data,T,[_]);return(D&&h?D.concat(new mJ.Vector(O)):new mJ.Vector(O)).memoize()}_loadVectors(R,T,A){return new CI.VectorLoader(T,R.nodes,R.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(A)}}class jh extends zO{constructor(R,T){super(T);this._reader=!(0,BT.isArrowJSON)(R)?new DT.MessageReader(this._handle=R):new DT.JSONMessageReader(this._handle=R)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){if(!this.closed&&(this.closed=!0))this.reset()._reader.return(),this._reader=null,this.dictionaries=null}open(R){if(!this.closed){if(this.autoDestroy=_I(this,R),!(this.schema||(this.schema=this._reader.readSchema())))this.cancel()}return this}throw(R){if(!this.closed&&this.autoDestroy&&(this.closed=!0))return this.reset()._reader.throw(R);return OA.ITERATOR_DONE}return(R){if(!this.closed&&this.autoDestroy&&(this.closed=!0))return this.reset()._reader.return(R);return OA.ITERATOR_DONE}next(){if(this.closed)return OA.ITERATOR_DONE;let R,{_reader:T}=this;while(R=this._readNextMessageAndValidate())if(R.isSchema())this.reset(R.header());else if(R.isRecordBatch()){this._recordBatchIndex++;let A=R.header(),h=T.readMessageBody(R.bodyLength);return{done:!1,value:this._loadRecordBatch(A,h)}}else if(R.isDictionaryBatch()){this._dictionaryIndex++;let A=R.header(),h=T.readMessageBody(R.bodyLength),C=this._loadDictionaryBatch(A,h);this.dictionaries.set(A.id,C)}if(this.schema&&this._recordBatchIndex===0)return this._recordBatchIndex++,{done:!1,value:new QO._InternalEmptyPlaceholderRecordBatch(this.schema)};return this.return()}_readNextMessageAndValidate(R){return this._reader.readMessage(R)}}class uh extends zO{constructor(R,T){super(T);this._reader=new DT.AsyncMessageReader(this._handle=R)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return OR.__awaiter(this,void 0,void 0,function*(){if(!this.closed&&(this.closed=!0))yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null})}open(R){return OR.__awaiter(this,void 0,void 0,function*(){if(!this.closed){if(this.autoDestroy=_I(this,R),!(this.schema||(this.schema=yield this._reader.readSchema())))yield this.cancel()}return this})}throw(R){return OR.__awaiter(this,void 0,void 0,function*(){if(!this.closed&&this.autoDestroy&&(this.closed=!0))return yield this.reset()._reader.throw(R);return OA.ITERATOR_DONE})}return(R){return OR.__awaiter(this,void 0,void 0,function*(){if(!this.closed&&this.autoDestroy&&(this.closed=!0))return yield this.reset()._reader.return(R);return OA.ITERATOR_DONE})}next(){return OR.__awaiter(this,void 0,void 0,function*(){if(this.closed)return OA.ITERATOR_DONE;let R,{_reader:T}=this;while(R=yield this._readNextMessageAndValidate())if(R.isSchema())yield this.reset(R.header());else if(R.isRecordBatch()){this._recordBatchIndex++;let A=R.header(),h=yield T.readMessageBody(R.bodyLength);return{done:!1,value:this._loadRecordBatch(A,h)}}else if(R.isDictionaryBatch()){this._dictionaryIndex++;let A=R.header(),h=yield T.readMessageBody(R.bodyLength),C=this._loadDictionaryBatch(A,h);this.dictionaries.set(A.id,C)}if(this.schema&&this._recordBatchIndex===0)return this._recordBatchIndex++,{done:!1,value:new QO._InternalEmptyPlaceholderRecordBatch(this.schema)};return yield this.return()})}_readNextMessageAndValidate(R){return OR.__awaiter(this,void 0,void 0,function*(){return yield this._reader.readMessage(R)})}}class MO extends jh{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(R,T){super(R instanceof dh.RandomAccessFile?R:new dh.RandomAccessFile(R),T)}isSync(){return!0}isFile(){return!0}open(R){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(let T of this._footer.dictionaryBatches())T&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(R)}readRecordBatch(R){var T;if(this.closed)return null;if(!this._footer)this.open();let A=(T=this._footer)===null||T===void 0?void 0:T.getRecordBatch(R);if(A&&this._handle.seek(A.offset)){let h=this._reader.readMessage(pB.MessageHeader.RecordBatch);if(h===null||h===void 0?void 0:h.isRecordBatch()){let C=h.header(),B=this._reader.readMessageBody(h.bodyLength);return this._loadRecordBatch(C,B)}}return null}_readDictionaryBatch(R){var T;let A=(T=this._footer)===null||T===void 0?void 0:T.getDictionaryBatch(R);if(A&&this._handle.seek(A.offset)){let h=this._reader.readMessage(pB.MessageHeader.DictionaryBatch);if(h===null||h===void 0?void 0:h.isDictionaryBatch()){let C=h.header(),B=this._reader.readMessageBody(h.bodyLength),D=this._loadDictionaryBatch(C,B);this.dictionaries.set(C.id,D)}}}_readFooter(){let{_handle:R}=this,T=R.size-DT.magicAndPadding,A=R.readInt32(T),h=R.readAt(T-A,A);return hI.Footer.decode(h)}_readNextMessageAndValidate(R){var T;if(!this._footer)this.open();if(this._footer&&this._recordBatchIndex<this.numRecordBatches){let A=(T=this._footer)===null||T===void 0?void 0:T.getRecordBatch(this._recordBatchIndex);if(A&&this._handle.seek(A.offset))return this._reader.readMessage(R)}return null}}class BI extends uh{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(R,...T){let A=typeof T[0]!=="number"?T.shift():void 0,h=T[0]instanceof Map?T.shift():void 0;super(R instanceof dh.AsyncRandomAccessFile?R:new dh.AsyncRandomAccessFile(R,A),h)}isFile(){return!0}isAsync(){return!0}open(R){let T=Object.create(null,{open:{get:()=>super.open}});return OR.__awaiter(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(let A of this._footer.dictionaryBatches())A&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield T.open.call(this,R)})}readRecordBatch(R){return OR.__awaiter(this,void 0,void 0,function*(){var T;if(this.closed)return null;if(!this._footer)yield this.open();let A=(T=this._footer)===null||T===void 0?void 0:T.getRecordBatch(R);if(A&&(yield this._handle.seek(A.offset))){let h=yield this._reader.readMessage(pB.MessageHeader.RecordBatch);if(h===null||h===void 0?void 0:h.isRecordBatch()){let C=h.header(),B=yield this._reader.readMessageBody(h.bodyLength);return this._loadRecordBatch(C,B)}}return null})}_readDictionaryBatch(R){return OR.__awaiter(this,void 0,void 0,function*(){var T;let A=(T=this._footer)===null||T===void 0?void 0:T.getDictionaryBatch(R);if(A&&(yield this._handle.seek(A.offset))){let h=yield this._reader.readMessage(pB.MessageHeader.DictionaryBatch);if(h===null||h===void 0?void 0:h.isDictionaryBatch()){let C=h.header(),B=yield this._reader.readMessageBody(h.bodyLength),D=this._loadDictionaryBatch(C,B);this.dictionaries.set(C.id,D)}}})}_readFooter(){return OR.__awaiter(this,void 0,void 0,function*(){let{_handle:R}=this;R._pending&&(yield R._pending);let T=R.size-DT.magicAndPadding,A=yield R.readInt32(T),h=yield R.readAt(T-A,A);return hI.Footer.decode(h)})}_readNextMessageAndValidate(R){return OR.__awaiter(this,void 0,void 0,function*(){if(!this._footer)yield this.open();if(this._footer&&this._recordBatchIndex<this.numRecordBatches){let T=this._footer.getRecordBatch(this._recordBatchIndex);if(T&&(yield this._handle.seek(T.offset)))return yield this._reader.readMessage(R)}return null})}}class DI extends jh{constructor(R,T){super(R,T)}_loadVectors(R,T,A){return new CI.JSONVectorLoader(T,R.nodes,R.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(A)}}function _I(R,T){return T&&typeof T.autoDestroy==="boolean"?T.autoDestroy:R.autoDestroy}function*TI(R){let T=VT.from(R);try{if(!T.open({autoDestroy:!1}).closed)do yield T;while(!T.reset().open().closed)}finally{T.cancel()}}function AI(R){return OR.__asyncGenerator(this,arguments,function*(){let A=yield OR.__await(VT.from(R));try{if(!(yield OR.__await(A.open({autoDestroy:!1}))).closed)do yield yield OR.__await(A);while(!(yield OR.__await(A.reset().open())).closed)}finally{yield OR.__await(A.cancel())}})}function f0(R){return new Rh(new DI(R))}function z0(R){let T=R.peek(DT.magicLength+7&-8);return T&&T.byteLength>=4?!(0,DT.checkForMagicArrowString)(T)?new Rh(new jh(R)):new rB(new MO(R.read())):new Rh(new jh(function*(){}()))}function M0(R){return OR.__awaiter(this,void 0,void 0,function*(){let T=yield R.peek(DT.magicLength+7&-8);return T&&T.byteLength>=4?!(0,DT.checkForMagicArrowString)(T)?new Th(new uh(R)):new rB(new MO(yield R.read())):new Th(new uh(function(){return OR.__asyncGenerator(this,arguments,function*(){})}()))})}function v0(R){return OR.__awaiter(this,void 0,void 0,function*(){let{size:T}=yield R.stat(),A=new dh.AsyncRandomAccessFile(R,T);if(T>=DT.magicX2AndPadding&&(0,DT.checkForMagicArrowString)(yield A.readAt(0,DT.magicLength+7&-8)))return new fO(new BI(A));return new Th(new uh(A))})}});var NI=a((LI)=>{Object.defineProperty(LI,"__esModule",{value:!0});LI.VectorAssembler=void 0;var Tn=dR(),An=ZR(),iI=NR(),hn=y9(),aI=bR(),VO=M9(),mO=CA(),vO=iR(),qI=q9();class IR extends An.Visitor{static assemble(...R){let T=(h)=>h.flatMap((C)=>Array.isArray(C)?T(C):C instanceof hn.RecordBatch?C.data.children:C.data),A=new IR;return A.visitMany(T(R)),A}constructor(){super();this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(R){if(R instanceof Tn.Vector)return this.visitMany(R.data),this;let{type:T}=R;if(!vO.DataType.isDictionary(T)){let{length:A}=R;if(A>2147483647)throw RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(vO.DataType.isUnion(T))this.nodes.push(new mO.FieldNode(A,0));else{let{nullCount:h}=R;if(!vO.DataType.isNull(T))IT.call(this,h<=0?new Uint8Array(0):(0,VO.truncateBitmap)(R.offset,A,R.nullBitmap));this.nodes.push(new mO.FieldNode(A,h))}}return super.visit(R)}visitNull(R){return this}visitDictionary(R){return this.visit(R.clone(R.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}LI.VectorAssembler=IR;function IT(R){let T=R.byteLength+7&-8;return this.buffers.push(R),this.bufferRegions.push(new mO.BufferRegion(this._byteLength,T)),this._byteLength+=T,this}function Cn(R){var T;let{type:A,length:h,typeIds:C,valueOffsets:B}=R;if(IT.call(this,C),A.mode===iI.UnionMode.Sparse)return YO.call(this,R);else if(A.mode===iI.UnionMode.Dense)if(R.offset<=0)return IT.call(this,B),YO.call(this,R);else{let D=new Int32Array(h),_=Object.create(null),O=Object.create(null);for(let H,i,J=-1;++J<h;){if((H=C[J])===void 0)continue;if((i=_[H])===void 0)i=_[H]=B[J];D[J]=B[J]-i,O[H]=((T=O[H])!==null&&T!==void 0?T:0)+1}IT.call(this,D),this.visitMany(R.children.map((H,i)=>{let J=A.typeIds[i],P=_[J],w=O[J];return H.slice(P,Math.min(h,w))}))}return this}function Bn(R){let T;if(R.nullCount>=R.length)return IT.call(this,new Uint8Array(0));else if((T=R.values)instanceof Uint8Array)return IT.call(this,(0,VO.truncateBitmap)(R.offset,R.length,T));return IT.call(this,(0,VO.packBools)(R.values))}function mT(R){return IT.call(this,R.values.subarray(0,R.length*R.stride))}function XB(R){let{length:T,values:A,valueOffsets:h}=R,C=(0,qI.bigIntToNumber)(h[0]),B=(0,qI.bigIntToNumber)(h[T]),D=Math.min(B-C,A.byteLength-C);return IT.call(this,(0,aI.rebaseValueOffsets)(-C,T+1,h)),IT.call(this,A.subarray(C,C+D)),this}function RH(R){let{length:T,valueOffsets:A}=R;if(A){let{[0]:h,[T]:C}=A;return IT.call(this,(0,aI.rebaseValueOffsets)(-h,T+1,A)),this.visit(R.children[0].slice(h,C-h))}return this.visit(R.children[0])}function YO(R){return this.visitMany(R.type.children.map((T,A)=>R.children[A]).filter(Boolean))[0]}IR.prototype.visitBool=Bn;IR.prototype.visitInt=mT;IR.prototype.visitFloat=mT;IR.prototype.visitUtf8=XB;IR.prototype.visitLargeUtf8=XB;IR.prototype.visitBinary=XB;IR.prototype.visitLargeBinary=XB;IR.prototype.visitFixedSizeBinary=mT;IR.prototype.visitDate=mT;IR.prototype.visitTimestamp=mT;IR.prototype.visitTime=mT;IR.prototype.visitDecimal=mT;IR.prototype.visitList=RH;IR.prototype.visitStruct=YO;IR.prototype.visitUnion=Cn;IR.prototype.visitInterval=mT;IR.prototype.visitDuration=mT;IR.prototype.visitFixedSizeList=RH;IR.prototype.visitMap=RH});var II=a((oI)=>{Object.defineProperty(oI,"__esModule",{value:!0});oI.JSONTypeAssembler=void 0;var Dn=ZR(),sR=pA(),iA=NR();class cI extends Dn.Visitor{visit(R){return R==null?void 0:super.visit(R)}visitNull({typeId:R}){return{name:sR.Type[R].toLowerCase()}}visitInt({typeId:R,bitWidth:T,isSigned:A}){return{name:sR.Type[R].toLowerCase(),bitWidth:T,isSigned:A}}visitFloat({typeId:R,precision:T}){return{name:sR.Type[R].toLowerCase(),precision:iA.Precision[T]}}visitBinary({typeId:R}){return{name:sR.Type[R].toLowerCase()}}visitLargeBinary({typeId:R}){return{name:sR.Type[R].toLowerCase()}}visitBool({typeId:R}){return{name:sR.Type[R].toLowerCase()}}visitUtf8({typeId:R}){return{name:sR.Type[R].toLowerCase()}}visitLargeUtf8({typeId:R}){return{name:sR.Type[R].toLowerCase()}}visitDecimal({typeId:R,scale:T,precision:A,bitWidth:h}){return{name:sR.Type[R].toLowerCase(),scale:T,precision:A,bitWidth:h}}visitDate({typeId:R,unit:T}){return{name:sR.Type[R].toLowerCase(),unit:iA.DateUnit[T]}}visitTime({typeId:R,unit:T,bitWidth:A}){return{name:sR.Type[R].toLowerCase(),unit:iA.TimeUnit[T],bitWidth:A}}visitTimestamp({typeId:R,timezone:T,unit:A}){return{name:sR.Type[R].toLowerCase(),unit:iA.TimeUnit[A],timezone:T}}visitInterval({typeId:R,unit:T}){return{name:sR.Type[R].toLowerCase(),unit:iA.IntervalUnit[T]}}visitDuration({typeId:R,unit:T}){return{name:sR.Type[R].toLocaleLowerCase(),unit:iA.TimeUnit[T]}}visitList({typeId:R}){return{name:sR.Type[R].toLowerCase()}}visitStruct({typeId:R}){return{name:sR.Type[R].toLowerCase()}}visitUnion({typeId:R,mode:T,typeIds:A}){return{name:sR.Type[R].toLowerCase(),mode:iA.UnionMode[T].toUpperCase(),typeIds:[...A]}}visitDictionary(R){return this.visit(R.dictionary)}visitFixedSizeBinary({typeId:R,byteWidth:T}){return{name:sR.Type[R].toLowerCase(),byteWidth:T}}visitFixedSizeList({typeId:R,listSize:T}){return{name:sR.Type[R].toLowerCase(),listSize:T}}visitMap({typeId:R,keysSorted:T}){return{name:sR.Type[R].toLowerCase(),keysSorted:T}}}oI.JSONTypeAssembler=cI});var yI=a((kI)=>{Object.defineProperty(kI,"__esModule",{value:!0});kI.JSONVectorAssembler=void 0;var _n=xC(),Zh=dR(),On=ZR(),Hn=NR(),TH=NR(),GB=M9(),AH=iR();class CH extends On.Visitor{static assemble(...R){let T=new CH;return R.map(({schema:A,data:h})=>{return T.visitMany(A.fields,h.children)})}visit({name:R},T){let{length:A}=T,{offset:h,nullCount:C,nullBitmap:B}=T,D=AH.DataType.isDictionary(T.type)?T.type.indices:T.type,_=Object.assign([],T.buffers,{[Hn.BufferType.VALIDITY]:void 0});return Object.assign({name:R,count:A,VALIDITY:AH.DataType.isNull(D)||AH.DataType.isUnion(D)?void 0:C<=0?Array.from({length:A},()=>1):[...new GB.BitIterator(B,h,A,null,GB.getBit)]},super.visit(T.clone(D,h,A,0,_)))}visitNull(){return{}}visitBool({values:R,offset:T,length:A}){return{DATA:[...new GB.BitIterator(R,T,A,null,GB.getBool)]}}visitInt(R){return{DATA:R.type.bitWidth<64?[...R.values]:[...E9(R.values,2)]}}visitFloat(R){return{DATA:[...R.values]}}visitUtf8(R){return{DATA:[...new Zh.Vector([R])],OFFSET:[...R.valueOffsets]}}visitLargeUtf8(R){return{DATA:[...new Zh.Vector([R])],OFFSET:[...E9(R.valueOffsets,2)]}}visitBinary(R){return{DATA:[...hH(new Zh.Vector([R]))],OFFSET:[...R.valueOffsets]}}visitLargeBinary(R){return{DATA:[...hH(new Zh.Vector([R]))],OFFSET:[...E9(R.valueOffsets,2)]}}visitFixedSizeBinary(R){return{DATA:[...hH(new Zh.Vector([R]))]}}visitDate(R){return{DATA:R.type.unit===TH.DateUnit.DAY?[...R.values]:[...E9(R.values,2)]}}visitTimestamp(R){return{DATA:[...E9(R.values,2)]}}visitTime(R){return{DATA:R.type.unit<TH.TimeUnit.MICROSECOND?[...R.values]:[...E9(R.values,2)]}}visitDecimal(R){return{DATA:[...E9(R.values,4)]}}visitList(R){return{OFFSET:[...R.valueOffsets],children:this.visitMany(R.type.children,R.children)}}visitStruct(R){return{children:this.visitMany(R.type.children,R.children)}}visitUnion(R){return{TYPE_ID:[...R.typeIds],OFFSET:R.type.mode===TH.UnionMode.Dense?[...R.valueOffsets]:void 0,children:this.visitMany(R.type.children,R.children)}}visitInterval(R){return{DATA:[...R.values]}}visitDuration(R){return{DATA:[...E9(R.values,2)]}}visitFixedSizeList(R){return{children:this.visitMany(R.type.children,R.children)}}visitMap(R){return{OFFSET:[...R.valueOffsets],children:this.visitMany(R.type.children,R.children)}}}kI.JSONVectorAssembler=CH;function*hH(R){for(let T of R)yield T.reduce((A,h)=>{return`${A}${("0"+(h&255).toString(16)).slice(-2)}`},"").toUpperCase()}function*E9(R,T){let A=new Uint32Array(R.buffer);for(let h=-1,C=A.length/T;++h<C;)yield`${_n.BN.new(A.subarray((h+0)*T,(h+1)*T),!1)}`}});var Uh=a((bI)=>{Object.defineProperty(bI,"__esModule",{value:!0});bI.RecordBatchJSONWriter=bI.RecordBatchFileWriter=bI.RecordBatchStreamWriter=bI.RecordBatchWriter=void 0;var gI=KR(),_H=MA(),qn=$B(),an=dR(),Ln=iR(),xB=CA(),BH=CA(),Ah=t_(),OH=NR(),sI=rh(),DH=rT(),PI=NI(),Wn=II(),tI=yI(),Nn=bR(),FB=y9(),cn=Ih(),eT=jT();class wh extends cn.ReadableInterop{static throughNode(R){throw Error('"throughNode" not available in this environment')}static throughDOM(R,T){throw Error('"throughDOM" not available in this environment')}constructor(R){super();this._position=0,this._started=!1,this._sink=new DH.AsyncByteQueue,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(0,eT.isObject)(R)||(R={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof R.autoDestroy==="boolean"?R.autoDestroy:!0,this._writeLegacyIpcFormat=typeof R.writeLegacyIpcFormat==="boolean"?R.writeLegacyIpcFormat:!1}toString(R=!1){return this._sink.toString(R)}toUint8Array(R=!1){return this._sink.toUint8Array(R)}writeAll(R){if((0,eT.isPromise)(R))return R.then((T)=>this.writeAll(T));else if((0,eT.isAsyncIterable)(R))return LH(this,R);return aH(this,R)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(R){return this._sink.toDOMStream(R)}toNodeStream(R){return this._sink.toNodeStream(R)}close(){return this.reset()._sink.close()}abort(R){return this.reset()._sink.abort(R)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(R=this._sink,T=null){if(R===this._sink||R instanceof DH.AsyncByteQueue)this._sink=R;else if(this._sink=new DH.AsyncByteQueue,R&&(0,eT.isWritableDOMStream)(R))this.toDOMStream({type:"bytes"}).pipeTo(R);else if(R&&(0,eT.isWritableNodeStream)(R))this.toNodeStream({objectMode:!1}).pipe(R);if(this._started&&this._schema)this._writeFooter(this._schema);if(this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,!T||!(0,sI.compareSchemas)(T,this._schema))if(T==null)this._position=0,this._schema=null;else this._started=!0,this._schema=T,this._writeSchema(T);return this}write(R){let T=null;if(!this._sink)throw Error("RecordBatchWriter is closed");else if(R==null)return this.finish()&&void 0;else if(R instanceof _H.Table&&!(T=R.schema))return this.finish()&&void 0;else if(R instanceof FB.RecordBatch&&!(T=R.schema))return this.finish()&&void 0;if(T&&!(0,sI.compareSchemas)(T,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,T)}if(R instanceof FB.RecordBatch){if(!(R instanceof FB._InternalEmptyPlaceholderRecordBatch))this._writeRecordBatch(R)}else if(R instanceof _H.Table)this.writeAll(R.batches);else if((0,eT.isIterable)(R))this.writeAll(R)}_writeMessage(R,T=8){let A=T-1,h=xB.Message.encode(R),C=h.byteLength,B=!this._writeLegacyIpcFormat?8:4,D=C+B+A&~A,_=D-C-B;if(R.headerType===OH.MessageHeader.RecordBatch)this._recordBatchBlocks.push(new Ah.FileBlock(D,R.bodyLength,this._position));else if(R.headerType===OH.MessageHeader.DictionaryBatch)this._dictionaryBlocks.push(new Ah.FileBlock(D,R.bodyLength,this._position));if(!this._writeLegacyIpcFormat)this._write(Int32Array.of(-1));if(this._write(Int32Array.of(D-B)),C>0)this._write(h);return this._writePadding(_)}_write(R){if(this._started){let T=(0,Nn.toUint8Array)(R);if(T&&T.byteLength>0)this._sink.write(T),this._position+=T.byteLength}return this}_writeSchema(R){return this._writeMessage(xB.Message.from(R))}_writeFooter(R){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(qn.MAGIC)}_writePadding(R){return R>0?this._write(new Uint8Array(R)):this}_writeRecordBatch(R){let{byteLength:T,nodes:A,bufferRegions:h,buffers:C}=PI.VectorAssembler.assemble(R),B=new BH.RecordBatch(R.numRows,A,h),D=xB.Message.from(B,T);return this._writeDictionaries(R)._writeMessage(D)._writeBodyBuffers(C)}_writeDictionaryBatch(R,T,A=!1){let{byteLength:h,nodes:C,bufferRegions:B,buffers:D}=PI.VectorAssembler.assemble(new an.Vector([R])),_=new BH.RecordBatch(R.length,C,B),O=new BH.DictionaryBatch(_,T,A),H=xB.Message.from(O,h);return this._writeMessage(H)._writeBodyBuffers(D)}_writeBodyBuffers(R){let T,A,h;for(let C=-1,B=R.length;++C<B;)if((T=R[C])&&(A=T.byteLength)>0){if(this._write(T),(h=(A+7&-8)-A)>0)this._writePadding(h)}return this}_writeDictionaries(R){var T,A;for(let[h,C]of R.dictionaries){let B=(T=C===null||C===void 0?void 0:C.data)!==null&&T!==void 0?T:[],D=this._seenDictionaries.get(h),_=(A=this._dictionaryDeltaOffsets.get(h))!==null&&A!==void 0?A:0;if(!D||D.data[0]!==B[0])for(let[O,H]of B.entries())this._writeDictionaryBatch(H,h,O>0);else if(_<B.length)for(let O of B.slice(_))this._writeDictionaryBatch(O,h,!0);this._seenDictionaries.set(h,C),this._dictionaryDeltaOffsets.set(h,B.length)}return this}}bI.RecordBatchWriter=wh;class HH extends wh{static writeAll(R,T){let A=new HH(T);if((0,eT.isPromise)(R))return R.then((h)=>A.writeAll(h));else if((0,eT.isAsyncIterable)(R))return LH(A,R);return aH(A,R)}}bI.RecordBatchStreamWriter=HH;class iH extends wh{static writeAll(R){let T=new iH;if((0,eT.isPromise)(R))return R.then((A)=>T.writeAll(A));else if((0,eT.isAsyncIterable)(R))return LH(T,R);return aH(T,R)}constructor(){super();this._autoDestroy=!0}_writeSchema(R){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(R,T,A=!1){if(!A&&this._seenDictionaries.has(T))throw Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(R,T,A)}_writeFooter(R){let T=Ah.Footer.encode(new Ah.Footer(R,OH.MetadataVersion.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(R)._write(T)._write(Int32Array.of(T.byteLength))._writeMagic()}}bI.RecordBatchFileWriter=iH;class qH extends wh{static writeAll(R){return new qH().writeAll(R)}constructor(){super();this._autoDestroy=!0,this._recordBatches=[],this._recordBatchesWithDictionaries=[]}_writeMessage(){return this}_writeFooter(R){return this}_writeSchema(R){return this._write(`{
  "schema": ${JSON.stringify({fields:R.fields.map((T)=>KI(T))},null,2)}`)}_writeDictionaries(R){if(R.dictionaries.size>0)this._recordBatchesWithDictionaries.push(R);return this}_writeDictionaryBatch(R,T,A=!1){return this._write(this._dictionaryBlocks.length===0?"    ":`,
    `),this._write(on(R,T,A)),this._dictionaryBlocks.push(new Ah.FileBlock(0,0,0)),this}_writeRecordBatch(R){return this._writeDictionaries(R),this._recordBatches.push(R),this}close(){if(this._recordBatchesWithDictionaries.length>0){this._write(`,
  "dictionaries": [
`);for(let R of this._recordBatchesWithDictionaries)super._writeDictionaries(R);this._write(`
  ]`)}if(this._recordBatches.length>0){for(let R=-1,T=this._recordBatches.length;++R<T;)this._write(R===0?`,
  "batches": [
    `:`,
    `),this._write(Jn(this._recordBatches[R])),this._recordBatchBlocks.push(new Ah.FileBlock(0,0,0));this._write(`
  ]`)}if(this._schema)this._write(`
}`);return this._recordBatchesWithDictionaries=[],this._recordBatches=[],super.close()}}bI.RecordBatchJSONWriter=qH;function aH(R,T){let A=T;if(T instanceof _H.Table)A=T.batches,R.reset(void 0,T.schema);for(let h of A)R.write(h);return R.finish()}function LH(R,T){return gI.__awaiter(this,void 0,void 0,function*(){var A,h,C,B,D,_,O;try{for(A=!0,h=gI.__asyncValues(T);C=yield h.next(),B=C.done,!B;A=!0){O=C.value,A=!1;let H=O;R.write(H)}}catch(H){D={error:H}}finally{try{if(!A&&!B&&(_=h.return))yield _.call(h)}finally{if(D)throw D.error}}return R.finish()})}function KI({name:R,type:T,nullable:A}){let h=new Wn.JSONTypeAssembler;return{name:R,nullable:A,type:h.visit(T),children:(T.children||[]).map((C)=>KI(C)),dictionary:!Ln.DataType.isDictionary(T)?void 0:{id:T.id,isOrdered:T.isOrdered,indexType:h.visit(T.indices)}}}function on(R,T,A=!1){let[h]=tI.JSONVectorAssembler.assemble(new FB.RecordBatch({[T]:R}));return JSON.stringify({id:T,isDelta:A,data:{count:R.length,columns:h}},null,2)}function Jn(R){let[T]=tI.JSONVectorAssembler.assemble(R);return JSON.stringify({count:R.numRows,columns:T},null,2)}});var FI=a((GI)=>{Object.defineProperty(GI,"__esModule",{value:!0});GI.toNodeStream=void 0;var EI=KR(),pI=U("node:stream"),$I=jT();function yn(R,T){if((0,$I.isAsyncIterable)(R))return new XI(R[Symbol.asyncIterator](),T);if((0,$I.isIterable)(R))return new rI(R[Symbol.iterator](),T);throw Error("toNodeStream() must be called with an Iterable or AsyncIterable")}GI.toNodeStream=yn;class rI extends pI.Readable{constructor(R,T){super(T);this._iterator=R,this._pulling=!1,this._bytesMode=!T||!T.objectMode}_read(R){let T=this._iterator;if(T&&!this._pulling&&(this._pulling=!0))this._pulling=this._pull(R,T)}_destroy(R,T){let A=this._iterator,h;A&&(h=R!=null&&A.throw||A.return),h===null||h===void 0||h.call(A,R),T&&T(null)}_pull(R,T){let A=this._bytesMode,h=null;while(this.readable&&!(h=T.next(A?R:null)).done){if(R!=null)R-=A&&ArrayBuffer.isView(h.value)?h.value.byteLength:1;if(!this.push(h.value)||R<=0)break}if(((h===null||h===void 0?void 0:h.done)||!this.readable)&&(this.push(null)||!0))T.return&&T.return();return!this.readable}}class XI extends pI.Readable{constructor(R,T){super(T);this._iterator=R,this._pulling=!1,this._bytesMode=!T||!T.objectMode}_read(R){let T=this._iterator;if(T&&!this._pulling&&(this._pulling=!0))(()=>EI.__awaiter(this,void 0,void 0,function*(){return this._pulling=yield this._pull(R,T)}))()}_destroy(R,T){let A=this._iterator,h;A&&(h=R!=null&&A.throw||A.return),(h===null||h===void 0?void 0:h.call(A,R).then(()=>T&&T(null)))||T&&T(null)}_pull(R,T){return EI.__awaiter(this,void 0,void 0,function*(){let A=this._bytesMode,h=null;while(this.readable&&!(h=yield T.next(A?R:null)).done){if(R!=null)R-=A&&ArrayBuffer.isView(h.value)?h.value.byteLength:1;if(!this.push(h.value)||R<=0)break}if(((h===null||h===void 0?void 0:h.done)||!this.readable)&&(this.push(null)||!0))T.return&&T.return();return!this.readable})}}});var jI=a((lI)=>{Object.defineProperty(lI,"__esModule",{value:!0});lI.builderThroughNodeStream=void 0;var gn=U("node:stream"),sn=fA();function Pn(R){return new eI((0,sn.makeBuilder)(R),R)}lI.builderThroughNodeStream=Pn;class eI extends gn.Duplex{constructor(R,T){let{queueingStrategy:A="count",autoDestroy:h=!0}=T,{highWaterMark:C=A!=="bytes"?1000:Math.pow(2,14)}=T;super({autoDestroy:h,highWaterMark:1,allowHalfOpen:!0,writableObjectMode:!0,readableObjectMode:!0});this._numChunks=0,this._finished=!1,this._builder=R,this._desiredSize=C,this._getSize=A!=="bytes"?tn:Kn}_read(R){this._maybeFlush(this._builder,this._desiredSize=R)}_final(R){this._maybeFlush(this._builder.finish(),this._desiredSize),R&&R()}_write(R,T,A){let h=this._maybeFlush(this._builder.append(R),this._desiredSize);return A&&A(),h}_destroy(R,T){this._builder.clear(),T&&T(R)}_maybeFlush(R,T){if(this._getSize(R)>=T)++this._numChunks&&this.push(R.toVector());if(R.finished){if(R.length>0||this._numChunks===0)++this._numChunks&&this.push(R.toVector());if(!this._finished&&(this._finished=!0))this.push(null);return!1}return this._getSize(R)<this.writableHighWaterMark}}var tn=(R)=>R.length,Kn=(R)=>R.byteLength});var UI=a((ZI)=>{Object.defineProperty(ZI,"__esModule",{value:!0});ZI.recordBatchReaderThroughNodeStream=void 0;var WH=KR(),bn=U("node:stream"),nn=rT(),En=HA();function $n(R){return new uI(R)}ZI.recordBatchReaderThroughNodeStream=$n;class uI extends bn.Duplex{constructor(R){super(Object.assign(Object.assign({allowHalfOpen:!1},R),{readableObjectMode:!0,writableObjectMode:!1}));this._pulling=!1,this._autoDestroy=!0,this._reader=null,this._pulling=!1,this._asyncQueue=new nn.AsyncByteQueue,this._autoDestroy=R&&typeof R.autoDestroy==="boolean"?R.autoDestroy:!0}_final(R){let T=this._asyncQueue;T===null||T===void 0||T.close(),R&&R()}_write(R,T,A){let h=this._asyncQueue;return h===null||h===void 0||h.write(R),A&&A(),!0}_read(R){let T=this._asyncQueue;if(T&&!this._pulling&&(this._pulling=!0))(()=>WH.__awaiter(this,void 0,void 0,function*(){if(!this._reader)this._reader=yield this._open(T);this._pulling=yield this._pull(R,this._reader)}))()}_destroy(R,T){let A=this._asyncQueue;if(A)R?A.abort(R):A.close();T(this._asyncQueue=this._reader=null)}_open(R){return WH.__awaiter(this,void 0,void 0,function*(){return yield(yield En.RecordBatchReader.from(R)).open({autoDestroy:this._autoDestroy})})}_pull(R,T){return WH.__awaiter(this,void 0,void 0,function*(){let A=null;while(this.readable&&!(A=yield T.next()).done)if(!this.push(A.value)||R!=null&&--R<=0)break;if(!this.readable||(A===null||A===void 0?void 0:A.done)&&(T.autoDestroy||(yield T.reset().open()).closed))this.push(null),yield T.cancel();return!this.readable})}}});var vI=a((zI)=>{Object.defineProperty(zI,"__esModule",{value:!0});zI.recordBatchWriterThroughNodeStream=void 0;var QI=KR(),pn=U("node:stream"),rn=rT();function Xn(R){return new fI(new this(R))}zI.recordBatchWriterThroughNodeStream=Xn;class fI extends pn.Duplex{constructor(R,T){super(Object.assign(Object.assign({allowHalfOpen:!1},T),{writableObjectMode:!0,readableObjectMode:!1}));this._pulling=!1,this._writer=R,this._reader=new rn.AsyncByteStream(R)}_final(R){let T=this._writer;T===null||T===void 0||T.close(),R&&R()}_write(R,T,A){let h=this._writer;return h===null||h===void 0||h.write(R),A&&A(),!0}_read(R){let T=this._reader;if(T&&!this._pulling&&(this._pulling=!0))(()=>QI.__awaiter(this,void 0,void 0,function*(){return this._pulling=yield this._pull(R,T)}))()}_destroy(R,T){let A=this._writer;if(A)R?A.abort(R):A.close();T(this._reader=this._writer=null)}_pull(R,T){return QI.__awaiter(this,void 0,void 0,function*(){let A=null;while(this.readable&&!(A=yield T.next(R||null)).done){if(R!=null&&A.value)R-=A.value.byteLength;if(!this.push(A.value)||R<=0)break}if((A===null||A===void 0?void 0:A.done)||!this.readable)this.push(null),yield T.cancel();return!this.readable})}}});var Tk=a((YI)=>{Object.defineProperty(YI,"__esModule",{value:!0});YI.toDOMStream=void 0;var eB=KR(),mI=bR(),VI=jT();function Gn(R,T){if((0,VI.isAsyncIterable)(R))return Fn(R,T);if((0,VI.isIterable)(R))return xn(R,T);throw Error("toDOMStream() must be called with an Iterable or AsyncIterable")}YI.toDOMStream=Gn;function xn(R,T){let A=null,h=(T===null||T===void 0?void 0:T.type)==="bytes"||!1,C=(T===null||T===void 0?void 0:T.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},T),{start(D){B(D,A||(A=R[Symbol.iterator]()))},pull(D){A?B(D,A):D.close()},cancel(){((A===null||A===void 0?void 0:A.return)&&A.return()||!0)&&(A=null)}}),Object.assign({highWaterMark:h?C:void 0},T));function B(D,_){let O,H=null,i=D.desiredSize||null;while(!(H=_.next(h?i:null)).done){if(ArrayBuffer.isView(H.value)&&(O=(0,mI.toUint8Array)(H.value)))i!=null&&h&&(i=i-O.byteLength+1),H.value=O;if(D.enqueue(H.value),i!=null&&--i<=0)return}D.close()}}function Fn(R,T){let A=null,h=(T===null||T===void 0?void 0:T.type)==="bytes"||!1,C=(T===null||T===void 0?void 0:T.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},T),{start(D){return eB.__awaiter(this,void 0,void 0,function*(){yield B(D,A||(A=R[Symbol.asyncIterator]()))})},pull(D){return eB.__awaiter(this,void 0,void 0,function*(){A?yield B(D,A):D.close()})},cancel(){return eB.__awaiter(this,void 0,void 0,function*(){((A===null||A===void 0?void 0:A.return)&&(yield A.return())||!0)&&(A=null)})}}),Object.assign({highWaterMark:h?C:void 0},T));function B(D,_){return eB.__awaiter(this,void 0,void 0,function*(){let O,H=null,i=D.desiredSize||null;while(!(H=yield _.next(h?i:null)).done){if(ArrayBuffer.isView(H.value)&&(O=(0,mI.toUint8Array)(H.value)))i!=null&&h&&(i=i-O.byteLength+1),H.value=O;if(D.enqueue(H.value),i!=null&&--i<=0)return}D.close()})}}});var Dk=a((Ck)=>{Object.defineProperty(Ck,"__esModule",{value:!0});Ck.BuilderTransform=Ck.builderThroughDOMStream=void 0;var en=KR(),ln=fA();function dn(R){return new NH(R)}Ck.builderThroughDOMStream=dn;class NH{constructor(R){this._numChunks=0,this._finished=!1,this._bufferedSize=0;let{["readableStrategy"]:T,["writableStrategy"]:A,["queueingStrategy"]:h="count"}=R,C=en.__rest(R,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=(0,ln.makeBuilder)(C),this._getSize=h!=="bytes"?Ak:hk;let{["highWaterMark"]:B=h==="bytes"?Math.pow(2,14):1000}=Object.assign({},T),{["highWaterMark"]:D=h==="bytes"?Math.pow(2,14):1000}=Object.assign({},A);this.readable=new ReadableStream({["cancel"]:()=>{this._builder.clear()},["pull"]:(_)=>{this._maybeFlush(this._builder,this._controller=_)},["start"]:(_)=>{this._maybeFlush(this._builder,this._controller=_)}},{highWaterMark:B,size:h!=="bytes"?Ak:hk}),this.writable=new WritableStream({["abort"]:()=>{this._builder.clear()},["write"]:()=>{this._maybeFlush(this._builder,this._controller)},["close"]:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:D,size:(_)=>this._writeValueAndReturnChunkSize(_)})}_writeValueAndReturnChunkSize(R){let T=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(R)),this._bufferedSize-T}_maybeFlush(R,T){if(T==null)return;if(this._bufferedSize>=T.desiredSize)++this._numChunks&&this._enqueue(T,R.toVector());if(R.finished){if(R.length>0||this._numChunks===0)++this._numChunks&&this._enqueue(T,R.toVector());if(!this._finished&&(this._finished=!0))this._enqueue(T,null)}}_enqueue(R,T){this._bufferedSize=0,this._controller=null,T==null?R.close():R.enqueue(T)}}Ck.BuilderTransform=NH;var Ak=(R)=>{var T;return(T=R===null||R===void 0?void 0:R.length)!==null&&T!==void 0?T:0},hk=(R)=>{var T;return(T=R===null||R===void 0?void 0:R.byteLength)!==null&&T!==void 0?T:0}});var Hk=a((_k)=>{Object.defineProperty(_k,"__esModule",{value:!0});_k.recordBatchReaderThroughDOMStream=void 0;var Qh=KR(),un=rT(),Zn=HA();function wn(R,T){let A=new un.AsyncByteQueue,h=null,C=new ReadableStream({cancel(){return Qh.__awaiter(this,void 0,void 0,function*(){yield A.close()})},start(_){return Qh.__awaiter(this,void 0,void 0,function*(){yield D(_,h||(h=yield B()))})},pull(_){return Qh.__awaiter(this,void 0,void 0,function*(){h?yield D(_,h):_.close()})}});return{writable:new WritableStream(A,Object.assign({highWaterMark:Math.pow(2,14)},R)),readable:C};function B(){return Qh.__awaiter(this,void 0,void 0,function*(){return yield(yield Zn.RecordBatchReader.from(A)).open(T)})}function D(_,O){return Qh.__awaiter(this,void 0,void 0,function*(){let H=_.desiredSize,i=null;while(!(i=yield O.next()).done)if(_.enqueue(i.value),H!=null&&--H<=0)return;_.close()})}}_k.recordBatchReaderThroughDOMStream=wn});var ak=a((ik)=>{Object.defineProperty(ik,"__esModule",{value:!0});ik.recordBatchWriterThroughDOMStream=void 0;var lB=KR(),Un=rT();function Qn(R,T){let A=new this(R),h=new Un.AsyncByteStream(A),C=new ReadableStream({cancel(){return lB.__awaiter(this,void 0,void 0,function*(){yield h.cancel()})},pull(D){return lB.__awaiter(this,void 0,void 0,function*(){yield B(D)})},start(D){return lB.__awaiter(this,void 0,void 0,function*(){yield B(D)})}},Object.assign({highWaterMark:Math.pow(2,14)},T));return{writable:new WritableStream(A,R),readable:C};function B(D){return lB.__awaiter(this,void 0,void 0,function*(){let _=null,O=D.desiredSize;while(_=yield h.read(O||null))if(D.enqueue(_),O!=null&&(O-=_.byteLength)<=0)return;D.close()})}}ik.recordBatchWriterThroughDOMStream=Qn});var Jk=a((ck)=>{Object.defineProperty(ck,"__esModule",{value:!0});ck.tableToIPC=ck.tableFromIPC=void 0;var Lk=MA(),fn=jT(),zn=HA(),Wk=Uh();function Nk(R){let T=zn.RecordBatchReader.from(R);if((0,fn.isPromise)(T))return T.then((A)=>Nk(A));if(T.isAsync())return T.readAll().then((A)=>new Lk.Table(A));return new Lk.Table(T.readAll())}ck.tableFromIPC=Nk;function Mn(R,T="stream"){return(T==="stream"?Wk.RecordBatchStreamWriter:Wk.RecordBatchFileWriter).writeAll(R).toUint8Array(!0)}ck.tableToIPC=Mn});var gH=a((N)=>{Object.defineProperty(N,"__esModule",{value:!0});N.DenseUnion=N.Union=N.Struct=N.List=N.Decimal=N.TimeNanosecond=N.TimeMicrosecond=N.TimeMillisecond=N.TimeSecond=N.Time=N.TimestampNanosecond=N.TimestampMicrosecond=N.TimestampMillisecond=N.TimestampSecond=N.Timestamp=N.DateMillisecond=N.DateDay=N.Date_=N.FixedSizeBinary=N.LargeBinary=N.Binary=N.LargeUtf8=N.Utf8=N.Float64=N.Float32=N.Float16=N.Float=N.Uint64=N.Uint32=N.Uint16=N.Uint8=N.Int64=N.Int32=N.Int16=N.Int8=N.Int=N.Bool=N.Null=N.DataType=N.makeData=N.Data=N.MetadataVersion=N.IntervalUnit=N.UnionMode=N.Precision=N.TimeUnit=N.DateUnit=N.BufferType=N.Type=N.MessageHeader=void 0;N.TimeBuilder=N.Uint64Builder=N.Uint32Builder=N.Uint16Builder=N.Uint8Builder=N.Int64Builder=N.Int32Builder=N.Int16Builder=N.Int8Builder=N.IntBuilder=N.Float64Builder=N.Float32Builder=N.Float16Builder=N.FloatBuilder=N.FixedSizeBinaryBuilder=N.DictionaryBuilder=N.DecimalBuilder=N.DateMillisecondBuilder=N.DateDayBuilder=N.DateBuilder=N.NullBuilder=N.BoolBuilder=N.builderThroughAsyncIterable=N.builderThroughIterable=N.tableFromJSON=N.vectorFromArray=N.makeBuilder=N.Builder=N.StructRow=N.MapRow=N.Field=N.Schema=N.Visitor=N.makeVector=N.Vector=N.tableFromArrays=N.makeTable=N.Table=N.Map_=N.FixedSizeList=N.DurationNanosecond=N.DurationMicrosecond=N.DurationMillisecond=N.DurationSecond=N.Duration=N.IntervalYearMonth=N.IntervalDayTime=N.Interval=N.Dictionary=N.SparseUnion=void 0;N.util=N.RecordBatch=N.Message=N.JSONMessageReader=N.AsyncMessageReader=N.MessageReader=N.tableFromIPC=N.tableToIPC=N.RecordBatchJSONWriter=N.RecordBatchStreamWriter=N.RecordBatchFileWriter=N.RecordBatchWriter=N.AsyncRecordBatchStreamReader=N.AsyncRecordBatchFileReader=N.RecordBatchStreamReader=N.RecordBatchFileReader=N.RecordBatchReader=N.AsyncByteQueue=N.AsyncByteStream=N.ByteStream=N.DenseUnionBuilder=N.SparseUnionBuilder=N.UnionBuilder=N.StructBuilder=N.MapBuilder=N.FixedSizeListBuilder=N.ListBuilder=N.LargeBinaryBuilder=N.BinaryBuilder=N.LargeUtf8Builder=N.Utf8Builder=N.DurationNanosecondBuilder=N.DurationMicrosecondBuilder=N.DurationMillisecondBuilder=N.DurationSecondBuilder=N.DurationBuilder=N.IntervalYearMonthBuilder=N.IntervalDayTimeBuilder=N.IntervalBuilder=N.TimestampNanosecondBuilder=N.TimestampMicrosecondBuilder=N.TimestampMillisecondBuilder=N.TimestampSecondBuilder=N.TimestampBuilder=N.TimeNanosecondBuilder=N.TimeMicrosecondBuilder=N.TimeMillisecondBuilder=N.TimeSecondBuilder=void 0;var Vn=rC();Object.defineProperty(N,"MessageHeader",{enumerable:!0,get:function(){return Vn.MessageHeader}});var $9=NR();Object.defineProperty(N,"Type",{enumerable:!0,get:function(){return $9.Type}});Object.defineProperty(N,"BufferType",{enumerable:!0,get:function(){return $9.BufferType}});Object.defineProperty(N,"DateUnit",{enumerable:!0,get:function(){return $9.DateUnit}});Object.defineProperty(N,"TimeUnit",{enumerable:!0,get:function(){return $9.TimeUnit}});Object.defineProperty(N,"Precision",{enumerable:!0,get:function(){return $9.Precision}});Object.defineProperty(N,"UnionMode",{enumerable:!0,get:function(){return $9.UnionMode}});Object.defineProperty(N,"IntervalUnit",{enumerable:!0,get:function(){return $9.IntervalUnit}});Object.defineProperty(N,"MetadataVersion",{enumerable:!0,get:function(){return $9.MetadataVersion}});var Ik=bT();Object.defineProperty(N,"Data",{enumerable:!0,get:function(){return Ik.Data}});Object.defineProperty(N,"makeData",{enumerable:!0,get:function(){return Ik.makeData}});var x=iR();Object.defineProperty(N,"DataType",{enumerable:!0,get:function(){return x.DataType}});Object.defineProperty(N,"Null",{enumerable:!0,get:function(){return x.Null}});Object.defineProperty(N,"Bool",{enumerable:!0,get:function(){return x.Bool}});Object.defineProperty(N,"Int",{enumerable:!0,get:function(){return x.Int}});Object.defineProperty(N,"Int8",{enumerable:!0,get:function(){return x.Int8}});Object.defineProperty(N,"Int16",{enumerable:!0,get:function(){return x.Int16}});Object.defineProperty(N,"Int32",{enumerable:!0,get:function(){return x.Int32}});Object.defineProperty(N,"Int64",{enumerable:!0,get:function(){return x.Int64}});Object.defineProperty(N,"Uint8",{enumerable:!0,get:function(){return x.Uint8}});Object.defineProperty(N,"Uint16",{enumerable:!0,get:function(){return x.Uint16}});Object.defineProperty(N,"Uint32",{enumerable:!0,get:function(){return x.Uint32}});Object.defineProperty(N,"Uint64",{enumerable:!0,get:function(){return x.Uint64}});Object.defineProperty(N,"Float",{enumerable:!0,get:function(){return x.Float}});Object.defineProperty(N,"Float16",{enumerable:!0,get:function(){return x.Float16}});Object.defineProperty(N,"Float32",{enumerable:!0,get:function(){return x.Float32}});Object.defineProperty(N,"Float64",{enumerable:!0,get:function(){return x.Float64}});Object.defineProperty(N,"Utf8",{enumerable:!0,get:function(){return x.Utf8}});Object.defineProperty(N,"LargeUtf8",{enumerable:!0,get:function(){return x.LargeUtf8}});Object.defineProperty(N,"Binary",{enumerable:!0,get:function(){return x.Binary}});Object.defineProperty(N,"LargeBinary",{enumerable:!0,get:function(){return x.LargeBinary}});Object.defineProperty(N,"FixedSizeBinary",{enumerable:!0,get:function(){return x.FixedSizeBinary}});Object.defineProperty(N,"Date_",{enumerable:!0,get:function(){return x.Date_}});Object.defineProperty(N,"DateDay",{enumerable:!0,get:function(){return x.DateDay}});Object.defineProperty(N,"DateMillisecond",{enumerable:!0,get:function(){return x.DateMillisecond}});Object.defineProperty(N,"Timestamp",{enumerable:!0,get:function(){return x.Timestamp}});Object.defineProperty(N,"TimestampSecond",{enumerable:!0,get:function(){return x.TimestampSecond}});Object.defineProperty(N,"TimestampMillisecond",{enumerable:!0,get:function(){return x.TimestampMillisecond}});Object.defineProperty(N,"TimestampMicrosecond",{enumerable:!0,get:function(){return x.TimestampMicrosecond}});Object.defineProperty(N,"TimestampNanosecond",{enumerable:!0,get:function(){return x.TimestampNanosecond}});Object.defineProperty(N,"Time",{enumerable:!0,get:function(){return x.Time}});Object.defineProperty(N,"TimeSecond",{enumerable:!0,get:function(){return x.TimeSecond}});Object.defineProperty(N,"TimeMillisecond",{enumerable:!0,get:function(){return x.TimeMillisecond}});Object.defineProperty(N,"TimeMicrosecond",{enumerable:!0,get:function(){return x.TimeMicrosecond}});Object.defineProperty(N,"TimeNanosecond",{enumerable:!0,get:function(){return x.TimeNanosecond}});Object.defineProperty(N,"Decimal",{enumerable:!0,get:function(){return x.Decimal}});Object.defineProperty(N,"List",{enumerable:!0,get:function(){return x.List}});Object.defineProperty(N,"Struct",{enumerable:!0,get:function(){return x.Struct}});Object.defineProperty(N,"Union",{enumerable:!0,get:function(){return x.Union}});Object.defineProperty(N,"DenseUnion",{enumerable:!0,get:function(){return x.DenseUnion}});Object.defineProperty(N,"SparseUnion",{enumerable:!0,get:function(){return x.SparseUnion}});Object.defineProperty(N,"Dictionary",{enumerable:!0,get:function(){return x.Dictionary}});Object.defineProperty(N,"Interval",{enumerable:!0,get:function(){return x.Interval}});Object.defineProperty(N,"IntervalDayTime",{enumerable:!0,get:function(){return x.IntervalDayTime}});Object.defineProperty(N,"IntervalYearMonth",{enumerable:!0,get:function(){return x.IntervalYearMonth}});Object.defineProperty(N,"Duration",{enumerable:!0,get:function(){return x.Duration}});Object.defineProperty(N,"DurationSecond",{enumerable:!0,get:function(){return x.DurationSecond}});Object.defineProperty(N,"DurationMillisecond",{enumerable:!0,get:function(){return x.DurationMillisecond}});Object.defineProperty(N,"DurationMicrosecond",{enumerable:!0,get:function(){return x.DurationMicrosecond}});Object.defineProperty(N,"DurationNanosecond",{enumerable:!0,get:function(){return x.DurationNanosecond}});Object.defineProperty(N,"FixedSizeList",{enumerable:!0,get:function(){return x.FixedSizeList}});Object.defineProperty(N,"Map_",{enumerable:!0,get:function(){return x.Map_}});var oH=MA();Object.defineProperty(N,"Table",{enumerable:!0,get:function(){return oH.Table}});Object.defineProperty(N,"makeTable",{enumerable:!0,get:function(){return oH.makeTable}});Object.defineProperty(N,"tableFromArrays",{enumerable:!0,get:function(){return oH.tableFromArrays}});var kk=dR();Object.defineProperty(N,"Vector",{enumerable:!0,get:function(){return kk.Vector}});Object.defineProperty(N,"makeVector",{enumerable:!0,get:function(){return kk.makeVector}});var mn=ZR();Object.defineProperty(N,"Visitor",{enumerable:!0,get:function(){return mn.Visitor}});var Sk=QR();Object.defineProperty(N,"Schema",{enumerable:!0,get:function(){return Sk.Schema}});Object.defineProperty(N,"Field",{enumerable:!0,get:function(){return Sk.Field}});var Yn=Wh();Object.defineProperty(N,"MapRow",{enumerable:!0,get:function(){return Yn.MapRow}});var R1=VC();Object.defineProperty(N,"StructRow",{enumerable:!0,get:function(){return R1.StructRow}});var T1=aR();Object.defineProperty(N,"Builder",{enumerable:!0,get:function(){return T1.Builder}});var fh=fA();Object.defineProperty(N,"makeBuilder",{enumerable:!0,get:function(){return fh.makeBuilder}});Object.defineProperty(N,"vectorFromArray",{enumerable:!0,get:function(){return fh.vectorFromArray}});Object.defineProperty(N,"tableFromJSON",{enumerable:!0,get:function(){return fh.tableFromJSON}});Object.defineProperty(N,"builderThroughIterable",{enumerable:!0,get:function(){return fh.builderThroughIterable}});Object.defineProperty(N,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return fh.builderThroughAsyncIterable}});var A1=G_();Object.defineProperty(N,"BoolBuilder",{enumerable:!0,get:function(){return A1.BoolBuilder}});var h1=BO();Object.defineProperty(N,"NullBuilder",{enumerable:!0,get:function(){return h1.NullBuilder}});var JH=l_();Object.defineProperty(N,"DateBuilder",{enumerable:!0,get:function(){return JH.DateBuilder}});Object.defineProperty(N,"DateDayBuilder",{enumerable:!0,get:function(){return JH.DateDayBuilder}});Object.defineProperty(N,"DateMillisecondBuilder",{enumerable:!0,get:function(){return JH.DateMillisecondBuilder}});var C1=j_();Object.defineProperty(N,"DecimalBuilder",{enumerable:!0,get:function(){return C1.DecimalBuilder}});var B1=u_();Object.defineProperty(N,"DictionaryBuilder",{enumerable:!0,get:function(){return B1.DictionaryBuilder}});var D1=w_();Object.defineProperty(N,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return D1.FixedSizeBinaryBuilder}});var dB=Q_();Object.defineProperty(N,"FloatBuilder",{enumerable:!0,get:function(){return dB.FloatBuilder}});Object.defineProperty(N,"Float16Builder",{enumerable:!0,get:function(){return dB.Float16Builder}});Object.defineProperty(N,"Float32Builder",{enumerable:!0,get:function(){return dB.Float32Builder}});Object.defineProperty(N,"Float64Builder",{enumerable:!0,get:function(){return dB.Float64Builder}});var YT=AO();Object.defineProperty(N,"IntBuilder",{enumerable:!0,get:function(){return YT.IntBuilder}});Object.defineProperty(N,"Int8Builder",{enumerable:!0,get:function(){return YT.Int8Builder}});Object.defineProperty(N,"Int16Builder",{enumerable:!0,get:function(){return YT.Int16Builder}});Object.defineProperty(N,"Int32Builder",{enumerable:!0,get:function(){return YT.Int32Builder}});Object.defineProperty(N,"Int64Builder",{enumerable:!0,get:function(){return YT.Int64Builder}});Object.defineProperty(N,"Uint8Builder",{enumerable:!0,get:function(){return YT.Uint8Builder}});Object.defineProperty(N,"Uint16Builder",{enumerable:!0,get:function(){return YT.Uint16Builder}});Object.defineProperty(N,"Uint32Builder",{enumerable:!0,get:function(){return YT.Uint32Builder}});Object.defineProperty(N,"Uint64Builder",{enumerable:!0,get:function(){return YT.Uint64Builder}});var zh=cO();Object.defineProperty(N,"TimeBuilder",{enumerable:!0,get:function(){return zh.TimeBuilder}});Object.defineProperty(N,"TimeSecondBuilder",{enumerable:!0,get:function(){return zh.TimeSecondBuilder}});Object.defineProperty(N,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return zh.TimeMillisecondBuilder}});Object.defineProperty(N,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return zh.TimeMicrosecondBuilder}});Object.defineProperty(N,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return zh.TimeNanosecondBuilder}});var Mh=qO();Object.defineProperty(N,"TimestampBuilder",{enumerable:!0,get:function(){return Mh.TimestampBuilder}});Object.defineProperty(N,"TimestampSecondBuilder",{enumerable:!0,get:function(){return Mh.TimestampSecondBuilder}});Object.defineProperty(N,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return Mh.TimestampMillisecondBuilder}});Object.defineProperty(N,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return Mh.TimestampMicrosecondBuilder}});Object.defineProperty(N,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return Mh.TimestampNanosecondBuilder}});var IH=v_();Object.defineProperty(N,"IntervalBuilder",{enumerable:!0,get:function(){return IH.IntervalBuilder}});Object.defineProperty(N,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return IH.IntervalDayTimeBuilder}});Object.defineProperty(N,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return IH.IntervalYearMonthBuilder}});var vh=TO();Object.defineProperty(N,"DurationBuilder",{enumerable:!0,get:function(){return vh.DurationBuilder}});Object.defineProperty(N,"DurationSecondBuilder",{enumerable:!0,get:function(){return vh.DurationSecondBuilder}});Object.defineProperty(N,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return vh.DurationMillisecondBuilder}});Object.defineProperty(N,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return vh.DurationMicrosecondBuilder}});Object.defineProperty(N,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return vh.DurationNanosecondBuilder}});var _1=IO();Object.defineProperty(N,"Utf8Builder",{enumerable:!0,get:function(){return _1.Utf8Builder}});var O1=SO();Object.defineProperty(N,"LargeUtf8Builder",{enumerable:!0,get:function(){return O1.LargeUtf8Builder}});var H1=WB();Object.defineProperty(N,"BinaryBuilder",{enumerable:!0,get:function(){return H1.BinaryBuilder}});var i1=NB();Object.defineProperty(N,"LargeBinaryBuilder",{enumerable:!0,get:function(){return i1.LargeBinaryBuilder}});var q1=hO();Object.defineProperty(N,"ListBuilder",{enumerable:!0,get:function(){return q1.ListBuilder}});var a1=U_();Object.defineProperty(N,"FixedSizeListBuilder",{enumerable:!0,get:function(){return a1.FixedSizeListBuilder}});var L1=CO();Object.defineProperty(N,"MapBuilder",{enumerable:!0,get:function(){return L1.MapBuilder}});var W1=DO();Object.defineProperty(N,"StructBuilder",{enumerable:!0,get:function(){return W1.StructBuilder}});var kH=oO();Object.defineProperty(N,"UnionBuilder",{enumerable:!0,get:function(){return kH.UnionBuilder}});Object.defineProperty(N,"SparseUnionBuilder",{enumerable:!0,get:function(){return kH.SparseUnionBuilder}});Object.defineProperty(N,"DenseUnionBuilder",{enumerable:!0,get:function(){return kH.DenseUnionBuilder}});var SH=rT();Object.defineProperty(N,"ByteStream",{enumerable:!0,get:function(){return SH.ByteStream}});Object.defineProperty(N,"AsyncByteStream",{enumerable:!0,get:function(){return SH.AsyncByteStream}});Object.defineProperty(N,"AsyncByteQueue",{enumerable:!0,get:function(){return SH.AsyncByteQueue}});var Vh=HA();Object.defineProperty(N,"RecordBatchReader",{enumerable:!0,get:function(){return Vh.RecordBatchReader}});Object.defineProperty(N,"RecordBatchFileReader",{enumerable:!0,get:function(){return Vh.RecordBatchFileReader}});Object.defineProperty(N,"RecordBatchStreamReader",{enumerable:!0,get:function(){return Vh.RecordBatchStreamReader}});Object.defineProperty(N,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return Vh.AsyncRecordBatchFileReader}});Object.defineProperty(N,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return Vh.AsyncRecordBatchStreamReader}});var jB=Uh();Object.defineProperty(N,"RecordBatchWriter",{enumerable:!0,get:function(){return jB.RecordBatchWriter}});Object.defineProperty(N,"RecordBatchFileWriter",{enumerable:!0,get:function(){return jB.RecordBatchFileWriter}});Object.defineProperty(N,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return jB.RecordBatchStreamWriter}});Object.defineProperty(N,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return jB.RecordBatchJSONWriter}});var yk=Jk();Object.defineProperty(N,"tableToIPC",{enumerable:!0,get:function(){return yk.tableToIPC}});Object.defineProperty(N,"tableFromIPC",{enumerable:!0,get:function(){return yk.tableFromIPC}});var yH=$B();Object.defineProperty(N,"MessageReader",{enumerable:!0,get:function(){return yH.MessageReader}});Object.defineProperty(N,"AsyncMessageReader",{enumerable:!0,get:function(){return yH.AsyncMessageReader}});Object.defineProperty(N,"JSONMessageReader",{enumerable:!0,get:function(){return yH.JSONMessageReader}});var N1=CA();Object.defineProperty(N,"Message",{enumerable:!0,get:function(){return N1.Message}});var c1=y9();Object.defineProperty(N,"RecordBatch",{enumerable:!0,get:function(){return c1.RecordBatch}});var o1=xC(),J1=r_(),I1=M9(),k1=Lh(),S1=bR(),y1=uA(),g1=qh(),cH=rh();N.util=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o1),J1),I1),k1),S1),y1),g1),{compareSchemas:cH.compareSchemas,compareFields:cH.compareFields,compareTypes:cH.compareTypes})});var sk=a((W)=>{Object.defineProperty(W,"__esModule",{value:!0});W.Union=W.StructRow=W.Struct=W.List=W.Decimal=W.TimeNanosecond=W.TimeMicrosecond=W.TimeMillisecond=W.TimeSecond=W.Time=W.TimestampNanosecond=W.TimestampMicrosecond=W.TimestampMillisecond=W.TimestampSecond=W.Timestamp=W.DateMillisecond=W.DateDay=W.Date_=W.FixedSizeBinary=W.LargeBinary=W.Binary=W.LargeUtf8=W.Utf8=W.Float64=W.Float32=W.Float16=W.Float=W.Uint64=W.Uint32=W.Uint16=W.Uint8=W.Int64=W.Int32=W.Int16=W.Int8=W.Int=W.Bool=W.Null=W.DataType=W.makeData=W.Data=W.BufferType=W.UnionMode=W.Type=W.TimeUnit=W.Precision=W.MetadataVersion=W.MessageHeader=W.IntervalUnit=W.DateUnit=void 0;W.LargeBinaryBuilder=W.BinaryBuilder=W.builderThroughAsyncIterable=W.builderThroughIterable=W.makeBuilder=W.Builder=W.util=W.RecordBatch=W.Message=W.JSONMessageReader=W.AsyncMessageReader=W.MessageReader=W.tableToIPC=W.tableFromIPC=W.RecordBatchJSONWriter=W.RecordBatchStreamWriter=W.RecordBatchFileWriter=W.RecordBatchWriter=W.AsyncRecordBatchStreamReader=W.AsyncRecordBatchFileReader=W.RecordBatchStreamReader=W.RecordBatchFileReader=W.RecordBatchReader=W.AsyncByteQueue=W.AsyncByteStream=W.ByteStream=W.tableFromJSON=W.vectorFromArray=W.makeVector=W.Vector=W.Visitor=W.Field=W.Schema=W.tableFromArrays=W.makeTable=W.Table=W.MapRow=W.Map_=W.FixedSizeList=W.DurationNanosecond=W.DurationMicrosecond=W.DurationMillisecond=W.DurationSecond=W.Duration=W.IntervalYearMonth=W.IntervalDayTime=W.Interval=W.Dictionary=W.SparseUnion=W.DenseUnion=void 0;W.LargeUtf8Builder=W.Utf8Builder=W.SparseUnionBuilder=W.DenseUnionBuilder=W.UnionBuilder=W.TimeNanosecondBuilder=W.TimeMicrosecondBuilder=W.TimeMillisecondBuilder=W.TimeSecondBuilder=W.TimeBuilder=W.TimestampNanosecondBuilder=W.TimestampMicrosecondBuilder=W.TimestampMillisecondBuilder=W.TimestampSecondBuilder=W.TimestampBuilder=W.StructBuilder=W.NullBuilder=W.MapBuilder=W.ListBuilder=W.Uint64Builder=W.Uint32Builder=W.Uint16Builder=W.Uint8Builder=W.Int64Builder=W.Int32Builder=W.Int16Builder=W.Int8Builder=W.IntBuilder=W.DurationNanosecondBuilder=W.DurationMicrosecondBuilder=W.DurationMillisecondBuilder=W.DurationSecondBuilder=W.DurationBuilder=W.IntervalYearMonthBuilder=W.IntervalDayTimeBuilder=W.IntervalBuilder=W.Float64Builder=W.Float32Builder=W.Float16Builder=W.FloatBuilder=W.FixedSizeListBuilder=W.FixedSizeBinaryBuilder=W.DictionaryBuilder=W.DecimalBuilder=W.DateMillisecondBuilder=W.DateDayBuilder=W.DateBuilder=W.BoolBuilder=void 0;var t1=kA(),K1=aR(),sH=HA(),PH=Uh(),b1=Tk(),n1=Dk(),tH=Hk(),KH=ak();t1.default.toDOMStream=b1.toDOMStream;K1.Builder.throughDOM=n1.builderThroughDOMStream;sH.RecordBatchReader.throughDOM=tH.recordBatchReaderThroughDOMStream;sH.RecordBatchFileReader.throughDOM=tH.recordBatchReaderThroughDOMStream;sH.RecordBatchStreamReader.throughDOM=tH.recordBatchReaderThroughDOMStream;PH.RecordBatchWriter.throughDOM=KH.recordBatchWriterThroughDOMStream;PH.RecordBatchFileWriter.throughDOM=KH.recordBatchWriterThroughDOMStream;PH.RecordBatchStreamWriter.throughDOM=KH.recordBatchWriterThroughDOMStream;var S=gH();Object.defineProperty(W,"DateUnit",{enumerable:!0,get:function(){return S.DateUnit}});Object.defineProperty(W,"IntervalUnit",{enumerable:!0,get:function(){return S.IntervalUnit}});Object.defineProperty(W,"MessageHeader",{enumerable:!0,get:function(){return S.MessageHeader}});Object.defineProperty(W,"MetadataVersion",{enumerable:!0,get:function(){return S.MetadataVersion}});Object.defineProperty(W,"Precision",{enumerable:!0,get:function(){return S.Precision}});Object.defineProperty(W,"TimeUnit",{enumerable:!0,get:function(){return S.TimeUnit}});Object.defineProperty(W,"Type",{enumerable:!0,get:function(){return S.Type}});Object.defineProperty(W,"UnionMode",{enumerable:!0,get:function(){return S.UnionMode}});Object.defineProperty(W,"BufferType",{enumerable:!0,get:function(){return S.BufferType}});Object.defineProperty(W,"Data",{enumerable:!0,get:function(){return S.Data}});Object.defineProperty(W,"makeData",{enumerable:!0,get:function(){return S.makeData}});Object.defineProperty(W,"DataType",{enumerable:!0,get:function(){return S.DataType}});Object.defineProperty(W,"Null",{enumerable:!0,get:function(){return S.Null}});Object.defineProperty(W,"Bool",{enumerable:!0,get:function(){return S.Bool}});Object.defineProperty(W,"Int",{enumerable:!0,get:function(){return S.Int}});Object.defineProperty(W,"Int8",{enumerable:!0,get:function(){return S.Int8}});Object.defineProperty(W,"Int16",{enumerable:!0,get:function(){return S.Int16}});Object.defineProperty(W,"Int32",{enumerable:!0,get:function(){return S.Int32}});Object.defineProperty(W,"Int64",{enumerable:!0,get:function(){return S.Int64}});Object.defineProperty(W,"Uint8",{enumerable:!0,get:function(){return S.Uint8}});Object.defineProperty(W,"Uint16",{enumerable:!0,get:function(){return S.Uint16}});Object.defineProperty(W,"Uint32",{enumerable:!0,get:function(){return S.Uint32}});Object.defineProperty(W,"Uint64",{enumerable:!0,get:function(){return S.Uint64}});Object.defineProperty(W,"Float",{enumerable:!0,get:function(){return S.Float}});Object.defineProperty(W,"Float16",{enumerable:!0,get:function(){return S.Float16}});Object.defineProperty(W,"Float32",{enumerable:!0,get:function(){return S.Float32}});Object.defineProperty(W,"Float64",{enumerable:!0,get:function(){return S.Float64}});Object.defineProperty(W,"Utf8",{enumerable:!0,get:function(){return S.Utf8}});Object.defineProperty(W,"LargeUtf8",{enumerable:!0,get:function(){return S.LargeUtf8}});Object.defineProperty(W,"Binary",{enumerable:!0,get:function(){return S.Binary}});Object.defineProperty(W,"LargeBinary",{enumerable:!0,get:function(){return S.LargeBinary}});Object.defineProperty(W,"FixedSizeBinary",{enumerable:!0,get:function(){return S.FixedSizeBinary}});Object.defineProperty(W,"Date_",{enumerable:!0,get:function(){return S.Date_}});Object.defineProperty(W,"DateDay",{enumerable:!0,get:function(){return S.DateDay}});Object.defineProperty(W,"DateMillisecond",{enumerable:!0,get:function(){return S.DateMillisecond}});Object.defineProperty(W,"Timestamp",{enumerable:!0,get:function(){return S.Timestamp}});Object.defineProperty(W,"TimestampSecond",{enumerable:!0,get:function(){return S.TimestampSecond}});Object.defineProperty(W,"TimestampMillisecond",{enumerable:!0,get:function(){return S.TimestampMillisecond}});Object.defineProperty(W,"TimestampMicrosecond",{enumerable:!0,get:function(){return S.TimestampMicrosecond}});Object.defineProperty(W,"TimestampNanosecond",{enumerable:!0,get:function(){return S.TimestampNanosecond}});Object.defineProperty(W,"Time",{enumerable:!0,get:function(){return S.Time}});Object.defineProperty(W,"TimeSecond",{enumerable:!0,get:function(){return S.TimeSecond}});Object.defineProperty(W,"TimeMillisecond",{enumerable:!0,get:function(){return S.TimeMillisecond}});Object.defineProperty(W,"TimeMicrosecond",{enumerable:!0,get:function(){return S.TimeMicrosecond}});Object.defineProperty(W,"TimeNanosecond",{enumerable:!0,get:function(){return S.TimeNanosecond}});Object.defineProperty(W,"Decimal",{enumerable:!0,get:function(){return S.Decimal}});Object.defineProperty(W,"List",{enumerable:!0,get:function(){return S.List}});Object.defineProperty(W,"Struct",{enumerable:!0,get:function(){return S.Struct}});Object.defineProperty(W,"StructRow",{enumerable:!0,get:function(){return S.StructRow}});Object.defineProperty(W,"Union",{enumerable:!0,get:function(){return S.Union}});Object.defineProperty(W,"DenseUnion",{enumerable:!0,get:function(){return S.DenseUnion}});Object.defineProperty(W,"SparseUnion",{enumerable:!0,get:function(){return S.SparseUnion}});Object.defineProperty(W,"Dictionary",{enumerable:!0,get:function(){return S.Dictionary}});Object.defineProperty(W,"Interval",{enumerable:!0,get:function(){return S.Interval}});Object.defineProperty(W,"IntervalDayTime",{enumerable:!0,get:function(){return S.IntervalDayTime}});Object.defineProperty(W,"IntervalYearMonth",{enumerable:!0,get:function(){return S.IntervalYearMonth}});Object.defineProperty(W,"Duration",{enumerable:!0,get:function(){return S.Duration}});Object.defineProperty(W,"DurationSecond",{enumerable:!0,get:function(){return S.DurationSecond}});Object.defineProperty(W,"DurationMillisecond",{enumerable:!0,get:function(){return S.DurationMillisecond}});Object.defineProperty(W,"DurationMicrosecond",{enumerable:!0,get:function(){return S.DurationMicrosecond}});Object.defineProperty(W,"DurationNanosecond",{enumerable:!0,get:function(){return S.DurationNanosecond}});Object.defineProperty(W,"FixedSizeList",{enumerable:!0,get:function(){return S.FixedSizeList}});Object.defineProperty(W,"Map_",{enumerable:!0,get:function(){return S.Map_}});Object.defineProperty(W,"MapRow",{enumerable:!0,get:function(){return S.MapRow}});Object.defineProperty(W,"Table",{enumerable:!0,get:function(){return S.Table}});Object.defineProperty(W,"makeTable",{enumerable:!0,get:function(){return S.makeTable}});Object.defineProperty(W,"tableFromArrays",{enumerable:!0,get:function(){return S.tableFromArrays}});Object.defineProperty(W,"Schema",{enumerable:!0,get:function(){return S.Schema}});Object.defineProperty(W,"Field",{enumerable:!0,get:function(){return S.Field}});Object.defineProperty(W,"Visitor",{enumerable:!0,get:function(){return S.Visitor}});Object.defineProperty(W,"Vector",{enumerable:!0,get:function(){return S.Vector}});Object.defineProperty(W,"makeVector",{enumerable:!0,get:function(){return S.makeVector}});Object.defineProperty(W,"vectorFromArray",{enumerable:!0,get:function(){return S.vectorFromArray}});Object.defineProperty(W,"tableFromJSON",{enumerable:!0,get:function(){return S.tableFromJSON}});Object.defineProperty(W,"ByteStream",{enumerable:!0,get:function(){return S.ByteStream}});Object.defineProperty(W,"AsyncByteStream",{enumerable:!0,get:function(){return S.AsyncByteStream}});Object.defineProperty(W,"AsyncByteQueue",{enumerable:!0,get:function(){return S.AsyncByteQueue}});Object.defineProperty(W,"RecordBatchReader",{enumerable:!0,get:function(){return S.RecordBatchReader}});Object.defineProperty(W,"RecordBatchFileReader",{enumerable:!0,get:function(){return S.RecordBatchFileReader}});Object.defineProperty(W,"RecordBatchStreamReader",{enumerable:!0,get:function(){return S.RecordBatchStreamReader}});Object.defineProperty(W,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return S.AsyncRecordBatchFileReader}});Object.defineProperty(W,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return S.AsyncRecordBatchStreamReader}});Object.defineProperty(W,"RecordBatchWriter",{enumerable:!0,get:function(){return S.RecordBatchWriter}});Object.defineProperty(W,"RecordBatchFileWriter",{enumerable:!0,get:function(){return S.RecordBatchFileWriter}});Object.defineProperty(W,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return S.RecordBatchStreamWriter}});Object.defineProperty(W,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return S.RecordBatchJSONWriter}});Object.defineProperty(W,"tableFromIPC",{enumerable:!0,get:function(){return S.tableFromIPC}});Object.defineProperty(W,"tableToIPC",{enumerable:!0,get:function(){return S.tableToIPC}});Object.defineProperty(W,"MessageReader",{enumerable:!0,get:function(){return S.MessageReader}});Object.defineProperty(W,"AsyncMessageReader",{enumerable:!0,get:function(){return S.AsyncMessageReader}});Object.defineProperty(W,"JSONMessageReader",{enumerable:!0,get:function(){return S.JSONMessageReader}});Object.defineProperty(W,"Message",{enumerable:!0,get:function(){return S.Message}});Object.defineProperty(W,"RecordBatch",{enumerable:!0,get:function(){return S.RecordBatch}});Object.defineProperty(W,"util",{enumerable:!0,get:function(){return S.util}});Object.defineProperty(W,"Builder",{enumerable:!0,get:function(){return S.Builder}});Object.defineProperty(W,"makeBuilder",{enumerable:!0,get:function(){return S.makeBuilder}});Object.defineProperty(W,"builderThroughIterable",{enumerable:!0,get:function(){return S.builderThroughIterable}});Object.defineProperty(W,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return S.builderThroughAsyncIterable}});var l=gH();Object.defineProperty(W,"BinaryBuilder",{enumerable:!0,get:function(){return l.BinaryBuilder}});Object.defineProperty(W,"LargeBinaryBuilder",{enumerable:!0,get:function(){return l.LargeBinaryBuilder}});Object.defineProperty(W,"BoolBuilder",{enumerable:!0,get:function(){return l.BoolBuilder}});Object.defineProperty(W,"DateBuilder",{enumerable:!0,get:function(){return l.DateBuilder}});Object.defineProperty(W,"DateDayBuilder",{enumerable:!0,get:function(){return l.DateDayBuilder}});Object.defineProperty(W,"DateMillisecondBuilder",{enumerable:!0,get:function(){return l.DateMillisecondBuilder}});Object.defineProperty(W,"DecimalBuilder",{enumerable:!0,get:function(){return l.DecimalBuilder}});Object.defineProperty(W,"DictionaryBuilder",{enumerable:!0,get:function(){return l.DictionaryBuilder}});Object.defineProperty(W,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return l.FixedSizeBinaryBuilder}});Object.defineProperty(W,"FixedSizeListBuilder",{enumerable:!0,get:function(){return l.FixedSizeListBuilder}});Object.defineProperty(W,"FloatBuilder",{enumerable:!0,get:function(){return l.FloatBuilder}});Object.defineProperty(W,"Float16Builder",{enumerable:!0,get:function(){return l.Float16Builder}});Object.defineProperty(W,"Float32Builder",{enumerable:!0,get:function(){return l.Float32Builder}});Object.defineProperty(W,"Float64Builder",{enumerable:!0,get:function(){return l.Float64Builder}});Object.defineProperty(W,"IntervalBuilder",{enumerable:!0,get:function(){return l.IntervalBuilder}});Object.defineProperty(W,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return l.IntervalDayTimeBuilder}});Object.defineProperty(W,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return l.IntervalYearMonthBuilder}});Object.defineProperty(W,"DurationBuilder",{enumerable:!0,get:function(){return l.DurationBuilder}});Object.defineProperty(W,"DurationSecondBuilder",{enumerable:!0,get:function(){return l.DurationSecondBuilder}});Object.defineProperty(W,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return l.DurationMillisecondBuilder}});Object.defineProperty(W,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return l.DurationMicrosecondBuilder}});Object.defineProperty(W,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return l.DurationNanosecondBuilder}});Object.defineProperty(W,"IntBuilder",{enumerable:!0,get:function(){return l.IntBuilder}});Object.defineProperty(W,"Int8Builder",{enumerable:!0,get:function(){return l.Int8Builder}});Object.defineProperty(W,"Int16Builder",{enumerable:!0,get:function(){return l.Int16Builder}});Object.defineProperty(W,"Int32Builder",{enumerable:!0,get:function(){return l.Int32Builder}});Object.defineProperty(W,"Int64Builder",{enumerable:!0,get:function(){return l.Int64Builder}});Object.defineProperty(W,"Uint8Builder",{enumerable:!0,get:function(){return l.Uint8Builder}});Object.defineProperty(W,"Uint16Builder",{enumerable:!0,get:function(){return l.Uint16Builder}});Object.defineProperty(W,"Uint32Builder",{enumerable:!0,get:function(){return l.Uint32Builder}});Object.defineProperty(W,"Uint64Builder",{enumerable:!0,get:function(){return l.Uint64Builder}});Object.defineProperty(W,"ListBuilder",{enumerable:!0,get:function(){return l.ListBuilder}});Object.defineProperty(W,"MapBuilder",{enumerable:!0,get:function(){return l.MapBuilder}});Object.defineProperty(W,"NullBuilder",{enumerable:!0,get:function(){return l.NullBuilder}});Object.defineProperty(W,"StructBuilder",{enumerable:!0,get:function(){return l.StructBuilder}});Object.defineProperty(W,"TimestampBuilder",{enumerable:!0,get:function(){return l.TimestampBuilder}});Object.defineProperty(W,"TimestampSecondBuilder",{enumerable:!0,get:function(){return l.TimestampSecondBuilder}});Object.defineProperty(W,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return l.TimestampMillisecondBuilder}});Object.defineProperty(W,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return l.TimestampMicrosecondBuilder}});Object.defineProperty(W,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return l.TimestampNanosecondBuilder}});Object.defineProperty(W,"TimeBuilder",{enumerable:!0,get:function(){return l.TimeBuilder}});Object.defineProperty(W,"TimeSecondBuilder",{enumerable:!0,get:function(){return l.TimeSecondBuilder}});Object.defineProperty(W,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return l.TimeMillisecondBuilder}});Object.defineProperty(W,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return l.TimeMicrosecondBuilder}});Object.defineProperty(W,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return l.TimeNanosecondBuilder}});Object.defineProperty(W,"UnionBuilder",{enumerable:!0,get:function(){return l.UnionBuilder}});Object.defineProperty(W,"DenseUnionBuilder",{enumerable:!0,get:function(){return l.DenseUnionBuilder}});Object.defineProperty(W,"SparseUnionBuilder",{enumerable:!0,get:function(){return l.SparseUnionBuilder}});Object.defineProperty(W,"Utf8Builder",{enumerable:!0,get:function(){return l.Utf8Builder}});Object.defineProperty(W,"LargeUtf8Builder",{enumerable:!0,get:function(){return l.LargeUtf8Builder}})});var uB=a((bH)=>{Object.defineProperty(bH,"__esModule",{value:!0});var r1=KR(),X1=kA(),G1=aR(),x1=HA(),F1=Uh(),e1=FI(),l1=jI(),d1=UI(),j1=vI();X1.default.toNodeStream=e1.toNodeStream;G1.Builder.throughNode=l1.builderThroughNodeStream;x1.RecordBatchReader.throughNode=d1.recordBatchReaderThroughNodeStream;F1.RecordBatchWriter.throughNode=j1.recordBatchWriterThroughNodeStream;r1.__exportStar(sk(),bH)});var nH=a(()=>{/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Pk;(function(R){(function(T){var A=typeof globalThis==="object"?globalThis:typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:_(),h=C(R);if(typeof A.Reflect<"u")h=C(A.Reflect,h);if(T(h,A),typeof A.Reflect>"u")A.Reflect=R;function C(O,H){return function(i,J){if(Object.defineProperty(O,i,{configurable:!0,writable:!0,value:J}),H)H(i,J)}}function B(){try{return Function("return this;")()}catch(O){}}function D(){try{return(0,eval)("(function() { return this; })()")}catch(O){}}function _(){return B()||D()}})(function(T,A){var h=Object.prototype.hasOwnProperty,C=typeof Symbol==="function",B=C&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",D=C&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",_=typeof Object.create==="function",O={__proto__:[]}instanceof Array,H=!_&&!O,i={create:_?function(){return CD(Object.create(null))}:O?function(){return CD({__proto__:null})}:function(){return CD({})},has:H?function(q,o){return h.call(q,o)}:function(q,o){return o in q},get:H?function(q,o){return h.call(q,o)?q[o]:void 0}:function(q,o){return q[o]}},J=Object.getPrototypeOf(Function),P=typeof Map==="function"&&typeof Map.prototype.entries==="function"?Map:aS(),w=typeof Set==="function"&&typeof Set.prototype.entries==="function"?Set:LS(),t=typeof WeakMap==="function"?WeakMap:WS(),Y=C?Symbol.for("@reflect-metadata:registry"):void 0,WR=HS(),xR=iS(WR);function AR(q,o,k,y){if(!Z(k)){if(!Ji(q))throw TypeError();if(!kR(o))throw TypeError();if(!kR(y)&&!Z(y)&&!cA(y))throw TypeError();if(cA(y))y=void 0;return k=yT(k),AS(q,o,k,y)}else{if(!Ji(q))throw TypeError();if(!Ii(o))throw TypeError();return TS(q,o)}}T("decorate",AR);function FR(q,o){function k(y,E){if(!kR(y))throw TypeError();if(!Z(E)&&!_S(E))throw TypeError();Li(q,o,y,E)}return k}T("metadata",FR);function fR(q,o,k,y){if(!kR(k))throw TypeError();if(!Z(y))y=yT(y);return Li(q,o,k,y)}T("defineMetadata",fR);function HT(q,o,k){if(!kR(o))throw TypeError();if(!Z(k))k=yT(k);return ii(q,o,k)}T("hasMetadata",HT);function dT(q,o,k){if(!kR(o))throw TypeError();if(!Z(k))k=yT(k);return TD(q,o,k)}T("hasOwnMetadata",dT);function v6(q,o,k){if(!kR(o))throw TypeError();if(!Z(k))k=yT(k);return qi(q,o,k)}T("getMetadata",v6);function V6(q,o,k){if(!kR(o))throw TypeError();if(!Z(k))k=yT(k);return ai(q,o,k)}T("getOwnMetadata",V6);function m6(q,o){if(!kR(q))throw TypeError();if(!Z(o))o=yT(o);return Wi(q,o)}T("getMetadataKeys",m6);function Y6(q,o){if(!kR(q))throw TypeError();if(!Z(o))o=yT(o);return Ni(q,o)}T("getOwnMetadataKeys",Y6);function RS(q,o,k){if(!kR(o))throw TypeError();if(!Z(k))k=yT(k);if(!kR(o))throw TypeError();if(!Z(k))k=yT(k);var y=Oh(o,k,!1);if(Z(y))return!1;return y.OrdinaryDeleteMetadata(q,o,k)}T("deleteMetadata",RS);function TS(q,o){for(var k=q.length-1;k>=0;--k){var y=q[k],E=y(o);if(!Z(E)&&!cA(E)){if(!Ii(E))throw TypeError();o=E}}return o}function AS(q,o,k,y){for(var E=q.length-1;E>=0;--E){var SR=q[E],PR=SR(o,k,y);if(!Z(PR)&&!cA(PR)){if(!kR(PR))throw TypeError();y=PR}}return y}function ii(q,o,k){var y=TD(q,o,k);if(y)return!0;var E=hD(o);if(!cA(E))return ii(q,E,k);return!1}function TD(q,o,k){var y=Oh(o,k,!1);if(Z(y))return!1;return oi(y.OrdinaryHasOwnMetadata(q,o,k))}function qi(q,o,k){var y=TD(q,o,k);if(y)return ai(q,o,k);var E=hD(o);if(!cA(E))return qi(q,E,k);return}function ai(q,o,k){var y=Oh(o,k,!1);if(Z(y))return;return y.OrdinaryGetOwnMetadata(q,o,k)}function Li(q,o,k,y){var E=Oh(k,y,!0);E.OrdinaryDefineOwnMetadata(q,o,k,y)}function Wi(q,o){var k=Ni(q,o),y=hD(q);if(y===null)return k;var E=Wi(y,o);if(E.length<=0)return k;if(k.length<=0)return E;var SR=new w,PR=[];for(var M=0,s=k;M<s.length;M++){var K=s[M],b=SR.has(K);if(!b)SR.add(K),PR.push(K)}for(var n=0,v=E;n<v.length;n++){var K=v[n],b=SR.has(K);if(!b)SR.add(K),PR.push(K)}return PR}function Ni(q,o){var k=Oh(q,o,!1);if(!k)return[];return k.OrdinaryOwnMetadataKeys(q,o)}function ci(q){if(q===null)return 1;switch(typeof q){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return q===null?1:6;default:return 6}}function Z(q){return q===void 0}function cA(q){return q===null}function hS(q){return typeof q==="symbol"}function kR(q){return typeof q==="object"?q!==null:typeof q==="function"}function CS(q,o){switch(ci(q)){case 0:return q;case 1:return q;case 2:return q;case 3:return q;case 4:return q;case 5:return q}var k=o===3?"string":o===5?"number":"default",y=ki(q,B);if(y!==void 0){var E=y.call(q,k);if(kR(E))throw TypeError();return E}return BS(q,k==="default"?"number":k)}function BS(q,o){if(o==="string"){var k=q.toString;if(oA(k)){var y=k.call(q);if(!kR(y))return y}var E=q.valueOf;if(oA(E)){var y=E.call(q);if(!kR(y))return y}}else{var E=q.valueOf;if(oA(E)){var y=E.call(q);if(!kR(y))return y}var SR=q.toString;if(oA(SR)){var y=SR.call(q);if(!kR(y))return y}}throw TypeError()}function oi(q){return!!q}function DS(q){return""+q}function yT(q){var o=CS(q,3);if(hS(o))return o;return DS(o)}function Ji(q){return Array.isArray?Array.isArray(q):q instanceof Object?q instanceof Array:Object.prototype.toString.call(q)==="[object Array]"}function oA(q){return typeof q==="function"}function Ii(q){return typeof q==="function"}function _S(q){switch(ci(q)){case 3:return!0;case 4:return!0;default:return!1}}function AD(q,o){return q===o||q!==q&&o!==o}function ki(q,o){var k=q[o];if(k===void 0||k===null)return;if(!oA(k))throw TypeError();return k}function Si(q){var o=ki(q,D);if(!oA(o))throw TypeError();var k=o.call(q);if(!kR(k))throw TypeError();return k}function yi(q){return q.value}function gi(q){var o=q.next();return o.done?!1:o}function si(q){var o=q.return;if(o)o.call(q)}function hD(q){var o=Object.getPrototypeOf(q);if(typeof q!=="function"||q===J)return o;if(o!==J)return o;var k=q.prototype,y=k&&Object.getPrototypeOf(k);if(y==null||y===Object.prototype)return o;var E=y.constructor;if(typeof E!=="function")return o;if(E===q)return o;return E}function OS(){var q;if(!Z(Y)&&typeof A.Reflect<"u"&&!(Y in A.Reflect)&&typeof A.Reflect.defineMetadata==="function")q=qS(A.Reflect);var o,k,y,E=new t,SR={registerProvider:PR,getProvider:s,setProvider:b};return SR;function PR(n){if(!Object.isExtensible(SR))throw Error("Cannot add provider to a frozen registry.");switch(!0){case q===n:break;case Z(o):o=n;break;case o===n:break;case Z(k):k=n;break;case k===n:break;default:if(y===void 0)y=new w;y.add(n);break}}function M(n,v){if(!Z(o)){if(o.isProviderFor(n,v))return o;if(!Z(k)){if(k.isProviderFor(n,v))return o;if(!Z(y)){var qR=Si(y);while(!0){var yR=gi(qR);if(!yR)return;var iT=yi(yR);if(iT.isProviderFor(n,v))return si(qR),iT}}}}if(!Z(q)&&q.isProviderFor(n,v))return q;return}function s(n,v){var qR=E.get(n),yR;if(!Z(qR))yR=qR.get(v);if(!Z(yR))return yR;if(yR=M(n,v),!Z(yR)){if(Z(qR))qR=new P,E.set(n,qR);qR.set(v,yR)}return yR}function K(n){if(Z(n))throw TypeError();return o===n||k===n||!Z(y)&&y.has(n)}function b(n,v,qR){if(!K(qR))throw Error("Metadata provider not registered.");var yR=s(n,v);if(yR!==qR){if(!Z(yR))return!1;var iT=E.get(n);if(Z(iT))iT=new P,E.set(n,iT);iT.set(v,qR)}return!0}}function HS(){var q;if(!Z(Y)&&kR(A.Reflect)&&Object.isExtensible(A.Reflect))q=A.Reflect[Y];if(Z(q))q=OS();if(!Z(Y)&&kR(A.Reflect)&&Object.isExtensible(A.Reflect))Object.defineProperty(A.Reflect,Y,{enumerable:!1,configurable:!1,writable:!1,value:q});return q}function iS(q){var o=new t,k={isProviderFor:function(K,b){var n=o.get(K);if(Z(n))return!1;return n.has(b)},OrdinaryDefineOwnMetadata:PR,OrdinaryHasOwnMetadata:E,OrdinaryGetOwnMetadata:SR,OrdinaryOwnMetadataKeys:M,OrdinaryDeleteMetadata:s};return WR.registerProvider(k),k;function y(K,b,n){var v=o.get(K),qR=!1;if(Z(v)){if(!n)return;v=new P,o.set(K,v),qR=!0}var yR=v.get(b);if(Z(yR)){if(!n)return;if(yR=new P,v.set(b,yR),!q.setProvider(K,b,k)){if(v.delete(b),qR)o.delete(K);throw Error("Wrong provider for target.")}}return yR}function E(K,b,n){var v=y(b,n,!1);if(Z(v))return!1;return oi(v.has(K))}function SR(K,b,n){var v=y(b,n,!1);if(Z(v))return;return v.get(K)}function PR(K,b,n,v){var qR=y(n,v,!0);qR.set(K,b)}function M(K,b){var n=[],v=y(K,b,!1);if(Z(v))return n;var qR=v.keys(),yR=Si(qR),iT=0;while(!0){var Pi=gi(yR);if(!Pi)return n.length=iT,n;var NS=yi(Pi);try{n[iT]=NS}catch(cS){try{si(yR)}finally{throw cS}}iT++}}function s(K,b,n){var v=y(b,n,!1);if(Z(v))return!1;if(!v.delete(K))return!1;if(v.size===0){var qR=o.get(b);if(!Z(qR)){if(qR.delete(n),qR.size===0)o.delete(qR)}}return!0}}function qS(q){var{defineMetadata:o,hasOwnMetadata:k,getOwnMetadata:y,getOwnMetadataKeys:E,deleteMetadata:SR}=q,PR=new t,M={isProviderFor:function(s,K){var b=PR.get(s);if(!Z(b)&&b.has(K))return!0;if(E(s,K).length){if(Z(b))b=new w,PR.set(s,b);return b.add(K),!0}return!1},OrdinaryDefineOwnMetadata:o,OrdinaryHasOwnMetadata:k,OrdinaryGetOwnMetadata:y,OrdinaryOwnMetadataKeys:E,OrdinaryDeleteMetadata:SR};return M}function Oh(q,o,k){var y=WR.getProvider(q,o);if(!Z(y))return y;if(k){if(WR.setProvider(q,o,xR))return xR;throw Error("Illegal state.")}return}function aS(){var q={},o=[],k=function(){function M(s,K,b){this._index=0,this._keys=s,this._values=K,this._selector=b}return M.prototype["@@iterator"]=function(){return this},M.prototype[D]=function(){return this},M.prototype.next=function(){var s=this._index;if(s>=0&&s<this._keys.length){var K=this._selector(this._keys[s],this._values[s]);if(s+1>=this._keys.length)this._index=-1,this._keys=o,this._values=o;else this._index++;return{value:K,done:!1}}return{value:void 0,done:!0}},M.prototype.throw=function(s){if(this._index>=0)this._index=-1,this._keys=o,this._values=o;throw s},M.prototype.return=function(s){if(this._index>=0)this._index=-1,this._keys=o,this._values=o;return{value:s,done:!0}},M}(),y=function(){function M(){this._keys=[],this._values=[],this._cacheKey=q,this._cacheIndex=-2}return Object.defineProperty(M.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),M.prototype.has=function(s){return this._find(s,!1)>=0},M.prototype.get=function(s){var K=this._find(s,!1);return K>=0?this._values[K]:void 0},M.prototype.set=function(s,K){var b=this._find(s,!0);return this._values[b]=K,this},M.prototype.delete=function(s){var K=this._find(s,!1);if(K>=0){var b=this._keys.length;for(var n=K+1;n<b;n++)this._keys[n-1]=this._keys[n],this._values[n-1]=this._values[n];if(this._keys.length--,this._values.length--,AD(s,this._cacheKey))this._cacheKey=q,this._cacheIndex=-2;return!0}return!1},M.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=q,this._cacheIndex=-2},M.prototype.keys=function(){return new k(this._keys,this._values,E)},M.prototype.values=function(){return new k(this._keys,this._values,SR)},M.prototype.entries=function(){return new k(this._keys,this._values,PR)},M.prototype["@@iterator"]=function(){return this.entries()},M.prototype[D]=function(){return this.entries()},M.prototype._find=function(s,K){if(!AD(this._cacheKey,s)){this._cacheIndex=-1;for(var b=0;b<this._keys.length;b++)if(AD(this._keys[b],s)){this._cacheIndex=b;break}}if(this._cacheIndex<0&&K)this._cacheIndex=this._keys.length,this._keys.push(s),this._values.push(void 0);return this._cacheIndex},M}();return y;function E(M,s){return M}function SR(M,s){return s}function PR(M,s){return[M,s]}}function LS(){var q=function(){function o(){this._map=new P}return Object.defineProperty(o.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),o.prototype.has=function(k){return this._map.has(k)},o.prototype.add=function(k){return this._map.set(k,k),this},o.prototype.delete=function(k){return this._map.delete(k)},o.prototype.clear=function(){this._map.clear()},o.prototype.keys=function(){return this._map.keys()},o.prototype.values=function(){return this._map.keys()},o.prototype.entries=function(){return this._map.entries()},o.prototype["@@iterator"]=function(){return this.keys()},o.prototype[D]=function(){return this.keys()},o}();return q}function WS(){var q=16,o=i.create(),k=y();return function(){function s(){this._key=y()}return s.prototype.has=function(K){var b=E(K,!1);return b!==void 0?i.has(b,this._key):!1},s.prototype.get=function(K){var b=E(K,!1);return b!==void 0?i.get(b,this._key):void 0},s.prototype.set=function(K,b){var n=E(K,!0);return n[this._key]=b,this},s.prototype.delete=function(K){var b=E(K,!1);return b!==void 0?delete b[this._key]:!1},s.prototype.clear=function(){this._key=y()},s}();function y(){var s;do s="@@WeakMap@@"+M();while(i.has(o,s));return o[s]=!0,s}function E(s,K){if(!h.call(s,k)){if(!K)return;Object.defineProperty(s,k,{value:i.create()})}return s[k]}function SR(s,K){for(var b=0;b<K;++b)s[b]=Math.random()*255|0;return s}function PR(s){if(typeof Uint8Array==="function"){var K=new Uint8Array(s);if(typeof crypto<"u")crypto.getRandomValues(K);else if(typeof msCrypto<"u")msCrypto.getRandomValues(K);else SR(K,s);return K}return SR(Array(s),s)}function M(){var s=PR(q);s[6]=s[6]&79|64,s[8]=s[8]&191|128;var K="";for(var b=0;b<q;++b){var n=s[b];if(b===4||b===6||b===8)K+="-";if(n<16)K+="0";K+=n.toString(16).toLowerCase()}return K}}function CD(q){return q.__=void 0,delete q.__,q}})})(Pk||(Pk={}))});var qA=a((Kk)=>{Object.defineProperty(Kk,"__esModule",{value:!0});Kk.EmbeddingFunctionRegistry=void 0;Kk.register=u1;Kk.getRegistry=Z1;nH();class EH{#R=new Map;#T=new Map;length(){return this.#R.size}register(R){let T=this;return function(A){if(!R)R=A.name;if(T.#R.has(R))throw Error(`Embedding function with alias "${R}" already exists`);return T.#R.set(R,A),Reflect.defineMetadata("lancedb::embedding::name",R,A),A}}get(R){let T=this.#R.get(R);if(!T)return;let A;if(T.prototype.init)A=async function(h){let C=new T(h);return await C.init(),C};else A=(h)=>new T(h);return{create:A}}reset(){this.#R.clear()}async parseFunctions(R){if(!R.has("embedding_functions"))return new Map;else{let T=JSON.parse(R.get("embedding_functions")),A=await Promise.all(T.map(async(h)=>{if(!this.get(h.name))throw Error(`Function "${h.name}" not found in registry`);let B=await this.get(h.name).create(h.model);return[h.name,{sourceColumn:h.sourceColumn,vectorColumn:h.vectorColumn,function:B}]}));return new Map(A)}}functionToMetadata(R){let T={},A=Reflect.getMetadata("lancedb::embedding::name",R.function.constructor);return T.sourceColumn=R.sourceColumn,T.vectorColumn=R.vectorColumn??"vector",T.name=A??R.function.constructor.name,T.model=R.function.toJSON(),T}getTableMetadata(R){let T=new Map,A=R.map((h)=>this.functionToMetadata(h));return T.set("embedding_functions",JSON.stringify(A)),T}setVar(R,T){if(R.includes(":"))throw Error("Variable names cannot contain colons");this.#T.set(R,T)}getVar(R){return this.#T.get(R)}}Kk.EmbeddingFunctionRegistry=EH;var tk=new EH;function u1(R){return tk.register(R)}function Z1(){return tk}});var Ch=a((Uk)=>{Object.defineProperty(Uk,"__esModule",{value:!0});Uk.sanitizeMetadata=pH;Uk.sanitizeInt=nk;Uk.sanitizeFloat=Ek;Uk.sanitizeDecimal=$k;Uk.sanitizeDate=pk;Uk.sanitizeTime=rk;Uk.sanitizeTimestamp=Xk;Uk.sanitizeTypedTimestamp=mh;Uk.sanitizeInterval=Gk;Uk.sanitizeList=xk;Uk.sanitizeStruct=Fk;Uk.sanitizeUnion=ek;Uk.sanitizeTypedUnion=$H;Uk.sanitizeFixedSizeBinary=lk;Uk.sanitizeFixedSizeList=dk;Uk.sanitizeMap=jk;Uk.sanitizeDuration=uk;Uk.sanitizeDictionary=Zk;Uk.sanitizeType=ZB;Uk.sanitizeField=p9;Uk.sanitizeSchema=rH;Uk.sanitizeTable=Q1;Uk.dataTypeFromName=wk;var hh=uB(),I=kT();function pH(R){if(R===void 0||R===null)return;if(!(R instanceof Map))throw Error("Expected metadata, if present, to be a Map<string, string>");for(let T of R)if(!(typeof T[0]==="string"||typeof T[1]!=="string"))throw Error("Expected metadata, if present, to be a Map<string, string> but it had non-string keys or values");return R}function nk(R){if(!("bitWidth"in R)||typeof R.bitWidth!=="number"||!("isSigned"in R)||typeof R.isSigned!=="boolean")throw Error("Expected an Int Type to have a `bitWidth` and `isSigned` property");return new I.Int(R.isSigned,R.bitWidth)}function Ek(R){if(!("precision"in R)||typeof R.precision!=="number")throw Error("Expected a Float Type to have a `precision` property");return new I.Float(R.precision)}function $k(R){if(!("scale"in R)||typeof R.scale!=="number"||!("precision"in R)||typeof R.precision!=="number"||!("bitWidth"in R)||typeof R.bitWidth!=="number")throw Error("Expected a Decimal Type to have `scale`, `precision`, and `bitWidth` properties");return new I.Decimal(R.scale,R.precision,R.bitWidth)}function pk(R){if(!("unit"in R)||typeof R.unit!=="number")throw Error("Expected a Date type to have a `unit` property");return new I.Date_(R.unit)}function rk(R){if(!("unit"in R)||typeof R.unit!=="number"||!("bitWidth"in R)||typeof R.bitWidth!=="number")throw Error("Expected a Time type to have `unit` and `bitWidth` properties");return new I.Time(R.unit,R.bitWidth)}function Xk(R){if(!("unit"in R)||typeof R.unit!=="number")throw Error("Expected a Timestamp type to have a `unit` property");let T=null;if("timezone"in R&&typeof R.timezone==="string")T=R.timezone;return new I.Timestamp(R.unit,T)}function mh(R,T){let A=null;if("timezone"in R&&typeof R.timezone==="string")A=R.timezone;return new T(A)}function Gk(R){if(!("unit"in R)||typeof R.unit!=="number")throw Error("Expected an Interval type to have a `unit` property");return new I.Interval(R.unit)}function xk(R){if(!("children"in R)||!Array.isArray(R.children))throw Error("Expected a List type to have an array-like `children` property");if(R.children.length!==1)throw Error("Expected a List type to have exactly one child");return new I.List(p9(R.children[0]))}function Fk(R){if(!("children"in R)||!Array.isArray(R.children))throw Error("Expected a Struct type to have an array-like `children` property");return new I.Struct(R.children.map((T)=>p9(T)))}function ek(R){if(!("typeIds"in R)||!("mode"in R)||typeof R.mode!=="number")throw Error("Expected a Union type to have `typeIds` and `mode` properties");if(!("children"in R)||!Array.isArray(R.children))throw Error("Expected a Union type to have an array-like `children` property");return new I.Union(R.mode,R.typeIds,R.children.map((T)=>p9(T)))}function $H(R,T){if(!("typeIds"in R))throw Error("Expected a DenseUnion/SparseUnion type to have a `typeIds` property");if(!("children"in R)||!Array.isArray(R.children))throw Error("Expected a DenseUnion/SparseUnion type to have an array-like `children` property");return new T(R.typeIds,R.children.map((A)=>p9(A)))}function lk(R){if(!("byteWidth"in R)||typeof R.byteWidth!=="number")throw Error("Expected a FixedSizeBinary type to have a `byteWidth` property");return new I.FixedSizeBinary(R.byteWidth)}function dk(R){if(!("listSize"in R)||typeof R.listSize!=="number")throw Error("Expected a FixedSizeList type to have a `listSize` property");if(!("children"in R)||!Array.isArray(R.children))throw Error("Expected a FixedSizeList type to have an array-like `children` property");if(R.children.length!==1)throw Error("Expected a FixedSizeList type to have exactly one child");return new I.FixedSizeList(R.listSize,p9(R.children[0]))}function jk(R){if(!("children"in R)||!Array.isArray(R.children))throw Error("Expected a Map type to have an array-like `children` property");if(!("keysSorted"in R)||typeof R.keysSorted!=="boolean")throw Error("Expected a Map type to have a `keysSorted` property");return new I.Map_(R.children.map((T)=>p9(T)),R.keysSorted)}function uk(R){if(!("unit"in R)||typeof R.unit!=="number")throw Error("Expected a Duration type to have a `unit` property");return new I.Duration(R.unit)}function Zk(R){if(!("id"in R)||typeof R.id!=="number")throw Error("Expected a Dictionary type to have an `id` property");if(!("indices"in R)||typeof R.indices!=="object")throw Error("Expected a Dictionary type to have an `indices` property");if(!("dictionary"in R)||typeof R.dictionary!=="object")throw Error("Expected a Dictionary type to have an `dictionary` property");if(!("isOrdered"in R)||typeof R.isOrdered!=="boolean")throw Error("Expected a Dictionary type to have an `isOrdered` property");return new I.Dictionary(ZB(R.dictionary),ZB(R.indices),R.id,R.isOrdered)}function ZB(R){if(typeof R==="string")return wk(R);if(typeof R!=="object"||R===null)throw Error("Expected a Type but object was null/undefined");if(!("typeId"in R)||!(typeof R.typeId!=="function"||typeof R.typeId!=="number"))throw Error("Expected a Type to have a typeId property");let T;if(typeof R.typeId==="function")T=R.typeId();else if(typeof R.typeId==="number")T=R.typeId;else throw Error("Type's typeId property was not a function or number");switch(T){case I.Type.NONE:throw Error("Received a Type with a typeId of NONE");case I.Type.Null:return new I.Null;case I.Type.Int:return nk(R);case I.Type.Float:return Ek(R);case I.Type.Binary:return new I.Binary;case I.Type.Utf8:return new I.Utf8;case I.Type.Bool:return new I.Bool;case I.Type.Decimal:return $k(R);case I.Type.Date:return pk(R);case I.Type.Time:return rk(R);case I.Type.Timestamp:return Xk(R);case I.Type.Interval:return Gk(R);case I.Type.List:return xk(R);case I.Type.Struct:return Fk(R);case I.Type.Union:return ek(R);case I.Type.FixedSizeBinary:return lk(R);case I.Type.FixedSizeList:return dk(R);case I.Type.Map:return jk(R);case I.Type.Duration:return uk(R);case I.Type.Dictionary:return Zk(R);case I.Type.Int8:return new I.Int8;case I.Type.Int16:return new I.Int16;case I.Type.Int32:return new I.Int32;case I.Type.Int64:return new I.Int64;case I.Type.Uint8:return new I.Uint8;case I.Type.Uint16:return new I.Uint16;case I.Type.Uint32:return new I.Uint32;case I.Type.Uint64:return new I.Uint64;case I.Type.Float16:return new I.Float16;case I.Type.Float32:return new I.Float32;case I.Type.Float64:return new I.Float64;case I.Type.DateMillisecond:return new I.DateMillisecond;case I.Type.DateDay:return new I.DateDay;case I.Type.TimeNanosecond:return new I.TimeNanosecond;case I.Type.TimeMicrosecond:return new I.TimeMicrosecond;case I.Type.TimeMillisecond:return new I.TimeMillisecond;case I.Type.TimeSecond:return new I.TimeSecond;case I.Type.TimestampNanosecond:return mh(R,I.TimestampNanosecond);case I.Type.TimestampMicrosecond:return mh(R,I.TimestampMicrosecond);case I.Type.TimestampMillisecond:return mh(R,I.TimestampMillisecond);case I.Type.TimestampSecond:return mh(R,I.TimestampSecond);case I.Type.DenseUnion:return $H(R,I.DenseUnion);case I.Type.SparseUnion:return $H(R,I.SparseUnion);case I.Type.IntervalDayTime:return new I.IntervalDayTime;case I.Type.IntervalYearMonth:return new I.IntervalYearMonth;case I.Type.DurationNanosecond:return new I.DurationNanosecond;case I.Type.DurationMicrosecond:return new I.DurationMicrosecond;case I.Type.DurationMillisecond:return new I.DurationMillisecond;case I.Type.DurationSecond:return new I.DurationSecond;default:throw Error("Unrecognized type id in schema: "+T)}}function p9(R){if(R instanceof I.Field)return R;if(typeof R!=="object"||R===null)throw Error("Expected a Field but object was null/undefined");if(!("type"in R)||!("name"in R)||!("nullable"in R))throw Error("The field passed in is missing a `type`/`name`/`nullable` property");let T;try{T=ZB(R.type)}catch(B){throw Error(`Unable to sanitize type for field: ${R.name} due to error: ${B}`,{cause:B})}let A=R.name;if(typeof A!=="string")throw Error("The field passed in had a non-string `name` property");let h=R.nullable;if(typeof h!=="boolean")throw Error("The field passed in had a non-boolean `nullable` property");let C;if("metadata"in R)C=pH(R.metadata);return new I.Field(A,T,h,C)}function rH(R){if(R instanceof I.Schema)return R;if(typeof R!=="object"||R===null)throw Error("Expected a Schema but object was null/undefined");if(!("fields"in R))throw Error("The schema passed in does not appear to be a schema (no 'fields' property)");let T;if("metadata"in R)T=pH(R.metadata);if(!Array.isArray(R.fields))throw Error("The schema passed in had a 'fields' property but it was not an array");let A=R.fields.map((h)=>p9(h));return new I.Schema(A,T)}function Q1(R){if(R instanceof I.Table)return R;if(typeof R!=="object"||R===null)throw Error("Expected a Table but object was null/undefined");if(!("schema"in R))throw Error("The table passed in does not appear to be a table (no 'schema' property)");if(!("batches"in R))throw Error("The table passed in does not appear to be a table (no 'columns' property)");let T=rH(R.schema),A=R.batches.map(f1);return new I.Table(T,A)}function f1(R){if(R instanceof I.RecordBatch)return R;if(typeof R!=="object"||R===null)throw Error("Expected a RecordBatch but object was null/undefined");if(!("schema"in R))throw Error("The record batch passed in does not appear to be a record batch (no 'schema' property)");if(!("data"in R))throw Error("The record batch passed in does not appear to be a record batch (no 'data' property)");let T=rH(R.schema),A=z1(R.data);return new I.RecordBatch(T,A)}function z1(R){if(R instanceof hh.Data)return R;return new hh.Data(R.type,R.offset,R.length,R.nullCount,{[hh.BufferType.OFFSET]:R.valueOffsets,[hh.BufferType.DATA]:R.values,[hh.BufferType.VALIDITY]:R.nullBitmap,[hh.BufferType.TYPE]:R.typeIds})}var M1={null:()=>new I.Null,binary:()=>new I.Binary,utf8:()=>new I.Utf8,bool:()=>new I.Bool,int8:()=>new I.Int8,int16:()=>new I.Int16,int32:()=>new I.Int32,int64:()=>new I.Int64,uint8:()=>new I.Uint8,uint16:()=>new I.Uint16,uint32:()=>new I.Uint32,uint64:()=>new I.Uint64,float16:()=>new I.Float16,float32:()=>new I.Float32,float64:()=>new I.Float64,datemillisecond:()=>new I.DateMillisecond,dateday:()=>new I.DateDay,timenanosecond:()=>new I.TimeNanosecond,timemicrosecond:()=>new I.TimeMicrosecond,timemillisecond:()=>new I.TimeMillisecond,timesecond:()=>new I.TimeSecond,intervaldaytime:()=>new I.IntervalDayTime,intervalyearmonth:()=>new I.IntervalYearMonth,durationnanosecond:()=>new I.DurationNanosecond,durationmicrosecond:()=>new I.DurationMicrosecond,durationmillisecond:()=>new I.DurationMillisecond,durationsecond:()=>new I.DurationSecond};function wk(R){let T=R.toLowerCase(),A=M1[T];if(!A)throw Error("Unrecognized type name in schema: "+R);return A()}});var kT=a((u)=>{var IE=u&&u.__createBinding||(Object.create?function(R,T,A,h){if(h===void 0)h=A;var C=Object.getOwnPropertyDescriptor(T,A);if(!C||("get"in C?!T.__esModule:C.writable||C.configurable))C={enumerable:!0,get:function(){return T[A]}};Object.defineProperty(R,h,C)}:function(R,T,A,h){if(h===void 0)h=A;R[h]=T[A]}),kE=u&&u.__exportStar||function(R,T){for(var A in R)if(A!=="default"&&!Object.prototype.hasOwnProperty.call(T,A))IE(T,R,A)};Object.defineProperty(u,"__esModule",{value:!0});u.MakeArrowTableOptions=u.VectorColumnOptions=void 0;u.isMultiVector=yE;u.isIntoVector=fk;u.isArrowTable=zk;u.isNull=gE;u.isInt=sE;u.isFloat=PE;u.isBinary=tE;u.isLargeBinary=KE;u.isUtf8=bE;u.isLargeUtf8=nE;u.isBool=EE;u.isDecimal=$E;u.isDate=pE;u.isTime=rE;u.isTimestamp=XE;u.isInterval=GE;u.isDuration=xE;u.isList=FE;u.isStruct=eE;u.isUnion=lE;u.isFixedSizeBinary=dE;u.isFixedSizeList=eH;u.makeArrowTable=jH;u.makeEmptyTable=ZE;u.convertToTable=fB;u.newVectorType=xH;u.fromRecordsToBuffer=QE;u.fromRecordsToStreamBuffer=fE;u.fromTableToBuffer=UB;u.fromDataToBuffer=zE;u.fromBufferToRecordBatch=ME;u.fromRecordBatchToBuffer=vE;u.fromTableToStreamBuffer=VE;u.createEmptyTable=YE;u.ensureNestedFieldsExist=mk;u.dataTypeToJson=QB;var L=uB(),Qk=qA(),_T=Ch();function SE(R){let T=R.toLowerCase();return T.includes("vector")||T.includes("embedding")}kE(uB(),u);function yE(R){return Array.isArray(R)&&fk(R[0])}function fk(R){return R instanceof Float32Array||R instanceof Float64Array||Array.isArray(R)&&!Array.isArray(R[0])}function zk(R){if(R instanceof L.Table)return!0;return"schema"in R&&"batches"in R}function gE(R){return R instanceof L.Null||L.DataType.isNull(R)}function sE(R){return R instanceof L.Int||L.DataType.isInt(R)}function PE(R){return R instanceof L.Float||L.DataType.isFloat(R)}function tE(R){return R instanceof L.Binary||L.DataType.isBinary(R)}function KE(R){return R instanceof L.LargeBinary||L.DataType.isLargeBinary(R)}function bE(R){return R instanceof L.Utf8||L.DataType.isUtf8(R)}function nE(R){return R instanceof L.Utf8||L.DataType.isLargeUtf8(R)}function EE(R){return R instanceof L.Utf8||L.DataType.isBool(R)}function $E(R){return R instanceof L.Utf8||L.DataType.isDecimal(R)}function pE(R){return R instanceof L.Utf8||L.DataType.isDate(R)}function rE(R){return R instanceof L.Utf8||L.DataType.isTime(R)}function XE(R){return R instanceof L.Utf8||L.DataType.isTimestamp(R)}function GE(R){return R instanceof L.Utf8||L.DataType.isInterval(R)}function xE(R){return R instanceof L.Utf8||L.DataType.isDuration(R)}function FE(R){return R instanceof L.List||L.DataType.isList(R)}function eE(R){return R instanceof L.Struct||L.DataType.isStruct(R)}function lE(R){return R instanceof L.Struct||L.DataType.isUnion(R)}function dE(R){return R instanceof L.FixedSizeBinary||L.DataType.isFixedSizeBinary(R)}function eH(R){return R instanceof L.FixedSizeList||L.DataType.isFixedSizeList(R)}class lH{type=new L.Float32;constructor(R){Object.assign(this,R)}}u.VectorColumnOptions=lH;function wB(R,T){if(L.DataType.isFixedSizeList(T)&&L.DataType.isFloat(T.valueType)){let A=[...R,Array(T.listSize).fill(0)];return(0,L.vectorFromArray)(A,T).slice(0,R.length)}else if(T===void 0)return(0,L.vectorFromArray)(R);else return(0,L.vectorFromArray)(R,T)}class dH{schema;vectorColumns={vector:new lH};embeddings;embeddingFunction;dictionaryEncodeStrings=!1;constructor(R){Object.assign(this,R)}}u.MakeArrowTableOptions=dH;function jH(R,T,A){let h=new dH(T!==void 0?T:{}),C=void 0;if(h.schema!==void 0&&h.schema!==null)C=(0,_T.sanitizeSchema)(h.schema),C=R$(C,R,T?.embeddingFunction);let B=C?.metadata||new Map;if(A!==void 0)B=new Map([...B,...A]);if(R.length===0&&(T?.schema===void 0||T?.schema===null))throw Error("At least one record or a schema needs to be provided");else if(R.length===0)if(C===void 0)throw Error("A schema must be provided if data is empty");else return C=new L.Schema(C.fields,B),new L.Table(C);let D=jE(R,C,h);D=new L.Schema(D.fields,B);let _={};for(let O of D.fields)_[O.name]=Vk(R,O);return new L.Table(D,_)}function jE(R,T,A){let h=new aA;for(let[C,B]of R.entries())for(let[D,_]of Mk(B))if(!h.has(D))if(T!==void 0){let O=uE(T,D);if(O===void 0)throw Error(`Found field not in schema: ${D.join(".")} at row ${C}`);else h.set(D,O.type)}else{let O=GH(_,D,A);if(O===void 0)throw Error(`Failed to infer data type for field ${D.join(".")} at row ${C}.                              Consider providing an explicit schema.`);h.set(D,O)}else if(T===void 0){let O=h.get(D),H=GH(_,D,A);if(O!==H)Error(`Failed to infer schema for data. Previously inferred type                      ${O} but found ${H} at row ${C}. Consider                      providing an explicit schema.`)}if(T===void 0){let C=function(D){let _=[];for(let[O,H]of D.map.entries())if(H instanceof aA){let i=C(H);_.push(new L.Field(O,new L.Struct(i),!0))}else _.push(new L.Field(O,H,!0));return _},B=C(h);return new L.Schema(B)}else{let C=function(D,_){let O=[];for(let H of D)if(_.map.has(H.name)){let i=_.get([H.name]);if(i instanceof aA){let J=H.type,P=C(J.children,i);O.push(new L.Field(H.name,new L.Struct(P),H.nullable))}else O.push(new L.Field(H.name,i,H.nullable))}return O},B=C(T.fields,h);return new L.Schema(B)}}function*Mk(R,T=[]){for(let[A,h]of Object.entries(R))if(vk(h))yield*Mk(h,[...T,A]);else if(h!==void 0)yield[[...T,A],h]}function vk(R){return typeof R==="object"&&R!==null&&!Array.isArray(R)&&!(R instanceof RegExp)&&!(R instanceof Date)&&!(R instanceof Set)&&!(R instanceof Map)&&!(R instanceof Buffer)}function uE(R,T){let A=R;for(let h of T)if(A instanceof L.Schema){let C=A.fields.find((B)=>B.name===h);if(C===void 0)return;A=C}else if(A instanceof L.Field&&L.DataType.isStruct(A.type)){let B=A.type.children.find((D)=>D.name===h);if(B===void 0)return;A=B}else return;if(A instanceof L.Field)return A;else return}function GH(R,T,A){if(typeof R==="bigint")return new L.Int64;else if(typeof R==="number")return new L.Float64;else if(typeof R==="string")if(A.dictionaryEncodeStrings)return new L.Dictionary(new L.Utf8,new L.Int32);else return new L.Utf8;else if(typeof R==="boolean")return new L.Bool;else if(R instanceof Buffer)return new L.Binary;else if(Array.isArray(R)){if(R.length===0)return;if(T.length===1&&Object.hasOwn(A.vectorColumns,T[0])){let C=(0,_T.sanitizeType)(A.vectorColumns[T[0]].type);return new L.FixedSizeList(R.length,new L.Field("item",C,!0))}let h=GH(R[0],T,A);if(h===void 0)return;if(SE(T[T.length-1]))if(R instanceof Uint8Array){let C=new L.Field("item",new L.Uint8,!0);return new L.FixedSizeList(R.length,C)}else{let C=new L.Field("item",new L.Float32,!0);return new L.FixedSizeList(R.length,C)}else{let C=new L.Field("item",h,!0);return new L.List(C)}}else return}class aA{map;constructor(R){if(this.map=new Map,R!==void 0)for(let[T,A]of R)this.set(T,A)}has(R){let T=this;for(let A of R){if(!(T instanceof aA)||!T.map.has(A))return!1;T=T.map.get(A)}return!0}get(R){let T=this;for(let A of R){if(!(T instanceof aA)||!T.map.has(A))return;T=T.map.get(A)}return T}set(R,T){let A=this;for(let h of R.slice(0,R.length-1)){if(!A.map.has(h))A.map.set(h,new aA);A=A.map.get(h)}A.map.set(R[R.length-1],T)}}function Vk(R,T,A=[]){if(T.type instanceof L.Struct){let h=T.type.children,C=[...A,T.name],B=h.map((_)=>{return Vk(R,_,C)}),D=(0,L.makeData)({type:T.type,children:B});return(0,L.makeVector)(D)}else{let h=[...A,T.name],C=R.map((B)=>{let D=B;for(let _ of h){if(D==null)return null;if(vk(D)&&(Object.hasOwn(D,_)||(_ in D)))D=D[_];else return null}return D});return LA(C,T.type,void 0,T.nullable)}}function ZE(R,T){return jH([],{schema:R},T)}function wE(R){if(R.length===0||R[0].length===0)throw Error("Cannot infer list vector from empty array or empty list");let T=R[0],A;try{A=LA(T).type}catch(C){throw Error(`Cannot infer list vector.  Cannot infer inner type: ${C}`)}let h=(0,L.makeBuilder)({type:new L.List(new L.Field("item",A,!0))});for(let C of R)h.append(C);return h.finish().toVector()}function LA(R,T,A,h){if(T!==void 0){if(h)R=R.map((B)=>B===void 0?null:B);if(L.DataType.isBool(T)){if(!R.some((D)=>D!==null&&D!==void 0)){let D=new Uint8Array(Math.ceil(R.length/8)),_=(0,L.makeData)({type:T,length:R.length,nullCount:R.length,nullBitmap:D});return(0,L.makeVector)(_)}}if(T instanceof L.Int)if(L.DataType.isInt(T)&&T.bitWidth===64)R=R.map((B)=>{if(B===null)return B;else if(typeof B==="bigint")return B;else if(typeof B==="number")return BigInt(B);else return B});else R=R.map((B)=>{if(typeof B=="bigint")return Number(B);else return B});return wB(R,T)}if(R.length===0)throw Error("makeVector requires at least one value or the type must be specfied");let C=R.find((B)=>B!==null&&B!==void 0);if(C===void 0)throw Error("makeVector cannot infer the type if all values are null or undefined");if(Array.isArray(C))return wE(R);else if(Buffer.isBuffer(C))return wB(R,new L.Binary);else if(!(A??!1)&&(typeof C==="string"||C instanceof String))return wB(R,new L.Utf8);else return wB(R)}async function UE(R,T){let h=await(0,Qk.getRegistry)().parseFunctions(T.metadata),C=Object.fromEntries(R.schema.fields.map((D)=>[D.name,R.getChild(D.name)]));for(let D of h.values()){let _=C[D.sourceColumn],O=D.vectorColumn??"vector";if(_===void 0)throw Error(`Cannot apply embedding function because the source column '${D.sourceColumn}' was not present in the data`);if(C[O]!==void 0){let t=C[O];if(t.nullCount!==t.length)continue}if(R.batches.length>1)throw Error("Internal error: `makeArrowTable` unexpectedly created a table with more than one batch");let H=_.toArray(),i=await D.function.computeSourceEmbeddings(H);if(i.length!==H.length)throw Error("Embedding function did not return an embedding for each input element");let J,P=T.fields.find((t)=>t.name===O).type;if(eH(P))J=(0,_T.sanitizeType)(P);else throw Error("Expected FixedSizeList as datatype for vector field, instead got: "+P);let w=LA(i,J);C[O]=w}for(let D of T.fields)if(!(D.name in C)){let _=Array(R.numRows).fill(null);C[D.name]=LA(_,D.type,void 0,D.nullable)}let B=new L.Table(C);return FH(B,T)}async function uH(R,T,A){if(A!==void 0&&A!==null)A=(0,_T.sanitizeSchema)(A);if(A?.metadata.has("embedding_functions"))return UE(R,A);else if(T==null||T===void 0)return R;let h=A?.metadata||new Map;if(!(T==null||T===void 0)){let J=(0,Qk.getRegistry)().getTableMetadata([T]);h=new Map([...h,...J])}let C=[...Array(R.numCols).keys()].map((i,J)=>{let P=R.schema.fields[J].name,w=R.getChildAt(J);return[P,w]}),B=Object.fromEntries(C),D=B[T.sourceColumn],_=T.vectorColumn??"vector",O=T.function.embeddingDataType()??new L.Float32;if(D===void 0)throw Error(`Cannot apply embedding function because the source column '${T.sourceColumn}' was not present in the data`);if(R.numRows===0){if(Object.prototype.hasOwnProperty.call(B,_))return R;let i=T.function.ndims();if(i!==void 0){let J=xH(i,O);B[_]=LA([],J)}else if(A!=null){let J=A.fields.find((P)=>P.name===_);if(J!=null)B[_]=LA([],J.type,void 0,J.nullable);else throw Error(`Attempt to apply embeddings to an empty table failed because schema was missing embedding column '${_}'`)}else throw Error("Attempt to apply embeddings to an empty table when the embeddings function does not specify `embeddingDimension`")}else{if(Object.prototype.hasOwnProperty.call(B,_)){let w=B[_];if(w.nullCount!==w.length){let t=new L.Table(B);if(A!=null)t=FH(t,A);return new L.Table(new L.Schema(t.schema.fields,h),t.batches)}}if(R.batches.length>1)throw Error("Internal error: `makeArrowTable` unexpectedly created a table with more than one batch");let i=D.toArray(),J=await T.function.computeSourceEmbeddings(i);if(J.length!==i.length)throw Error("Embedding function did not return an embedding for each input element");let P=xH(J[0].length,O);B[_]=LA(J,P)}let H=new L.Table(B);if(A!=null){if(A.fields.find((i)=>i.name===_)===void 0)throw Error(`When using embedding functions and specifying a schema the schema should include the embedding column but the column ${_} was missing`);H=FH(H,A)}return H=new L.Table(new L.Schema(H.schema.fields,h),H.batches),H}async function fB(R,T,A){let h=R;if(A?.schema&&A.schema.metadata?.has("embedding_functions"))h=mk(R,A.schema);let C=jH(h,A);return await uH(C,T,A?.schema)}function xH(R,T){let A=new L.Field("item",(0,_T.sanitizeType)(T),!0);return new L.FixedSizeList(R,A)}async function QE(R,T,A){if(A!==void 0&&A!==null)A=(0,_T.sanitizeSchema)(A);let h=await fB(R,T,{schema:A}),C=L.RecordBatchFileWriter.writeAll(h);return Buffer.from(await C.toUint8Array())}async function fE(R,T,A){if(A!==void 0&&A!==null)A=(0,_T.sanitizeSchema)(A);let h=await fB(R,T,{schema:A}),C=L.RecordBatchStreamWriter.writeAll(h);return Buffer.from(await C.toUint8Array())}async function UB(R,T,A){if(A!==void 0&&A!==null)A=(0,_T.sanitizeSchema)(A);let h=await uH(R,T,A),C=L.RecordBatchFileWriter.writeAll(h);return Buffer.from(await C.toUint8Array())}async function zE(R,T,A){if(A!==void 0&&A!==null)A=(0,_T.sanitizeSchema)(A);if(zk(R)){let h=(0,_T.sanitizeTable)(R);if(A&&A.metadata?.has("embedding_functions")){let C=T$(h,A);return UB(C,T,A)}else return UB(h,T,A)}else{let h=await fB(R,T,{schema:A});return UB(h)}}async function ME(R){return(await L.RecordBatchFileReader.readAll(Buffer.from(R)).next().value)?.next().value||null}async function vE(R){let T=new L.RecordBatchFileWriter().writeAll([R]);return Buffer.from(await T.toUint8Array())}async function VE(R,T,A){let h=await uH(R,T,A),C=L.RecordBatchStreamWriter.writeAll(h);return Buffer.from(await C.toUint8Array())}function mE(R,T){let A=[];for(let C of T.fields){let B=R.schema.fields?.findIndex((D)=>D.name===C.name);if(B<0)throw Error(`The column ${C.name} was not found in the Arrow Table`);A.push(R.data.children[B])}let h=(0,L.makeData)({type:new L.Struct(T.fields),length:R.numRows,nullCount:R.nullCount,children:A});return new L.RecordBatch(T,h)}function FH(R,T){let A=R.batches.map((h)=>mE(h,T));return new L.Table(T,A)}function YE(R){return new L.Table((0,_T.sanitizeSchema)(R))}function R$(R,T,A){let h=[],C=[];for(let B of R.fields)if(eH(B.type))if(B=(0,_T.sanitizeField)(B),T.length!==0&&T?.[0]?.[B.name]===void 0){let D=!1;if(R.metadata.has("embedding_functions")){if(JSON.parse(R.metadata.get("embedding_functions")).find((O)=>O.vectorColumn===B.name))D=!0}if(A&&A.vectorColumn===B.name)D=!0;if(B.nullable&&!D)h.push(B);else if(D)h.push(B);else C.push(B)}else h.push(B);else h.push(B);if(C.length>0&&A===void 0)throw Error(`Table has embeddings: "${C.map((B)=>B.name).join(",")}", but no embedding function was provided`);return new L.Schema(h,R.metadata)}function mk(R,T){return R.map((A)=>{let h={};for(let C of T.fields)if(C.name in A)if(C.type.constructor.name==="Struct"&&A[C.name]!==null&&A[C.name]!==void 0){let B=A[C.name];h[C.name]=Yk(B,C.type)}else h[C.name]=A[C.name];else h[C.name]=null;return h})}function Yk(R,T){let A={};for(let h of T.children)if(h.name in R)if(h.type.constructor.name==="Struct"&&R[h.name]!==null&&R[h.name]!==void 0)A[h.name]=Yk(R[h.name],h.type);else A[h.name]=R[h.name];else A[h.name]=null;return A}function QB(R){switch(R.typeId){case L.Type.Null:return{type:"null"};case L.Type.Bool:return{type:"bool"};case L.Type.Int8:return{type:"int8"};case L.Type.Int16:return{type:"int16"};case L.Type.Int32:return{type:"int32"};case L.Type.Int64:return{type:"int64"};case L.Type.Uint8:return{type:"uint8"};case L.Type.Uint16:return{type:"uint16"};case L.Type.Uint32:return{type:"uint32"};case L.Type.Uint64:return{type:"uint64"};case L.Type.Int:{let T=R.bitWidth;return{type:`${R.isSigned?"":"u"}int${T}`}}case L.Type.Float:{switch(R.precision){case L.Precision.HALF:return{type:"halffloat"};case L.Precision.SINGLE:return{type:"float"};case L.Precision.DOUBLE:return{type:"double"}}throw Error("Unsupported float precision")}case L.Type.Float16:return{type:"halffloat"};case L.Type.Float32:return{type:"float"};case L.Type.Float64:return{type:"double"};case L.Type.Utf8:return{type:"string"};case L.Type.Binary:return{type:"binary"};case L.Type.LargeUtf8:return{type:"large_string"};case L.Type.LargeBinary:return{type:"large_binary"};case L.Type.List:return{type:"list",fields:[XH(R.children[0])]};case L.Type.FixedSizeList:{let T=R;return{type:"fixed_size_list",fields:[XH(T.children[0])],length:T.listSize}}case L.Type.Struct:return{type:"struct",fields:R.children.map(XH)};case L.Type.Date:return{type:R.unit===L.DateUnit.DAY?"date32:day":"date64:ms"};case L.Type.Timestamp:{let T=R,A=T.timezone||"-";return{type:`timestamp:${T.unit}:${A}`}}case L.Type.Decimal:{let T=R;return{type:`decimal:${T.bitWidth}:${T.precision}:${T.scale}`}}case L.Type.Duration:return{type:`duration:${R.unit}`};case L.Type.FixedSizeBinary:return{type:`fixed_size_binary:${R.byteWidth}`};case L.Type.Dictionary:{let T=R,A=QB(T.indices);return{type:`dict:${QB(T.valueType).type}:${A.type}:false`}}}throw Error("Unsupported data type")}function XH(R){return{name:R.name,type:QB(R.type),nullable:R.nullable,metadata:R.metadata}}function T$(R,T){let A=new Map;for(let C of R.schema.fields)A.set(C.name,R.getChild(C.name));let h={};for(let C of T.fields)if(A.has(C.name))h[C.name]=A.get(C.name);else h[C.name]=R6(C,R.numRows);return new L.Table(T,h)}function R6(R,T){if(R.type.constructor.name==="Struct"){let A=R.type,h=A.children.map((B)=>R6(B,T)),C=(0,L.makeData)({type:A,length:T,nullCount:0,children:h.map((B)=>B.data[0])});return(0,L.makeVector)(C)}else{let A=new Uint8Array(Math.ceil(T/8)),h=(0,L.makeData)({type:R.type,length:T,nullCount:T,nullBitmap:A});return(0,L.makeVector)(h)}}});var ZH=a((T6)=>{Object.defineProperty(T6,"__esModule",{value:!0});T6.MergeInsertBuilder=void 0;var A$=kT();class Bh{#R;#T;constructor(R,T){this.#R=R,this.#T=T}whenMatchedUpdateAll(R){return new Bh(this.#R.whenMatchedUpdateAll(R?.where),this.#T)}whenNotMatchedInsertAll(){return new Bh(this.#R.whenNotMatchedInsertAll(),this.#T)}whenNotMatchedBySourceDelete(R){return new Bh(this.#R.whenNotMatchedBySourceDelete(R?.where),this.#T)}useIndex(R){return new Bh(this.#R.useIndex(R),this.#T)}async execute(R,T){let A;if(this.#T instanceof Promise)A=await this.#T,this.#T=A;else A=this.#T;if(T?.timeoutMs!==void 0)this.#R.setTimeout(T.timeoutMs);let h=await(0,A$.fromDataToBuffer)(R,void 0,A);return await this.#R.execute(h)}}T6.MergeInsertBuilder=Bh});var h6=a((Cj,h$)=>{h$.exports=U("./lancedb.darwin-arm64-f27yjbpw.node")});var r9=a((k$,GR)=>{var __dirname="/Users/kyle/rules/node_modules/@lancedb/lancedb/dist",{existsSync:$R,readFileSync:C$}=U("fs"),{join:pR}=U("path"),{platform:C6,arch:ST}=process,z=null,V=!1,tR=null;function zB(){if(!process.report||typeof process.report.getReport!=="function")try{let R=U("child_process").execSync("which ldd").toString().trim();return C$(R,"utf8").includes("musl")}catch(R){return!0}else{let{glibcVersionRuntime:R}=process.report.getReport().header;return!R}}switch(C6){case"android":switch(ST){case"arm64":V=$R(pR(__dirname,"lancedb.android-arm64.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.android-arm64.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-android-arm64");})()}catch(R){tR=R}break;case"arm":V=$R(pR(__dirname,"lancedb.android-arm-eabi.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.android-arm-eabi.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-android-arm-eabi");})()}catch(R){tR=R}break;default:throw Error(`Unsupported architecture on Android ${ST}`)}break;case"win32":switch(ST){case"x64":V=$R(pR(__dirname,"lancedb.win32-x64-msvc.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.win32-x64-msvc.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-win32-x64-msvc");})()}catch(R){tR=R}break;case"ia32":V=$R(pR(__dirname,"lancedb.win32-ia32-msvc.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.win32-ia32-msvc.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-win32-ia32-msvc");})()}catch(R){tR=R}break;case"arm64":V=$R(pR(__dirname,"lancedb.win32-arm64-msvc.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.win32-arm64-msvc.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-win32-arm64-msvc");})()}catch(R){tR=R}break;default:throw Error(`Unsupported architecture on Windows: ${ST}`)}break;case"darwin":V=$R(pR(__dirname,"lancedb.darwin-universal.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.darwin-universal.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-darwin-universal");})();break}catch{}switch(ST){case"x64":V=$R(pR(__dirname,"lancedb.darwin-x64.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.darwin-x64.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-darwin-x64");})()}catch(R){tR=R}break;case"arm64":V=$R(pR(__dirname,"lancedb.darwin-arm64.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.darwin-arm64.node");})();else z=h6()}catch(R){tR=R}break;default:throw Error(`Unsupported architecture on macOS: ${ST}`)}break;case"freebsd":if(ST!=="x64")throw Error(`Unsupported architecture on FreeBSD: ${ST}`);V=$R(pR(__dirname,"lancedb.freebsd-x64.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.freebsd-x64.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-freebsd-x64");})()}catch(R){tR=R}break;case"linux":switch(ST){case"x64":if(zB()){V=$R(pR(__dirname,"lancedb.linux-x64-musl.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.linux-x64-musl.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-linux-x64-musl");})()}catch(R){tR=R}}else{V=$R(pR(__dirname,"lancedb.linux-x64-gnu.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.linux-x64-gnu.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-linux-x64-gnu");})()}catch(R){tR=R}}break;case"arm64":if(zB()){V=$R(pR(__dirname,"lancedb.linux-arm64-musl.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.linux-arm64-musl.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-linux-arm64-musl");})()}catch(R){tR=R}}else{V=$R(pR(__dirname,"lancedb.linux-arm64-gnu.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.linux-arm64-gnu.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-linux-arm64-gnu");})()}catch(R){tR=R}}break;case"arm":if(zB()){V=$R(pR(__dirname,"lancedb.linux-arm-musleabihf.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.linux-arm-musleabihf.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-linux-arm-musleabihf");})()}catch(R){tR=R}}else{V=$R(pR(__dirname,"lancedb.linux-arm-gnueabihf.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.linux-arm-gnueabihf.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-linux-arm-gnueabihf");})()}catch(R){tR=R}}break;case"riscv64":if(zB()){V=$R(pR(__dirname,"lancedb.linux-riscv64-musl.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.linux-riscv64-musl.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-linux-riscv64-musl");})()}catch(R){tR=R}}else{V=$R(pR(__dirname,"lancedb.linux-riscv64-gnu.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.linux-riscv64-gnu.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-linux-riscv64-gnu");})()}catch(R){tR=R}}break;case"s390x":V=$R(pR(__dirname,"lancedb.linux-s390x-gnu.node"));try{if(V)z=(()=>{throw new Error("Cannot require module "+"./lancedb.linux-s390x-gnu.node");})();else z=(()=>{throw new Error("Cannot require module "+"@lancedb/lancedb-linux-s390x-gnu");})()}catch(R){tR=R}break;default:throw Error(`Unsupported architecture on Linux: ${ST}`)}break;default:throw Error(`Unsupported OS: ${C6}, architecture: ${ST}`)}if(!z){if(tR)throw tR;throw Error("Failed to load native binding")}var{Connection:B$,JsHeaderProvider:D$,Index:_$,RecordBatchIterator:O$,NativeMergeInsertBuilder:H$,Query:i$,VectorQuery:q$,TakeQuery:a$,JsFullTextQuery:L$,Reranker:W$,RrfReranker:N$,Session:c$,Table:o$,TagContents:J$,Tags:I$}=z;k$.Connection=B$;k$.JsHeaderProvider=D$;k$.Index=_$;k$.RecordBatchIterator=O$;k$.NativeMergeInsertBuilder=H$;k$.Query=i$;k$.VectorQuery=q$;k$.TakeQuery=a$;k$.JsFullTextQuery=L$;k$.Reranker=W$;k$.RrfReranker=N$;k$.Session=c$;k$.Table=o$;k$.TagContents=J$;k$.Tags=I$});var wH=a((W6)=>{Object.defineProperty(W6,"__esModule",{value:!0});W6.BooleanQuery=W6.MultiMatchQuery=W6.BoostQuery=W6.PhraseQuery=W6.MatchQuery=W6.Occur=W6.Operator=W6.FullTextQueryType=W6.Query=W6.TakeQuery=W6.VectorQuery=W6.StandardQueryBase=W6.QueryBase=W6.RecordBatchIterator=void 0;W6.instanceOfFullTextQuery=x$;var Yh=kT(),_h=r9();class RC{promisedInner;inner;constructor(R){this.promisedInner=R}async next(){if(this.inner===void 0)this.inner=await this.promisedInner;if(this.inner===void 0)throw Error("Invalid iterator state state");let R=await this.inner.next();if(R==null)return Promise.resolve({done:!0,value:null});let T=(0,Yh.tableFromIPC)(R);if(T.batches.length!=1)throw Error("Expected only one batch");return Promise.resolve({done:!1,value:T.batches[0]})}}W6.RecordBatchIterator=RC;class D6{inner;options;constructor(R,T){this.inner=R,this.options=T}[Symbol.asyncIterator](){return new RC(this.inner.execute(this.options?.maxBatchLength,this.options?.timeoutMs))}}class vB{inner;constructor(R){this.inner=R}doCall(R){if(this.inner instanceof Promise)this.inner=this.inner.then((T)=>{return R(T),T});else R(this.inner)}select(R){let T=(h)=>{this.doCall((C)=>{C.selectColumns(h)})},A=(h)=>{this.doCall((C)=>{C.select(h)})};if(typeof R==="string")T([R]);else if(Array.isArray(R))T(R);else if(R instanceof Map)A(Array.from(R.entries()));else A(Object.entries(R));return this}withRowId(){return this.doCall((R)=>R.withRowId()),this}nativeExecute(R){if(this.inner instanceof Promise)return this.inner.then((T)=>T.execute(R?.maxBatchLength,R?.timeoutMs));else return this.inner.execute(R?.maxBatchLength,R?.timeoutMs)}execute(R){return new RC(this.nativeExecute(R))}[Symbol.asyncIterator](){let R=this.nativeExecute();return new RC(R)}async toArrow(R){let T=[],A;if(this.inner instanceof Promise)A=await this.inner;else A=this.inner;for await(let h of new D6(A,R))T.push(h);return new Yh.Table(T)}async toArray(R){return(await this.toArrow(R)).toArray()}async explainPlan(R=!1){if(this.inner instanceof Promise)return this.inner.then((T)=>T.explainPlan(R));else return this.inner.explainPlan(R)}async analyzePlan(){if(this.inner instanceof Promise)return this.inner.then((R)=>R.analyzePlan());else return this.inner.analyzePlan()}}W6.QueryBase=vB;class VB extends vB{constructor(R){super(R)}where(R){return this.doCall((T)=>T.onlyIf(R)),this}filter(R){return this.where(R)}fullTextSearch(R,T){let A=null;if(T){if(typeof T.columns==="string")A=[T.columns];else if(Array.isArray(T.columns))A=T.columns}return this.doCall((h)=>{if(typeof R==="string")h.fullTextSearch({query:R,columns:A});else h.fullTextSearch({query:R.inner})}),this}limit(R){return this.doCall((T)=>T.limit(R)),this}offset(R){return this.doCall((T)=>T.offset(R)),this}fastSearch(){return this.doCall((R)=>R.fastSearch()),this}}W6.StandardQueryBase=VB;class Dh extends VB{constructor(R){super(R)}nprobes(R){return super.doCall((T)=>T.nprobes(R)),this}minimumNprobes(R){return super.doCall((T)=>T.minimumNprobes(R)),this}maximumNprobes(R){return super.doCall((T)=>T.maximumNprobes(R)),this}distanceRange(R,T){return super.doCall((A)=>A.distanceRange(R,T)),this}ef(R){return super.doCall((T)=>T.ef(R)),this}column(R){return super.doCall((T)=>T.column(R)),this}distanceType(R){return super.doCall((T)=>T.distanceType(R)),this}refineFactor(R){return super.doCall((T)=>T.refineFactor(R)),this}postfilter(){return super.doCall((R)=>R.postfilter()),this}bypassVectorIndex(){return super.doCall((R)=>R.bypassVectorIndex()),this}addQueryVector(R){if(R instanceof Promise){let T=(async()=>{try{let A=await R,h=Float32Array.from(A);return this.addQueryVector(h).inner}catch(A){return Promise.reject(A)}})();return new Dh(T)}else return super.doCall((T)=>{T.addQueryVector(Float32Array.from(R))}),this}rerank(R){return super.doCall((T)=>T.rerank({rerankHybrid:async(A,h)=>{let C=await(0,Yh.fromBufferToRecordBatch)(h.vecResults),B=await(0,Yh.fromBufferToRecordBatch)(h.ftsResults),D=await R.rerankHybrid(h.query,C,B);return(0,Yh.fromRecordBatchToBuffer)(D)}})),this}}W6.VectorQuery=Dh;class _6 extends vB{constructor(R){super(R)}}W6.TakeQuery=_6;class O6 extends VB{constructor(R){super(R.query())}nearestTo(R){if(this.inner instanceof Promise){let T=this.inner.then(async(A)=>{if(R instanceof Promise){let h=await R.then((C)=>Float32Array.from(C));return A.nearestTo(h)}else return A.nearestTo(Float32Array.from(R))});return new Dh(T)}if(R instanceof Promise){let T=(async()=>{try{let A=await R,h=Float32Array.from(A);return this.nearestTo(h).inner}catch(A){return Promise.reject(A)}})();return new Dh(T)}else{let T=this.inner.nearestTo(Float32Array.from(R));return new Dh(T)}}nearestToText(R,T){return this.doCall((A)=>{if(typeof R==="string")A.fullTextSearch({query:R,columns:T});else A.fullTextSearch({query:R.inner})}),this}}W6.Query=O6;var WA;(function(R){R.Match="match",R.MatchPhrase="match_phrase",R.Boost="boost",R.MultiMatch="multi_match",R.Boolean="boolean"})(WA||(W6.FullTextQueryType=WA={}));var MB;(function(R){R.And="AND",R.Or="OR"})(MB||(W6.Operator=MB={}));var B6;(function(R){R.Should="SHOULD",R.Must="MUST",R.MustNot="MUST_NOT"})(B6||(W6.Occur=B6={}));function x$(R){return R!=null&&R.inner instanceof _h.JsFullTextQuery}class H6{inner;constructor(R,T,A){let h=A?.fuzziness;if(h===void 0)h=0;this.inner=_h.JsFullTextQuery.matchQuery(R,T,A?.boost??1,h,A?.maxExpansions??50,A?.operator??MB.Or,A?.prefixLength??0)}queryType(){return WA.Match}}W6.MatchQuery=H6;class i6{inner;constructor(R,T,A){this.inner=_h.JsFullTextQuery.phraseQuery(R,T,A?.slop??0)}queryType(){return WA.MatchPhrase}}W6.PhraseQuery=i6;class q6{inner;constructor(R,T,A){this.inner=_h.JsFullTextQuery.boostQuery(R.inner,T.inner,A?.negativeBoost)}queryType(){return WA.Boost}}W6.BoostQuery=q6;class a6{inner;constructor(R,T,A){this.inner=_h.JsFullTextQuery.multiMatchQuery(R,T,A?.boosts,A?.operator??MB.Or)}queryType(){return WA.MultiMatch}}W6.MultiMatchQuery=a6;class L6{inner;constructor(R){this.inner=_h.JsFullTextQuery.booleanQuery(R.map(([T,A])=>[T,A.inner]))}queryType(){return WA.Boolean}}W6.BooleanQuery=L6});var UH=a((J6)=>{Object.defineProperty(J6,"__esModule",{value:!0});J6.TTLCache=void 0;J6.toSQL=c6;J6.packBits=V$;function c6(R){if(typeof R==="string")return`'${R.replace(/'/g,"''")}'`;else if(typeof R==="number")return R.toString();else if(typeof R==="boolean")return R?"TRUE":"FALSE";else if(R===null)return"NULL";else if(R instanceof Date)return`'${R.toISOString()}'`;else if(Array.isArray(R))return`[${R.map(c6).join(", ")}]`;else if(Buffer.isBuffer(R))return`X'${R.toString("hex")}'`;else if(R instanceof ArrayBuffer)return`X'${Buffer.from(R).toString("hex")}'`;else throw Error(`Unsupported value type: ${typeof R} value: (${R})`)}function V$(R){let T=Array(R.length>>3).fill(0);for(let A=0;A<R.length;A++){let h=A>>3,C=A&7;T[h]|=R[A]<<C}return T}class o6{ttl;cache;constructor(R){this.ttl=R,this.cache=new Map}get(R){let T=this.cache.get(R);if(T===void 0)return;if(T.expires<Date.now()){this.cache.delete(R);return}return T.value}set(R,T){this.cache.set(R,{value:T,expires:Date.now()+this.ttl})}delete(R){this.cache.delete(R)}}J6.TTLCache=o6});var fH=a((g6)=>{Object.defineProperty(g6,"__esModule",{value:!0});g6.LocalTable=g6.Table=void 0;var mB=kT(),k6=qA(),Rp=ZH(),TC=wH(),Tp=Ch(),S6=UH();class QH{[Symbol.for("nodejs.util.inspect.custom")](){return this.display()}}g6.Table=QH;class y6 extends QH{inner;constructor(R){super();this.inner=R}get name(){return this.inner.name}isOpen(){return this.inner.isOpen()}close(){this.inner.close()}display(){return this.inner.display()}async getEmbeddingFunctions(){let R=await this.schema();return(0,k6.getRegistry)().parseFunctions(R.metadata)}async schema(){let R=await this.inner.schema();return(0,mB.tableFromIPC)(R).schema}async add(R,T){let A=T?.mode??"append",h=await this.schema(),C=await(0,mB.fromDataToBuffer)(R,void 0,h);return await this.inner.add(C,A)}async update(R,T){let A="values"in R&&typeof R.values!=="string",h="valuesSql"in R&&typeof R.valuesSql!=="string",C=(_)=>{return _ instanceof Map},B,D;switch(!0){case C(R):D=Array.from(R.entries()),B=T?.where;break;case(A&&C(R.values)):D=Array.from(R.values.entries()).map(([_,O])=>[_,(0,S6.toSQL)(O)]),B=R.where;break;case(A&&!C(R.values)):D=Object.entries(R.values).map(([_,O])=>[_,(0,S6.toSQL)(O)]),B=R.where;break;case(h&&C(R.valuesSql)):D=Array.from(R.valuesSql.entries()),B=R.where;break;case(h&&!C(R.valuesSql)):D=Object.entries(R.valuesSql).map(([_,O])=>[_,O]),B=R.where;break;default:D=Object.entries(R),B=T?.where}return await this.inner.update(B,D)}async countRows(R){return await this.inner.countRows(R)}async delete(R){return await this.inner.delete(R)}async createIndex(R,T){let A=T?.config?.inner;await this.inner.createIndex(A,R,T?.replace,T?.waitTimeoutSeconds,T?.name,T?.train)}async dropIndex(R){await this.inner.dropIndex(R)}async prewarmIndex(R){await this.inner.prewarmIndex(R)}async waitForIndex(R,T){await this.inner.waitForIndex(R,T)}takeOffsets(R){return new TC.TakeQuery(this.inner.takeOffsets(R))}takeRowIds(R){return new TC.TakeQuery(this.inner.takeRowIds(R))}query(){return new TC.Query(this.inner)}search(R,T="auto",A){if(typeof R!=="string"&&!(0,TC.instanceOfFullTextQuery)(R)){if(T==="fts")throw Error("Cannot perform full text search on a vector query");return this.vectorSearch(R)}if(T==="fts")return this.query().fullTextSearch(R,{columns:A});if(T==="auto"&&((0,k6.getRegistry)().length()===0||(0,TC.instanceOfFullTextQuery)(R)))return this.query().fullTextSearch(R,{columns:A});let h=this.getEmbeddingFunctions().then(async(C)=>{let B=C.values().next().value;if(!B)return Promise.reject(Error("No embedding functions are defined in the table"));return await B.function.computeQueryEmbeddings(R)});return this.query().nearestTo(h)}vectorSearch(R){if((0,mB.isMultiVector)(R)){let T=this.query().nearestTo(R[0]);for(let A of R.slice(1))T.addQueryVector(A);return T}return this.query().nearestTo(R)}async addColumns(R){return await this.inner.addColumns(R)}async alterColumns(R){let T=R.map((A)=>{if(typeof A.dataType==="string")return{...A,dataType:JSON.stringify({type:A.dataType})};else if(A.dataType===void 0)return{...A,dataType:void 0};else{let h=(0,Tp.sanitizeType)(A.dataType);return{...A,dataType:JSON.stringify((0,mB.dataTypeToJson)(h))}}});return await this.inner.alterColumns(T)}async dropColumns(R){return await this.inner.dropColumns(R)}async version(){return await this.inner.version()}async checkout(R){if(typeof R==="string")return this.inner.checkoutTag(R);return this.inner.checkout(R)}async checkoutLatest(){await this.inner.checkoutLatest()}async listVersions(){return(await this.inner.listVersions()).map((R)=>({version:R.version,timestamp:new Date(R.timestamp/1000),metadata:R.metadata}))}async restore(){await this.inner.restore()}async tags(){return await this.inner.tags()}async optimize(R){let T;if(R?.cleanupOlderThan!==void 0&&R?.cleanupOlderThan!==null)T=new Date().getTime()-R.cleanupOlderThan.getTime();return await this.inner.optimize(T,R?.deleteUnverified)}async listIndices(){return await this.inner.listIndices()}async toArrow(){return await this.query().toArrow()}async indexStats(R){let T=await this.inner.indexStats(R);if(T===null)return;return T}async stats(){return await this.inner.stats()}mergeInsert(R){return R=Array.isArray(R)?R:[R],new Rp.MergeInsertBuilder(this.inner.mergeInsert(R),this.schema())}async usesV2ManifestPaths(){return await this.inner.usesV2ManifestPaths()}async migrateManifestPathsV2(){await this.inner.migrateManifestPathsV2()}}g6.LocalTable=y6});var mH=a((t6)=>{Object.defineProperty(t6,"__esModule",{value:!0});t6.LocalConnection=t6.Connection=void 0;t6.cleanseStorageOptions=vH;var zH=kT(),MH=kT(),hp=qA(),Cp=Ch(),YB=fH();class VH{[Symbol.for("nodejs.util.inspect.custom")](){return this.display()}}t6.Connection=VH;class P6 extends VH{inner;constructor(R){super();this.inner=R}isOpen(){return this.inner.isOpen()}close(){this.inner.close()}display(){return this.inner.display()}async tableNames(R,T){let A,h;if(Array.isArray(R))A=R,h=T;else A=void 0,h=R;return this.inner.tableNames(A??[],h?.startAfter,h?.limit)}async openTable(R,T,A){let h=await this.inner.openTable(R,T??[],vH(A?.storageOptions),A?.indexCacheSize);return new YB.LocalTable(h)}async cloneTable(R,T,A){let h=await this.inner.cloneTable(R,T,A?.targetNamespace??[],A?.sourceVersion??null,A?.sourceTag??null,A?.isShallow??!0);return new YB.LocalTable(h)}getStorageOptions(R){if(R?.dataStorageVersion!==void 0){if(R.storageOptions===void 0)R.storageOptions={};R.storageOptions.newTableDataStorageVersion=R.dataStorageVersion}if(R?.enableV2ManifestPaths!==void 0){if(R.storageOptions===void 0)R.storageOptions={};R.storageOptions.newTableEnableV2ManifestPaths=R.enableV2ManifestPaths?"true":"false"}return vH(R?.storageOptions)}async createTable(R,T,A,h){if(typeof R!=="string"&&"name"in R){let{name:O,data:H,...i}=R,J=T;return this._createTableImpl(O,H,J,i)}let C=R,B=T,D,_;if(Array.isArray(A))D=A,_=h;else D=void 0,_=A;return this._createTableImpl(C,B,D,_)}async _createTableImpl(R,T,A,h){if(T===void 0)throw Error("data is required");let{buf:C,mode:B}=await Dp(T,h),D=this.getStorageOptions(h),_=await this.inner.createTable(R,C,B,A??[],D);return new YB.LocalTable(_)}async createEmptyTable(R,T,A,h){let C,B;if(Array.isArray(A))C=A,B=h;else C=void 0,B=A;let D=B?.mode??"create",_=B?.existOk??!1;if(D==="create"&&_)D="exist_ok";let O=void 0;if(B?.embeddingFunction!==void 0){let w=B.embeddingFunction;O=(0,hp.getRegistry)().getTableMetadata([w])}let H=this.getStorageOptions(B),i=(0,MH.makeEmptyTable)(T,O),J=await(0,MH.fromTableToBuffer)(i),P=await this.inner.createEmptyTable(R,J,D,C??[],H);return new YB.LocalTable(P)}async dropTable(R,T){return this.inner.dropTable(R,T??[])}async dropAllTables(R){return this.inner.dropAllTables(R??[])}}t6.LocalConnection=P6;function vH(R){if(R===void 0)return;let T={};for(let[A,h]of Object.entries(R))if(h!==void 0){let C=Bp(A);T[C]=h}return T}function Bp(R){if(R.includes("_"))return R;if(R.toLocaleUpperCase()===R)return R;let T=R.replace(/[A-Z]/g,(A)=>`_${A.toLowerCase()}`);if(T.startsWith("_"))T=T.slice(1);return T}async function Dp(R,T,A=!1){let h=T?.mode??"create",C=T?.existOk??!1;if(h==="create"&&C)h="exist_ok";let B;if((0,zH.isArrowTable)(R))B=(0,Cp.sanitizeTable)(R);else B=(0,zH.makeArrowTable)(R,T);if(A)return{buf:await(0,zH.fromTableToStreamBuffer)(B,T?.embeddingFunction,T?.schema),mode:h};else return{buf:await(0,MH.fromTableToBuffer)(B,T?.embeddingFunction,T?.schema),mode:h}}});var E6=a((b6)=>{Object.defineProperty(b6,"__esModule",{value:!0});b6.Index=void 0;var X9=r9();class lT{inner;constructor(R){this.inner=R}static ivfPq(R){return new lT(X9.Index.ivfPq(R?.distanceType,R?.numPartitions,R?.numSubVectors,R?.maxIterations,R?.sampleRate))}static ivfFlat(R){return new lT(X9.Index.ivfFlat(R?.distanceType,R?.numPartitions,R?.maxIterations,R?.sampleRate))}static btree(){return new lT(X9.Index.btree())}static bitmap(){return new lT(X9.Index.bitmap())}static labelList(){return new lT(X9.Index.labelList())}static fts(R){return new lT(X9.Index.fts(R?.withPosition,R?.baseTokenizer,R?.language,R?.maxTokenLength,R?.lowercase,R?.stem,R?.removeStopWords,R?.asciiFolding,R?.ngramMinLength,R?.ngramMaxLength,R?.prefixOnly))}static hnswPq(R){return new lT(X9.Index.hnswPq(R?.distanceType,R?.numPartitions,R?.numSubVectors,R?.maxIterations,R?.sampleRate,R?.m,R?.efConstruction))}static hnswSq(R){return new lT(X9.Index.hnswSq(R?.distanceType,R?.numPartitions,R?.maxIterations,R?.sampleRate,R?.m,R?.efConstruction))}}b6.Index=lT});var G6=a((r6)=>{Object.defineProperty(r6,"__esModule",{value:!0});r6.OAuthHeaderProvider=r6.StaticHeaderProvider=r6.HeaderProvider=void 0;class RD{}r6.HeaderProvider=RD;class $6 extends RD{_headers;constructor(R){super();this._headers={...R}}getHeaders(){return{...this._headers}}}r6.StaticHeaderProvider=$6;class p6 extends RD{_tokenFetcher;_refreshBufferSeconds;_currentToken=null;_tokenExpiresAt=null;_refreshPromise=null;constructor(R,T=300){super();this._tokenFetcher=R,this._refreshBufferSeconds=T}_needsRefresh(){if(this._currentToken===null)return!0;if(this._tokenExpiresAt===null)return!1;return Date.now()/1000>=this._tokenExpiresAt-this._refreshBufferSeconds}async _refreshTokenIfNeeded(){if(!this._needsRefresh())return;if(this._refreshPromise){await this._refreshPromise;return}this._refreshPromise=(async()=>{try{let R=await this._tokenFetcher();if(this._currentToken=R.accessToken,!this._currentToken)throw Error("Token fetcher did not return 'accessToken'");if(R.expiresIn)this._tokenExpiresAt=Date.now()/1000+R.expiresIn;else this._tokenExpiresAt=null}finally{this._refreshPromise=null}})(),await this._refreshPromise}getHeaders(){if(!this._currentToken&&!this._refreshPromise)throw Error("Token not initialized. Call refreshToken() first or use async initialization.");if(!this._currentToken)throw Error("Failed to obtain OAuth token");return{authorization:`Bearer ${this._currentToken}`}}async refreshToken(){this._currentToken=null,await this._refreshTokenIfNeeded()}}r6.OAuthHeaderProvider=p6});var l6=a((F6)=>{Object.defineProperty(F6,"__esModule",{value:!0});F6.TextEmbeddingFunction=F6.EmbeddingFunction=void 0;nH();var R9=kT(),YH=Ch(),qp=qA();class Ri{TOptions;#R;toJSON(){return JSON.parse(JSON.stringify(this.#R))}constructor(){this.#R={}}getSensitiveKeys(){return[]}resolveVariables(R){this.#R=R;let T=(0,qp.getRegistry)(),A={...R};for(let[h,C]of Object.entries(A)){if(this.getSensitiveKeys().includes(h)&&!C.startsWith("$var:"))throw Error(`The key "${h}" is sensitive and cannot be set directly. Please use the $var: syntax to set it.`);let B=h;if(typeof C==="string"&&C.startsWith("$var:")){let[D,_]=C.slice(5).split(":",2),O=T.getVar(D);if(!O)if(_)A[B]=_;else throw Error(`Variable "${D}" not found`);else A[B]=O}}return A}sourceField(R){let T="datatype"in R?R.datatype:R;if(!T)throw Error("Datatype is required");T=(0,YH.sanitizeType)(T);let A=new Map;return A.set("source_column_for",this),[T,A]}vectorField(R){let T,A,h=this.ndims();if(R===void 0)T=new R9.Float32;else if(!("datatype"in R))T=(0,YH.sanitizeType)(R);else h=h??R?.dims,T=(0,YH.sanitizeType)(R?.datatype);if(T!==void 0)if((0,R9.isFixedSizeList)(T))A=T;else if((0,R9.isFloat)(T)){if(h===void 0)throw Error("ndims is required for vector field");A=(0,R9.newVectorType)(h,T)}else throw Error("Expected FixedSizeList or Float as datatype for vector field");else{if(h===void 0)throw Error("ndims is required for vector field");A=new R9.FixedSizeList(h,new R9.Field("item",new R9.Float32,!0))}let C=new Map;return C.set("vector_column_for",this),[A,C]}ndims(){return}async computeQueryEmbeddings(R){return this.computeSourceEmbeddings([R]).then((T)=>T[0])}}F6.EmbeddingFunction=Ri;class x6 extends Ri{async computeQueryEmbeddings(R){return this.generateEmbeddings([R]).then((T)=>T[0])}embeddingDataType(){return new R9.Float32}sourceField(){return super.sourceField(new R9.Utf8)}computeSourceEmbeddings(R){return this.generateEmbeddings(R)}}F6.TextEmbeddingFunction=x6});var u6=a((OT)=>{var Lp=OT&&OT.__createBinding||(Object.create?function(R,T,A,h){if(h===void 0)h=A;var C=Object.getOwnPropertyDescriptor(T,A);if(!C||("get"in C?!T.__esModule:C.writable||C.configurable))C={enumerable:!0,get:function(){return T[A]}};Object.defineProperty(R,h,C)}:function(R,T,A,h){if(h===void 0)h=A;R[h]=T[A]}),Wp=OT&&OT.__exportStar||function(R,T){for(var A in R)if(A!=="default"&&!Object.prototype.hasOwnProperty.call(T,A))Lp(T,R,A)};Object.defineProperty(OT,"__esModule",{value:!0});OT.TextEmbeddingFunction=OT.EmbeddingFunction=void 0;OT.LanceSchema=cp;var Ti=kT(),d6=Ch(),Np=qA(),j6=l6();Object.defineProperty(OT,"EmbeddingFunction",{enumerable:!0,get:function(){return j6.EmbeddingFunction}});Object.defineProperty(OT,"TextEmbeddingFunction",{enumerable:!0,get:function(){return j6.TextEmbeddingFunction}});Wp(qA(),OT);function cp(R){let T=[],A=new Map;Object.entries(R).forEach(([D,_])=>{if(Array.isArray(_)){let[O,H]=_;T.push(new Ti.Field(D,(0,d6.sanitizeType)(O),!0)),op(A,D,H)}else T.push(new Ti.Field(D,(0,d6.sanitizeType)(_),!0))});let C=(0,Np.getRegistry)().getTableMetadata(Array.from(A.values()));return new Ti.Schema(T,C)}function op(R,T,A){if(A.has("source_column_for")){let h=A.get("source_column_for"),C=R.get(h);if(C!==void 0)R.set(h,{...C,sourceColumn:T});else R.set(h,{sourceColumn:T,function:h})}else if(A.has("vector_column_for")){let h=A.get("vector_column_for"),C=R.get(h);if(C!==void 0)R.set(h,{...C,vectorColumn:T});else R.set(h,{vectorColumn:T,function:h})}}});var U6=a((Z6)=>{Object.defineProperty(Z6,"__esModule",{value:!0});Z6.RRFReranker=void 0;var Ai=kT(),Jp=r9();class hi{inner;constructor(R){this.inner=R}static async create(R=60){return new hi(await Jp.RrfReranker.tryNew(new Float32Array([R])))}async rerankHybrid(R,T,A){let h=await this.inner.rerankHybrid(R,await(0,Ai.fromRecordBatchToBuffer)(T),await(0,Ai.fromRecordBatchToBuffer)(A));return await(0,Ai.fromBufferToRecordBatch)(h)}}Z6.RRFReranker=hi});var Q6=a((NA)=>{var Ip=NA&&NA.__createBinding||(Object.create?function(R,T,A,h){if(h===void 0)h=A;var C=Object.getOwnPropertyDescriptor(T,A);if(!C||("get"in C?!T.__esModule:C.writable||C.configurable))C={enumerable:!0,get:function(){return T[A]}};Object.defineProperty(R,h,C)}:function(R,T,A,h){if(h===void 0)h=A;R[h]=T[A]}),kp=NA&&NA.__exportStar||function(R,T){for(var A in R)if(A!=="default"&&!Object.prototype.hasOwnProperty.call(T,A))Ip(T,R,A)};Object.defineProperty(NA,"__esModule",{value:!0});kp(U6(),NA)});var M6=a((TR)=>{Object.defineProperty(TR,"__esModule",{value:!0});TR.packBits=TR.rerankers=TR.embedding=TR.MergeInsertBuilder=TR.OAuthHeaderProvider=TR.StaticHeaderProvider=TR.HeaderProvider=TR.Table=TR.Index=TR.Occur=TR.Operator=TR.FullTextQueryType=TR.BooleanQuery=TR.MultiMatchQuery=TR.BoostQuery=TR.PhraseQuery=TR.MatchQuery=TR.RecordBatchIterator=TR.TakeQuery=TR.VectorQuery=TR.QueryBase=TR.Query=TR.Session=TR.Connection=TR.VectorColumnOptions=TR.MakeArrowTableOptions=TR.makeArrowTable=TR.TagContents=TR.Tags=TR.NativeJsHeaderProvider=void 0;TR.connect=bp;var f6=mH(),Ci=r9(),Sp=r9();Object.defineProperty(TR,"NativeJsHeaderProvider",{enumerable:!0,get:function(){return Sp.JsHeaderProvider}});var z6=r9();Object.defineProperty(TR,"Tags",{enumerable:!0,get:function(){return z6.Tags}});Object.defineProperty(TR,"TagContents",{enumerable:!0,get:function(){return z6.TagContents}});var Bi=kT();Object.defineProperty(TR,"makeArrowTable",{enumerable:!0,get:function(){return Bi.makeArrowTable}});Object.defineProperty(TR,"MakeArrowTableOptions",{enumerable:!0,get:function(){return Bi.MakeArrowTableOptions}});Object.defineProperty(TR,"VectorColumnOptions",{enumerable:!0,get:function(){return Bi.VectorColumnOptions}});var yp=mH();Object.defineProperty(TR,"Connection",{enumerable:!0,get:function(){return yp.Connection}});var gp=r9();Object.defineProperty(TR,"Session",{enumerable:!0,get:function(){return gp.Session}});var VR=wH();Object.defineProperty(TR,"Query",{enumerable:!0,get:function(){return VR.Query}});Object.defineProperty(TR,"QueryBase",{enumerable:!0,get:function(){return VR.QueryBase}});Object.defineProperty(TR,"VectorQuery",{enumerable:!0,get:function(){return VR.VectorQuery}});Object.defineProperty(TR,"TakeQuery",{enumerable:!0,get:function(){return VR.TakeQuery}});Object.defineProperty(TR,"RecordBatchIterator",{enumerable:!0,get:function(){return VR.RecordBatchIterator}});Object.defineProperty(TR,"MatchQuery",{enumerable:!0,get:function(){return VR.MatchQuery}});Object.defineProperty(TR,"PhraseQuery",{enumerable:!0,get:function(){return VR.PhraseQuery}});Object.defineProperty(TR,"BoostQuery",{enumerable:!0,get:function(){return VR.BoostQuery}});Object.defineProperty(TR,"MultiMatchQuery",{enumerable:!0,get:function(){return VR.MultiMatchQuery}});Object.defineProperty(TR,"BooleanQuery",{enumerable:!0,get:function(){return VR.BooleanQuery}});Object.defineProperty(TR,"FullTextQueryType",{enumerable:!0,get:function(){return VR.FullTextQueryType}});Object.defineProperty(TR,"Operator",{enumerable:!0,get:function(){return VR.Operator}});Object.defineProperty(TR,"Occur",{enumerable:!0,get:function(){return VR.Occur}});var sp=E6();Object.defineProperty(TR,"Index",{enumerable:!0,get:function(){return sp.Index}});var Pp=fH();Object.defineProperty(TR,"Table",{enumerable:!0,get:function(){return Pp.Table}});var Di=G6();Object.defineProperty(TR,"HeaderProvider",{enumerable:!0,get:function(){return Di.HeaderProvider}});Object.defineProperty(TR,"StaticHeaderProvider",{enumerable:!0,get:function(){return Di.StaticHeaderProvider}});Object.defineProperty(TR,"OAuthHeaderProvider",{enumerable:!0,get:function(){return Di.OAuthHeaderProvider}});var tp=ZH();Object.defineProperty(TR,"MergeInsertBuilder",{enumerable:!0,get:function(){return tp.MergeInsertBuilder}});TR.embedding=u6();TR.rerankers=Q6();var Kp=UH();Object.defineProperty(TR,"packBits",{enumerable:!0,get:function(){return Kp.packBits}});async function bp(R,T,A,h){let C,B={},D;if(typeof R!=="string"){let{uri:H,...i}=R;C=H,B=i}else{if(C=R,T&&"inner"in T)B={};else B=T||{};if(A&&(typeof A==="function"||("getHeaders"in A)))D=A;else D=h}if(!C)throw Error("uri is required");B=B??{},B.storageOptions=(0,f6.cleanseStorageOptions)(B.storageOptions);let _;if(D){if(typeof D==="function")_=new Ci.JsHeaderProvider(D);else if(D&&typeof D.getHeaders==="function")_=new Ci.JsHeaderProvider(async()=>D.getHeaders())}let O=await Ci.Connection.new(C,B,_);return new f6.LocalConnection(O)}});var Oi=rp(M6(),1);import _i from"node:fs";import Gp from"node:path";function Xp(R,T=1536){let A=R.toLowerCase().split(/\s+/),h=Array(T).fill(0);for(let B of A){let D=0;for(let _=0;_<B.length;_++)D=(D<<5)-D+B.charCodeAt(_),D=D&D;for(let _=0;_<T;_++)h[_]+=Math.sin(D*(_+1))*0.1}let C=Math.sqrt(h.reduce((B,D)=>B+D*D,0));if(C>0)return h.map((B)=>B/C);return h}class Hi{db=null;table=null;metadata;indexPath;dimensions;tableName="vectors";constructor(R,T){this.indexPath=R,this.dimensions=T,this.metadata={dimensions:T,count:0}}async initialize(){if(this.db)return;try{let R=Gp.dirname(this.indexPath);if(!_i.existsSync(R))_i.mkdirSync(R,{recursive:!0});if(this.db=await Oi.connect(this.indexPath),(await this.db.tableNames()).includes(this.tableName)){this.table=await this.db.openTable(this.tableName);try{this.metadata.count=await this.table.countRows(),console.error(`[INFO] Loaded LanceDB table with ${this.metadata.count} vectors`)}catch(A){this.metadata.count=0}}else{let A=[{id:"init",vector:Array(this.dimensions).fill(0),type:"code",content:"",category:"",language:""}];this.table=await this.db.createTable(this.tableName,A),await this.table.delete("id = ?",["init"]),console.error(`[INFO] Created new LanceDB table: ${this.tableName}`)}}catch(R){console.error("[ERROR] Failed to initialize LanceDB:",R),this.useFallback=!0}}useFallback=!1;fallbackData=new Map;async save(){if(this.useFallback){console.error("[INFO] Using fallback storage - save is no-op");return}console.error("[INFO] LanceDB saves automatically")}async addDocument(R){if(R.embedding.length!==this.dimensions)throw Error(`Embedding dimension mismatch: expected ${this.dimensions}, got ${R.embedding.length}`);if(this.useFallback){this.fallbackData.set(R.id,R),this.metadata.count=this.fallbackData.size;return}await this.initialize();try{await this.table.add([{id:R.id,vector:R.embedding,type:R.metadata.type,content:R.metadata.content,category:R.metadata.category,language:R.metadata.language}]),this.metadata.count++}catch(T){console.error("[ERROR] Failed to add document, falling back:",T),this.useFallback=!0,this.fallbackData.set(R.id,R),this.metadata.count=this.fallbackData.size}}async addDocuments(R){if(R.length===0)return;for(let T of R)if(T.embedding.length!==this.dimensions)throw Error(`Embedding dimension mismatch: expected ${this.dimensions}, got ${T.embedding.length}`);if(this.useFallback){for(let T of R)this.fallbackData.set(T.id,T);this.metadata.count=this.fallbackData.size;return}await this.initialize();try{let T=R.map((A)=>({id:A.id,vector:A.embedding,type:A.metadata.type,content:A.metadata.content,category:A.metadata.category,language:A.metadata.language}));await this.table.add(T),this.metadata.count+=R.length,console.error(`[INFO] Added ${R.length} documents to LanceDB`)}catch(T){console.error("[ERROR] Failed to add documents, falling back:",T),this.useFallback=!0;for(let A of R)this.fallbackData.set(A.id,A);this.metadata.count=this.fallbackData.size}}async search(R,T={}){if(R.length!==this.dimensions)throw Error(`Query embedding dimension mismatch: expected ${this.dimensions}, got ${R.length}`);let{k:A=5,filter:h}=T;if(this.useFallback){let C=[];for(let B of this.fallbackData.values()){if(h&&!h(B))continue;let D=this.cosineSimilarity(R,B.embedding);C.push({doc:B,similarity:D})}return C.sort((B,D)=>D.similarity-B.similarity).slice(0,A)}await this.initialize();try{let B=await this.table.vectorSearch(R).limit(A*2).toArray(),D=[];for(let _ of B){let O={id:_.id,embedding:_.vector,metadata:{type:_.type,content:_.content||"",category:_.category||"",language:_.language||""}};if(h&&!h(O))continue;let i=1/(1+(_._distance||0));if(D.push({doc:O,similarity:i}),D.length>=A)break}return D}catch(C){return console.error("[ERROR] Vector search failed, falling back:",C),this.search(R,T)}}async getDocument(R){if(this.useFallback)return this.fallbackData.get(R);await this.initialize();try{let A=(await this.table.limit(1000).toArray()).find((h)=>h.id===R);if(!A)return;return{id:A.id,embedding:A.vector,metadata:{type:A.type,content:A.content||"",category:A.category||"",language:A.language||""}}}catch(T){return console.error("[ERROR] Failed to get document:",T),this.fallbackData.get(R)}}async getAllDocuments(){if(this.useFallback)return Array.from(this.fallbackData.values());await this.initialize();try{return(await this.table.toArray()).map((T)=>({id:T.id,embedding:T.vector,metadata:{type:T.type,content:T.content||"",category:T.category||"",language:T.language||""}}))}catch(R){return console.error("[ERROR] Failed to get all documents:",R),Array.from(this.fallbackData.values())}}getMetadata(){return{...this.metadata}}async clear(){if(this.useFallback){this.fallbackData.clear(),this.metadata.count=0;return}await this.initialize();try{await this.db.dropTable(this.tableName);let R=[{id:"init",vector:Array(this.dimensions).fill(0),type:"code",content:"",category:"",language:""}];this.table=await this.db.createTable(this.tableName,R),await this.table.delete("id = ?",["init"]),this.metadata.count=0,console.error("[INFO] Cleared all vectors from LanceDB")}catch(R){console.error("[ERROR] Failed to clear vectors:",R),this.fallbackData.clear(),this.metadata.count=0}}static async load(R){try{if(!_i.existsSync(R))return null;if((await(await Oi.connect(R)).tableNames()).length===0)return null;return new Hi(R,1536)}catch(T){return console.error("[ERROR] Failed to load LanceDB storage:",T),null}}cosineSimilarity(R,T){if(R.length!==T.length)return 0;let A=0,h=0,C=0;for(let B=0;B<R.length;B++)A+=R[B]*T[B],h+=R[B]*R[B],C+=T[B]*T[B];if(h===0||C===0)return 0;return A/(Math.sqrt(h)*Math.sqrt(C))}}export{Xp as z,Hi as A};
