#!/usr/bin/env node
import{a as z_}from"./knowledge-resources-f35bqz34.js";import{b as s,c as k,d as I0,e as P1,f as S0,g as x1,h as b1,i as y1,j as A_,k as D_,l as q_,m as V0,n as i0,o as w,p as _0,q as a,r as L_,s as N_,t as u,u as a2,v as C}from"./index-64c9t7n0.js";import{w as E_,z as t2}from"./paths-msn59g0z.js";import{C as o2}from"./index-57rg6dr5.js";import{D}from"./error-handler-hbdn6jhw.js";import{E as V}from"./servers-59y42wx4.js";import{F as M,G as q}from"./index-3c9rx1sx.js";import{H as l0}from"./secret-utils-9qbc8k85.js";import{M as E1}from"./index-f69ek5re.js";import{R as W_}from"./settings-y8fktnth.js";import{S as J0,T as p,U as w2,V as g}from"./index-5wbetp1c.js";var L0=p((I_)=>{class s0 extends Error{constructor(_,F,B){super(B);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=F,this.exitCode=_,this.nestedError=void 0}}class g1 extends s0{constructor(_){super(1,"commander.invalidArgument",_);Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}}I_.CommanderError=s0;I_.InvalidArgumentError=g1});var k0=p((P_)=>{var{InvalidArgumentError:b_}=L0();class d1{constructor(_,F){switch(this.description=F||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,_[0]){case"<":this.required=!0,this._name=_.slice(1,-1);break;case"[":this.required=!1,this._name=_.slice(1,-1);break;default:this.required=!0,this._name=_;break}if(this._name.length>3&&this._name.slice(-3)==="...")this.variadic=!0,this._name=this._name.slice(0,-3)}name(){return this._name}_concatValue(_,F){if(F===this.defaultValue||!Array.isArray(F))return[_];return F.concat(_)}default(_,F){return this.defaultValue=_,this.defaultValueDescription=F,this}argParser(_){return this.parseArg=_,this}choices(_){return this.argChoices=_.slice(),this.parseArg=(F,B)=>{if(!this.argChoices.includes(F))throw new b_(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(F,B);return F},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}}function C_(_){let F=_.name()+(_.variadic===!0?"...":"");return _.required?"<"+F+">":"["+F+"]"}P_.Argument=d1;P_.humanReadableArgName=C_});var a0=p((f_)=>{var{humanReadableArgName:v_}=k0();class c1{constructor(){this.helpWidth=void 0,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}visibleCommands(_){let F=_.commands.filter(($)=>!$._hidden),B=_._getHelpCommand();if(B&&!B._hidden)F.push(B);if(this.sortSubcommands)F.sort(($,J)=>{return $.name().localeCompare(J.name())});return F}compareOptions(_,F){let B=($)=>{return $.short?$.short.replace(/^-/,""):$.long.replace(/^--/,"")};return B(_).localeCompare(B(F))}visibleOptions(_){let F=_.options.filter(($)=>!$.hidden),B=_._getHelpOption();if(B&&!B.hidden){let $=B.short&&_._findOption(B.short),J=B.long&&_._findOption(B.long);if(!$&&!J)F.push(B);else if(B.long&&!J)F.push(_.createOption(B.long,B.description));else if(B.short&&!$)F.push(_.createOption(B.short,B.description))}if(this.sortOptions)F.sort(this.compareOptions);return F}visibleGlobalOptions(_){if(!this.showGlobalOptions)return[];let F=[];for(let B=_.parent;B;B=B.parent){let $=B.options.filter((J)=>!J.hidden);F.push(...$)}if(this.sortOptions)F.sort(this.compareOptions);return F}visibleArguments(_){if(_._argsDescription)_.registeredArguments.forEach((F)=>{F.description=F.description||_._argsDescription[F.name()]||""});if(_.registeredArguments.find((F)=>F.description))return _.registeredArguments;return[]}subcommandTerm(_){let F=_.registeredArguments.map((B)=>v_(B)).join(" ");return _._name+(_._aliases[0]?"|"+_._aliases[0]:"")+(_.options.length?" [options]":"")+(F?" "+F:"")}optionTerm(_){return _.flags}argumentTerm(_){return _.name()}longestSubcommandTermLength(_,F){return F.visibleCommands(_).reduce((B,$)=>{return Math.max(B,F.subcommandTerm($).length)},0)}longestOptionTermLength(_,F){return F.visibleOptions(_).reduce((B,$)=>{return Math.max(B,F.optionTerm($).length)},0)}longestGlobalOptionTermLength(_,F){return F.visibleGlobalOptions(_).reduce((B,$)=>{return Math.max(B,F.optionTerm($).length)},0)}longestArgumentTermLength(_,F){return F.visibleArguments(_).reduce((B,$)=>{return Math.max(B,F.argumentTerm($).length)},0)}commandUsage(_){let F=_._name;if(_._aliases[0])F=F+"|"+_._aliases[0];let B="";for(let $=_.parent;$;$=$.parent)B=$.name()+" "+B;return B+F+" "+_.usage()}commandDescription(_){return _.description()}subcommandDescription(_){return _.summary()||_.description()}optionDescription(_){let F=[];if(_.argChoices)F.push(`choices: ${_.argChoices.map((B)=>JSON.stringify(B)).join(", ")}`);if(_.defaultValue!==void 0){if(_.required||_.optional||_.isBoolean()&&typeof _.defaultValue==="boolean")F.push(`default: ${_.defaultValueDescription||JSON.stringify(_.defaultValue)}`)}if(_.presetArg!==void 0&&_.optional)F.push(`preset: ${JSON.stringify(_.presetArg)}`);if(_.envVar!==void 0)F.push(`env: ${_.envVar}`);if(F.length>0)return`${_.description} (${F.join(", ")})`;return _.description}argumentDescription(_){let F=[];if(_.argChoices)F.push(`choices: ${_.argChoices.map((B)=>JSON.stringify(B)).join(", ")}`);if(_.defaultValue!==void 0)F.push(`default: ${_.defaultValueDescription||JSON.stringify(_.defaultValue)}`);if(F.length>0){let B=`(${F.join(", ")})`;if(_.description)return`${_.description} ${B}`;return B}return _.description}formatHelp(_,F){let B=F.padWidth(_,F),$=F.helpWidth||80,J=2,Z=2;function Q(K,A){if(A){let I=`${K.padEnd(B+2)}${A}`;return F.wrap(I,$-2,B+2)}return K}function X(K){return K.join(`
`).replace(/^/gm," ".repeat(2))}let H=[`Usage: ${F.commandUsage(_)}`,""],G=F.commandDescription(_);if(G.length>0)H=H.concat([F.wrap(G,$,0),""]);let Y=F.visibleArguments(_).map((K)=>{return Q(F.argumentTerm(K),F.argumentDescription(K))});if(Y.length>0)H=H.concat(["Arguments:",X(Y),""]);let z=F.visibleOptions(_).map((K)=>{return Q(F.optionTerm(K),F.optionDescription(K))});if(z.length>0)H=H.concat(["Options:",X(z),""]);if(this.showGlobalOptions){let K=F.visibleGlobalOptions(_).map((A)=>{return Q(F.optionTerm(A),F.optionDescription(A))});if(K.length>0)H=H.concat(["Global Options:",X(K),""])}let U=F.visibleCommands(_).map((K)=>{return Q(F.subcommandTerm(K),F.subcommandDescription(K))});if(U.length>0)H=H.concat(["Commands:",X(U),""]);return H.join(`
`)}padWidth(_,F){return Math.max(F.longestOptionTermLength(_,F),F.longestGlobalOptionTermLength(_,F),F.longestSubcommandTermLength(_,F),F.longestArgumentTermLength(_,F))}wrap(_,F,B,$=40){let Z=new RegExp(`[\\n][${" \\f\\t\\v   -   　\uFEFF"}]+`);if(_.match(Z))return _;let Q=F-B;if(Q<$)return _;let X=_.slice(0,B),H=_.slice(B).replace(`\r
`,`
`),G=" ".repeat(B),z=`\\s${"​"}`,U=new RegExp(`
|.{1,${Q-1}}([${z}]|$)|[^${z}]+?([${z}]|$)`,"g"),K=H.match(U)||[];return X+K.map((A,I)=>{if(A===`
`)return"";return(I>0?G:"")+A.trimEnd()}).join(`
`)}}f_.Help=c1});var o0=p((d_)=>{var{InvalidArgumentError:u_}=L0();class p1{constructor(_,F){this.flags=_,this.description=F||"",this.required=_.includes("<"),this.optional=_.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(_),this.mandatory=!1;let B=g_(_);if(this.short=B.shortFlag,this.long=B.longFlag,this.negate=!1,this.long)this.negate=this.long.startsWith("--no-");this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0}default(_,F){return this.defaultValue=_,this.defaultValueDescription=F,this}preset(_){return this.presetArg=_,this}conflicts(_){return this.conflictsWith=this.conflictsWith.concat(_),this}implies(_){let F=_;if(typeof _==="string")F={[_]:!0};return this.implied=Object.assign(this.implied||{},F),this}env(_){return this.envVar=_,this}argParser(_){return this.parseArg=_,this}makeOptionMandatory(_=!0){return this.mandatory=!!_,this}hideHelp(_=!0){return this.hidden=!!_,this}_concatValue(_,F){if(F===this.defaultValue||!Array.isArray(F))return[_];return F.concat(_)}choices(_){return this.argChoices=_.slice(),this.parseArg=(F,B)=>{if(!this.argChoices.includes(F))throw new u_(`Allowed choices are ${this.argChoices.join(", ")}.`);if(this.variadic)return this._concatValue(F,B);return F},this}name(){if(this.long)return this.long.replace(/^--/,"");return this.short.replace(/^-/,"")}attributeName(){return m_(this.name().replace(/^no-/,""))}is(_){return this.short===_||this.long===_}isBoolean(){return!this.required&&!this.optional&&!this.negate}}class l1{constructor(_){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,_.forEach((F)=>{if(F.negate)this.negativeOptions.set(F.attributeName(),F);else this.positiveOptions.set(F.attributeName(),F)}),this.negativeOptions.forEach((F,B)=>{if(this.positiveOptions.has(B))this.dualOptions.add(B)})}valueFromOption(_,F){let B=F.attributeName();if(!this.dualOptions.has(B))return!0;let $=this.negativeOptions.get(B).presetArg,J=$!==void 0?$:!1;return F.negate===(J===_)}}function m_(_){return _.split("-").reduce((F,B)=>{return F+B[0].toUpperCase()+B.slice(1)})}function g_(_){let F,B,$=_.split(/[ |,]+/);if($.length>1&&!/^[[<]/.test($[1]))F=$.shift();if(B=$.shift(),!F&&/^-[^-]$/.test(B))F=B,B=void 0;return{shortFlag:F,longFlag:B}}d_.Option=p1;d_.DualOptions=l1});var i1=p((n_)=>{function l_(_,F){if(Math.abs(_.length-F.length)>3)return Math.max(_.length,F.length);let B=[];for(let $=0;$<=_.length;$++)B[$]=[$];for(let $=0;$<=F.length;$++)B[0][$]=$;for(let $=1;$<=F.length;$++)for(let J=1;J<=_.length;J++){let Z=1;if(_[J-1]===F[$-1])Z=0;else Z=1;if(B[J][$]=Math.min(B[J-1][$]+1,B[J][$-1]+1,B[J-1][$-1]+Z),J>1&&$>1&&_[J-1]===F[$-2]&&_[J-2]===F[$-1])B[J][$]=Math.min(B[J][$],B[J-2][$-2]+1)}return B[_.length][F.length]}function i_(_,F){if(!F||F.length===0)return"";F=Array.from(new Set(F));let B=_.startsWith("--");if(B)_=_.slice(2),F=F.map((Q)=>Q.slice(2));let $=[],J=3,Z=0.4;if(F.forEach((Q)=>{if(Q.length<=1)return;let X=l_(_,Q),H=Math.max(_.length,Q.length);if((H-X)/H>Z){if(X<J)J=X,$=[Q];else if(X===J)$.push(Q)}}),$.sort((Q,X)=>Q.localeCompare(X)),B)$=$.map((Q)=>`--${Q}`);if($.length>1)return`
(Did you mean one of ${$.join(", ")}?)`;if($.length===1)return`
(Did you mean ${$[0]}?)`;return""}n_.suggestSimilar=i_});var o1=p((_3)=>{var a_=g("node:events").EventEmitter,r0=g("node:child_process"),m=g("node:path"),t0=g("node:fs"),T=g("node:process"),{Argument:o_,humanReadableArgName:r_}=k0(),{CommanderError:e0}=L0(),{Help:t_}=a0(),{Option:n1,DualOptions:e_}=o0(),{suggestSimilar:s1}=i1();class _1 extends a_{constructor(_){super();this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!0,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=_||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._outputConfiguration={writeOut:(F)=>T.stdout.write(F),writeErr:(F)=>T.stderr.write(F),getOutHelpWidth:()=>T.stdout.isTTY?T.stdout.columns:void 0,getErrHelpWidth:()=>T.stderr.isTTY?T.stderr.columns:void 0,outputError:(F,B)=>B(F)},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={}}copyInheritedSettings(_){return this._outputConfiguration=_._outputConfiguration,this._helpOption=_._helpOption,this._helpCommand=_._helpCommand,this._helpConfiguration=_._helpConfiguration,this._exitCallback=_._exitCallback,this._storeOptionsAsProperties=_._storeOptionsAsProperties,this._combineFlagAndOptionalValue=_._combineFlagAndOptionalValue,this._allowExcessArguments=_._allowExcessArguments,this._enablePositionalOptions=_._enablePositionalOptions,this._showHelpAfterError=_._showHelpAfterError,this._showSuggestionAfterError=_._showSuggestionAfterError,this}_getCommandAndAncestors(){let _=[];for(let F=this;F;F=F.parent)_.push(F);return _}command(_,F,B){let $=F,J=B;if(typeof $==="object"&&$!==null)J=$,$=null;J=J||{};let[,Z,Q]=_.match(/([^ ]+) *(.*)/),X=this.createCommand(Z);if($)X.description($),X._executableHandler=!0;if(J.isDefault)this._defaultCommandName=X._name;if(X._hidden=!!(J.noHelp||J.hidden),X._executableFile=J.executableFile||null,Q)X.arguments(Q);if(this._registerCommand(X),X.parent=this,X.copyInheritedSettings(this),$)return this;return X}createCommand(_){return new _1(_)}createHelp(){return Object.assign(new t_,this.configureHelp())}configureHelp(_){if(_===void 0)return this._helpConfiguration;return this._helpConfiguration=_,this}configureOutput(_){if(_===void 0)return this._outputConfiguration;return Object.assign(this._outputConfiguration,_),this}showHelpAfterError(_=!0){if(typeof _!=="string")_=!!_;return this._showHelpAfterError=_,this}showSuggestionAfterError(_=!0){return this._showSuggestionAfterError=!!_,this}addCommand(_,F){if(!_._name)throw Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);if(F=F||{},F.isDefault)this._defaultCommandName=_._name;if(F.noHelp||F.hidden)_._hidden=!0;return this._registerCommand(_),_.parent=this,_._checkForBrokenPassThrough(),this}createArgument(_,F){return new o_(_,F)}argument(_,F,B,$){let J=this.createArgument(_,F);if(typeof B==="function")J.default($).argParser(B);else J.default(B);return this.addArgument(J),this}arguments(_){return _.trim().split(/ +/).forEach((F)=>{this.argument(F)}),this}addArgument(_){let F=this.registeredArguments.slice(-1)[0];if(F&&F.variadic)throw Error(`only the last argument can be variadic '${F.name()}'`);if(_.required&&_.defaultValue!==void 0&&_.parseArg===void 0)throw Error(`a default value for a required argument is never used: '${_.name()}'`);return this.registeredArguments.push(_),this}helpCommand(_,F){if(typeof _==="boolean")return this._addImplicitHelpCommand=_,this;_=_??"help [command]";let[,B,$]=_.match(/([^ ]+) *(.*)/),J=F??"display help for command",Z=this.createCommand(B);if(Z.helpOption(!1),$)Z.arguments($);if(J)Z.description(J);return this._addImplicitHelpCommand=!0,this._helpCommand=Z,this}addHelpCommand(_,F){if(typeof _!=="object")return this.helpCommand(_,F),this;return this._addImplicitHelpCommand=!0,this._helpCommand=_,this}_getHelpCommand(){if(this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"))){if(this._helpCommand===void 0)this.helpCommand(void 0,void 0);return this._helpCommand}return null}hook(_,F){let B=["preSubcommand","preAction","postAction"];if(!B.includes(_))throw Error(`Unexpected value for event passed to hook : '${_}'.
Expecting one of '${B.join("', '")}'`);if(this._lifeCycleHooks[_])this._lifeCycleHooks[_].push(F);else this._lifeCycleHooks[_]=[F];return this}exitOverride(_){if(_)this._exitCallback=_;else this._exitCallback=(F)=>{if(F.code!=="commander.executeSubCommandAsync")throw F};return this}_exit(_,F,B){if(this._exitCallback)this._exitCallback(new e0(_,F,B));T.exit(_)}action(_){let F=(B)=>{let $=this.registeredArguments.length,J=B.slice(0,$);if(this._storeOptionsAsProperties)J[$]=this;else J[$]=this.opts();return J.push(this),_.apply(this,J)};return this._actionHandler=F,this}createOption(_,F){return new n1(_,F)}_callParseArg(_,F,B,$){try{return _.parseArg(F,B)}catch(J){if(J.code==="commander.invalidArgument"){let Z=`${$} ${J.message}`;this.error(Z,{exitCode:J.exitCode,code:J.code})}throw J}}_registerOption(_){let F=_.short&&this._findOption(_.short)||_.long&&this._findOption(_.long);if(F){let B=_.long&&this._findOption(_.long)?_.long:_.short;throw Error(`Cannot add option '${_.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${B}'
-  already used by option '${F.flags}'`)}this.options.push(_)}_registerCommand(_){let F=($)=>{return[$.name()].concat($.aliases())},B=F(_).find(($)=>this._findCommand($));if(B){let $=F(this._findCommand(B)).join("|"),J=F(_).join("|");throw Error(`cannot add command '${J}' as already have command '${$}'`)}this.commands.push(_)}addOption(_){this._registerOption(_);let F=_.name(),B=_.attributeName();if(_.negate){let J=_.long.replace(/^--no-/,"--");if(!this._findOption(J))this.setOptionValueWithSource(B,_.defaultValue===void 0?!0:_.defaultValue,"default")}else if(_.defaultValue!==void 0)this.setOptionValueWithSource(B,_.defaultValue,"default");let $=(J,Z,Q)=>{if(J==null&&_.presetArg!==void 0)J=_.presetArg;let X=this.getOptionValue(B);if(J!==null&&_.parseArg)J=this._callParseArg(_,J,X,Z);else if(J!==null&&_.variadic)J=_._concatValue(J,X);if(J==null)if(_.negate)J=!1;else if(_.isBoolean()||_.optional)J=!0;else J="";this.setOptionValueWithSource(B,J,Q)};if(this.on("option:"+F,(J)=>{let Z=`error: option '${_.flags}' argument '${J}' is invalid.`;$(J,Z,"cli")}),_.envVar)this.on("optionEnv:"+F,(J)=>{let Z=`error: option '${_.flags}' value '${J}' from env '${_.envVar}' is invalid.`;$(J,Z,"env")});return this}_optionEx(_,F,B,$,J){if(typeof F==="object"&&F instanceof n1)throw Error("To add an Option object use addOption() instead of option() or requiredOption()");let Z=this.createOption(F,B);if(Z.makeOptionMandatory(!!_.mandatory),typeof $==="function")Z.default(J).argParser($);else if($ instanceof RegExp){let Q=$;$=(X,H)=>{let G=Q.exec(X);return G?G[0]:H},Z.default(J).argParser($)}else Z.default($);return this.addOption(Z)}option(_,F,B,$){return this._optionEx({},_,F,B,$)}requiredOption(_,F,B,$){return this._optionEx({mandatory:!0},_,F,B,$)}combineFlagAndOptionalValue(_=!0){return this._combineFlagAndOptionalValue=!!_,this}allowUnknownOption(_=!0){return this._allowUnknownOption=!!_,this}allowExcessArguments(_=!0){return this._allowExcessArguments=!!_,this}enablePositionalOptions(_=!0){return this._enablePositionalOptions=!!_,this}passThroughOptions(_=!0){return this._passThroughOptions=!!_,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(_=!0){if(this.options.length)throw Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!_,this}getOptionValue(_){if(this._storeOptionsAsProperties)return this[_];return this._optionValues[_]}setOptionValue(_,F){return this.setOptionValueWithSource(_,F,void 0)}setOptionValueWithSource(_,F,B){if(this._storeOptionsAsProperties)this[_]=F;else this._optionValues[_]=F;return this._optionValueSources[_]=B,this}getOptionValueSource(_){return this._optionValueSources[_]}getOptionValueSourceWithGlobals(_){let F;return this._getCommandAndAncestors().forEach((B)=>{if(B.getOptionValueSource(_)!==void 0)F=B.getOptionValueSource(_)}),F}_prepareUserArgs(_,F){if(_!==void 0&&!Array.isArray(_))throw Error("first parameter to parse must be array or undefined");if(F=F||{},_===void 0&&F.from===void 0){if(T.versions?.electron)F.from="electron";let $=T.execArgv??[];if($.includes("-e")||$.includes("--eval")||$.includes("-p")||$.includes("--print"))F.from="eval"}if(_===void 0)_=T.argv;this.rawArgs=_.slice();let B;switch(F.from){case void 0:case"node":this._scriptPath=_[1],B=_.slice(2);break;case"electron":if(T.defaultApp)this._scriptPath=_[1],B=_.slice(2);else B=_.slice(1);break;case"user":B=_.slice(0);break;case"eval":B=_.slice(1);break;default:throw Error(`unexpected parse option { from: '${F.from}' }`)}if(!this._name&&this._scriptPath)this.nameFromFilename(this._scriptPath);return this._name=this._name||"program",B}parse(_,F){let B=this._prepareUserArgs(_,F);return this._parseCommand([],B),this}async parseAsync(_,F){let B=this._prepareUserArgs(_,F);return await this._parseCommand([],B),this}_executeSubCommand(_,F){F=F.slice();let B=!1,$=[".js",".ts",".tsx",".mjs",".cjs"];function J(G,Y){let z=m.resolve(G,Y);if(t0.existsSync(z))return z;if($.includes(m.extname(Y)))return;let U=$.find((K)=>t0.existsSync(`${z}${K}`));if(U)return`${z}${U}`;return}this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let Z=_._executableFile||`${this._name}-${_._name}`,Q=this._executableDir||"";if(this._scriptPath){let G;try{G=t0.realpathSync(this._scriptPath)}catch(Y){G=this._scriptPath}Q=m.resolve(m.dirname(G),Q)}if(Q){let G=J(Q,Z);if(!G&&!_._executableFile&&this._scriptPath){let Y=m.basename(this._scriptPath,m.extname(this._scriptPath));if(Y!==this._name)G=J(Q,`${Y}-${_._name}`)}Z=G||Z}B=$.includes(m.extname(Z));let X;if(T.platform!=="win32")if(B)F.unshift(Z),F=a1(T.execArgv).concat(F),X=r0.spawn(T.argv[0],F,{stdio:"inherit"});else X=r0.spawn(Z,F,{stdio:"inherit"});else F.unshift(Z),F=a1(T.execArgv).concat(F),X=r0.spawn(T.execPath,F,{stdio:"inherit"});if(!X.killed)["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach((Y)=>{T.on(Y,()=>{if(X.killed===!1&&X.exitCode===null)X.kill(Y)})});let H=this._exitCallback;X.on("close",(G)=>{if(G=G??1,!H)T.exit(G);else H(new e0(G,"commander.executeSubCommandAsync","(close)"))}),X.on("error",(G)=>{if(G.code==="ENOENT"){let Y=Q?`searched for local subcommand relative to directory '${Q}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",z=`'${Z}' does not exist
 - if '${_._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${Y}`;throw Error(z)}else if(G.code==="EACCES")throw Error(`'${Z}' not executable`);if(!H)T.exit(1);else{let Y=new e0(1,"commander.executeSubCommandAsync","(error)");Y.nestedError=G,H(Y)}}),this.runningCommand=X}_dispatchSubcommand(_,F,B){let $=this._findCommand(_);if(!$)this.help({error:!0});let J;return J=this._chainOrCallSubCommandHook(J,$,"preSubcommand"),J=this._chainOrCall(J,()=>{if($._executableHandler)this._executeSubCommand($,F.concat(B));else return $._parseCommand(F,B)}),J}_dispatchHelpCommand(_){if(!_)this.help();let F=this._findCommand(_);if(F&&!F._executableHandler)F.help();return this._dispatchSubcommand(_,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){if(this.registeredArguments.forEach((_,F)=>{if(_.required&&this.args[F]==null)this.missingArgument(_.name())}),this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)return;if(this.args.length>this.registeredArguments.length)this._excessArguments(this.args)}_processArguments(){let _=(B,$,J)=>{let Z=$;if($!==null&&B.parseArg){let Q=`error: command-argument value '${$}' is invalid for argument '${B.name()}'.`;Z=this._callParseArg(B,$,J,Q)}return Z};this._checkNumberOfArguments();let F=[];this.registeredArguments.forEach((B,$)=>{let J=B.defaultValue;if(B.variadic){if($<this.args.length){if(J=this.args.slice($),B.parseArg)J=J.reduce((Z,Q)=>{return _(B,Q,Z)},B.defaultValue)}else if(J===void 0)J=[]}else if($<this.args.length){if(J=this.args[$],B.parseArg)J=_(B,J,B.defaultValue)}F[$]=J}),this.processedArgs=F}_chainOrCall(_,F){if(_&&_.then&&typeof _.then==="function")return _.then(()=>F());return F()}_chainOrCallHooks(_,F){let B=_,$=[];if(this._getCommandAndAncestors().reverse().filter((J)=>J._lifeCycleHooks[F]!==void 0).forEach((J)=>{J._lifeCycleHooks[F].forEach((Z)=>{$.push({hookedCommand:J,callback:Z})})}),F==="postAction")$.reverse();return $.forEach((J)=>{B=this._chainOrCall(B,()=>{return J.callback(J.hookedCommand,this)})}),B}_chainOrCallSubCommandHook(_,F,B){let $=_;if(this._lifeCycleHooks[B]!==void 0)this._lifeCycleHooks[B].forEach((J)=>{$=this._chainOrCall($,()=>{return J(this,F)})});return $}_parseCommand(_,F){let B=this.parseOptions(F);if(this._parseOptionsEnv(),this._parseOptionsImplied(),_=_.concat(B.operands),F=B.unknown,this.args=_.concat(F),_&&this._findCommand(_[0]))return this._dispatchSubcommand(_[0],_.slice(1),F);if(this._getHelpCommand()&&_[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(_[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(F),this._dispatchSubcommand(this._defaultCommandName,_,F);if(this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName)this.help({error:!0});this._outputHelpIfRequested(B.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let $=()=>{if(B.unknown.length>0)this.unknownOption(B.unknown[0])},J=`command:${this.name()}`;if(this._actionHandler){$(),this._processArguments();let Z;if(Z=this._chainOrCallHooks(Z,"preAction"),Z=this._chainOrCall(Z,()=>this._actionHandler(this.processedArgs)),this.parent)Z=this._chainOrCall(Z,()=>{this.parent.emit(J,_,F)});return Z=this._chainOrCallHooks(Z,"postAction"),Z}if(this.parent&&this.parent.listenerCount(J))$(),this._processArguments(),this.parent.emit(J,_,F);else if(_.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",_,F);if(this.listenerCount("command:*"))this.emit("command:*",_,F);else if(this.commands.length)this.unknownCommand();else $(),this._processArguments()}else if(this.commands.length)$(),this.help({error:!0});else $(),this._processArguments()}_findCommand(_){if(!_)return;return this.commands.find((F)=>F._name===_||F._aliases.includes(_))}_findOption(_){return this.options.find((F)=>F.is(_))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach((_)=>{_.options.forEach((F)=>{if(F.mandatory&&_.getOptionValue(F.attributeName())===void 0)_.missingMandatoryOptionValue(F)})})}_checkForConflictingLocalOptions(){let _=this.options.filter((B)=>{let $=B.attributeName();if(this.getOptionValue($)===void 0)return!1;return this.getOptionValueSource($)!=="default"});_.filter((B)=>B.conflictsWith.length>0).forEach((B)=>{let $=_.find((J)=>B.conflictsWith.includes(J.attributeName()));if($)this._conflictingOption(B,$)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach((_)=>{_._checkForConflictingLocalOptions()})}parseOptions(_){let F=[],B=[],$=F,J=_.slice();function Z(X){return X.length>1&&X[0]==="-"}let Q=null;while(J.length){let X=J.shift();if(X==="--"){if($===B)$.push(X);$.push(...J);break}if(Q&&!Z(X)){this.emit(`option:${Q.name()}`,X);continue}if(Q=null,Z(X)){let H=this._findOption(X);if(H){if(H.required){let G=J.shift();if(G===void 0)this.optionMissingArgument(H);this.emit(`option:${H.name()}`,G)}else if(H.optional){let G=null;if(J.length>0&&!Z(J[0]))G=J.shift();this.emit(`option:${H.name()}`,G)}else this.emit(`option:${H.name()}`);Q=H.variadic?H:null;continue}}if(X.length>2&&X[0]==="-"&&X[1]!=="-"){let H=this._findOption(`-${X[1]}`);if(H){if(H.required||H.optional&&this._combineFlagAndOptionalValue)this.emit(`option:${H.name()}`,X.slice(2));else this.emit(`option:${H.name()}`),J.unshift(`-${X.slice(2)}`);continue}}if(/^--[^=]+=/.test(X)){let H=X.indexOf("="),G=this._findOption(X.slice(0,H));if(G&&(G.required||G.optional)){this.emit(`option:${G.name()}`,X.slice(H+1));continue}}if(Z(X))$=B;if((this._enablePositionalOptions||this._passThroughOptions)&&F.length===0&&B.length===0){if(this._findCommand(X)){if(F.push(X),J.length>0)B.push(...J);break}else if(this._getHelpCommand()&&X===this._getHelpCommand().name()){if(F.push(X),J.length>0)F.push(...J);break}else if(this._defaultCommandName){if(B.push(X),J.length>0)B.push(...J);break}}if(this._passThroughOptions){if($.push(X),J.length>0)$.push(...J);break}$.push(X)}return{operands:F,unknown:B}}opts(){if(this._storeOptionsAsProperties){let _={},F=this.options.length;for(let B=0;B<F;B++){let $=this.options[B].attributeName();_[$]=$===this._versionOptionName?this._version:this[$]}return _}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((_,F)=>Object.assign(_,F.opts()),{})}error(_,F){if(this._outputConfiguration.outputError(`${_}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError==="string")this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`);else if(this._showHelpAfterError)this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0});let B=F||{},$=B.exitCode||1,J=B.code||"commander.error";this._exit($,J,_)}_parseOptionsEnv(){this.options.forEach((_)=>{if(_.envVar&&_.envVar in T.env){let F=_.attributeName();if(this.getOptionValue(F)===void 0||["default","config","env"].includes(this.getOptionValueSource(F)))if(_.required||_.optional)this.emit(`optionEnv:${_.name()}`,T.env[_.envVar]);else this.emit(`optionEnv:${_.name()}`)}})}_parseOptionsImplied(){let _=new e_(this.options),F=(B)=>{return this.getOptionValue(B)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(B))};this.options.filter((B)=>B.implied!==void 0&&F(B.attributeName())&&_.valueFromOption(this.getOptionValue(B.attributeName()),B)).forEach((B)=>{Object.keys(B.implied).filter(($)=>!F($)).forEach(($)=>{this.setOptionValueWithSource($,B.implied[$],"implied")})})}missingArgument(_){let F=`error: missing required argument '${_}'`;this.error(F,{code:"commander.missingArgument"})}optionMissingArgument(_){let F=`error: option '${_.flags}' argument missing`;this.error(F,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(_){let F=`error: required option '${_.flags}' not specified`;this.error(F,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(_,F){let B=(Z)=>{let Q=Z.attributeName(),X=this.getOptionValue(Q),H=this.options.find((Y)=>Y.negate&&Q===Y.attributeName()),G=this.options.find((Y)=>!Y.negate&&Q===Y.attributeName());if(H&&(H.presetArg===void 0&&X===!1||H.presetArg!==void 0&&X===H.presetArg))return H;return G||Z},$=(Z)=>{let Q=B(Z),X=Q.attributeName();if(this.getOptionValueSource(X)==="env")return`environment variable '${Q.envVar}'`;return`option '${Q.flags}'`},J=`error: ${$(_)} cannot be used with ${$(F)}`;this.error(J,{code:"commander.conflictingOption"})}unknownOption(_){if(this._allowUnknownOption)return;let F="";if(_.startsWith("--")&&this._showSuggestionAfterError){let $=[],J=this;do{let Z=J.createHelp().visibleOptions(J).filter((Q)=>Q.long).map((Q)=>Q.long);$=$.concat(Z),J=J.parent}while(J&&!J._enablePositionalOptions);F=s1(_,$)}let B=`error: unknown option '${_}'${F}`;this.error(B,{code:"commander.unknownOption"})}_excessArguments(_){if(this._allowExcessArguments)return;let F=this.registeredArguments.length,B=F===1?"":"s",J=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${F} argument${B} but got ${_.length}.`;this.error(J,{code:"commander.excessArguments"})}unknownCommand(){let _=this.args[0],F="";if(this._showSuggestionAfterError){let $=[];this.createHelp().visibleCommands(this).forEach((J)=>{if($.push(J.name()),J.alias())$.push(J.alias())}),F=s1(_,$)}let B=`error: unknown command '${_}'${F}`;this.error(B,{code:"commander.unknownCommand"})}version(_,F,B){if(_===void 0)return this._version;this._version=_,F=F||"-V, --version",B=B||"output the version number";let $=this.createOption(F,B);return this._versionOptionName=$.attributeName(),this._registerOption($),this.on("option:"+$.name(),()=>{this._outputConfiguration.writeOut(`${_}
`),this._exit(0,"commander.version",_)}),this}description(_,F){if(_===void 0&&F===void 0)return this._description;if(this._description=_,F)this._argsDescription=F;return this}summary(_){if(_===void 0)return this._summary;return this._summary=_,this}alias(_){if(_===void 0)return this._aliases[0];let F=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler)F=this.commands[this.commands.length-1];if(_===F._name)throw Error("Command alias can't be the same as its name");let B=this.parent?._findCommand(_);if(B){let $=[B.name()].concat(B.aliases()).join("|");throw Error(`cannot add alias '${_}' to command '${this.name()}' as already have command '${$}'`)}return F._aliases.push(_),this}aliases(_){if(_===void 0)return this._aliases;return _.forEach((F)=>this.alias(F)),this}usage(_){if(_===void 0){if(this._usage)return this._usage;let F=this.registeredArguments.map((B)=>{return r_(B)});return[].concat(this.options.length||this._helpOption!==null?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?F:[]).join(" ")}return this._usage=_,this}name(_){if(_===void 0)return this._name;return this._name=_,this}nameFromFilename(_){return this._name=m.basename(_,m.extname(_)),this}executableDir(_){if(_===void 0)return this._executableDir;return this._executableDir=_,this}helpInformation(_){let F=this.createHelp();if(F.helpWidth===void 0)F.helpWidth=_&&_.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth();return F.formatHelp(this,F)}_getHelpContext(_){_=_||{};let F={error:!!_.error},B;if(F.error)B=($)=>this._outputConfiguration.writeErr($);else B=($)=>this._outputConfiguration.writeOut($);return F.write=_.write||B,F.command=this,F}outputHelp(_){let F;if(typeof _==="function")F=_,_=void 0;let B=this._getHelpContext(_);this._getCommandAndAncestors().reverse().forEach((J)=>J.emit("beforeAllHelp",B)),this.emit("beforeHelp",B);let $=this.helpInformation(B);if(F){if($=F($),typeof $!=="string"&&!Buffer.isBuffer($))throw Error("outputHelp callback must return a string or a Buffer")}if(B.write($),this._getHelpOption()?.long)this.emit(this._getHelpOption().long);this.emit("afterHelp",B),this._getCommandAndAncestors().forEach((J)=>J.emit("afterAllHelp",B))}helpOption(_,F){if(typeof _==="boolean"){if(_)this._helpOption=this._helpOption??void 0;else this._helpOption=null;return this}return _=_??"-h, --help",F=F??"display help for command",this._helpOption=this.createOption(_,F),this}_getHelpOption(){if(this._helpOption===void 0)this.helpOption(void 0,void 0);return this._helpOption}addHelpOption(_){return this._helpOption=_,this}help(_){this.outputHelp(_);let F=T.exitCode||0;if(F===0&&_&&typeof _!=="function"&&_.error)F=1;this._exit(F,"commander.help","(outputHelp)")}addHelpText(_,F){let B=["beforeAll","before","after","afterAll"];if(!B.includes(_))throw Error(`Unexpected value for position to addHelpText.
Expecting one of '${B.join("', '")}'`);let $=`${_}Help`;return this.on($,(J)=>{let Z;if(typeof F==="function")Z=F({error:J.error,command:J.command});else Z=F;if(Z)J.write(`${Z}
`)}),this}_outputHelpIfRequested(_){let F=this._getHelpOption();if(F&&_.find(($)=>F.is($)))this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)")}}function a1(_){return _.map((F)=>{if(!F.startsWith("--inspect"))return F;let B,$="127.0.0.1",J="9229",Z;if((Z=F.match(/^(--inspect(-brk)?)$/))!==null)B=Z[1];else if((Z=F.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null)if(B=Z[1],/^\d+$/.test(Z[3]))J=Z[3];else $=Z[3];else if((Z=F.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null)B=Z[1],$=Z[3],J=Z[4];if(B&&J!=="0")return`${B}=${$}:${parseInt(J)+1}`;return F})}_3.Command=_1});var _2=p((J3)=>{var{Argument:r1}=k0(),{Command:F1}=o1(),{CommanderError:B3,InvalidArgumentError:t1}=L0(),{Help:$3}=a0(),{Option:e1}=o0();J3.program=new F1;J3.createCommand=(_)=>new F1(_);J3.createOption=(_,F)=>new e1(_,F);J3.createArgument=(_,F)=>new r1(_,F);J3.Command=F1;J3.Option=e1;J3.Argument=r1;J3.Help=$3;J3.CommanderError=B3;J3.InvalidArgumentError=t1;J3.InvalidOptionArgumentError=t1});var p2=p((tF,g0)=>{function y2(_){return Array.isArray(_)?_:[_]}var Z6=void 0,D1="",P2=" ",N1="\\",Q6=/^\s+$/,X6=/(?:[^\\]|^)\\$/,H6=/^\\!/,G6=/^\\#/,W6=/\r?\n/g,Y6=/^\.{0,2}\/|^\.{1,2}$/,z6=/\/$/,H0="/",v2="node-ignore";if(typeof Symbol<"u")v2=Symbol.for("node-ignore");var f2=v2,G0=(_,F,B)=>{return Object.defineProperty(_,F,{value:B}),B},U6=/([0-z])-([0-z])/g,h2=()=>!1,K6=(_)=>_.replace(U6,(F,B,$)=>B.charCodeAt(0)<=$.charCodeAt(0)?F:D1),L6=(_)=>{let{length:F}=_;return _.slice(0,F-F%2)},A6=[[/^\uFEFF/,()=>D1],[/((?:\\\\)*?)(\\?\s+)$/,(_,F,B)=>F+(B.indexOf("\\")===0?P2:D1)],[/(\\+?)\s/g,(_,F)=>{let{length:B}=F;return F.slice(0,B-B%2)+P2}],[/[\\$.|*+(){^]/g,(_)=>`\\${_}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return!/\/(?!$)/.test(this)?"(?:^|\\/)":"^"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(_,F,B)=>F+6<B.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(_,F,B)=>{let $=B.replace(/\\\*/g,"[^\\/]*");return F+$}],[/\\\\\\(?=[$.|*+(){^])/g,()=>N1],[/\\\\/g,()=>N1],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(_,F,B,$,J)=>F===N1?`\\[${B}${L6($)}${J}`:J==="]"?$.length%2===0?`[${K6(B)}${$}]`:"[]":"[]"],[/(?:[^*])$/,(_)=>/\/$/.test(_)?`${_}$`:`${_}(?=$|\\/$)`]],q6=/(^|\\\/)?\\\*$/,j0="regex",u0="checkRegex",x2="_",N6={[j0](_,F){return`${F?`${F}[^/]+`:"[^/]*"}(?=$|\\/$)`},[u0](_,F){return`${F?`${F}[^/]*`:"[^/]*"}(?=$|\\/$)`}},D6=(_)=>A6.reduce((F,[B,$])=>F.replace(B,$.bind(_)),_),m0=(_)=>typeof _==="string",M6=(_)=>_&&m0(_)&&!Q6.test(_)&&!X6.test(_)&&_.indexOf("#")!==0,j6=(_)=>_.split(W6).filter(Boolean);class u2{constructor(_,F,B,$,J,Z){this.pattern=_,this.mark=F,this.negative=J,G0(this,"body",B),G0(this,"ignoreCase",$),G0(this,"regexPrefix",Z)}get regex(){let _=x2+j0;if(this[_])return this[_];return this._make(j0,_)}get checkRegex(){let _=x2+u0;if(this[_])return this[_];return this._make(u0,_)}_make(_,F){let B=this.regexPrefix.replace(q6,N6[_]),$=this.ignoreCase?new RegExp(B,"i"):new RegExp(B);return G0(this,F,$)}}var R6=({pattern:_,mark:F},B)=>{let $=!1,J=_;if(J.indexOf("!")===0)$=!0,J=J.substr(1);J=J.replace(H6,"!").replace(G6,"#");let Z=D6(J);return new u2(_,F,J,B,$,Z)};class m2{constructor(_){this._ignoreCase=_,this._rules=[]}_add(_){if(_&&_[f2]){this._rules=this._rules.concat(_._rules._rules),this._added=!0;return}if(m0(_))_={pattern:_};if(M6(_.pattern)){let F=R6(_,this._ignoreCase);this._added=!0,this._rules.push(F)}}add(_){return this._added=!1,y2(m0(_)?j6(_):_).forEach(this._add,this),this._added}test(_,F,B){let $=!1,J=!1,Z;this._rules.forEach((X)=>{let{negative:H}=X;if(J===H&&$!==J||H&&!$&&!J&&!F)return;if(!X[B].test(_))return;$=!H,J=H,Z=H?Z6:X});let Q={ignored:$,unignored:J};if(Z)Q.rule=Z;return Q}}var E6=(_,F)=>{throw new F(_)},d=(_,F,B)=>{if(!m0(_))return B(`path must be a string, but got \`${F}\``,TypeError);if(!_)return B("path must not be empty",TypeError);if(d.isNotRelative(_))return B(`path should be a \`path.relative()\`d string, but got "${F}"`,RangeError);return!0},g2=(_)=>Y6.test(_);d.isNotRelative=g2;d.convert=(_)=>_;class d2{constructor({ignorecase:_=!0,ignoreCase:F=_,allowRelativePaths:B=!1}={}){G0(this,f2,!0),this._rules=new m2(F),this._strictPathCheck=!B,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}add(_){if(this._rules.add(_))this._initCache();return this}addPattern(_){return this.add(_)}_test(_,F,B,$){let J=_&&d.convert(_);return d(J,_,this._strictPathCheck?E6:h2),this._t(J,F,B,$)}checkIgnore(_){if(!z6.test(_))return this.test(_);let F=_.split(H0).filter(Boolean);if(F.pop(),F.length){let B=this._t(F.join(H0)+H0,this._testCache,!0,F);if(B.ignored)return B}return this._rules.test(_,!1,u0)}_t(_,F,B,$){if(_ in F)return F[_];if(!$)$=_.split(H0).filter(Boolean);if($.pop(),!$.length)return F[_]=this._rules.test(_,B,j0);let J=this._t($.join(H0)+H0,F,B,$);return F[_]=J.ignored?J:this._rules.test(_,B,j0)}ignores(_){return this._test(_,this._ignoreCache,!1).ignored}createFilter(){return(_)=>!this.ignores(_)}filter(_){return y2(_).filter(this.createFilter())}test(_){return this._test(_,this._testCache,!0)}}var M1=(_)=>new d2(_),T6=(_)=>d(_&&d.convert(_),_,h2),c2=()=>{let _=(B)=>/^\\\\\?\\/.test(B)||/["<>|\u0000-\u001F]+/u.test(B)?B:B.replace(/\\/g,"/");d.convert=_;let F=/^[a-z]:\//i;d.isNotRelative=(B)=>F.test(B)||g2(B)};if(typeof process<"u"&&process.platform==="win32")c2();g0.exports=M1;M1.default=M1;g0.exports.isPathValid=T6;G0(g0.exports,Symbol.for("setupWindows"),c2)});var F2=J0(_2(),1),{program:a6,createCommand:o6,createArgument:r6,createOption:t6,CommanderError:e6,InvalidArgumentError:_5,InvalidOptionArgumentError:F5,Command:O,Argument:B5,Option:$5,Help:J5}=F2.default;var B2=(_=0)=>(F)=>`\x1B[${F+_}m`,$2=(_=0)=>(F)=>`\x1B[${38+_};5;${F}m`,J2=(_=0)=>(F,B,$)=>`\x1B[${38+_};2;${F};${B};${$}m`,R={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Q5=Object.keys(R.modifier),A3=Object.keys(R.color),q3=Object.keys(R.bgColor),X5=[...A3,...q3];function N3(){let _=new Map;for(let[F,B]of Object.entries(R)){for(let[$,J]of Object.entries(B))R[$]={open:`\x1B[${J[0]}m`,close:`\x1B[${J[1]}m`},B[$]=R[$],_.set(J[0],J[1]);Object.defineProperty(R,F,{value:B,enumerable:!1})}return Object.defineProperty(R,"codes",{value:_,enumerable:!1}),R.color.close="\x1B[39m",R.bgColor.close="\x1B[49m",R.color.ansi=B2(),R.color.ansi256=$2(),R.color.ansi16m=J2(),R.bgColor.ansi=B2(10),R.bgColor.ansi256=$2(10),R.bgColor.ansi16m=J2(10),Object.defineProperties(R,{rgbToAnsi256:{value(F,B,$){if(F===B&&B===$){if(F<8)return 16;if(F>248)return 231;return Math.round((F-8)/247*24)+232}return 16+36*Math.round(F/255*5)+6*Math.round(B/255*5)+Math.round($/255*5)},enumerable:!1},hexToRgb:{value(F){let B=/[a-f\d]{6}|[a-f\d]{3}/i.exec(F.toString(16));if(!B)return[0,0,0];let[$]=B;if($.length===3)$=[...$].map((Z)=>Z+Z).join("");let J=Number.parseInt($,16);return[J>>16&255,J>>8&255,J&255]},enumerable:!1},hexToAnsi256:{value:(F)=>R.rgbToAnsi256(...R.hexToRgb(F)),enumerable:!1},ansi256ToAnsi:{value(F){if(F<8)return 30+F;if(F<16)return 90+(F-8);let B,$,J;if(F>=232)B=((F-232)*10+8)/255,$=B,J=B;else{F-=16;let X=F%36;B=Math.floor(F/36)/5,$=Math.floor(X/6)/5,J=X%6/5}let Z=Math.max(B,$,J)*2;if(Z===0)return 30;let Q=30+(Math.round(J)<<2|Math.round($)<<1|Math.round(B));if(Z===2)Q+=60;return Q},enumerable:!1},rgbToAnsi:{value:(F,B,$)=>R.ansi256ToAnsi(R.rgbToAnsi256(F,B,$)),enumerable:!1},hexToAnsi:{value:(F)=>R.ansi256ToAnsi(R.hexToAnsi256(F)),enumerable:!1}}),R}var D3=N3(),v=D3;import B1 from"node:process";import M3 from"node:os";import Z2 from"node:tty";function x(_,F=globalThis.Deno?globalThis.Deno.args:B1.argv){let B=_.startsWith("-")?"":_.length===1?"-":"--",$=F.indexOf(B+_),J=F.indexOf("--");return $!==-1&&(J===-1||$<J)}var{env:E}=B1,b0;if(x("no-color")||x("no-colors")||x("color=false")||x("color=never"))b0=0;else if(x("color")||x("colors")||x("color=true")||x("color=always"))b0=1;function j3(){if("FORCE_COLOR"in E){if(E.FORCE_COLOR==="true")return 1;if(E.FORCE_COLOR==="false")return 0;return E.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(E.FORCE_COLOR,10),3)}}function R3(_){if(_===0)return!1;return{level:_,hasBasic:!0,has256:_>=2,has16m:_>=3}}function E3(_,{streamIsTTY:F,sniffFlags:B=!0}={}){let $=j3();if($!==void 0)b0=$;let J=B?b0:$;if(J===0)return 0;if(B){if(x("color=16m")||x("color=full")||x("color=truecolor"))return 3;if(x("color=256"))return 2}if("TF_BUILD"in E&&"AGENT_NAME"in E)return 1;if(_&&!F&&J===void 0)return 0;let Z=J||0;if(E.TERM==="dumb")return Z;if(B1.platform==="win32"){let Q=M3.release().split(".");if(Number(Q[0])>=10&&Number(Q[2])>=10586)return Number(Q[2])>=14931?3:2;return 1}if("CI"in E){if(["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some((Q)=>(Q in E)))return 3;if(["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some((Q)=>(Q in E))||E.CI_NAME==="codeship")return 1;return Z}if("TEAMCITY_VERSION"in E)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(E.TEAMCITY_VERSION)?1:0;if(E.COLORTERM==="truecolor")return 3;if(E.TERM==="xterm-kitty")return 3;if(E.TERM==="xterm-ghostty")return 3;if(E.TERM==="wezterm")return 3;if("TERM_PROGRAM"in E){let Q=Number.parseInt((E.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(E.TERM_PROGRAM){case"iTerm.app":return Q>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(E.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(E.TERM))return 1;if("COLORTERM"in E)return 1;return Z}function Q2(_,F={}){let B=E3(_,{streamIsTTY:_&&_.isTTY,...F});return R3(B)}var T3={stdout:Q2({isTTY:Z2.isatty(1)}),stderr:Q2({isTTY:Z2.isatty(2)})},X2=T3;function H2(_,F,B){let $=_.indexOf(F);if($===-1)return _;let J=F.length,Z=0,Q="";do Q+=_.slice(Z,$)+F+B,Z=$+J,$=_.indexOf(F,Z);while($!==-1);return Q+=_.slice(Z),Q}function G2(_,F,B,$){let J=0,Z="";do{let Q=_[$-1]==="\r";Z+=_.slice(J,Q?$-1:$)+F+(Q?`\r
`:`
`)+B,J=$+1,$=_.indexOf(`
`,J)}while($!==-1);return Z+=_.slice(J),Z}var{stdout:W2,stderr:Y2}=X2,$1=Symbol("GENERATOR"),Z0=Symbol("STYLER"),A0=Symbol("IS_EMPTY"),z2=["ansi","ansi","ansi256","ansi16m"],Q0=Object.create(null),O3=(_,F={})=>{if(F.level&&!(Number.isInteger(F.level)&&F.level>=0&&F.level<=3))throw Error("The `level` option should be an integer from 0 to 3");let B=W2?W2.level:0;_.level=F.level===void 0?B:F.level};var V3=(_)=>{let F=(...B)=>B.join(" ");return O3(F,_),Object.setPrototypeOf(F,q0.prototype),F};function q0(_){return V3(_)}Object.setPrototypeOf(q0.prototype,Function.prototype);for(let[_,F]of Object.entries(v))Q0[_]={get(){let B=C0(this,Z1(F.open,F.close,this[Z0]),this[A0]);return Object.defineProperty(this,_,{value:B}),B}};Q0.visible={get(){let _=C0(this,this[Z0],!0);return Object.defineProperty(this,"visible",{value:_}),_}};var J1=(_,F,B,...$)=>{if(_==="rgb"){if(F==="ansi16m")return v[B].ansi16m(...$);if(F==="ansi256")return v[B].ansi256(v.rgbToAnsi256(...$));return v[B].ansi(v.rgbToAnsi(...$))}if(_==="hex")return J1("rgb",F,B,...v.hexToRgb(...$));return v[B][_](...$)},w3=["rgb","hex","ansi256"];for(let _ of w3){Q0[_]={get(){let{level:B}=this;return function(...$){let J=Z1(J1(_,z2[B],"color",...$),v.color.close,this[Z0]);return C0(this,J,this[A0])}}};let F="bg"+_[0].toUpperCase()+_.slice(1);Q0[F]={get(){let{level:B}=this;return function(...$){let J=Z1(J1(_,z2[B],"bgColor",...$),v.bgColor.close,this[Z0]);return C0(this,J,this[A0])}}}}var I3=Object.defineProperties(()=>{},{...Q0,level:{enumerable:!0,get(){return this[$1].level},set(_){this[$1].level=_}}}),Z1=(_,F,B)=>{let $,J;if(B===void 0)$=_,J=F;else $=B.openAll+_,J=F+B.closeAll;return{open:_,close:F,openAll:$,closeAll:J,parent:B}},C0=(_,F,B)=>{let $=(...J)=>S3($,J.length===1?""+J[0]:J.join(" "));return Object.setPrototypeOf($,I3),$[$1]=_,$[Z0]=F,$[A0]=B,$},S3=(_,F)=>{if(_.level<=0||!F)return _[A0]?"":F;let B=_[Z0];if(B===void 0)return F;let{openAll:$,closeAll:J}=B;if(F.includes("\x1B"))while(B!==void 0)F=H2(F,B.close,B.open),B=B.parent;let Z=F.indexOf(`
`);if(Z!==-1)F=G2(F,J,$,Z);return $+F+J};Object.defineProperties(q0.prototype,Q0);var k3=q0(),q5=q0({level:Y2?Y2.level:0});var W=k3;import h0 from"node:process";import j2 from"node:process";import y0 from"node:process";var b3=(_,F,B,$)=>{if(B==="length"||B==="prototype")return;if(B==="arguments"||B==="caller")return;let J=Object.getOwnPropertyDescriptor(_,B),Z=Object.getOwnPropertyDescriptor(F,B);if(!C3(J,Z)&&$)return;Object.defineProperty(_,B,Z)},C3=function(_,F){return _===void 0||_.configurable||_.writable===F.writable&&_.enumerable===F.enumerable&&_.configurable===F.configurable&&(_.writable||_.value===F.value)},P3=(_,F)=>{let B=Object.getPrototypeOf(F);if(B===Object.getPrototypeOf(_))return;Object.setPrototypeOf(_,B)},x3=(_,F)=>`/* Wrapped ${_}*/
${F}`,y3=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),v3=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),f3=(_,F,B)=>{let $=B===""?"":`with ${B.trim()}() `,J=x3.bind(null,$,F.toString());Object.defineProperty(J,"name",v3);let{writable:Z,enumerable:Q,configurable:X}=y3;Object.defineProperty(_,"toString",{value:J,writable:Z,enumerable:Q,configurable:X})};function Q1(_,F,{ignoreNonConfigurable:B=!1}={}){let{name:$}=_;for(let J of Reflect.ownKeys(F))b3(_,F,J,B);return P3(_,F),f3(_,F,$),_}var P0=new WeakMap,U2=(_,F={})=>{if(typeof _!=="function")throw TypeError("Expected a function");let B,$=0,J=_.displayName||_.name||"<anonymous>",Z=function(...Q){if(P0.set(Z,++$),$===1)B=_.apply(this,Q),_=void 0;else if(F.throw===!0)throw Error(`Function \`${J}\` can only be called once`);return B};return Q1(Z,_),P0.set(Z,$),Z};U2.callCount=(_)=>{if(!P0.has(_))throw Error(`The given function \`${_.name}\` is not wrapped by the \`onetime\` package`);return P0.get(_)};var K2=U2;var o=[];o.push("SIGHUP","SIGINT","SIGTERM");if(process.platform!=="win32")o.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");if(process.platform==="linux")o.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var x0=(_)=>!!_&&typeof _==="object"&&typeof _.removeListener==="function"&&typeof _.emit==="function"&&typeof _.reallyExit==="function"&&typeof _.listeners==="function"&&typeof _.kill==="function"&&typeof _.pid==="number"&&typeof _.on==="function",X1=Symbol.for("signal-exit emitter"),H1=globalThis,h3=Object.defineProperty.bind(Object);class L2{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(H1[X1])return H1[X1];h3(H1,X1,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(_,F){this.listeners[_].push(F)}removeListener(_,F){let B=this.listeners[_],$=B.indexOf(F);if($===-1)return;if($===0&&B.length===1)B.length=0;else B.splice($,1)}emit(_,F,B){if(this.emitted[_])return!1;this.emitted[_]=!0;let $=!1;for(let J of this.listeners[_])$=J(F,B)===!0||$;if(_==="exit")$=this.emit("afterExit",F,B)||$;return $}}class W1{}var u3=(_)=>{return{onExit(F,B){return _.onExit(F,B)},load(){return _.load()},unload(){return _.unload()}}};class A2 extends W1{onExit(){return()=>{}}load(){}unload(){}}class q2 extends W1{#Z=G1.platform==="win32"?"SIGINT":"SIGHUP";#$=new L2;#_;#J;#U;#Y={};#F=!1;constructor(_){super();this.#_=_,this.#Y={};for(let F of o)this.#Y[F]=()=>{let B=this.#_.listeners(F),{count:$}=this.#$,J=_;if(typeof J.__signal_exit_emitter__==="object"&&typeof J.__signal_exit_emitter__.count==="number")$+=J.__signal_exit_emitter__.count;if(B.length===$){this.unload();let Z=this.#$.emit("exit",null,F),Q=F==="SIGHUP"?this.#Z:F;if(!Z)_.kill(_.pid,Q)}};this.#U=_.reallyExit,this.#J=_.emit}onExit(_,F){if(!x0(this.#_))return()=>{};if(this.#F===!1)this.load();let B=F?.alwaysLast?"afterExit":"exit";return this.#$.on(B,_),()=>{if(this.#$.removeListener(B,_),this.#$.listeners.exit.length===0&&this.#$.listeners.afterExit.length===0)this.unload()}}load(){if(this.#F)return;this.#F=!0,this.#$.count+=1;for(let _ of o)try{let F=this.#Y[_];if(F)this.#_.on(_,F)}catch(F){}this.#_.emit=(_,...F)=>{return this.#B(_,...F)},this.#_.reallyExit=(_)=>{return this.#Q(_)}}unload(){if(!this.#F)return;this.#F=!1,o.forEach((_)=>{let F=this.#Y[_];if(!F)throw Error("Listener not defined for signal: "+_);try{this.#_.removeListener(_,F)}catch(B){}}),this.#_.emit=this.#J,this.#_.reallyExit=this.#U,this.#$.count-=1}#Q(_){if(!x0(this.#_))return 0;return this.#_.exitCode=_||0,this.#$.emit("exit",this.#_.exitCode,null),this.#U.call(this.#_,this.#_.exitCode)}#B(_,...F){let B=this.#J;if(_==="exit"&&x0(this.#_)){if(typeof F[0]==="number")this.#_.exitCode=F[0];let $=B.call(this.#_,_,...F);return this.#$.emit("exit",this.#_.exitCode,null),$}else return B.call(this.#_,_,...F)}}var G1=globalThis.process,{onExit:N2,load:T5,unload:O5}=u3(x0(G1)?new q2(G1):new A2);var D2=y0.stderr.isTTY?y0.stderr:y0.stdout.isTTY?y0.stdout:void 0,m3=D2?K2(()=>{N2(()=>{D2.write("\x1B[?25h")},{alwaysLast:!0})}):()=>{},M2=m3;var v0=!1,X0={};X0.show=(_=j2.stderr)=>{if(!_.isTTY)return;v0=!1,_.write("\x1B[?25h")};X0.hide=(_=j2.stderr)=>{if(!_.isTTY)return;M2(),v0=!0,_.write("\x1B[?25l")};X0.toggle=(_,F)=>{if(_!==void 0)v0=_;if(v0)X0.show(F);else X0.hide(F)};var Y1=X0;var z1={dots:{interval:80,frames:["⠋","⠙","⠹","⠸","⠼","⠴","⠦","⠧","⠇","⠏"]},dots2:{interval:80,frames:["⣾","⣽","⣻","⢿","⡿","⣟","⣯","⣷"]},dots3:{interval:80,frames:["⠋","⠙","⠚","⠞","⠖","⠦","⠴","⠲","⠳","⠓"]},dots4:{interval:80,frames:["⠄","⠆","⠇","⠋","⠙","⠸","⠰","⠠","⠰","⠸","⠙","⠋","⠇","⠆"]},dots5:{interval:80,frames:["⠋","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋"]},dots6:{interval:80,frames:["⠁","⠉","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠤","⠄","⠄","⠤","⠴","⠲","⠒","⠂","⠂","⠒","⠚","⠙","⠉","⠁"]},dots7:{interval:80,frames:["⠈","⠉","⠋","⠓","⠒","⠐","⠐","⠒","⠖","⠦","⠤","⠠","⠠","⠤","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋","⠉","⠈"]},dots8:{interval:80,frames:["⠁","⠁","⠉","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠤","⠄","⠄","⠤","⠠","⠠","⠤","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋","⠉","⠈","⠈"]},dots9:{interval:80,frames:["⢹","⢺","⢼","⣸","⣇","⡧","⡗","⡏"]},dots10:{interval:80,frames:["⢄","⢂","⢁","⡁","⡈","⡐","⡠"]},dots11:{interval:100,frames:["⠁","⠂","⠄","⡀","⢀","⠠","⠐","⠈"]},dots12:{interval:80,frames:["⢀⠀","⡀⠀","⠄⠀","⢂⠀","⡂⠀","⠅⠀","⢃⠀","⡃⠀","⠍⠀","⢋⠀","⡋⠀","⠍⠁","⢋⠁","⡋⠁","⠍⠉","⠋⠉","⠋⠉","⠉⠙","⠉⠙","⠉⠩","⠈⢙","⠈⡙","⢈⠩","⡀⢙","⠄⡙","⢂⠩","⡂⢘","⠅⡘","⢃⠨","⡃⢐","⠍⡐","⢋⠠","⡋⢀","⠍⡁","⢋⠁","⡋⠁","⠍⠉","⠋⠉","⠋⠉","⠉⠙","⠉⠙","⠉⠩","⠈⢙","⠈⡙","⠈⠩","⠀⢙","⠀⡙","⠀⠩","⠀⢘","⠀⡘","⠀⠨","⠀⢐","⠀⡐","⠀⠠","⠀⢀","⠀⡀"]},dots13:{interval:80,frames:["⣼","⣹","⢻","⠿","⡟","⣏","⣧","⣶"]},dots14:{interval:80,frames:["⠉⠉","⠈⠙","⠀⠹","⠀⢸","⠀⣰","⢀⣠","⣀⣀","⣄⡀","⣆⠀","⡇⠀","⠏⠀","⠋⠁"]},dots8Bit:{interval:80,frames:["⠀","⠁","⠂","⠃","⠄","⠅","⠆","⠇","⡀","⡁","⡂","⡃","⡄","⡅","⡆","⡇","⠈","⠉","⠊","⠋","⠌","⠍","⠎","⠏","⡈","⡉","⡊","⡋","⡌","⡍","⡎","⡏","⠐","⠑","⠒","⠓","⠔","⠕","⠖","⠗","⡐","⡑","⡒","⡓","⡔","⡕","⡖","⡗","⠘","⠙","⠚","⠛","⠜","⠝","⠞","⠟","⡘","⡙","⡚","⡛","⡜","⡝","⡞","⡟","⠠","⠡","⠢","⠣","⠤","⠥","⠦","⠧","⡠","⡡","⡢","⡣","⡤","⡥","⡦","⡧","⠨","⠩","⠪","⠫","⠬","⠭","⠮","⠯","⡨","⡩","⡪","⡫","⡬","⡭","⡮","⡯","⠰","⠱","⠲","⠳","⠴","⠵","⠶","⠷","⡰","⡱","⡲","⡳","⡴","⡵","⡶","⡷","⠸","⠹","⠺","⠻","⠼","⠽","⠾","⠿","⡸","⡹","⡺","⡻","⡼","⡽","⡾","⡿","⢀","⢁","⢂","⢃","⢄","⢅","⢆","⢇","⣀","⣁","⣂","⣃","⣄","⣅","⣆","⣇","⢈","⢉","⢊","⢋","⢌","⢍","⢎","⢏","⣈","⣉","⣊","⣋","⣌","⣍","⣎","⣏","⢐","⢑","⢒","⢓","⢔","⢕","⢖","⢗","⣐","⣑","⣒","⣓","⣔","⣕","⣖","⣗","⢘","⢙","⢚","⢛","⢜","⢝","⢞","⢟","⣘","⣙","⣚","⣛","⣜","⣝","⣞","⣟","⢠","⢡","⢢","⢣","⢤","⢥","⢦","⢧","⣠","⣡","⣢","⣣","⣤","⣥","⣦","⣧","⢨","⢩","⢪","⢫","⢬","⢭","⢮","⢯","⣨","⣩","⣪","⣫","⣬","⣭","⣮","⣯","⢰","⢱","⢲","⢳","⢴","⢵","⢶","⢷","⣰","⣱","⣲","⣳","⣴","⣵","⣶","⣷","⢸","⢹","⢺","⢻","⢼","⢽","⢾","⢿","⣸","⣹","⣺","⣻","⣼","⣽","⣾","⣿"]},dotsCircle:{interval:80,frames:["⢎ ","⠎⠁","⠊⠑","⠈⠱"," ⡱","⢀⡰","⢄⡠","⢆⡀"]},sand:{interval:80,frames:["⠁","⠂","⠄","⡀","⡈","⡐","⡠","⣀","⣁","⣂","⣄","⣌","⣔","⣤","⣥","⣦","⣮","⣶","⣷","⣿","⡿","⠿","⢟","⠟","⡛","⠛","⠫","⢋","⠋","⠍","⡉","⠉","⠑","⠡","⢁"]},line:{interval:130,frames:["-","\\","|","/"]},line2:{interval:100,frames:["⠂","-","–","—","–","-"]},rollingLine:{interval:80,frames:["/  "," - "," \\ ","  |","  |"," \\ "," - ","/  "]},pipe:{interval:100,frames:["┤","┘","┴","└","├","┌","┬","┐"]},simpleDots:{interval:400,frames:[".  ",".. ","...","   "]},simpleDotsScrolling:{interval:200,frames:[".  ",".. ","..."," ..","  .","   "]},star:{interval:70,frames:["✶","✸","✹","✺","✹","✷"]},star2:{interval:80,frames:["+","x","*"]},flip:{interval:70,frames:["_","_","_","-","`","`","'","´","-","_","_","_"]},hamburger:{interval:100,frames:["☱","☲","☴"]},growVertical:{interval:120,frames:["▁","▃","▄","▅","▆","▇","▆","▅","▄","▃"]},growHorizontal:{interval:120,frames:["▏","▎","▍","▌","▋","▊","▉","▊","▋","▌","▍","▎"]},balloon:{interval:140,frames:[" ",".","o","O","@","*"," "]},balloon2:{interval:120,frames:[".","o","O","°","O","o","."]},noise:{interval:100,frames:["▓","▒","░"]},bounce:{interval:120,frames:["⠁","⠂","⠄","⠂"]},boxBounce:{interval:120,frames:["▖","▘","▝","▗"]},boxBounce2:{interval:100,frames:["▌","▀","▐","▄"]},triangle:{interval:50,frames:["◢","◣","◤","◥"]},binary:{interval:80,frames:["010010","001100","100101","111010","111101","010111","101011","111000","110011","110101"]},arc:{interval:100,frames:["◜","◠","◝","◞","◡","◟"]},circle:{interval:120,frames:["◡","⊙","◠"]},squareCorners:{interval:180,frames:["◰","◳","◲","◱"]},circleQuarters:{interval:120,frames:["◴","◷","◶","◵"]},circleHalves:{interval:50,frames:["◐","◓","◑","◒"]},squish:{interval:100,frames:["╫","╪"]},toggle:{interval:250,frames:["⊶","⊷"]},toggle2:{interval:80,frames:["▫","▪"]},toggle3:{interval:120,frames:["□","■"]},toggle4:{interval:100,frames:["■","□","▪","▫"]},toggle5:{interval:100,frames:["▮","▯"]},toggle6:{interval:300,frames:["ဝ","၀"]},toggle7:{interval:80,frames:["⦾","⦿"]},toggle8:{interval:100,frames:["◍","◌"]},toggle9:{interval:100,frames:["◉","◎"]},toggle10:{interval:100,frames:["㊂","㊀","㊁"]},toggle11:{interval:50,frames:["⧇","⧆"]},toggle12:{interval:120,frames:["☗","☖"]},toggle13:{interval:80,frames:["=","*","-"]},arrow:{interval:100,frames:["←","↖","↑","↗","→","↘","↓","↙"]},arrow2:{interval:80,frames:["⬆️ ","↗️ ","➡️ ","↘️ ","⬇️ ","↙️ ","⬅️ ","↖️ "]},arrow3:{interval:120,frames:["▹▹▹▹▹","▸▹▹▹▹","▹▸▹▹▹","▹▹▸▹▹","▹▹▹▸▹","▹▹▹▹▸"]},bouncingBar:{interval:80,frames:["[    ]","[=   ]","[==  ]","[=== ]","[====]","[ ===]","[  ==]","[   =]","[    ]","[   =]","[  ==]","[ ===]","[====]","[=== ]","[==  ]","[=   ]"]},bouncingBall:{interval:80,frames:["( ●    )","(  ●   )","(   ●  )","(    ● )","(     ●)","(    ● )","(   ●  )","(  ●   )","( ●    )","(●     )"]},smiley:{interval:200,frames:["😄 ","😝 "]},monkey:{interval:300,frames:["🙈 ","🙈 ","🙉 ","🙊 "]},hearts:{interval:100,frames:["💛 ","💙 ","💜 ","💚 ","💗 "]},clock:{interval:100,frames:["🕛 ","🕐 ","🕑 ","🕒 ","🕓 ","🕔 ","🕕 ","🕖 ","🕗 ","🕘 ","🕙 ","🕚 "]},earth:{interval:180,frames:["🌍 ","🌎 ","🌏 "]},material:{interval:17,frames:["█▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","██▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","███▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","████▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","██████▁▁▁▁▁▁▁▁▁▁▁▁▁▁","██████▁▁▁▁▁▁▁▁▁▁▁▁▁▁","███████▁▁▁▁▁▁▁▁▁▁▁▁▁","████████▁▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","██████████▁▁▁▁▁▁▁▁▁▁","███████████▁▁▁▁▁▁▁▁▁","█████████████▁▁▁▁▁▁▁","██████████████▁▁▁▁▁▁","██████████████▁▁▁▁▁▁","▁██████████████▁▁▁▁▁","▁██████████████▁▁▁▁▁","▁██████████████▁▁▁▁▁","▁▁██████████████▁▁▁▁","▁▁▁██████████████▁▁▁","▁▁▁▁█████████████▁▁▁","▁▁▁▁██████████████▁▁","▁▁▁▁██████████████▁▁","▁▁▁▁▁██████████████▁","▁▁▁▁▁██████████████▁","▁▁▁▁▁██████████████▁","▁▁▁▁▁▁██████████████","▁▁▁▁▁▁██████████████","▁▁▁▁▁▁▁█████████████","▁▁▁▁▁▁▁█████████████","▁▁▁▁▁▁▁▁████████████","▁▁▁▁▁▁▁▁████████████","▁▁▁▁▁▁▁▁▁███████████","▁▁▁▁▁▁▁▁▁███████████","▁▁▁▁▁▁▁▁▁▁██████████","▁▁▁▁▁▁▁▁▁▁██████████","▁▁▁▁▁▁▁▁▁▁▁▁████████","▁▁▁▁▁▁▁▁▁▁▁▁▁███████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁██████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█████","█▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁████","██▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁███","██▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁███","███▁▁▁▁▁▁▁▁▁▁▁▁▁▁███","████▁▁▁▁▁▁▁▁▁▁▁▁▁▁██","█████▁▁▁▁▁▁▁▁▁▁▁▁▁▁█","█████▁▁▁▁▁▁▁▁▁▁▁▁▁▁█","██████▁▁▁▁▁▁▁▁▁▁▁▁▁█","████████▁▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","█████████▁▁▁▁▁▁▁▁▁▁▁","███████████▁▁▁▁▁▁▁▁▁","████████████▁▁▁▁▁▁▁▁","████████████▁▁▁▁▁▁▁▁","██████████████▁▁▁▁▁▁","██████████████▁▁▁▁▁▁","▁██████████████▁▁▁▁▁","▁██████████████▁▁▁▁▁","▁▁▁█████████████▁▁▁▁","▁▁▁▁▁████████████▁▁▁","▁▁▁▁▁████████████▁▁▁","▁▁▁▁▁▁███████████▁▁▁","▁▁▁▁▁▁▁▁█████████▁▁▁","▁▁▁▁▁▁▁▁█████████▁▁▁","▁▁▁▁▁▁▁▁▁█████████▁▁","▁▁▁▁▁▁▁▁▁█████████▁▁","▁▁▁▁▁▁▁▁▁▁█████████▁","▁▁▁▁▁▁▁▁▁▁▁████████▁","▁▁▁▁▁▁▁▁▁▁▁████████▁","▁▁▁▁▁▁▁▁▁▁▁▁███████▁","▁▁▁▁▁▁▁▁▁▁▁▁███████▁","▁▁▁▁▁▁▁▁▁▁▁▁▁███████","▁▁▁▁▁▁▁▁▁▁▁▁▁███████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁████","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁███","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁███","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁██","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁██","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁██","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁█","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁","▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁▁"]},moon:{interval:80,frames:["🌑 ","🌒 ","🌓 ","🌔 ","🌕 ","🌖 ","🌗 ","🌘 "]},runner:{interval:140,frames:["🚶 ","🏃 "]},pong:{interval:80,frames:["▐⠂       ▌","▐⠈       ▌","▐ ⠂      ▌","▐ ⠠      ▌","▐  ⡀     ▌","▐  ⠠     ▌","▐   ⠂    ▌","▐   ⠈    ▌","▐    ⠂   ▌","▐    ⠠   ▌","▐     ⡀  ▌","▐     ⠠  ▌","▐      ⠂ ▌","▐      ⠈ ▌","▐       ⠂▌","▐       ⠠▌","▐       ⡀▌","▐      ⠠ ▌","▐      ⠂ ▌","▐     ⠈  ▌","▐     ⠂  ▌","▐    ⠠   ▌","▐    ⡀   ▌","▐   ⠠    ▌","▐   ⠂    ▌","▐  ⠈     ▌","▐  ⠂     ▌","▐ ⠠      ▌","▐ ⡀      ▌","▐⠠       ▌"]},shark:{interval:120,frames:["▐|\\____________▌","▐_|\\___________▌","▐__|\\__________▌","▐___|\\_________▌","▐____|\\________▌","▐_____|\\_______▌","▐______|\\______▌","▐_______|\\_____▌","▐________|\\____▌","▐_________|\\___▌","▐__________|\\__▌","▐___________|\\_▌","▐____________|\\▌","▐____________/|▌","▐___________/|_▌","▐__________/|__▌","▐_________/|___▌","▐________/|____▌","▐_______/|_____▌","▐______/|______▌","▐_____/|_______▌","▐____/|________▌","▐___/|_________▌","▐__/|__________▌","▐_/|___________▌","▐/|____________▌"]},dqpb:{interval:100,frames:["d","q","p","b"]},weather:{interval:100,frames:["☀️ ","☀️ ","☀️ ","🌤 ","⛅️ ","🌥 ","☁️ ","🌧 ","🌨 ","🌧 ","🌨 ","🌧 ","🌨 ","⛈ ","🌨 ","🌧 ","🌨 ","☁️ ","🌥 ","⛅️ ","🌤 ","☀️ ","☀️ "]},christmas:{interval:400,frames:["🌲","🎄"]},grenade:{interval:80,frames:["،  ","′  "," ´ "," ‾ ","  ⸌","  ⸊","  |","  ⁎","  ⁕"," ෴ ","  ⁓","   ","   ","   "]},point:{interval:125,frames:["∙∙∙","●∙∙","∙●∙","∙∙●","∙∙∙"]},layer:{interval:150,frames:["-","=","≡"]},betaWave:{interval:80,frames:["ρββββββ","βρβββββ","ββρββββ","βββρβββ","ββββρββ","βββββρβ","ββββββρ"]},fingerDance:{interval:160,frames:["🤘 ","🤟 ","🖖 ","✋ ","🤚 ","👆 "]},fistBump:{interval:80,frames:["🤜　　　　🤛 ","🤜　　　　🤛 ","🤜　　　　🤛 ","　🤜　　🤛　 ","　　🤜🤛　　 ","　🤜✨🤛　　 ","🤜　✨　🤛　 "]},soccerHeader:{interval:80,frames:[" 🧑⚽️       🧑 ","🧑  ⚽️      🧑 ","🧑   ⚽️     🧑 ","🧑    ⚽️    🧑 ","🧑     ⚽️   🧑 ","🧑      ⚽️  🧑 ","🧑       ⚽️🧑  ","🧑      ⚽️  🧑 ","🧑     ⚽️   🧑 ","🧑    ⚽️    🧑 ","🧑   ⚽️     🧑 ","🧑  ⚽️      🧑 "]},mindblown:{interval:160,frames:["😐 ","😐 ","😮 ","😮 ","😦 ","😦 ","😧 ","😧 ","🤯 ","💥 ","✨ ","　 ","　 ","　 "]},speaker:{interval:160,frames:["🔈 ","🔉 ","🔊 ","🔉 "]},orangePulse:{interval:100,frames:["🔸 ","🔶 ","🟠 ","🟠 ","🔶 "]},bluePulse:{interval:100,frames:["🔹 ","🔷 ","🔵 ","🔵 ","🔷 "]},orangeBluePulse:{interval:100,frames:["🔸 ","🔶 ","🟠 ","🟠 ","🔶 ","🔹 ","🔷 ","🔵 ","🔵 ","🔷 "]},timeTravel:{interval:100,frames:["🕛 ","🕚 ","🕙 ","🕘 ","🕗 ","🕖 ","🕕 ","🕔 ","🕓 ","🕒 ","🕑 ","🕐 "]},aesthetic:{interval:80,frames:["▰▱▱▱▱▱▱","▰▰▱▱▱▱▱","▰▰▰▱▱▱▱","▰▰▰▰▱▱▱","▰▰▰▰▰▱▱","▰▰▰▰▰▰▱","▰▰▰▰▰▰▰","▰▱▱▱▱▱▱"]},dwarfFortress:{interval:80,frames:[" ██████£££  ","☺██████£££  ","☺██████£££  ","☺▓█████£££  ","☺▓█████£££  ","☺▒█████£££  ","☺▒█████£££  ","☺░█████£££  ","☺░█████£££  ","☺ █████£££  "," ☺█████£££  "," ☺█████£££  "," ☺▓████£££  "," ☺▓████£££  "," ☺▒████£££  "," ☺▒████£££  "," ☺░████£££  "," ☺░████£££  "," ☺ ████£££  ","  ☺████£££  ","  ☺████£££  ","  ☺▓███£££  ","  ☺▓███£££  ","  ☺▒███£££  ","  ☺▒███£££  ","  ☺░███£££  ","  ☺░███£££  ","  ☺ ███£££  ","   ☺███£££  ","   ☺███£££  ","   ☺▓██£££  ","   ☺▓██£££  ","   ☺▒██£££  ","   ☺▒██£££  ","   ☺░██£££  ","   ☺░██£££  ","   ☺ ██£££  ","    ☺██£££  ","    ☺██£££  ","    ☺▓█£££  ","    ☺▓█£££  ","    ☺▒█£££  ","    ☺▒█£££  ","    ☺░█£££  ","    ☺░█£££  ","    ☺ █£££  ","     ☺█£££  ","     ☺█£££  ","     ☺▓£££  ","     ☺▓£££  ","     ☺▒£££  ","     ☺▒£££  ","     ☺░£££  ","     ☺░£££  ","     ☺ £££  ","      ☺£££  ","      ☺£££  ","      ☺▓££  ","      ☺▓££  ","      ☺▒££  ","      ☺▒££  ","      ☺░££  ","      ☺░££  ","      ☺ ££  ","       ☺££  ","       ☺££  ","       ☺▓£  ","       ☺▓£  ","       ☺▒£  ","       ☺▒£  ","       ☺░£  ","       ☺░£  ","       ☺ £  ","        ☺£  ","        ☺£  ","        ☺▓  ","        ☺▓  ","        ☺▒  ","        ☺▒  ","        ☺░  ","        ☺░  ","        ☺   ","        ☺  &","        ☺ ☼&","       ☺ ☼ &","       ☺☼  &","      ☺☼  & ","      ‼   & ","     ☺   &  ","    ‼    &  ","   ☺    &   ","  ‼     &   "," ☺     &    ","‼      &    ","      &     ","      &     ","     &   ░  ","     &   ▒  ","    &    ▓  ","    &    £  ","   &    ░£  ","   &    ▒£  ","  &     ▓£  ","  &     ££  "," &     ░££  "," &     ▒££  ","&      ▓££  ","&      £££  ","      ░£££  ","      ▒£££  ","      ▓£££  ","      █£££  ","     ░█£££  ","     ▒█£££  ","     ▓█£££  ","     ██£££  ","    ░██£££  ","    ▒██£££  ","    ▓██£££  ","    ███£££  ","   ░███£££  ","   ▒███£££  ","   ▓███£££  ","   ████£££  ","  ░████£££  ","  ▒████£££  ","  ▓████£££  ","  █████£££  "," ░█████£££  "," ▒█████£££  "," ▓█████£££  "," ██████£££  "," ██████£££  "]}};var N0=z1,v5=Object.keys(z1);var r={};w2(r,{warning:()=>i3,success:()=>l3,info:()=>p3,error:()=>n3});import d3 from"node:tty";var c3=d3?.WriteStream?.prototype?.hasColors?.()??!1,L=(_,F)=>{if(!c3)return(J)=>J;let B=`\x1B[${_}m`,$=`\x1B[${F}m`;return(J)=>{let Z=J+"",Q=Z.indexOf($);if(Q===-1)return B+Z+$;let X=B,H=0,Y=(F===22?$:"")+B;while(Q!==-1)X+=Z.slice(H,Q)+Y,H=Q+$.length,Q=Z.indexOf($,H);return X+=Z.slice(H)+$,X}},u5=L(0,0),m5=L(1,22),g5=L(2,22),d5=L(3,23),c5=L(4,24),p5=L(53,55),l5=L(7,27),i5=L(8,28),n5=L(9,29),s5=L(30,39),R2=L(31,39),E2=L(32,39),T2=L(33,39),O2=L(34,39),a5=L(35,39),o5=L(36,39),r5=L(37,39),t5=L(90,39),e5=L(40,49),_F=L(41,49),FF=L(42,49),BF=L(43,49),$F=L(44,49),JF=L(45,49),ZF=L(46,49),QF=L(47,49),XF=L(100,49),HF=L(91,39),GF=L(92,39),WF=L(93,39),YF=L(94,39),zF=L(95,39),UF=L(96,39),KF=L(97,39),LF=L(101,49),AF=L(102,49),qF=L(103,49),NF=L(104,49),DF=L(105,49),MF=L(106,49),jF=L(107,49);import V2 from"node:process";function D0(){let{env:_}=V2,{TERM:F,TERM_PROGRAM:B}=_;if(V2.platform!=="win32")return F!=="linux";return Boolean(_.WT_SESSION)||Boolean(_.TERMINUS_SUBLIME)||_.ConEmuTask==="{cmd::Cmder}"||B==="Terminus-Sublime"||B==="vscode"||F==="xterm-256color"||F==="alacritty"||F==="rxvt-unicode"||F==="rxvt-unicode-256color"||_.TERMINAL_EMULATOR==="JetBrains-JediTerm"}var f0=D0(),p3=O2(f0?"ℹ":"i"),l3=E2(f0?"✔":"√"),i3=T2(f0?"⚠":"‼"),n3=R2(f0?"✖":"×");function U1({onlyFirst:_=!1}={}){return new RegExp("(?:\\u001B\\][\\s\\S]*?(?:\\u0007|\\u001B\\u005C|\\u009C))|[\\u001B\\u009B][[\\]()#;?]*(?:\\d{1,4}(?:[;:]\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]",_?void 0:"g")}var s3=U1();function M0(_){if(typeof _!=="string")throw TypeError(`Expected a \`string\`, got \`${typeof _}\``);return _.replace(s3,"")}function I2(_){return _===161||_===164||_===167||_===168||_===170||_===173||_===174||_>=176&&_<=180||_>=182&&_<=186||_>=188&&_<=191||_===198||_===208||_===215||_===216||_>=222&&_<=225||_===230||_>=232&&_<=234||_===236||_===237||_===240||_===242||_===243||_>=247&&_<=250||_===252||_===254||_===257||_===273||_===275||_===283||_===294||_===295||_===299||_>=305&&_<=307||_===312||_>=319&&_<=322||_===324||_>=328&&_<=331||_===333||_===338||_===339||_===358||_===359||_===363||_===462||_===464||_===466||_===468||_===470||_===472||_===474||_===476||_===593||_===609||_===708||_===711||_>=713&&_<=715||_===717||_===720||_>=728&&_<=731||_===733||_===735||_>=768&&_<=879||_>=913&&_<=929||_>=931&&_<=937||_>=945&&_<=961||_>=963&&_<=969||_===1025||_>=1040&&_<=1103||_===1105||_===8208||_>=8211&&_<=8214||_===8216||_===8217||_===8220||_===8221||_>=8224&&_<=8226||_>=8228&&_<=8231||_===8240||_===8242||_===8243||_===8245||_===8251||_===8254||_===8308||_===8319||_>=8321&&_<=8324||_===8364||_===8451||_===8453||_===8457||_===8467||_===8470||_===8481||_===8482||_===8486||_===8491||_===8531||_===8532||_>=8539&&_<=8542||_>=8544&&_<=8555||_>=8560&&_<=8569||_===8585||_>=8592&&_<=8601||_===8632||_===8633||_===8658||_===8660||_===8679||_===8704||_===8706||_===8707||_===8711||_===8712||_===8715||_===8719||_===8721||_===8725||_===8730||_>=8733&&_<=8736||_===8739||_===8741||_>=8743&&_<=8748||_===8750||_>=8756&&_<=8759||_===8764||_===8765||_===8776||_===8780||_===8786||_===8800||_===8801||_>=8804&&_<=8807||_===8810||_===8811||_===8814||_===8815||_===8834||_===8835||_===8838||_===8839||_===8853||_===8857||_===8869||_===8895||_===8978||_>=9312&&_<=9449||_>=9451&&_<=9547||_>=9552&&_<=9587||_>=9600&&_<=9615||_>=9618&&_<=9621||_===9632||_===9633||_>=9635&&_<=9641||_===9650||_===9651||_===9654||_===9655||_===9660||_===9661||_===9664||_===9665||_>=9670&&_<=9672||_===9675||_>=9678&&_<=9681||_>=9698&&_<=9701||_===9711||_===9733||_===9734||_===9737||_===9742||_===9743||_===9756||_===9758||_===9792||_===9794||_===9824||_===9825||_>=9827&&_<=9829||_>=9831&&_<=9834||_===9836||_===9837||_===9839||_===9886||_===9887||_===9919||_>=9926&&_<=9933||_>=9935&&_<=9939||_>=9941&&_<=9953||_===9955||_===9960||_===9961||_>=9963&&_<=9969||_===9972||_>=9974&&_<=9977||_===9979||_===9980||_===9982||_===9983||_===10045||_>=10102&&_<=10111||_>=11094&&_<=11097||_>=12872&&_<=12879||_>=57344&&_<=63743||_>=65024&&_<=65039||_===65533||_>=127232&&_<=127242||_>=127248&&_<=127277||_>=127280&&_<=127337||_>=127344&&_<=127373||_===127375||_===127376||_>=127387&&_<=127404||_>=917760&&_<=917999||_>=983040&&_<=1048573||_>=1048576&&_<=1114109}function S2(_){return _===12288||_>=65281&&_<=65376||_>=65504&&_<=65510}function k2(_){return _>=4352&&_<=4447||_===8986||_===8987||_===9001||_===9002||_>=9193&&_<=9196||_===9200||_===9203||_===9725||_===9726||_===9748||_===9749||_>=9776&&_<=9783||_>=9800&&_<=9811||_===9855||_>=9866&&_<=9871||_===9875||_===9889||_===9898||_===9899||_===9917||_===9918||_===9924||_===9925||_===9934||_===9940||_===9962||_===9970||_===9971||_===9973||_===9978||_===9981||_===9989||_===9994||_===9995||_===10024||_===10060||_===10062||_>=10067&&_<=10069||_===10071||_>=10133&&_<=10135||_===10160||_===10175||_===11035||_===11036||_===11088||_===11093||_>=11904&&_<=11929||_>=11931&&_<=12019||_>=12032&&_<=12245||_>=12272&&_<=12287||_>=12289&&_<=12350||_>=12353&&_<=12438||_>=12441&&_<=12543||_>=12549&&_<=12591||_>=12593&&_<=12686||_>=12688&&_<=12773||_>=12783&&_<=12830||_>=12832&&_<=12871||_>=12880&&_<=42124||_>=42128&&_<=42182||_>=43360&&_<=43388||_>=44032&&_<=55203||_>=63744&&_<=64255||_>=65040&&_<=65049||_>=65072&&_<=65106||_>=65108&&_<=65126||_>=65128&&_<=65131||_>=94176&&_<=94180||_>=94192&&_<=94198||_>=94208&&_<=101589||_>=101631&&_<=101662||_>=101760&&_<=101874||_>=110576&&_<=110579||_>=110581&&_<=110587||_===110589||_===110590||_>=110592&&_<=110882||_===110898||_>=110928&&_<=110930||_===110933||_>=110948&&_<=110951||_>=110960&&_<=111355||_>=119552&&_<=119638||_>=119648&&_<=119670||_===126980||_===127183||_===127374||_>=127377&&_<=127386||_>=127488&&_<=127490||_>=127504&&_<=127547||_>=127552&&_<=127560||_===127568||_===127569||_>=127584&&_<=127589||_>=127744&&_<=127776||_>=127789&&_<=127797||_>=127799&&_<=127868||_>=127870&&_<=127891||_>=127904&&_<=127946||_>=127951&&_<=127955||_>=127968&&_<=127984||_===127988||_>=127992&&_<=128062||_===128064||_>=128066&&_<=128252||_>=128255&&_<=128317||_>=128331&&_<=128334||_>=128336&&_<=128359||_===128378||_===128405||_===128406||_===128420||_>=128507&&_<=128591||_>=128640&&_<=128709||_===128716||_>=128720&&_<=128722||_>=128725&&_<=128728||_>=128732&&_<=128735||_===128747||_===128748||_>=128756&&_<=128764||_>=128992&&_<=129003||_===129008||_>=129292&&_<=129338||_>=129340&&_<=129349||_>=129351&&_<=129535||_>=129648&&_<=129660||_>=129664&&_<=129674||_>=129678&&_<=129734||_===129736||_>=129741&&_<=129756||_>=129759&&_<=129770||_>=129775&&_<=129784||_>=131072&&_<=196605||_>=196608&&_<=262141}function a3(_){if(!Number.isSafeInteger(_))throw TypeError(`Expected a code point, got \`${typeof _}\`.`)}function K1(_,{ambiguousAsWide:F=!1}={}){if(a3(_),S2(_)||k2(_)||F&&I2(_))return 2;return 1}var o3=new Intl.Segmenter,r3=/^(?:\p{Default_Ignorable_Code_Point}|\p{Control}|\p{Mark}|\p{Surrogate})+$/v,t3=/^[\p{Default_Ignorable_Code_Point}\p{Control}\p{Format}\p{Mark}\p{Surrogate}]+/v,e3=/^\p{RGI_Emoji}$/v;function _6(_){return _.replace(t3,"")}function F6(_){return r3.test(_)}function B6(_,F){let B=0;if(_.length>1){for(let $ of _.slice(1))if($>="＀"&&$<="￯")B+=K1($.codePointAt(0),F)}return B}function L1(_,F={}){if(typeof _!=="string"||_.length===0)return 0;let{ambiguousIsNarrow:B=!0,countAnsiEscapeCodes:$=!1}=F,J=_;if(!$)J=M0(J);if(J.length===0)return 0;let Z=0,Q={ambiguousAsWide:!B};for(let{segment:X}of o3.segment(J)){if(F6(X))continue;if(e3.test(X)){Z+=2;continue}let H=_6(X).codePointAt(0);Z+=K1(H,Q),Z+=B6(X,Q)}return Z}function A1({stream:_=process.stdout}={}){return Boolean(_&&_.isTTY&&process.env.TERM!=="dumb"&&!("CI"in process.env))}import h from"node:process";var $6=3;class b2{#Z=0;start(){if(this.#Z++,this.#Z===1)this.#$()}stop(){if(this.#Z<=0)throw Error("`stop` called more times than `start`");if(this.#Z--,this.#Z===0)this.#_()}#$(){if(h.platform==="win32"||!h.stdin.isTTY)return;h.stdin.setRawMode(!0),h.stdin.on("data",this.#J),h.stdin.resume()}#_(){if(!h.stdin.isTTY)return;h.stdin.off("data",this.#J),h.stdin.pause(),h.stdin.setRawMode(!1)}#J(_){if(_[0]===$6)h.emit("SIGINT")}}var J6=new b2,q1=J6;class C2{#Z=0;#$=!1;#_=0;#J=-1;#U=0;#Y=0;#F;#Q;#B;#K;#q;#X;#z;#H;#L;#G;#W;color;constructor(_){if(typeof _==="string")_={text:_};if(this.#F={color:"cyan",stream:h0.stderr,discardStdin:!0,hideCursor:!0,..._},this.color=this.#F.color,this.spinner=this.#F.spinner,this.#q=this.#F.interval,this.#B=this.#F.stream,this.#X=typeof this.#F.isEnabled==="boolean"?this.#F.isEnabled:A1({stream:this.#B}),this.#z=typeof this.#F.isSilent==="boolean"?this.#F.isSilent:!1,this.text=this.#F.text,this.prefixText=this.#F.prefixText,this.suffixText=this.#F.suffixText,this.indent=this.#F.indent,h0.env.NODE_ENV==="test")this._stream=this.#B,this._isEnabled=this.#X,Object.defineProperty(this,"_linesToClear",{get(){return this.#Z},set(F){this.#Z=F}}),Object.defineProperty(this,"_frameIndex",{get(){return this.#J}}),Object.defineProperty(this,"_lineCount",{get(){return this.#_}})}get indent(){return this.#H}set indent(_=0){if(!(_>=0&&Number.isInteger(_)))throw Error("The `indent` option must be an integer from 0 and up");this.#H=_,this.#A()}get interval(){return this.#q??this.#Q.interval??100}get spinner(){return this.#Q}set spinner(_){if(this.#J=-1,this.#q=void 0,typeof _==="object"){if(!Array.isArray(_.frames)||_.frames.length===0||_.frames.some((F)=>typeof F!=="string"))throw Error("The given spinner must have a non-empty `frames` array of strings");if(_.interval!==void 0&&!(Number.isInteger(_.interval)&&_.interval>0))throw Error("`spinner.interval` must be a positive integer if provided");this.#Q=_}else if(!D0())this.#Q=N0.line;else if(_===void 0)this.#Q=N0.dots;else if(_!=="default"&&N0[_])this.#Q=N0[_];else throw Error(`There is no built-in spinner named '${_}'. See https://github.com/sindresorhus/cli-spinners/blob/main/spinners.json for a full list.`)}get text(){return this.#L}set text(_=""){this.#L=_,this.#A()}get prefixText(){return this.#G}set prefixText(_=""){this.#G=_,this.#A()}get suffixText(){return this.#W}set suffixText(_=""){this.#W=_,this.#A()}get isSpinning(){return this.#K!==void 0}#j(_,F,B=!1){let $=typeof _==="function"?_():_;if(typeof $==="string"&&$!=="")return B?F+$:$+F;return""}#N(_=this.#G,F=" "){return this.#j(_,F,!1)}#D(_=this.#W,F=" "){return this.#j(_,F,!0)}#M(_,F){let B=0;for(let $ of M0(_).split(`
`))B+=Math.max(1,Math.ceil(L1($)/F));return B}#A(){let _=this.#B.columns??80,F=typeof this.#G==="function"?"":this.#G,B=typeof this.#W==="function"?"":this.#W,$=typeof F==="string"&&F!==""?F+" ":"",J=typeof B==="string"&&B!==""?" "+B:"",Z="-",Q=" ".repeat(this.#H)+$+"-"+(typeof this.#L==="string"?" "+this.#L:"")+J;this.#_=this.#M(Q,_)}get isEnabled(){return this.#X&&!this.#z}set isEnabled(_){if(typeof _!=="boolean")throw TypeError("The `isEnabled` option must be a boolean");this.#X=_}get isSilent(){return this.#z}set isSilent(_){if(typeof _!=="boolean")throw TypeError("The `isSilent` option must be a boolean");this.#z=_}frame(){let _=Date.now();if(this.#J===-1||_-this.#U>=this.interval)this.#J=++this.#J%this.#Q.frames.length,this.#U=_;let{frames:F}=this.#Q,B=F[this.#J];if(this.color)B=W[this.color](B);let $=this.#N(this.#G," "),J=typeof this.text==="string"?" "+this.text:"",Z=this.#D(this.#W," ");return $+B+J+Z}clear(){if(!this.#X||!this.#B.isTTY)return this;this.#B.cursorTo(0);for(let _=0;_<this.#Z;_++){if(_>0)this.#B.moveCursor(0,-1);this.#B.clearLine(1)}if(this.#H||this.#Y!==this.#H)this.#B.cursorTo(this.#H);return this.#Y=this.#H,this.#Z=0,this}render(){if(!this.#X||this.#z)return this;this.clear();let _=this.frame(),F=this.#B.columns??80,B=this.#M(_,F),$=this.#B.rows;if($&&$>1&&B>$){let J=_.split(`
`),Z=$-1;_=[...J.slice(0,Z),"... (content truncated to fit terminal)"].join(`
`)}return this.#B.write(_),this.#Z=this.#M(_,F),this}start(_){if(_)this.text=_;if(this.#z)return this;if(!this.#X){let F=" ".repeat(this.#H)+this.#N(this.#G," ")+(this.text?`- ${this.text}`:"")+this.#D(this.#W," ");if(F.trim()!=="")this.#B.write(F+`
`);return this}if(this.isSpinning)return this;if(this.#F.hideCursor)Y1.hide(this.#B);if(this.#F.discardStdin&&h0.stdin.isTTY)this.#$=!0,q1.start();return this.render(),this.#K=setInterval(this.render.bind(this),this.interval),this}stop(){if(clearInterval(this.#K),this.#K=void 0,this.#J=0,this.#X){if(this.clear(),this.#F.hideCursor)Y1.show(this.#B)}if(this.#F.discardStdin&&h0.stdin.isTTY&&this.#$)q1.stop(),this.#$=!1;return this}succeed(_){return this.stopAndPersist({symbol:r.success,text:_})}fail(_){return this.stopAndPersist({symbol:r.error,text:_})}warn(_){return this.stopAndPersist({symbol:r.warning,text:_})}info(_){return this.stopAndPersist({symbol:r.info,text:_})}stopAndPersist(_={}){if(this.#z)return this;let F=_.prefixText??this.#G,B=this.#N(F," "),$=_.symbol??" ",J=_.text??this.text,Q=typeof J==="string"?($?" ":"")+J:"",X=_.suffixText??this.#W,H=this.#D(X," "),G=B+$+Q+H+`
`;return this.stop(),this.#B.write(G),this}}function y(_){return new C2(_)}import d0 from"node:fs";import T0 from"node:path";var l2=J0(p2(),1);import R0 from"node:fs";import E0 from"node:path";function O6(_){let F=new Set([".ts",".tsx",".js",".jsx",".py",".java",".go",".rs",".c",".cpp",".h",".hpp",".cs",".rb",".php",".swift",".kt",".md",".txt",".json",".yaml",".yml",".toml",".xml",".sql",".sh",".bash",".zsh",".fish",".dockerfile",".gitignore",".env",".env.example",".env.local",".env.development",".env.production"]),B=E0.extname(_).toLowerCase();return F.has(B)||!B}function i2(_){let F=l2.default();F.add(["node_modules",".git",".svn",".hg",".DS_Store",".idea",".vscode","*.suo","*.ntvs*","*.njsproj","*.sln","*.swp",".sylphx-flow",".cache","dist","build","coverage",".nyc_output"]);let B=E0.join(_,".gitignore");if(R0.existsSync(B))try{let $=R0.readFileSync(B,"utf8");F.add($)}catch($){console.warn(`[WARN] Failed to read .gitignore: ${$}`)}return F}function n2(_,F={}){let B=[],$=F.ignoreFilter,J=F.codebaseRoot||_;function Z(Q){let X=R0.readdirSync(Q,{withFileTypes:!0});for(let H of X){let G=E0.join(Q,H.name),Y=E0.relative(J,G);if($?.ignores(Y))continue;if(H.isDirectory())Z(G);else if(H.isFile())try{let z=R0.statSync(G),U=E0.extname(G);if(!O6(G))continue;let K=R0.readFileSync(G,"utf8");B.push({path:Y,absolutePath:G,content:K,size:z.size,mtime:z.mtimeMs})}catch(z){console.warn(`[WARN] Failed to read file: ${Y}`,z)}}}return Z(_),B}function s2(_){let F=0;for(let B=0;B<_.length;B++){let $=_.charCodeAt(B);F=(F<<5)-F+$,F&=F}return F.toString(36)}class j1{codebaseRoot;cacheDir;cache=null;ig;db;options;constructor(_={}){this.options={batchSize:100,..._},this.codebaseRoot=_.codebaseRoot||process.cwd(),this.cacheDir=_.cacheDir||T0.join(this.codebaseRoot,".sylphx-flow","cache"),this.ig=i2(this.codebaseRoot),this.db=new u}async buildTFIDFIndexFromDB(){try{let _=[],F=await this.db.getAllCodebaseFiles();for(let J of F){let Z=await this.db.getTFIDFDocument(J.path);if(Z){let Q=Z.rawTerms||{},X=new Map,H=new Map;for(let[G,Y]of Object.entries(Q))X.set(G,Y),H.set(G,Y);_.push({uri:`file://${J.path}`,terms:X,rawTerms:H,magnitude:Z.magnitude})}}let B=await this.db.getIDFValues(),$=new Map;for(let[J,Z]of Object.entries(B))$.set(J,Z);if(_.length===0)return;return{documents:_,idf:$,totalDocuments:_.length,metadata:{generatedAt:new Date().toISOString(),version:"1.0.0"}}}catch(_){console.error("[ERROR] Failed to build TF-IDF index from database:",_);return}}async loadCache(){try{await this.db.initialize();let _=await this.db.getCodebaseMetadata("version"),F=await this.db.getCodebaseMetadata("codebaseRoot"),B=await this.db.getCodebaseMetadata("indexedAt"),$=await this.db.getCodebaseMetadata("fileCount");if(!_||!F||!B||!$)return null;let J=await this.db.getAllCodebaseFiles(),Z=new Map;for(let H of J)Z.set(H.path,{mtime:H.mtime,hash:H.hash});let Q=await this.buildTFIDFIndexFromDB(),X=await this.db.getCodebaseMetadata("vectorIndexPath");return{version:_,codebaseRoot:F,indexedAt:B,fileCount:Number.parseInt($),files:Z,tfidfIndex:Q,vectorIndexPath:X}}catch(_){return console.error("[ERROR] Failed to load cache from database:",_),null}}async saveCache(_){try{if(await this.db.initialize(),await this.db.setCodebaseMetadata("version",_.version),await this.db.setCodebaseMetadata("codebaseRoot",_.codebaseRoot),await this.db.setCodebaseMetadata("indexedAt",_.indexedAt),await this.db.setCodebaseMetadata("fileCount",_.fileCount.toString()),_.vectorIndexPath)await this.db.setCodebaseMetadata("vectorIndexPath",_.vectorIndexPath);for(let[F,B]of _.files.entries())await this.db.upsertCodebaseFile({path:F,mtime:B.mtime,hash:B.hash});if(_.tfidfIndex){for(let B of _.tfidfIndex.documents){let $=B.uri.replace("file://",""),J={};for(let[Q,X]of B.rawTerms.entries())J[Q]=X;await this.db.upsertTFIDFDocument($,{magnitude:B.magnitude,termCount:B.terms.size,rawTerms:J});let Z={};for(let[Q,X]of B.terms.entries())Z[Q]=X;await this.db.setTFIDFTerms($,Z)}let F={};for(let[B,$]of _.tfidfIndex.idf.entries())F[B]=$;await this.db.setIDFValues(F)}console.error("[INFO] Cache saved to database")}catch(F){throw console.error("[ERROR] Failed to save cache to database:",F),F}}async indexCodebase(_={}){let{force:F=!1}=_,{embeddingProvider:B}=_;this.cache=await this.loadCache(),console.error("[INFO] Scanning codebase...");let $=n2(this.codebaseRoot,{codebaseRoot:this.codebaseRoot,ignoreFilter:this.ig});if(console.error(`[INFO] Found ${$.length} files`),this.cache&&!F){let K=Math.abs($.length-this.cache.fileCount)/this.cache.fileCount*100;if(K>20)console.error(`[WARN] File count changed significantly (${K.toFixed(1)}%), forcing full reindex`),F=!0,this.cache=null}let J=[],Z=[],Q=new Map;for(let U of $){let K=s2(U.content);Q.set(U.path,{mtime:U.mtime,hash:K});let A=this.cache?.files.get(U.path);if(F||!A||A.hash!==K)J.push(U)}if(this.cache?.files){for(let U of this.cache.files.keys())if(!Q.has(U))Z.push(U)}let X=J.length>0||Z.length>0;if(!F&&!X&&this.cache?.tfidfIndex)return console.error("[INFO] Cache hit! Using cached index"),{tfidfIndex:this.cache.tfidfIndex,stats:{totalFiles:$.length,indexedFiles:0,skippedFiles:$.length,cacheHit:!0}};if(J.length>0)console.error(`[INFO] Changed files: ${J.length}`);if(Z.length>0)console.error(`[INFO] Deleted files: ${Z.length}`);console.error(`[INFO] Indexing ${J.length} changed files...`);let G=$.map((U)=>({uri:`file://${U.path}`,content:U.content})),Y=a2(G),z;if(B){console.error("[INFO] Generating embeddings...");let U=T0.join(this.cacheDir,"codebase-vectors.hnsw");z=new o2(U,B.dimensions);let K=10;for(let A=0;A<$.length;A+=K){let I=$.slice(A,A+K),b=I.map((P)=>P.content),U0=await B.generateEmbeddings(b);for(let P=0;P<I.length;P++){let K0=I[P],m1=U0[P],w_={id:`file://${K0.path}`,embedding:m1,metadata:{type:"code",language:K0.language||"",content:K0.content.slice(0,500),category:""}};z.addDocument(w_)}console.error(`[INFO] Embedded ${Math.min(A+K,$.length)}/${$.length} files`)}z.save()}return this.cache={version:"1.0.0",codebaseRoot:this.codebaseRoot,indexedAt:new Date().toISOString(),fileCount:$.length,files:Q,tfidfIndex:Y,vectorIndexPath:z?T0.join(this.cacheDir,"codebase-vectors.hnsw"):void 0},await this.saveCache(this.cache),{tfidfIndex:Y,vectorStorage:z,stats:{totalFiles:$.length,indexedFiles:J.length,skippedFiles:$.length-J.length,cacheHit:!1}}}async getCacheStats(){try{await this.db.initialize();let _=await this.db.getCodebaseIndexStats();return{exists:_.totalFiles>0,fileCount:_.totalFiles,indexedAt:_.indexedAt}}catch(_){return console.error("[ERROR] Failed to get cache stats:",_),{exists:!1,fileCount:0}}}async clearCache(){try{await this.db.initialize(),await this.db.clearCodebaseIndex();let _=T0.join(this.cacheDir,"codebase-index.json");if(d0.existsSync(_))d0.unlinkSync(_);let F=T0.join(this.cacheDir,"codebase-vectors.hnsw");if(d0.existsSync(F))d0.unlinkSync(F);console.error("[INFO] Cache cleared from database and files")}catch(_){console.error("[ERROR] Failed to clear cache:",_)}}}var V6=new O("search").description("Search codebase files and source code").argument("<query>","Search query - use natural language, function names, or technical terms").option("-l, --limit <number>","Maximum number of results to return","10").option("--include-content","Include file content snippets in results",!0).option("--extensions <exts...>","Filter by file extensions (e.g., .ts .tsx .js)").option("--path <pattern>","Filter by path pattern (e.g., src/components)").option("--exclude <patterns...>","Exclude paths containing these patterns").action(async(_,F)=>{try{console.log(""),console.log(W.cyan.bold("▸ Search Codebase")),console.log(W.gray(`  Query: "${_}"`));let B=y("Searching...").start();await C.initialize();let $=await C.searchCodebase(_,{limit:Number.parseInt(F.limit)||10,include_content:F.includeContent!==!1,file_extensions:F.extensions,path_filter:F.path,exclude_paths:F.exclude});B.stop();let J=C.formatResultsForCLI($.results,_,$.totalIndexed);console.log(J),console.log("")}catch(B){console.error(W.red(`
✗ Error: ${B.message}
`)),process.exit(1)}}),w6=new O("reindex").description("Reindex all codebase files").action(async()=>{try{console.log(""),console.log(W.cyan.bold("▸ Reindex Codebase"));let _=y("Scanning and indexing files...").start(),F=new j1,B=await(await import("./embeddings-gq1xjrz4.js")).getDefaultEmbeddingProvider();await F.indexCodebase({embeddingProvider:B}),_.succeed(W.green("Indexing complete")),console.log("")}catch(_){throw new D(`Codebase reindex failed: ${_.message}`)}}),I6=new O("status").description("Get codebase search system status").action(async()=>{try{console.log(""),console.log(W.cyan.bold("▸ Codebase Status")),await C.initialize();let _=await C.getStatus();if(_.codebase.indexed){if(console.log(W.green(`
✓ Indexed and ready`)),console.log(W.gray(`  Files: ${_.codebase.fileCount}`)),_.codebase.indexedAt)console.log(W.gray(`  Last indexed: ${new Date(_.codebase.indexedAt).toLocaleString()}`))}else console.log(W.yellow(`
⚠ Not indexed`)),console.log(W.gray("  Run: sylphx-flow codebase reindex"));console.log(W.cyan(`
▸ Available Commands`)),console.log(W.gray("  • codebase search <query>")),console.log(W.gray("  • codebase reindex")),console.log(W.gray("  • codebase status")),console.log("")}catch(_){console.error(W.red(`
✗ Error: ${_.message}
`)),process.exit(1)}}),r2=new O("codebase").description("Manage codebase indexing and search").addCommand(V6).addCommand(w6).addCommand(I6);import f from"node:fs";import l from"node:path";var S6={core:"core.md"};function R1(_="core"){return t2(S6[_])}function e2(_){try{return R1(_),!0}catch{return!1}}function W0(_,F="white"){let B={red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m",reset:"\x1B[0m"},$=B[F]||B.white;console.log(`${$}${_}${B.reset}`)}import $_ from"node:path";import t from"node:fs/promises";import __ from"node:path";async function T1(_,F={}){let{encoding:B="utf8",fallback:$}=F;try{return await t.readFile(_,B)}catch(J){if(J.code==="ENOENT"&&$!==void 0)return $;throw J}}async function F_(_){try{return await t.access(_),!0}catch{return!1}}async function c0(_){try{let F=await t.stat(_);return{exists:!0,isFile:F.isFile(),isDirectory:F.isDirectory(),size:F.size,mtime:F.mtime,atime:F.atime,ctime:F.ctime}}catch{return{exists:!1,isFile:!1,isDirectory:!1}}}async function B_(_){if(E1.validatePath(_),!await F_(_))return;if((await c0(_)).isDirectory)await t.rmdir(_,{recursive:!0});else await t.unlink(_)}async function p0(_,F={}){let{recursive:B=!1,includeFiles:$=!0,includeDirectories:J=!0}=F;if(E1.validatePath(_),!await F_(_))throw Error(`Directory does not exist: ${_}`);if(!(await c0(_)).isDirectory)throw Error(`Path is not a directory: ${_}`);if(B){let X=[],H=await t.readdir(_,{withFileTypes:!0});for(let G of H){let Y=__.join(_,G.name);if(G.isDirectory()&&J){X.push(Y);let z=await p0(Y,F);X.push(...z)}else if(G.isFile()&&$)X.push(Y)}return X}return(await t.readdir(_,{withFileTypes:!0})).filter((X)=>{if(X.isFile()&&$)return!0;if(X.isDirectory()&&J)return!0;return!1}).map((X)=>__.join(_,X.name))}async function O1(_,F){try{return(await p0(_,{recursive:!0,includeFiles:!0,includeDirectories:!1})).filter(($)=>F.some((J)=>$.endsWith(J))).map(($)=>$_.relative(_,$)).sort()}catch{return[]}}async function O0(_){let F=await c0(_);if(!F.exists||!F.isFile)return null;let B=await T1(_);if(B===null)return null;return{content:B,mtime:F.mtime}}async function V1(_,F,B,$){try{let J=await p0(_,{recursive:!1,includeFiles:!0,includeDirectories:!1});for(let Z of J){let Q=$_.basename(Z);if(B.some((H)=>Q.endsWith(H))&&!F.has(Q))await B_(Z),$.push({file:Q,status:"skipped",action:"Removed obsolete file"})}}catch{}}async function w1(_,F,B,$,J=!1,Z=!1){if(Z)return;if(!J){let z=_.length,U=_.filter((K)=>K.status==="added"||K.status==="updated").length;if(U>0)console.log(`✓ ${U} files updated`);else console.log(`✓ All ${z} files already current`);return}console.log(`
\uD83D\uDCCA ${$} Results for ${B}`),console.log("=====================================");let Q=_.reduce((z,U)=>{if(!z[U.status])z[U.status]=[];return z[U.status].push(U),z},{}),X=["added","updated","current","skipped"],H={added:"green",updated:"yellow",current:"blue",skipped:"magenta"};for(let z of X){let U=Q[z];if(U&&U.length>0){let K=H[z];W0(`${z.toUpperCase()} (${U.length}):`,K);for(let A of U)W0(`  ${A.file} - ${A.action}`,K);console.log("")}}let G=_.length,Y=_.filter((z)=>z.status==="added"||z.status==="updated").length;if(Y>0)W0(`✓ ${$} complete: ${Y}/${G} files modified`,"green");else W0(`✓ ${$} complete: All ${G} files already current`,"blue");console.log(`\uD83D\uDCC1 Target directory: ${F}`)}async function J_(){let{getAgentsDir:_}=await import("./paths-msn59g0z.js"),F=_();if(!f.existsSync(F))throw Error(`Could not find agents directory at: ${F}`);let B=[],$=f.readdirSync(F,{withFileTypes:!0}).filter((Z)=>Z.isFile()&&Z.name.endsWith(".md")).map((Z)=>Z.name);B.push(...$);let J=f.readdirSync(F,{withFileTypes:!0}).filter((Z)=>Z.isDirectory()&&Z.name!=="archived").map((Z)=>Z.name);for(let Z of J){let Q=l.join(F,Z),X=await O1(Q,[".md"]);B.push(...X.map((H)=>l.join(Z,H)))}return B}async function Z_(_){let F=process.cwd(),B=[],$=await q.resolveTarget({target:_.target}),J=q.getTarget($);if(!J)throw Error(`Target not found: ${$}`);if(_.quiet!==!0)console.log(`Using target: ${J.name}`);let Z=J.config,Q=l.join(F,Z.agentDir),X=async(U,K)=>{return await J.transformAgentContent(U,void 0,K)};if(_.clear&&f.existsSync(Q)){let U,K=await J_();U=new Set(K.map((A)=>{let I=l.parse(A),b=I.name,U0=I.dir;if(Z.flatten)return`${U0?`${U0.replace(/[\/\\]/g,"-")}-${b}`:b}${Z.agentExtension}`;return A})),V1(Q,U,[Z.agentExtension],B)}f.mkdirSync(Q,{recursive:!0});let H=await J_();if(_.quiet!==!0)console.log(`Installing ${H.length} agents to ${Q.replace(`${process.cwd()}/`,"")}`),console.log("");if(_.dryRun){console.log("✓ Dry run completed - no files were modified");return}let{getAgentsDir:G}=await import("./paths-msn59g0z.js"),Y=G(),z=H.map(async(U)=>{let K=l.join(Y,U),A=l.join(Q,U),I=l.dirname(A);if(!f.existsSync(I))f.mkdirSync(I,{recursive:!0});let b=await O0(A),U0=!b,P=f.readFileSync(K,"utf8");P=await X(P,U);let K0=b?await X(b.content,U):"";if(!b||K0!==P)f.writeFileSync(A,P,"utf8"),B.push({file:U,status:b?"updated":"added",action:b?"Updated":"Created"});else B.push({file:U,status:"current",action:"Already current"})});await Promise.all(z),w1(B,Q,J.name,"Install",_.verbose,_.quiet)}async function Q_(_){let F=process.cwd(),B=await q.resolveTarget({target:_.target}),$=q.getTarget(B);if(!$)throw Error(`Target not found: ${B}`);if(!$.config.rulesFile)return;if(!e2("core")){console.warn("⚠️ Core rules file not found");return}let J=R1("core"),Q=f.readFileSync(J,"utf8"),X=l.join(F,$.config.rulesFile),H=await O0(X),G=Q;if(_.dryRun){console.log(`Dry run: Would install rules file to ${X.replace(`${F}/`,"")}`);return}if(H&&H.content===G){if(_.quiet!==!0)console.log(`Rules file already current: ${$.config.rulesFile}`);return}if(f.writeFileSync(X,G,"utf8"),_.quiet!==!0)console.log(`${H?"Updated":"Created"} rules file: ${$.config.rulesFile}`)}function k6(_){return _.type==="stdio"}function I1(_){return k6(_)}function S1(_){if(typeof _==="function"){let F=_();return Promise.resolve(F)}return Promise.resolve(_)}class i{target;constructor(_){let F=q.getTarget(_);if(!F)throw Error(`Target not found: ${_}`);this.target=F}getAllServerIds(){return Object.keys(V)}async getAvailableServers(){let _=await this.getInstalledServerIds();return this.getAllServerIds().filter((F)=>!_.includes(F))}async getInstalledServerIds(){try{let _=await this.target.readConfig(process.cwd()),F=this.target.config.mcpConfigPath,B=this.getNestedProperty(_,F)||{},$=Object.keys(B);return Object.values(V).filter((J)=>$.includes(J.name)).map((J)=>J.id)}catch(_){return[]}}getRequiringConfiguration(_){return _.filter((F)=>{return!!V[F].envVars})}validateServer(_,F){let B=V[_];if(!B?.envVars)return{isValid:!0,missingRequired:[],invalidValues:[]};let $=[],J=[];for(let[Z,Q]of Object.entries(B.envVars)){let X=F[Z]||process.env[Z]||"";if(Q.required&&(!X||X===""))$.push(Z)}return{isValid:$.length===0&&J.length===0,missingRequired:$,invalidValues:J}}async configureServer(_,F={}){let B=V[_],$={};if(!B.envVars)return $;console.log(""),console.log(W.cyan(`▸ ${B.name}`)),console.log(W.gray(`  ${B.description}`)),console.log("");for(let[J,Z]of Object.entries(B.envVars)){if(Z.dependsOn){if(Z.dependsOn.filter((G)=>!(F[G]||process.env[G])).length>0)continue}let Q=F[J]||process.env[J],X;if(Q&&Q.trim()!=="")X=Q;else if(Z.fetchChoices){let H=y("Fetching options...").start();for(let[G,Y]of Object.entries(F))if(Y)process.env[G]=Y;try{let G=await Z.fetchChoices();H.stop(),X=(await M.prompt({type:"list",name:"value",message:`${J}${Z.required?" *":""}`,choices:G,default:Z.default||G[0]})).value}catch(G){let Y=G instanceof Error?G.message:String(G);H.fail(W.red(`Failed to fetch options: ${Y}`)),X=(await M.prompt({type:"input",name:"value",message:`${J}${Z.required?" *":""}`,default:Z.default})).value}}else if(J==="GEMINI_MODEL")X=(await M.prompt({type:"list",name:"model",message:`${J}${Z.required?" *":""}`,choices:["gemini-2.5-flash","gemini-2.5-pro","gemini-1.5-flash","gemini-1.5-pro"],default:Z.default||"gemini-2.5-flash"})).model;else X=(await M.prompt({type:Z.secret?"password":"input",name:"value",message:`${J}${Z.required?" *":""}`,default:Z.default,mask:Z.secret?"•":void 0})).value;if(X)$[J]=X,F[J]=X}return console.log(W.green("✓ Configured")),console.log(""),$}async installServers(_,F={}){if(_.length===0)return;try{let B=await this.target.readConfig(process.cwd()),$=this.target.config.mcpConfigPath,Z={...this.getNestedProperty(B,$)||{}};for(let Q of _){let X=V[Q],H=F[Q]||{},G={...X.config},Y,z;if(I1(X.config))Y=X.config.command?await S1(X.config.command):void 0,z=X.config.args?await S1(X.config.args):[];if(I1(X.config))G={...X.config,command:Y,args:z};if(Object.keys(H).length>0){let A={...X.config.type==="local"?X.config.environment:X.config.type==="stdio"?X.config.env:{}};for(let[I,b]of Object.entries(H))if(b&&b.trim()!=="")A[I]=b;if(G.type==="local")G.environment=A;else if(G.type==="stdio")G.env=A}let U=this.target.transformMCPConfig(G,Q);Z[X.name]=U}if(this.setNestedProperty(B,$,Z),await this.target.writeConfig(process.cwd(),B),this.target.approveMCPServers){let Q=_.map((X)=>V[X].name);await this.target.approveMCPServers(process.cwd(),Q)}}catch(B){throw Error(`Failed to install MCP servers: ${B instanceof Error?B.message:String(B)}`)}}async readConfig(){try{return await this.target.readConfig(process.cwd())}catch(_){return{settings:{}}}}async writeConfig(_){await this.target.writeConfig(process.cwd(),_)}getNestedProperty(_,F){return F.split(".").reduce((B,$)=>{if(typeof B==="object"&&B!==null)return B[$];return},_)}setNestedProperty(_,F,B){let $=F.split("."),J=$.pop();if(!J)return;let Z=$.reduce((Q,X)=>{if(!Q[X])Q[X]={};return Q[X]},_);Z[J]=B}}function X_(_,F){return F.split(".").reduce(($,J)=>$?.[J],_)}async function H_(_,F){let B=q.getTarget(F);if(!B)throw Error(`Target not found: ${F}`);let $=await B.readConfig(_),J=B.config.mcpConfigPath,Z=X_($,J);if(!Z||Object.keys(Z).length===0){console.log("ℹ️  No MCP servers configured");return}console.log(`\uD83D\uDCCB Currently configured MCP servers for ${B.name}:`),console.log("");for(let[Q,X]of Object.entries(Z)){let H="";if(X&&typeof X==="object"&&"type"in X){if(X.type==="local")H=X.command?.join(" ")||"Unknown command";else if(X.type==="remote")H=`HTTP: ${X.url}`}console.log(`  • ${Q}: ${H}`);let G=Object.values(V).find((Y)=>Y.name===Q);if(G)console.log(`    ${G.description}`);console.log("")}}function G_(_){let F=q.getTarget(_);if(!F)throw Error(`Unknown target: ${_}. Available targets: ${q.getImplementedTargetIDs().join(", ")}`);if(!F.isImplemented)throw Error(`Target '${_}' is not implemented. Available targets: ${q.getImplementedTargetIDs().join(", ")}`);return _}function n(_){return q.getTarget(_)?.config.installation.supportedMcpServers??!1}var Y_=new O("init").description("Initialize project with Sylphx Flow development agents and MCP tools").option("--target <type>",`Force specific target (${q.getImplementedTargetIDs().join(", ")}, default: auto-detect)`).option("--verbose","Show detailed output").option("--dry-run","Show what would be done without making changes").option("--clear","Clear obsolete items before processing").option("--no-mcp","Skip MCP tools installation").action(async(_)=>{let F=_.target;if(console.log(""),console.log(W.cyan.bold("▸ Sylphx Flow Setup")),!F)F=await q.promptForTargetSelection(),_.target=F;if(F){try{G_(F)}catch(J){if(J instanceof Error)throw new D(J.message,"UNSUPPORTED_TARGET");throw J}if(_.merge)throw new D("The --merge option is not supported with init command.","INVALID_OPTION")}if(!F)throw Error("Target ID not set");if(_.dryRun){if(console.log(W.yellow(`
  Dry run mode - no changes will be made`)),_.mcp!==!1&&n(F)){let Z=await new i(F).getAvailableServers();console.log(W.cyan(`
▸ MCP Tools`));for(let Q of Z)console.log(W.gray(`  • ${V[Q].name}`))}console.log(W.cyan(`
▸ Agents`)),console.log(W.gray("  • Development agents")),console.log(W.cyan(`
▸ Rules`)),console.log(W.gray("  • Custom rules")),console.log(W.green(`
✓ Dry run complete
`));return}if(_.mcp!==!1&&n(F)){let J=new i(F),Z=J.getAllServerIds(),Q=await J.getInstalledServerIds();console.log(""),console.log(W.cyan.bold("▸ Configure MCP Tools")),console.log("");let H=(await M.prompt([{type:"checkbox",name:"selectedServers",message:"Select MCP tools to install:",choices:Z.map((Y)=>{let z=V[Y],U=Q.includes(Y);return{name:`${z.name} - ${z.description}`,value:Y,checked:z.required||U||z.defaultInInit||!1,disabled:z.required?"(required)":!1}})}])).selectedServers,G=Z.filter((Y)=>V[Y].required);if(H=[...new Set([...G,...H])],H.length>0){let Y=H.filter((K)=>{let A=V[K];return A.envVars&&Object.keys(A.envVars).length>0}),z={};if(Y.length>0){console.log(""),console.log(W.cyan.bold("▸ Configure selected MCP tools"));let K={};for(let A of Y){let I=await J.configureServer(A,K);z[A]=I}}let U=y("Installing MCP servers...").start();try{await J.installServers(H,z),U.succeed("MCP servers installed")}catch(K){throw U.fail(W.red("Failed to install MCP servers")),K}}}if(F==="opencode")await l0.ensureSecretsDir(process.cwd()),await l0.addToGitignore(process.cwd());console.log("");let B=y("Installing agents...").start();await Z_({..._,quiet:!0}),B.succeed("Agents installed"),console.log("");let $=y("Installing rules...").start();await Q_({..._,quiet:!0}),$.succeed("Rules installed"),console.log(""),console.log(W.green.bold("✓ Setup complete!")),console.log(W.gray("  Start coding with Sylphx Flow")),console.log("");try{await W_.setDefaultTarget(F),console.log(W.gray(`  Default target set to: ${q.getTarget(F)?.name||F}`))}catch(J){console.warn(W.yellow(`  Warning: Could not save default target: ${J instanceof Error?J.message:String(J)}`))}console.log("")});var b6=new O("search").description("Search knowledge base, documentation, and guides").argument("<query>","Search query - use natural language, technology names, or topic keywords").option("-l, --limit <number>","Maximum number of results to return","10").option("--include-content","Include full content in results",!0).action(async(_,F)=>{try{console.log(`\uD83D\uDCDA Searching knowledge base for: "${_}"`),await C.initialize();let B=await C.searchKnowledge(_,{limit:Number.parseInt(F.limit)||10,include_content:F.includeContent!==!1}),$=C.formatResultsForCLI(B.results,_,B.totalIndexed);console.log($)}catch(B){throw new D(`Knowledge search failed: ${B.message}`)}}),C6=new O("get").description("Get specific knowledge document by URI").argument("<uri>",'Knowledge URI to access (e.g., "knowledge://stacks/react-app")').action(async(_)=>{try{let F=z_(_);console.log(F)}catch(F){let B=`Knowledge get failed: ${F.message}`,$=await C.getAvailableKnowledgeURIs();if($.length>0){console.log(`
**Available knowledge URIs:**`);for(let J of $)console.log(`• ${J}`)}throw new D(B)}}),P6=new O("list").description("List all available knowledge resources").option("--category <type>","Filter by category (stacks, guides, universal, data)").action(async(_)=>{try{await C.initialize();let F=await C.getAvailableKnowledgeURIs();if(F.length===0){console.log("\uD83D\uDCED No knowledge documents available");return}let B=F;if(_.category)B=F.filter((J)=>J.includes(`/${_.category}/`));console.log(`\uD83D\uDCDA Available Knowledge Resources (${B.length} documents):
`);let $=B.reduce((J,Z)=>{let Q=Z.split("/")[2]||"unknown";if(!J[Q])J[Q]=[];return J[Q].push(Z),J},{});for(let[J,Z]of Object.entries($)){console.log(`### ${J.charAt(0).toUpperCase()+J.slice(1)}`);for(let Q of Z){let X=Q.split("/").pop()||"Unknown";console.log(`• ${X} - ${Q}`)}console.log("")}console.log("**Usage:**"),console.log("• sylphx knowledge search <query> - Search knowledge base"),console.log("• sylphx knowledge get <uri> - Get specific document")}catch(F){throw new D(`Knowledge status failed: ${F.message}`)}}),x6=new O("status").description("Get knowledge base system status").action(async()=>{try{console.log(`
### \uD83D\uDCDA Knowledge Base Status
`),await C.initialize();let _=await C.getStatus();if(_.knowledge.indexed)console.log("**Status:** ✓ Ready"),console.log(`**Documents:** ${_.knowledge.documentCount} files`);else if(_.knowledge.isIndexing)console.log(`**Status:** \uD83D\uDD04 Building index (${_.knowledge.progress||0}%)`),console.log("**Note:** Please wait a moment and try again");else console.log("**Status:** ⚠️ Not initialized"),console.log("**Note:** Will auto-index on first search");console.log(`
**Available Commands:**`),console.log("• sylphx knowledge search <query> - Search knowledge base"),console.log("• sylphx knowledge get <uri> - Get specific document")}catch(_){throw new D(`Knowledge list failed: ${_.message}`)}}),Y0=new O("knowledge").description("Knowledge base search and management commands");Y0.addCommand(b6);Y0.addCommand(C6);Y0.addCommand(P6);Y0.addCommand(x6);var e=new O("mcp").description("Manage MCP (Model Context Protocol) servers").option("--target <type>",`Force specific target (${q.getImplementedTargetIDs().join(", ")}, default: auto-detect)`);e.command("start").description("Start Sylphx Flow MCP server with specific configuration").option("--disable-memory","Disable memory functionality").option("--disable-time","Disable time functionality").option("--disable-project-startup","Disable project startup functionality").option("--disable-knowledge","Disable knowledge functionality").option("--disable-codebase","Disable codebase search functionality").action(async(_)=>{let F={disableMemory:_.disableMemory===!0,disableTime:_.disableTime===!0,disableProjectStartup:_.disableProjectStartup===!0,disableKnowledge:_.disableKnowledge===!0,disableCodebase:_.disableCodebase===!0};try{console.log(W.blue("\uD83D\uDE80 Starting Sylphx Flow MCP Server..."));let{startSylphxFlowMCPServer:B}=await import("./mcp-server-d6md1dwk.js");await B(F)}catch(B){throw new D(`Failed to start MCP server: ${B instanceof Error?B.message:String(B)}`,"MCP_START_ERROR")}});e.command("config").description("Configure MCP server settings").option("--server <name>","Configure specific server (shows selection if not provided)").action(async(_)=>{let F=_.server,B=await q.resolveTarget({target:_.target,allowSelection:!0});if(!n(B))throw new D(`Target ${B} does not support MCP servers`,"UNSUPPORTED_TARGET");console.log(""),console.log(W.cyan.bold("▸ Configure MCP Server")),console.log(W.gray(`  Target: ${B}`));let $=new i(B),J;if(F){if(!$.getAllServerIds().includes(F))throw new D(`Invalid MCP server: ${F}. Available: ${$.getAllServerIds().join(", ")}`,"INVALID_MCP_SERVER");J=F}else J=(await M.prompt([{type:"list",name:"server",message:"Select server to configure:",choices:$.getAllServerIds().map((H)=>{let G=V[H];return{name:`${G.name} - ${G.description}`,value:H}})}])).server;let Z=V[J];if(console.log(W.cyan(`
▸ ${Z.name}`)),console.log(W.gray(`  ${Z.description}`)),!Z.envVars){console.log(W.gray(`
  No configuration needed`));return}await $.configureServer(J);let Q=y("Saving configuration...").start();try{await $.installServers([J]),Q.succeed(W.green("✓ Configuration saved"))}catch(X){throw Q.fail(W.red("Failed to save configuration")),X}});e.command("list").description("List installed MCP servers").action(async(_)=>{let F=await q.resolveTarget({target:_.target,allowSelection:!0});if(!n(F))throw new D(`Target ${F} does not support MCP servers`,"UNSUPPORTED_TARGET");await H_(process.cwd(),F)});e.command("add").description("Add MCP servers").argument("<servers...>","Server names to add (comma-separated or space-separated)").action(async(_,F)=>{let B=await q.resolveTarget({target:F.target,allowSelection:!0});if(!n(B))throw new D(`Target ${B} does not support MCP servers`,"UNSUPPORTED_TARGET");if(!_||_.length===0)throw new D("No servers specified. Provide server names as arguments","NO_SERVERS_SPECIFIED");let $=_.flatMap((H)=>H.split(",")).map((H)=>H.trim()).filter(Boolean),J=new i(B),Z=J.getAllServerIds(),Q=$.filter((H)=>!Z.includes(H));if(Q.length>0)throw new D(`Invalid MCP servers: ${Q.join(", ")}. Available: ${Z.join(", ")}`,"INVALID_MCP_SERVERS");let X=$;await J.installServers(X)});e.command("remove").description("Remove MCP servers").argument("<servers...>","Server names to remove (comma-separated or space-separated)").action(async(_,F)=>{let B=await q.resolveTarget({target:F.target,allowSelection:!0});if(!n(B))throw new D(`Target ${B} does not support MCP servers`,"UNSUPPORTED_TARGET");if(!_||_.length===0)throw new D("No servers specified. Provide server names as arguments","NO_SERVERS_SPECIFIED");let $=_.flatMap((X)=>X.split(",")).map((X)=>X.trim()).filter(Boolean),Z=new i(B).getInstalledServerIds(),Q=$.filter((X)=>!Z.includes(X));if(Q.length>0)throw new D(`MCP servers not installed: ${Q.join(", ")}. Installed: ${Z.join(", ")}`,"SERVERS_NOT_INSTALLED");console.log(W.yellow("Remove functionality not yet implemented"))});var c=new O("memory").description("Manage memory storage (set, get, search, list, delete, clear)").option("--target <type>","Target platform (claude-code, opencode, default: auto-detect)");c.command("list").description("List memory entries").option("--namespace <name>","Filter by namespace","all").option("--limit <number>","Limit number of entries","50").action(async(_)=>{let B=await new u().getAll();if(_.namespace&&_.namespace!=="all"){let $=B.filter((Q)=>Q.namespace===_.namespace);if(console.log(`\uD83D\uDCCB Memory entries in namespace: ${_.namespace}`),console.log(`Total: ${$.length} entries
`),$.length===0){console.log("No entries found in this namespace.");return}let J=Number.parseInt(_.limit)||50;$.slice(0,J).forEach((Q,X)=>{let H=Q.value||"",G=typeof H==="string"?H.substring(0,50)+(H.length>50?"...":""):`${JSON.stringify(H).substring(0,50)}...`;console.log(`${X+1}. ${Q.namespace}:${Q.key}`),console.log(`   Value: ${G}`),console.log(`   Updated: ${Q.updated_at}`),console.log("")})}else{let $=Number.parseInt(_.limit)||50;if(console.log(`\uD83D\uDCCB All memory entries (showing first ${$}):`),console.log(`Total: ${B.length} entries
`),B.length===0){console.log("No memory entries found.");return}B.slice(0,$).forEach((Z,Q)=>{let X=Z.value||"",H=typeof X==="string"?X.substring(0,50)+(X.length>50?"...":""):`${JSON.stringify(X).substring(0,50)}...`;console.log(`${Q+1}. ${Z.namespace}:${Z.key}`),console.log(`   Value: ${H}`),console.log(`   Updated: ${Z.updated_at}`),console.log("")})}});c.command("search").description("Search memory entries").argument("<pattern>","Search pattern").option("--namespace <name>","Filter by namespace","all").action(async(_,F)=>{let $=await new u().search(_,F.namespace);if(console.log(`\uD83D\uDD0D Search results for pattern: ${_}`),F.namespace&&F.namespace!=="all")console.log(`Namespace: ${F.namespace}`);if(console.log(`Found: ${$.length} results
`),$.length===0){console.log("No matching entries found.");return}$.forEach((J,Z)=>{let Q=J.value||"",X=typeof Q==="string"?Q.substring(0,50)+(Q.length>50?"...":""):`${JSON.stringify(Q).substring(0,50)}...`;console.log(`${Z+1}. ${J.namespace}:${J.key}`),console.log(`   Value: ${X}`),console.log(`   Updated: ${J.updated_at}`),console.log("")})});c.command("delete").description("Delete memory entry").argument("<key>","Memory key to delete").option("--namespace <name>","Namespace","default").action(async(_,F)=>{if(await new u().delete(_,F.namespace))console.log(`✓ Deleted memory entry: ${F.namespace}:${_}`);else console.log(`✗ Memory entry not found: ${F.namespace}:${_}`)});c.command("clear").description("Clear memory entries").option("--namespace <name>","Clear specific namespace").option("--confirm","Skip confirmation prompt").action(async(_)=>{if(!_.confirm)throw new D("Confirmation required. Use --confirm to clear memory entries");let F=new u;if(_.namespace)await F.clear(_.namespace),console.log(`✓ Cleared all memory entries in namespace: ${_.namespace}`);else await F.clear(),console.log("✓ Cleared all memory entries")});c.command("stats").description("Show memory statistics").option("--namespace <name>","Filter by namespace").action(async(_)=>{let B=await new u().getStats();if(console.log("\uD83D\uDCCA Memory Statistics"),console.log("=================="),console.log(`Total Entries: ${B.totalEntries}`),console.log(`Namespaces: ${B.namespaces.length}`),console.log(""),B.namespaces.length>0){console.log("Namespaces:");for(let $ of B.namespaces)console.log(`  • ${$}`);console.log("")}console.log("\uD83D\uDCCD Database: .sylphx-flow/memory.db")});c.command("get").description("Get memory entry").argument("<key>","Memory key to retrieve").option("--namespace <name>","Namespace","default").action(async(_,F)=>{let $=await new u().get(_,F.namespace);if($)console.log(`\uD83D\uDCC4 Memory entry: ${F.namespace}:${_}`),console.log(`Value: ${JSON.stringify($.value,null,2)}`),console.log(`Created: ${$.created_at}`),console.log(`Updated: ${$.updated_at}`);else console.log(`✗ Memory entry not found: ${F.namespace}:${_}`)});c.command("set").description("Set memory entry").argument("<key>","Memory key").argument("<value>","Memory value").option("--namespace <name>","Namespace","default").action(async(_,F,B)=>{await new u().set(_,F,B.namespace),console.log(`✓ Set memory entry: ${B.namespace}:${_} = "${F}"`)});import*as w0 from"node:fs";import*as $0 from"node:path";import y6 from"node:crypto";import k1 from"node:fs";function U_(_){let F=_.migrationsFolder,B=[],$=`${F}/meta/_journal.json`;if(!k1.existsSync($))throw Error("Can't find meta/_journal.json file");let J=k1.readFileSync(`${F}/meta/_journal.json`).toString(),Z=JSON.parse(J);for(let Q of Z.entries){let X=`${F}/${Q.tag}.sql`;try{let H=k1.readFileSync(`${F}/${Q.tag}.sql`).toString(),G=H.split("--> statement-breakpoint").map((Y)=>{return Y});B.push({sql:G,bps:Q.breakpoints,folderMillis:Q.when,hash:y6.createHash("sha256").update(H).digest("hex")})}catch{throw Error(`No file ${X} found in ${F} folder`)}}return B}async function K_(_,F){let B=U_(F),$=F.migrationsTable??"__drizzle_migrations",J=s`
		CREATE TABLE IF NOT EXISTS ${s.identifier($)} (
			id SERIAL PRIMARY KEY,
			hash text NOT NULL,
			created_at numeric
		)
	`;await _.session.run(J);let Q=(await _.values(s`SELECT id, hash, created_at FROM ${s.identifier($)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0,X=[];for(let H of B)if(!Q||Number(Q[2])<H.folderMillis){for(let G of H.sql)X.push(_.run(s.raw(G)));X.push(_.run(s`INSERT INTO ${s.identifier($)} ("hash", "created_at") VALUES(${H.hash}, ${H.folderMillis})`))}await _.session.migrate(X)}var n0={};w2(n0,{tfidfTerms:()=>S,tfidfIdf:()=>z0,tfidfDocuments:()=>F0,memory:()=>N,codebaseMetadata:()=>B0,codebaseFiles:()=>j});var N=_0("memory",{key:w("key").notNull(),namespace:w("namespace").notNull().default("default"),value:w("value").notNull(),timestamp:V0("timestamp").notNull(),created_at:w("created_at").notNull(),updated_at:w("updated_at").notNull()},(_)=>({pk:L_({columns:[_.key,_.namespace]}),namespaceIdx:a("idx_memory_namespace").on(_.namespace),timestampIdx:a("idx_memory_timestamp").on(_.timestamp),keyIdx:a("idx_memory_key").on(_.key)})),j=_0("codebase_files",{path:w("path").primaryKey(),mtime:V0("mtime").notNull(),hash:w("hash").notNull(),content:w("content"),language:w("language"),size:V0("size"),indexedAt:w("indexed_at").notNull()},(_)=>({mtimeIdx:a("idx_codebase_files_mtime").on(_.mtime),hashIdx:a("idx_codebase_files_hash").on(_.hash)})),S=_0("tfidf_terms",{filePath:w("file_path").notNull().references(()=>j.path,{onDelete:"cascade"}),term:w("term").notNull(),frequency:i0("frequency").notNull()},(_)=>({termIdx:a("idx_tfidf_terms_term").on(_.term),fileIdx:a("idx_tfidf_terms_file").on(_.filePath)})),F0=_0("tfidf_documents",{filePath:w("file_path").primaryKey().references(()=>j.path,{onDelete:"cascade"}),magnitude:i0("magnitude").notNull(),termCount:V0("term_count").notNull(),rawTerms:w("raw_terms").notNull()}),z0=_0("tfidf_idf",{term:w("term").primaryKey(),idfValue:i0("idf_value").notNull()}),B0=_0("codebase_metadata",{key:w("key").primaryKey(),value:w("value").notNull()});class C1{client;db;constructor(){try{let _=$0.join(process.cwd(),".sylphx-flow");if(!w0.existsSync(_))w0.mkdirSync(_,{recursive:!0});let F=$0.join(_,"memory.db");this.client=q_({url:`file:${F}`}),this.db=N_(this.client,{schema:n0})}catch(_){throw new A_("Failed to initialize database connection",{url:`file:${$0.join(process.cwd(),".sylphx-flow/memory.db")}`},_)}}async initialize(){try{if((await this.getMigrationStatus()).isMigrated){if(console.error("[INFO] Database tables already exist, checking migration state"),(await this.client.execute(`
          SELECT name FROM sqlite_master 
          WHERE type='table' AND name='__drizzle_migrations'
        `)).rows.length===0)await this.client.execute(`
            CREATE TABLE IF NOT EXISTS __drizzle_migrations (
              id INTEGER PRIMARY KEY AUTOINCREMENT,
              hash text NOT NULL UNIQUE,
              created_at numeric NOT NULL DEFAULT (strftime('%s', 'now'))
            )
          `),await this.client.execute(`
            INSERT OR IGNORE INTO __drizzle_migrations (hash, created_at) 
            VALUES ('0000_wooden_lady_bullseye', strftime('%s', 'now'))
          `),console.error("[INFO] Migration tracking initialized for existing tables");return}let F=$0.join(process.cwd(),"drizzle");if(w0.existsSync(F))await K_(this.db,{migrationsFolder:F}),console.error("[INFO] Database migrations completed");else console.error("[WARN] No migrations folder found, using fallback table creation"),await this.createTablesFallback()}catch(_){let F=`Migration failed: ${_.message}`;console.error("[ERROR]",F);try{await this.createTablesFallback(),console.error("[WARN] Fallback table creation completed")}catch(B){throw new b1("Both migration and fallback failed","initialize",B,{originalError:_.message})}}}async createTablesFallback(){console.error("[INFO] Using fallback table creation")}async close(){}getDatabasePath(){let _=$0.join(process.cwd(),".sylphx-flow");return $0.join(_,"memory.db")}async getMigrationStatus(){try{let _=await this.client.execute(`
        SELECT name FROM sqlite_master 
        WHERE type='table' AND name IN ('memory', 'codebase_files', 'tfidf_terms')
      `);return{isMigrated:_.rows.length>=2,migrationCount:_.rows.length}}catch(_){throw new b1("Failed to check migration status","getMigrationStatus",_)}}async healthCheck(){try{await this.client.execute("SELECT 1");let _=await this.getMigrationStatus(),F=await this.client.execute(`
        SELECT count(*) as count FROM memory
      `);return{healthy:!0,details:{tablesExist:_.isMigrated,tableCount:_.migrationCount,memoryEntries:F.rows[0]?.count||0}}}catch(_){return{healthy:!1,error:_.message}}}}class v1{drizzleDb;db;constructor(){this.drizzleDb=new C1,this.db=this.drizzleDb.db}async initialize(){await this.drizzleDb.initialize()}safeSerialize(_){try{return JSON.stringify(_)}catch(F){throw Error(`Failed to serialize value: ${F.message}`)}}safeDeserialize(_){try{return JSON.parse(_)}catch{return _}}async set(_,F,B="default"){if(!_||typeof _!=="string")throw new y1("Key must be a non-empty string","key",_);if(!B||typeof B!=="string")throw new y1("Namespace must be a non-empty string","namespace",B);await D_("memory.set",async()=>{let $=new Date,J=$.getTime(),Z=$.toISOString(),Q=Z,X=this.safeSerialize(F);if(await this.get(_,B))await this.db.update(N).set({value:X,timestamp:J,updated_at:Q}).where(I0(k(N.key,_),k(N.namespace,B)));else{let G={key:_,namespace:B,value:X,timestamp:J,created_at:Z,updated_at:Q};await this.db.insert(N).values(G)}},{key:_,namespace:B})}async get(_,F="default"){let B=await this.db.select().from(N).where(I0(k(N.key,_),k(N.namespace,F))).limit(1);if(B.length===0)return null;let $=B[0];return{key:$.key,namespace:$.namespace,value:this.safeDeserialize($.value),timestamp:$.timestamp,created_at:$.created_at,updated_at:$.updated_at}}async getAll(){return(await this.db.select().from(N).orderBy(S0(N.timestamp))).map((F)=>({key:F.key,namespace:F.namespace,value:this.safeDeserialize(F.value),timestamp:F.timestamp,created_at:F.created_at,updated_at:F.updated_at}))}async search(_,F){if(!_||typeof _!=="string")throw Error("Search pattern must be a non-empty string");let B=_.replace(/[^a-zA-Z0-9\s*_\-]/g,"");if(B!==_)throw Error("Search pattern contains invalid characters");let $=B.replace(/\*/g,"%"),J=P1(N.key,$);if(F&&F!=="all"){if(!/^[a-zA-Z0-9_\-]+$/.test(F))throw Error("Namespace contains invalid characters");J=I0(J,k(N.namespace,F))}return(await this.db.select().from(N).where(J).orderBy(S0(N.timestamp)).limit(1000)).map((Q)=>({key:Q.key,namespace:Q.namespace,value:this.safeDeserialize(Q.value),timestamp:Q.timestamp,created_at:Q.created_at,updated_at:Q.updated_at}))}async delete(_,F="default"){return(await this.db.delete(N).where(I0(k(N.key,_),k(N.namespace,F)))).rowsAffected>0}async clear(_){if(_&&_!=="all")await this.db.delete(N).where(k(N.namespace,_));else await this.db.delete(N)}async getStats(){let[_,F,B,$]=await Promise.all([this.db.select({count:x1()}).from(N),this.db.select({namespace:N.namespace,count:x1()}).from(N).groupBy(N.namespace).orderBy(N.namespace),this.db.select({created_at:N.created_at}).from(N).orderBy(N.created_at).limit(1),this.db.select({created_at:N.created_at}).from(N).orderBy(S0(N.created_at)).limit(1)]),J=_[0]?.count||0,Z=F.map((G)=>G.namespace),Q=Object.fromEntries(F.map((G)=>[G.namespace,G.count])),X=B[0]?.created_at||null,H=$[0]?.created_at||null;return{totalEntries:J,namespaces:Z,namespaceCounts:Q,oldestEntry:X,newestEntry:H}}async load(){let _=await this.getAll(),F={};return _.forEach((B)=>{if(!F[B.namespace])F[B.namespace]={};F[B.namespace][B.key]=B.value}),{namespaces:F}}async close(){await this.drizzleDb.close()}getDatabasePath(){return this.drizzleDb.getDatabasePath()}async setCodebaseMetadata(_,F){let B=this.safeSerialize(F);await this.db.insert(B0).values({key:_,value:B}).onConflictDoUpdate({target:B0.key,set:{value:B}})}async getCodebaseMetadata(_){let F=await this.db.select().from(B0).where(k(B0.key,_)).limit(1);if(F.length===0)return null;return this.safeDeserialize(F[0].value)}async upsertCodebaseFile(_){let F=new Date().toISOString();await this.db.insert(j).values({path:_.path,mtime:_.mtime,hash:_.hash,content:_.content||null,language:_.language||null,size:_.size||null,indexedAt:F}).onConflictDoUpdate({target:j.path,set:{mtime:_.mtime,hash:_.hash,content:_.content||null,language:_.language||null,size:_.size||null,indexedAt:F}})}async getCodebaseFile(_){let F=await this.db.select().from(j).where(k(j.path,_)).limit(1);return F.length>0?F[0]:null}async getAllCodebaseFiles(){return await this.db.select({path:j.path,mtime:j.mtime,hash:j.hash,content:j.content,language:j.language,size:j.size,indexedAt:j.indexedAt}).from(j).orderBy(j.path)}async deleteCodebaseFile(_){await this.db.delete(j).where(k(j.path,_))}async upsertTFIDFDocument(_,F){await this.db.insert(F0).values({filePath:_,magnitude:F.magnitude,termCount:F.termCount,rawTerms:this.safeSerialize(F.rawTerms)}).onConflictDoUpdate({target:F0.filePath,set:{magnitude:F.magnitude,termCount:F.termCount,rawTerms:this.safeSerialize(F.rawTerms)}})}async getTFIDFDocument(_){let F=await this.db.select().from(F0).where(k(F0.filePath,_)).limit(1);if(F.length===0)return null;let B=F[0];return{...B,rawTerms:this.safeDeserialize(B.rawTerms)}}async setTFIDFTerms(_,F){if(await this.db.delete(S).where(k(S.filePath,_)),Object.keys(F).length>0){let B=Object.entries(F).map(([J,Z])=>({filePath:_,term:J,frequency:Z})),$=100;for(let J=0;J<B.length;J+=100){let Z=B.slice(J,J+100);await this.db.insert(S).values(Z)}}}async getTFIDFTerms(_){let F=await this.db.select().from(S).where(k(S.filePath,_)),B={};return F.forEach(($)=>{B[$.term]=$.frequency}),B}async setIDFValues(_){if(await this.db.delete(z0),Object.keys(_).length>0){let F=Object.entries(_).map(([$,J])=>({term:$,idfValue:J})),B=100;for(let $=0;$<F.length;$+=100){let J=F.slice($,$+100);await this.db.insert(z0).values(J)}}}async getIDFValues(){let _=await this.db.select().from(z0),F={};return _.forEach((B)=>{F[B.term]=B.idfValue}),F}async getCodebaseIndexStats(){let F=(await this.db.select({count:j.path}).from(j)).length,$=(await this.db.selectDistinct({term:S.term}).from(S)).length,[J,Z]=await Promise.all([this.getCodebaseMetadata("indexedAt"),this.getCodebaseMetadata("version")]);return{fileCount:F,termCount:$,indexedAt:J,version:Z}}async clearCodebaseIndex(){await Promise.all([this.db.delete(j),this.db.delete(S),this.db.delete(F0),this.db.delete(z0),this.db.delete(B0)])}async searchTFIDFTerms(_){if(!_||typeof _!=="string")throw Error("Term pattern must be a non-empty string");let F=_.replace(/[^a-zA-Z0-9\s_\-]/g,"");if(F!==_)throw Error("Term pattern contains invalid characters");let B=`%${F}%`;return await this.db.select({path:j.path,term:S.term,frequency:S.frequency,language:j.language}).from(S).innerJoin(j,k(S.filePath,j.path)).where(P1(S.term,B)).orderBy(S0(S.frequency)).limit(100)}}class M_{memory;entries=[];running=!0;constructor(){this.memory=new v1}async start(){console.clear(),console.log(W.cyan.bold("\uD83E\uDDE0 Memory Manager")),console.log(W.gray(`Interactive memory management for Sylphx Flow
`)),await this.loadEntries();while(this.running)try{await this.showMainMenu()}catch(_){console.error(W.red(`Error: ${_}`)),await M.prompt([{type:"input",name:"continue",message:"Press Enter to continue..."}])}}async loadEntries(){try{this.entries=await this.memory.getAll(),this.entries.sort((_,F)=>new Date(F.updated_at).getTime()-new Date(_.updated_at).getTime())}catch(_){console.error(W.red(`Failed to load entries: ${_}`)),this.entries=[]}}async showMainMenu(){if(this.entries.length===0){console.log(W.yellow("No memory entries found."));let{action:B}=await M.prompt([{type:"list",name:"action",message:"What would you like to do?",choices:[{name:"➕ Add new entry",value:"add"},{name:"\uD83D\uDD04 Refresh entries",value:"refresh"},{name:"✗ Exit",value:"exit"}]}]);if(B==="add")await this.showAddEntry();else if(B==="refresh")await this.loadEntries();else this.running=!1;return}let _=[{name:"\uD83D\uDCDD View entry details",value:"view",short:"View"},{name:"✏️ Edit entry",value:"edit",short:"Edit"},{name:"➕ Add new entry",value:"add",short:"Add"},{name:"\uD83D\uDDD1️ Delete entry",value:"delete",short:"Delete"},{name:"\uD83D\uDD0D Search entries",value:"search",short:"Search"},{name:"\uD83D\uDD04 Refresh entries",value:"refresh",short:"Refresh"},{name:"✗ Exit",value:"exit",short:"Exit"}],{action:F}=await M.prompt([{type:"list",name:"action",message:"What would you like to do?",choices:_}]);switch(F){case"view":await this.showViewEntry();break;case"edit":await this.showEditEntry();break;case"add":await this.showAddEntry();break;case"delete":await this.showDeleteEntry();break;case"search":await this.showSearchEntries();break;case"refresh":await this.loadEntries(),console.log(W.green("✓ Entries refreshed"));break;case"exit":this.running=!1;break}}async selectEntry(_,F=!1){if(this.entries.length===0){if(F)return null;throw Error("No entries available")}let B=this.entries.map((J,Z)=>({value:J,name:`${W.cyan(`${Z+1}.`)} ${W.bold(J.namespace)}:${W.bold(J.key)}`,short:`${J.namespace}:${J.key}`}));if(F)B.unshift({name:"← Back to menu",value:null,short:"Back"});let{selected:$}=await M.prompt([{type:"list",name:"selected",message:_,choices:B,pageSize:15}]);return $}async showViewEntry(){let _=await this.selectEntry("Select entry to view:",!0);if(!_)return;console.clear(),console.log(W.cyan.bold("\uD83D\uDCC4 Entry Details")),console.log(W.gray("─".repeat(50))),console.log(W.blue.bold("Namespace:"),_.namespace),console.log(W.blue.bold("Key:"),_.key),console.log(W.blue.bold("Updated:"),_.updated_at),console.log(W.blue.bold(`
Value:`));let F=JSON.stringify(_.value,null,2);console.log(W.gray(F)),await M.prompt([{type:"input",name:"continue",message:"Press Enter to continue..."}])}async showEditEntry(){let _=await this.selectEntry("Select entry to edit:",!0);if(!_)return;console.clear(),console.log(W.yellow.bold("✏️ Edit Entry")),console.log(W.gray("─".repeat(50))),console.log(`${W.blue("Editing:")} ${_.namespace}:${_.key}
`);let F=await M.prompt([{type:"input",name:"namespace",message:"Namespace:",default:_.namespace,validate:(B)=>B.trim().length>0||"Namespace is required"},{type:"input",name:"key",message:"Key:",default:_.key,validate:(B)=>B.trim().length>0||"Key is required"},{type:"editor",name:"value",message:"Value (JSON):",default:JSON.stringify(_.value,null,2),validate:(B)=>{try{return JSON.parse(B),!0}catch{return"Invalid JSON format"}}}]);try{let B=JSON.parse(F.value);if(await this.memory.set(F.key,B,F.namespace),F.namespace!==_.namespace||F.key!==_.key)await this.memory.delete(_.key,_.namespace);await this.loadEntries(),console.log(W.green(`✓ Updated ${F.namespace}:${F.key}`))}catch(B){console.error(W.red(`Failed to update entry: ${B}`))}await M.prompt([{type:"input",name:"continue",message:"Press Enter to continue..."}])}async showAddEntry(){console.clear(),console.log(W.green.bold("➕ Add New Entry")),console.log(W.gray("─".repeat(50)));let _=await M.prompt([{type:"input",name:"namespace",message:"Namespace:",default:"default",validate:(F)=>F.trim().length>0||"Namespace is required"},{type:"input",name:"key",message:"Key:",validate:(F)=>F.trim().length>0||"Key is required"},{type:"editor",name:"value",message:"Value (JSON):",default:`{
  
}`,validate:(F)=>{try{return JSON.parse(F),!0}catch{return"Invalid JSON format"}}}]);try{let F=JSON.parse(_.value);await this.memory.set(_.key,F,_.namespace),await this.loadEntries(),console.log(W.green(`✓ Added ${_.namespace}:${_.key}`))}catch(F){console.error(W.red(`Failed to add entry: ${F}`))}await M.prompt([{type:"input",name:"continue",message:"Press Enter to continue..."}])}async showDeleteEntry(){let _=await this.selectEntry("Select entry to delete:",!0);if(!_)return;console.clear(),console.log(W.red.bold("\uD83D\uDDD1️ Delete Entry")),console.log(W.gray("─".repeat(50))),console.log(`${W.blue("Entry:")} ${_.namespace}:${_.key}`);let F=JSON.stringify(_.value),B=F.length>100?`${F.substring(0,100)}...`:F;console.log(`${W.blue("Value:")} ${W.gray(B)}`);let{confirmed:$}=await M.prompt([{type:"confirm",name:"confirmed",message:W.yellow("Are you sure you want to delete this entry?"),default:!1}]);if($)try{await this.memory.delete(_.key,_.namespace),await this.loadEntries(),console.log(W.green(`✓ Deleted ${_.namespace}:${_.key}`))}catch(J){console.error(W.red(`Failed to delete entry: ${J}`))}else console.log(W.gray("Delete cancelled"));await M.prompt([{type:"input",name:"continue",message:"Press Enter to continue..."}])}async showSearchEntries(){console.clear(),console.log(W.magenta.bold("\uD83D\uDD0D Search Entries")),console.log(W.gray("─".repeat(50)));let{query:_}=await M.prompt([{type:"input",name:"query",message:"Search query:",validate:(B)=>B.trim().length>0||"Search query is required"}]),F=this.entries.filter((B)=>B.namespace.toLowerCase().includes(_.toLowerCase())||B.key.toLowerCase().includes(_.toLowerCase())||JSON.stringify(B.value).toLowerCase().includes(_.toLowerCase()));if(F.length===0)console.log(W.yellow("No entries found matching your search."));else console.log(W.cyan(`
Found ${F.length} matching entries:
`)),F.forEach((B,$)=>{let J=JSON.stringify(B.value),Z=J.length>80?`${J.substring(0,80)}...`:J;console.log(`${W.cyan(`${$+1}.`)} ${W.bold(B.namespace)}:${W.bold(B.key)}`),console.log(`   ${W.gray(Z)}
`)});await M.prompt([{type:"input",name:"continue",message:"Press Enter to continue..."}])}}var j_=async()=>{await new M_().start()};var f1=async()=>{await j_()},y7={name:"memory-tui",description:"Launch interactive memory management TUI",options:[{flags:"--target <type>",description:`Target platform (${q.getImplementedTargets().join(", ")}, default: auto-detect)`}],handler:f1};import h1 from"node:fs/promises";import u1 from"node:path";async function v6(_,F){try{if(F)return await h1.readFile(u1.resolve(F),"utf-8");let B=u1.join(process.cwd(),"agents",`${_}.md`);try{return await h1.readFile(B,"utf-8")}catch($){let J=E_(),Z=u1.join(J,`${_}.md`);return await h1.readFile(Z,"utf-8")}}catch(B){throw new D(`Agent '${_}' not found${F?` at ${F}`:""}`,"AGENT_NOT_FOUND")}}function f6(_){let F=/^---\s*\n[\s\S]*?\n---\s*\n/,B=_.match(F);if(B)return _.substring(B[0].length).trim();return _.trim()}function h6(_,F,B,$){let J=q.getTarget(_);if(!J)throw new D(`Target not found: ${_}`,"TARGET_NOT_FOUND");if(!J.isImplemented)throw new D(`Target '${_}' is not implemented. Supported targets: ${R_().join(", ")}`,"TARGET_NOT_IMPLEMENTED");if(!J.executeCommand)throw new D(`Target '${_}' does not support command execution. Supported targets: ${R_().join(", ")}`,"EXECUTION_NOT_SUPPORTED");return J.executeCommand(F,B,$)}function R_(){return q.getImplementedTargetIDs().filter((_)=>{return q.getTarget(_)?.executeCommand!==void 0})}var T_=new O("run").description("Run a prompt with a specific agent (default: master-craftsman) using the detected or specified target").option("--target <name>",`Target platform (${q.getImplementedTargetIDs().join(", ")}, default: auto-detect)`).option("--agent <name>","Agent to use (default: master-craftsman)").option("--agent-file <path>","Load agent from specific file path (overrides --agent)").option("--verbose","Show detailed output").option("--dry-run","Show what would be done without executing the command").argument("[prompt]","The prompt to execute with the agent (optional - if not provided, will start Claude Code interactively)").action(async(_,F)=>{if(F.prompt=_,!F.agent)F.agent="master-craftsman";F.target=await q.resolveTarget({target:F.target,allowSelection:!0});let{verbose:B}=F;if(B){if(console.log("\uD83D\uDE80 Sylphx Flow Run"),console.log("===================="),console.log(`\uD83C\uDFAF Target: ${F.target}`),console.log(`\uD83E\uDD16 Agent: ${F.agent}`),_)console.log(`\uD83D\uDCAC Prompt: ${_}`);else console.log("\uD83D\uDCAC Prompt: [Interactive mode]");console.log("")}let $=await v6(F.agent,F.agentFile),Z=`AGENT INSTRUCTIONS:
${f6($)}`;if(B){let X=F.agentFile?`file: ${F.agentFile}`:`agent: ${F.agent}`;console.log(`\uD83D\uDCDD Using agent content from ${X} (${Z.length} chars)`)}let Q="";if(_&&_.trim()!=="")Q=_;if(B)if(console.log("\uD83D\uDCDD System Prompt:"),console.log("================"),console.log(Z.substring(0,500)+(Z.length>500?"...":"")),console.log(""),Q.trim()!=="")console.log("\uD83D\uDCDD User Prompt:"),console.log("=============="),console.log(Q.substring(0,500)+(Q.length>500?"...":"")),console.log("");else console.log("\uD83D\uDCDD User Prompt: [Interactive mode - Claude will greet the user]"),console.log("");await h6(F.target,Z,Q,F)});function O_(){console.log("\uD83D\uDE80 Sylphx Flow CLI - Type-safe development flow"),console.log("========================================="),console.log(""),console.log("Available commands:"),console.log("  init     Initialize project with Sylphx Flow"),console.log("  mcp      Manage MCP tools"),console.log("  memory   Manage memory storage"),console.log("  tui      Interactive TUI for all operations"),console.log(""),console.log("Examples:"),console.log("  sylphx-flow init"),console.log("  sylphx-flow init --target opencode"),console.log("  sylphx-flow mcp install --all"),console.log("  sylphx-flow memory set key value"),console.log("  sylphx-flow tui"),console.log(""),console.log('Run "sylphx-flow <command> --help" for more information about a command.')}function u6(){let _=new O;return _.name("sylphx-flow").description("Sylphx Flow - Type-safe development flow CLI").version("1.0.0","-v, --version","Show version number").helpOption("-h, --help","Display help for command").configureHelp({sortSubcommands:!0,showGlobalOptions:!0}),_.configureOutput({writeErr:(F)=>process.stderr.write(F),writeOut:(F)=>process.stdout.write(F)}),_.addCommand(Y_),_.addCommand(e),_.addCommand(c),_.addCommand(T_),_.addCommand(r2),_.addCommand(Y0),_.command("tui").description("Launch interactive Sylphx Flow TUI").option("--target <type>","Target platform (opencode, default: auto-detect)").action(f1),_.action(()=>{O_()}),_}function V_(){let _=u6();m6();try{_.parse(process.argv)}catch(F){g6(F)}}function m6(){process.on("uncaughtException",(_)=>{console.error("✗ Uncaught Exception:"),console.error(`  ${_.message}`),console.error("  Stack trace:",_.stack),process.exit(1)}),process.on("unhandledRejection",(_,F)=>{console.error("✗ Unhandled Promise Rejection:"),console.error(`  Reason: ${_}`),console.error("  Promise:",F),process.exit(1)}),process.on("SIGINT",()=>{console.log(`
\uD83D\uDC4B Sylphx Flow CLI terminated by user`),process.exit(0)}),process.on("SIGTERM",()=>{console.log(`
\uD83D\uDC4B Sylphx Flow CLI terminated`),process.exit(0)})}function g6(_){if(_ instanceof Error){if(_.name==="CommanderError"){let F=_;if(F.code==="commander.help"||F.code==="commander.version")return;console.error(`✗ ${F.message}`),process.exit(F.exitCode||1)}if(console.error(`✗ Error: ${_.message}`),_.stack)console.error(`
Stack trace:`),console.error(_.stack)}else console.error(`✗ Unknown error: ${String(_)}`);process.exit(1)}V_();
