import{s as J9,u as uv}from"./index-59fev03a.js";import"./index-q396ys1g.js";import{y as z9}from"./embeddings-058791a0.js";import"./index-zyg7n85d.js";import{G as l9}from"./paths-732qkk1j.js";import{K as MW,L as p,M as m8,N as Aw}from"./index-f47z6pkn.js";var MQ=p((Q0,EQ)=>{(function(f,v){typeof Q0==="object"&&typeof EQ<"u"?v(Q0):typeof define==="function"&&define.amd?define(["exports"],v):v(f.URI=f.URI||{})})(Q0,function(f){function v(){for(var q=arguments.length,l=Array(q),$=0;$<q;$++)l[$]=arguments[$];if(l.length>1){l[0]=l[0].slice(0,-1);var O=l.length-1;for(var L=1;L<O;++L)l[L]=l[L].slice(1,-1);return l[O]=l[O].slice(1),l.join("")}else return l[0]}function Q(q){return"(?:"+q+")"}function P(q){return q===void 0?"undefined":q===null?"null":Object.prototype.toString.call(q).split(" ").pop().split("]").shift().toLowerCase()}function h(q){return q.toUpperCase()}function W(q){return q!==void 0&&q!==null?q instanceof Array?q:typeof q.length!=="number"||q.split||q.setInterval||q.call?[q]:Array.prototype.slice.call(q):[]}function J(q,l){var $=q;if(l)for(var O in l)$[O]=l[O];return $}function X(q){var l="[A-Za-z]",$="[\\x0D]",O="[0-9]",L="[\\x22]",r=v(O,"[A-Fa-f]"),d="[\\x0A]",Qv="[\\x20]",wv=Q(Q("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+Q("%[89A-Fa-f]"+r+"%"+r+r)+"|"+Q("%"+r+r)),Vv="[\\:\\/\\?\\#\\[\\]\\@]",hv="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Dv=v(Vv,hv),Uv=q?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",qv=q?"[\\uE000-\\uF8FF]":"[]",Wv=v(l,O,"[\\-\\.\\_\\~]",Uv),Hv=Q(l+v(l,O,"[\\+\\-\\.]")+"*"),Yv=Q(Q(wv+"|"+v(Wv,hv,"[\\:]"))+"*"),Rf=Q(Q("25[0-5]")+"|"+Q("2[0-4]"+O)+"|"+Q("1"+O+O)+"|"+Q("[1-9]"+O)+"|"+O),Tv=Q(Q("25[0-5]")+"|"+Q("2[0-4]"+O)+"|"+Q("1"+O+O)+"|"+Q("0?[1-9]"+O)+"|0?0?"+O),mv=Q(Tv+"\\."+Tv+"\\."+Tv+"\\."+Tv),Bv=Q(r+"{1,4}"),xv=Q(Q(Bv+"\\:"+Bv)+"|"+mv),nv=Q(Q(Bv+"\\:")+"{6}"+xv),Pf=Q("\\:\\:"+Q(Bv+"\\:")+"{5}"+xv),gf=Q(Q(Bv)+"?\\:\\:"+Q(Bv+"\\:")+"{4}"+xv),lf=Q(Q(Q(Bv+"\\:")+"{0,1}"+Bv)+"?\\:\\:"+Q(Bv+"\\:")+"{3}"+xv),z1=Q(Q(Q(Bv+"\\:")+"{0,2}"+Bv)+"?\\:\\:"+Q(Bv+"\\:")+"{2}"+xv),y1=Q(Q(Q(Bv+"\\:")+"{0,3}"+Bv)+"?\\:\\:"+Bv+"\\:"+xv),k1=Q(Q(Q(Bv+"\\:")+"{0,4}"+Bv)+"?\\:\\:"+xv),mf=Q(Q(Q(Bv+"\\:")+"{0,5}"+Bv)+"?\\:\\:"+Bv),nf=Q(Q(Q(Bv+"\\:")+"{0,6}"+Bv)+"?\\:\\:"),Gf=Q([nv,Pf,gf,lf,z1,y1,k1,mf,nf].join("|")),cf=Q(Q(Wv+"|"+wv)+"+"),g0=Q(Gf+"\\%25"+cf),_f=Q(Gf+Q("\\%25|\\%(?!"+r+"{2})")+cf),A9=Q("[vV]"+r+"+\\."+v(Wv,hv,"[\\:]")+"+"),j9=Q("\\["+Q(_f+"|"+Gf+"|"+A9)+"\\]"),Zh=Q(Q(wv+"|"+v(Wv,hv))+"*"),D1=Q(j9+"|"+mv+"(?!"+Zh+")|"+Zh),H1=Q(O+"*"),Th=Q(Q(Yv+"@")+"?"+D1+Q("\\:"+H1)+"?"),K1=Q(wv+"|"+v(Wv,hv,"[\\:\\@]")),b9=Q(K1+"*"),xh=Q(K1+"+"),S9=Q(Q(wv+"|"+v(Wv,hv,"[\\@]"))+"+"),qf=Q(Q("\\/"+b9)+"*"),pf=Q("\\/"+Q(xh+qf)+"?"),_0=Q(S9+qf),r1=Q(xh+qf),df="(?!"+K1+")",tw=Q(qf+"|"+pf+"|"+_0+"|"+r1+"|"+df),of=Q(Q(K1+"|"+v("[\\/\\?]",qv))+"*"),$1=Q(Q(K1+"|[\\/\\?]")+"*"),uh=Q(Q("\\/\\/"+Th+qf)+"|"+pf+"|"+r1+"|"+df),R9=Q(Hv+"\\:"+uh+Q("\\?"+of)+"?"+Q("\\#"+$1)+"?"),g9=Q(Q("\\/\\/"+Th+qf)+"|"+pf+"|"+_0+"|"+df),_9=Q(g9+Q("\\?"+of)+"?"+Q("\\#"+$1)+"?"),ew=Q(R9+"|"+_9),vX=Q(Hv+"\\:"+uh+Q("\\?"+of)+"?"),fX="^("+Hv+")\\:"+Q(Q("\\/\\/("+Q("("+Yv+")@")+"?("+D1+")"+Q("\\:("+H1+")")+"?)")+"?("+qf+"|"+pf+"|"+r1+"|"+df+")")+Q("\\?("+of+")")+"?"+Q("\\#("+$1+")")+"?$",hX="^(){0}"+Q(Q("\\/\\/("+Q("("+Yv+")@")+"?("+D1+")"+Q("\\:("+H1+")")+"?)")+"?("+qf+"|"+pf+"|"+_0+"|"+df+")")+Q("\\?("+of+")")+"?"+Q("\\#("+$1+")")+"?$",QX="^("+Hv+")\\:"+Q(Q("\\/\\/("+Q("("+Yv+")@")+"?("+D1+")"+Q("\\:("+H1+")")+"?)")+"?("+qf+"|"+pf+"|"+r1+"|"+df+")")+Q("\\?("+of+")")+"?$",PX="^"+Q("\\#("+$1+")")+"?$",WX="^"+Q("("+Yv+")@")+"?("+D1+")"+Q("\\:("+H1+")")+"?$";return{NOT_SCHEME:new RegExp(v("[^]",l,O,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(v("[^\\%\\:]",Wv,hv),"g"),NOT_HOST:new RegExp(v("[^\\%\\[\\]\\:]",Wv,hv),"g"),NOT_PATH:new RegExp(v("[^\\%\\/\\:\\@]",Wv,hv),"g"),NOT_PATH_NOSCHEME:new RegExp(v("[^\\%\\/\\@]",Wv,hv),"g"),NOT_QUERY:new RegExp(v("[^\\%]",Wv,hv,"[\\:\\@\\/\\?]",qv),"g"),NOT_FRAGMENT:new RegExp(v("[^\\%]",Wv,hv,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(v("[^]",Wv,hv),"g"),UNRESERVED:new RegExp(Wv,"g"),OTHER_CHARS:new RegExp(v("[^\\%]",Wv,Dv),"g"),PCT_ENCODED:new RegExp(wv,"g"),IPV4ADDRESS:new RegExp("^("+mv+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Gf+")"+Q(Q("\\%25|\\%(?!"+r+"{2})")+"("+cf+")")+"?\\]?$")}}var Y=X(!1),G=X(!0),z=function(){function q(l,$){var O=[],L=!0,r=!1,d=void 0;try{for(var Qv=l[Symbol.iterator](),wv;!(L=(wv=Qv.next()).done);L=!0)if(O.push(wv.value),$&&O.length===$)break}catch(Vv){r=!0,d=Vv}finally{try{if(!L&&Qv.return)Qv.return()}finally{if(r)throw d}}return O}return function(l,$){if(Array.isArray(l))return l;else if(Symbol.iterator in Object(l))return q(l,$);else throw TypeError("Invalid attempt to destructure non-iterable instance")}}(),K=function(q){if(Array.isArray(q)){for(var l=0,$=Array(q.length);l<q.length;l++)$[l]=q[l];return $}else return Array.from(q)},E=2147483647,B=36,D=1,M=26,H=38,V=700,F=72,U=128,N="-",S=/^xn--/,y=/[^\0-\x7E]/,a=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=B-D,x=Math.floor,Z=String.fromCharCode;function I(q){throw RangeError(T[q])}function b(q,l){var $=[],O=q.length;while(O--)$[O]=l(q[O]);return $}function g(q,l){var $=q.split("@"),O="";if($.length>1)O=$[0]+"@",q=$[1];q=q.replace(a,".");var L=q.split("."),r=b(L,l).join(".");return O+r}function C(q){var l=[],$=0,O=q.length;while($<O){var L=q.charCodeAt($++);if(L>=55296&&L<=56319&&$<O){var r=q.charCodeAt($++);if((r&64512)==56320)l.push(((L&1023)<<10)+(r&1023)+65536);else l.push(L),$--}else l.push(L)}return l}var Xv=function(l){return String.fromCodePoint.apply(String,K(l))},t=function(l){if(l-48<10)return l-22;if(l-65<26)return l-65;if(l-97<26)return l-97;return B},fv=function(l,$){return l+22+75*(l<26)-(($!=0)<<5)},s=function(l,$,O){var L=0;l=O?x(l/V):l>>1,l+=x(l/$);for(;l>R*M>>1;L+=B)l=x(l/R);return x(L+(R+1)*l/(l+H))},m=function(l){var $=[],O=l.length,L=0,r=U,d=F,Qv=l.lastIndexOf(N);if(Qv<0)Qv=0;for(var wv=0;wv<Qv;++wv){if(l.charCodeAt(wv)>=128)I("not-basic");$.push(l.charCodeAt(wv))}for(var Vv=Qv>0?Qv+1:0;Vv<O;){var hv=L;for(var Dv=1,Uv=B;;Uv+=B){if(Vv>=O)I("invalid-input");var qv=t(l.charCodeAt(Vv++));if(qv>=B||qv>x((E-L)/Dv))I("overflow");L+=qv*Dv;var Wv=Uv<=d?D:Uv>=d+M?M:Uv-d;if(qv<Wv)break;var Hv=B-Wv;if(Dv>x(E/Hv))I("overflow");Dv*=Hv}var Yv=$.length+1;if(d=s(L-hv,Yv,hv==0),x(L/Yv)>E-r)I("overflow");r+=x(L/Yv),L%=Yv,$.splice(L++,0,r)}return String.fromCodePoint.apply(String,$)},$v=function(l){var $=[];l=C(l);var O=l.length,L=U,r=0,d=F,Qv=!0,wv=!1,Vv=void 0;try{for(var hv=l[Symbol.iterator](),Dv;!(Qv=(Dv=hv.next()).done);Qv=!0){var Uv=Dv.value;if(Uv<128)$.push(Z(Uv))}}catch(_f){wv=!0,Vv=_f}finally{try{if(!Qv&&hv.return)hv.return()}finally{if(wv)throw Vv}}var qv=$.length,Wv=qv;if(qv)$.push(N);while(Wv<O){var Hv=E,Yv=!0,Rf=!1,Tv=void 0;try{for(var mv=l[Symbol.iterator](),Bv;!(Yv=(Bv=mv.next()).done);Yv=!0){var xv=Bv.value;if(xv>=L&&xv<Hv)Hv=xv}}catch(_f){Rf=!0,Tv=_f}finally{try{if(!Yv&&mv.return)mv.return()}finally{if(Rf)throw Tv}}var nv=Wv+1;if(Hv-L>x((E-r)/nv))I("overflow");r+=(Hv-L)*nv,L=Hv;var Pf=!0,gf=!1,lf=void 0;try{for(var z1=l[Symbol.iterator](),y1;!(Pf=(y1=z1.next()).done);Pf=!0){var k1=y1.value;if(k1<L&&++r>E)I("overflow");if(k1==L){var mf=r;for(var nf=B;;nf+=B){var Gf=nf<=d?D:nf>=d+M?M:nf-d;if(mf<Gf)break;var cf=mf-Gf,g0=B-Gf;$.push(Z(fv(Gf+cf%g0,0))),mf=x(cf/g0)}$.push(Z(fv(mf,0))),d=s(r,nv,Wv==qv),r=0,++Wv}}}catch(_f){gf=!0,lf=_f}finally{try{if(!Pf&&z1.return)z1.return()}finally{if(gf)throw lf}}++r,++L}return $.join("")},jv=function(l){return g(l,function($){return S.test($)?m($.slice(4).toLowerCase()):$})},Rv=function(l){return g(l,function($){return y.test($)?"xn--"+$v($):$})},Pv={version:"2.1.0",ucs2:{decode:C,encode:Xv},decode:m,encode:$v,toASCII:Rv,toUnicode:jv},Ov={};function Nv(q){var l=q.charCodeAt(0),$=void 0;if(l<16)$="%0"+l.toString(16).toUpperCase();else if(l<128)$="%"+l.toString(16).toUpperCase();else if(l<2048)$="%"+(l>>6|192).toString(16).toUpperCase()+"%"+(l&63|128).toString(16).toUpperCase();else $="%"+(l>>12|224).toString(16).toUpperCase()+"%"+(l>>6&63|128).toString(16).toUpperCase()+"%"+(l&63|128).toString(16).toUpperCase();return $}function gv(q){var l="",$=0,O=q.length;while($<O){var L=parseInt(q.substr($+1,2),16);if(L<128)l+=String.fromCharCode(L),$+=3;else if(L>=194&&L<224){if(O-$>=6){var r=parseInt(q.substr($+4,2),16);l+=String.fromCharCode((L&31)<<6|r&63)}else l+=q.substr($,6);$+=6}else if(L>=224){if(O-$>=9){var d=parseInt(q.substr($+4,2),16),Qv=parseInt(q.substr($+7,2),16);l+=String.fromCharCode((L&15)<<12|(d&63)<<6|Qv&63)}else l+=q.substr($,9);$+=9}else l+=q.substr($,3),$+=3}return l}function Kf(q,l){function $(O){var L=gv(O);return!L.match(l.UNRESERVED)?O:L}if(q.scheme)q.scheme=String(q.scheme).replace(l.PCT_ENCODED,$).toLowerCase().replace(l.NOT_SCHEME,"");if(q.userinfo!==void 0)q.userinfo=String(q.userinfo).replace(l.PCT_ENCODED,$).replace(l.NOT_USERINFO,Nv).replace(l.PCT_ENCODED,h);if(q.host!==void 0)q.host=String(q.host).replace(l.PCT_ENCODED,$).toLowerCase().replace(l.NOT_HOST,Nv).replace(l.PCT_ENCODED,h);if(q.path!==void 0)q.path=String(q.path).replace(l.PCT_ENCODED,$).replace(q.scheme?l.NOT_PATH:l.NOT_PATH_NOSCHEME,Nv).replace(l.PCT_ENCODED,h);if(q.query!==void 0)q.query=String(q.query).replace(l.PCT_ENCODED,$).replace(l.NOT_QUERY,Nv).replace(l.PCT_ENCODED,h);if(q.fragment!==void 0)q.fragment=String(q.fragment).replace(l.PCT_ENCODED,$).replace(l.NOT_FRAGMENT,Nv).replace(l.PCT_ENCODED,h);return q}function Yf(q){return q.replace(/^0*(.*)/,"$1")||"0"}function Lv(q,l){var $=q.match(l.IPV4ADDRESS)||[],O=z($,2),L=O[1];if(L)return L.split(".").map(Yf).join(".");else return q}function Ev(q,l){var $=q.match(l.IPV6ADDRESS)||[],O=z($,3),L=O[1],r=O[2];if(L){var d=L.toLowerCase().split("::").reverse(),Qv=z(d,2),wv=Qv[0],Vv=Qv[1],hv=Vv?Vv.split(":").map(Yf):[],Dv=wv.split(":").map(Yf),Uv=l.IPV4ADDRESS.test(Dv[Dv.length-1]),qv=Uv?7:8,Wv=Dv.length-qv,Hv=Array(qv);for(var Yv=0;Yv<qv;++Yv)Hv[Yv]=hv[Yv]||Dv[Wv+Yv]||"";if(Uv)Hv[qv-1]=Lv(Hv[qv-1],l);var Rf=Hv.reduce(function(nv,Pf,gf){if(!Pf||Pf==="0"){var lf=nv[nv.length-1];if(lf&&lf.index+lf.length===gf)lf.length++;else nv.push({index:gf,length:1})}return nv},[]),Tv=Rf.sort(function(nv,Pf){return Pf.length-nv.length})[0],mv=void 0;if(Tv&&Tv.length>1){var Bv=Hv.slice(0,Tv.index),xv=Hv.slice(Tv.index+Tv.length);mv=Bv.join(":")+"::"+xv.join(":")}else mv=Hv.join(":");if(r)mv+="%"+r;return mv}else return q}var jf=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,bv="".match(/(){0}/)[1]===void 0;function Jv(q){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$={},O=l.iri!==!1?G:Y;if(l.reference==="suffix")q=(l.scheme?l.scheme+":":"")+"//"+q;var L=q.match(jf);if(L){if(bv){if($.scheme=L[1],$.userinfo=L[3],$.host=L[4],$.port=parseInt(L[5],10),$.path=L[6]||"",$.query=L[7],$.fragment=L[8],isNaN($.port))$.port=L[5]}else if($.scheme=L[1]||void 0,$.userinfo=q.indexOf("@")!==-1?L[3]:void 0,$.host=q.indexOf("//")!==-1?L[4]:void 0,$.port=parseInt(L[5],10),$.path=L[6]||"",$.query=q.indexOf("?")!==-1?L[7]:void 0,$.fragment=q.indexOf("#")!==-1?L[8]:void 0,isNaN($.port))$.port=q.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?L[4]:void 0;if($.host)$.host=Ev(Lv($.host,O),O);if($.scheme===void 0&&$.userinfo===void 0&&$.host===void 0&&$.port===void 0&&!$.path&&$.query===void 0)$.reference="same-document";else if($.scheme===void 0)$.reference="relative";else if($.fragment===void 0)$.reference="absolute";else $.reference="uri";if(l.reference&&l.reference!=="suffix"&&l.reference!==$.reference)$.error=$.error||"URI is not a "+l.reference+" reference.";var r=Ov[(l.scheme||$.scheme||"").toLowerCase()];if(!l.unicodeSupport&&(!r||!r.unicodeSupport)){if($.host&&(l.domainHost||r&&r.domainHost))try{$.host=Pv.toASCII($.host.replace(O.PCT_ENCODED,gv).toLowerCase())}catch(d){$.error=$.error||"Host's domain name can not be converted to ASCII via punycode: "+d}Kf($,Y)}else Kf($,O);if(r&&r.parse)r.parse($,l)}else $.error=$.error||"URI can not be parsed.";return $}function $f(q,l){var $=l.iri!==!1?G:Y,O=[];if(q.userinfo!==void 0)O.push(q.userinfo),O.push("@");if(q.host!==void 0)O.push(Ev(Lv(String(q.host),$),$).replace($.IPV6ADDRESS,function(L,r,d){return"["+r+(d?"%25"+d:"")+"]"}));if(typeof q.port==="number"||typeof q.port==="string")O.push(":"),O.push(String(q.port));return O.length?O.join(""):void 0}var Bf=/^\.\.?\//,bf=/^\/\.(\/|$)/,Sf=/^\/\.\.(\/|$)/,Fv=/^\/?(?:.|\n)*?(?=\/|$)/;function av(q){var l=[];while(q.length)if(q.match(Bf))q=q.replace(Bf,"");else if(q.match(bf))q=q.replace(bf,"/");else if(q.match(Sf))q=q.replace(Sf,"/"),l.pop();else if(q==="."||q==="..")q="";else{var $=q.match(Fv);if($){var O=$[0];q=q.slice(O.length),l.push(O)}else throw Error("Unexpected dot segment condition")}return l.join("")}function kv(q){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=l.iri?G:Y,O=[],L=Ov[(l.scheme||q.scheme||"").toLowerCase()];if(L&&L.serialize)L.serialize(q,l);if(q.host){if($.IPV6ADDRESS.test(q.host));else if(l.domainHost||L&&L.domainHost)try{q.host=!l.iri?Pv.toASCII(q.host.replace($.PCT_ENCODED,gv).toLowerCase()):Pv.toUnicode(q.host)}catch(Qv){q.error=q.error||"Host's domain name can not be converted to "+(!l.iri?"ASCII":"Unicode")+" via punycode: "+Qv}}if(Kf(q,$),l.reference!=="suffix"&&q.scheme)O.push(q.scheme),O.push(":");var r=$f(q,l);if(r!==void 0){if(l.reference!=="suffix")O.push("//");if(O.push(r),q.path&&q.path.charAt(0)!=="/")O.push("/")}if(q.path!==void 0){var d=q.path;if(!l.absolutePath&&(!L||!L.absolutePath))d=av(d);if(r===void 0)d=d.replace(/^\/\//,"/%2F");O.push(d)}if(q.query!==void 0)O.push("?"),O.push(q.query);if(q.fragment!==void 0)O.push("#"),O.push(q.fragment);return O.join("")}function _v(q,l){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},O=arguments[3],L={};if(!O)q=Jv(kv(q,$),$),l=Jv(kv(l,$),$);if($=$||{},!$.tolerant&&l.scheme)L.scheme=l.scheme,L.userinfo=l.userinfo,L.host=l.host,L.port=l.port,L.path=av(l.path||""),L.query=l.query;else{if(l.userinfo!==void 0||l.host!==void 0||l.port!==void 0)L.userinfo=l.userinfo,L.host=l.host,L.port=l.port,L.path=av(l.path||""),L.query=l.query;else{if(!l.path)if(L.path=q.path,l.query!==void 0)L.query=l.query;else L.query=q.query;else{if(l.path.charAt(0)==="/")L.path=av(l.path);else{if((q.userinfo!==void 0||q.host!==void 0||q.port!==void 0)&&!q.path)L.path="/"+l.path;else if(!q.path)L.path=l.path;else L.path=q.path.slice(0,q.path.lastIndexOf("/")+1)+l.path;L.path=av(L.path)}L.query=l.query}L.userinfo=q.userinfo,L.host=q.host,L.port=q.port}L.scheme=q.scheme}return L.fragment=l.fragment,L}function hf(q,l,$){var O=J({scheme:"null"},$);return kv(_v(Jv(q,O),Jv(l,O),O,!0),O)}function Zv(q,l){if(typeof q==="string")q=kv(Jv(q,l),l);else if(P(q)==="object")q=Jv(kv(q,l),l);return q}function _1(q,l,$){if(typeof q==="string")q=kv(Jv(q,$),$);else if(P(q)==="object")q=kv(q,$);if(typeof l==="string")l=kv(Jv(l,$),$);else if(P(l)==="object")l=kv(l,$);return q===l}function S0(q,l){return q&&q.toString().replace(!l||!l.iri?Y.ESCAPE:G.ESCAPE,Nv)}function iv(q,l){return q&&q.toString().replace(!l||!l.iri?Y.PCT_ENCODED:G.PCT_ENCODED,gv)}var G1={scheme:"http",domainHost:!0,parse:function(l,$){if(!l.host)l.error=l.error||"HTTP URIs must have a host.";return l},serialize:function(l,$){var O=String(l.scheme).toLowerCase()==="https";if(l.port===(O?443:80)||l.port==="")l.port=void 0;if(!l.path)l.path="/";return l}},Rh={scheme:"https",domainHost:G1.domainHost,parse:G1.parse,serialize:G1.serialize};function gh(q){return typeof q.secure==="boolean"?q.secure:String(q.scheme).toLowerCase()==="wss"}var q1={scheme:"ws",domainHost:!0,parse:function(l,$){var O=l;return O.secure=gh(O),O.resourceName=(O.path||"/")+(O.query?"?"+O.query:""),O.path=void 0,O.query=void 0,O},serialize:function(l,$){if(l.port===(gh(l)?443:80)||l.port==="")l.port=void 0;if(typeof l.secure==="boolean")l.scheme=l.secure?"wss":"ws",l.secure=void 0;if(l.resourceName){var O=l.resourceName.split("?"),L=z(O,2),r=L[0],d=L[1];l.path=r&&r!=="/"?r:void 0,l.query=d,l.resourceName=void 0}return l.fragment=void 0,l}},_h={scheme:"wss",domainHost:q1.domainHost,parse:q1.parse,serialize:q1.serialize},D9={},H9=!0,yh="[A-Za-z0-9\\-\\.\\_\\~"+(H9?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",Qf="[0-9A-Fa-f]",K9=Q(Q("%[EFef]"+Qf+"%"+Qf+Qf+"%"+Qf+Qf)+"|"+Q("%[89A-Fa-f]"+Qf+"%"+Qf+Qf)+"|"+Q("%"+Qf+Qf)),$9="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",E9="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",M9=v(E9,"[\\\"\\\\]"),O9="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",L9=new RegExp(yh,"g"),af=new RegExp(K9,"g"),V9=new RegExp(v("[^]",$9,"[\\.]","[\\\"]",M9),"g"),kh=new RegExp(v("[^]",yh,O9),"g"),U9=kh;function R0(q){var l=gv(q);return!l.match(L9)?q:l}var rh={scheme:"mailto",parse:function(l,$){var O=l,L=O.to=O.path?O.path.split(","):[];if(O.path=void 0,O.query){var r=!1,d={},Qv=O.query.split("&");for(var wv=0,Vv=Qv.length;wv<Vv;++wv){var hv=Qv[wv].split("=");switch(hv[0]){case"to":var Dv=hv[1].split(",");for(var Uv=0,qv=Dv.length;Uv<qv;++Uv)L.push(Dv[Uv]);break;case"subject":O.subject=iv(hv[1],$);break;case"body":O.body=iv(hv[1],$);break;default:r=!0,d[iv(hv[0],$)]=iv(hv[1],$);break}}if(r)O.headers=d}O.query=void 0;for(var Wv=0,Hv=L.length;Wv<Hv;++Wv){var Yv=L[Wv].split("@");if(Yv[0]=iv(Yv[0]),!$.unicodeSupport)try{Yv[1]=Pv.toASCII(iv(Yv[1],$).toLowerCase())}catch(Rf){O.error=O.error||"Email address's domain name can not be converted to ASCII via punycode: "+Rf}else Yv[1]=iv(Yv[1],$).toLowerCase();L[Wv]=Yv.join("@")}return O},serialize:function(l,$){var O=l,L=W(l.to);if(L){for(var r=0,d=L.length;r<d;++r){var Qv=String(L[r]),wv=Qv.lastIndexOf("@"),Vv=Qv.slice(0,wv).replace(af,R0).replace(af,h).replace(V9,Nv),hv=Qv.slice(wv+1);try{hv=!$.iri?Pv.toASCII(iv(hv,$).toLowerCase()):Pv.toUnicode(hv)}catch(Wv){O.error=O.error||"Email address's domain name can not be converted to "+(!$.iri?"ASCII":"Unicode")+" via punycode: "+Wv}L[r]=Vv+"@"+hv}O.path=L.join(",")}var Dv=l.headers=l.headers||{};if(l.subject)Dv.subject=l.subject;if(l.body)Dv.body=l.body;var Uv=[];for(var qv in Dv)if(Dv[qv]!==D9[qv])Uv.push(qv.replace(af,R0).replace(af,h).replace(kh,Nv)+"="+Dv[qv].replace(af,R0).replace(af,h).replace(U9,Nv));if(Uv.length)O.query=Uv.join("&");return O}},N9=/^([^\:]+)\:(.*)/,Ih={scheme:"urn",parse:function(l,$){var O=l.path&&l.path.match(N9),L=l;if(O){var r=$.scheme||L.scheme||"urn",d=O[1].toLowerCase(),Qv=O[2],wv=r+":"+($.nid||d),Vv=Ov[wv];if(L.nid=d,L.nss=Qv,L.path=void 0,Vv)L=Vv.parse(L,$)}else L.error=L.error||"URN can not be parsed.";return L},serialize:function(l,$){var O=$.scheme||l.scheme||"urn",L=l.nid,r=O+":"+($.nid||L),d=Ov[r];if(d)l=d.serialize(l,$);var Qv=l,wv=l.nss;return Qv.path=(L||$.nid)+":"+wv,Qv}},F9=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ch={scheme:"urn:uuid",parse:function(l,$){var O=l;if(O.uuid=O.nss,O.nss=void 0,!$.tolerant&&(!O.uuid||!O.uuid.match(F9)))O.error=O.error||"UUID is not valid.";return O},serialize:function(l,$){var O=l;return O.nss=(l.uuid||"").toLowerCase(),O}};Ov[G1.scheme]=G1,Ov[Rh.scheme]=Rh,Ov[q1.scheme]=q1,Ov[_h.scheme]=_h,Ov[rh.scheme]=rh,Ov[Ih.scheme]=Ih,Ov[Ch.scheme]=Ch,f.SCHEMES=Ov,f.pctEncChar=Nv,f.pctDecChars=gv,f.parse=Jv,f.removeDotSegments=av,f.serialize=kv,f.resolveComponents=_v,f.resolve=hf,f.normalize=Zv,f.equal=_1,f.escapeComponent=S0,f.unescapeComponent=iv,Object.defineProperty(f,"__esModule",{value:!0})})});var P0=p((aX,OQ)=>{OQ.exports=function f(v,Q){if(v===Q)return!0;if(v&&Q&&typeof v=="object"&&typeof Q=="object"){if(v.constructor!==Q.constructor)return!1;var P,h,W;if(Array.isArray(v)){if(P=v.length,P!=Q.length)return!1;for(h=P;h--!==0;)if(!f(v[h],Q[h]))return!1;return!0}if(v.constructor===RegExp)return v.source===Q.source&&v.flags===Q.flags;if(v.valueOf!==Object.prototype.valueOf)return v.valueOf()===Q.valueOf();if(v.toString!==Object.prototype.toString)return v.toString()===Q.toString();if(W=Object.keys(v),P=W.length,P!==Object.keys(Q).length)return!1;for(h=P;h--!==0;)if(!Object.prototype.hasOwnProperty.call(Q,W[h]))return!1;for(h=P;h--!==0;){var J=W[h];if(!f(v[J],Q[J]))return!1}return!0}return v!==v&&Q!==Q}});var VQ=p((mX,LQ)=>{LQ.exports=function(v){var Q=0,P=v.length,h=0,W;while(h<P)if(Q++,W=v.charCodeAt(h++),W>=55296&&W<=56319&&h<P){if(W=v.charCodeAt(h),(W&64512)==56320)h++}return Q}});var Zf=p((nX,FQ)=>{FQ.exports={copy:kJ,checkDataType:o0,checkDataTypes:rJ,coerceToTypes:IJ,toHash:t0,getProperty:e0,escapeQuotes:vh,equal:P0(),ucs2length:VQ(),varOccurences:TJ,varReplace:xJ,schemaHasRules:uJ,schemaHasRulesExcept:aJ,schemaUnknownRules:mJ,toQuotedString:s0,getPathExpr:nJ,getPath:cJ,getData:dJ,unescapeFragment:oJ,unescapeJsonPointer:hh,escapeFragment:sJ,escapeJsonPointer:fh};function kJ(f,v){v=v||{};for(var Q in f)v[Q]=f[Q];return v}function o0(f,v,Q,P){var h=P?" !== ":" === ",W=P?" || ":" && ",J=P?"!":"",X=P?"":"!";switch(f){case"null":return v+h+"null";case"array":return J+"Array.isArray("+v+")";case"object":return"("+J+v+W+"typeof "+v+h+'"object"'+W+X+"Array.isArray("+v+"))";case"integer":return"(typeof "+v+h+'"number"'+W+X+"("+v+" % 1)"+W+v+h+v+(Q?W+J+"isFinite("+v+")":"")+")";case"number":return"(typeof "+v+h+'"'+f+'"'+(Q?W+J+"isFinite("+v+")":"")+")";default:return"typeof "+v+h+'"'+f+'"'}}function rJ(f,v,Q){switch(f.length){case 1:return o0(f[0],v,Q,!0);default:var P="",h=t0(f);if(h.array&&h.object)P=h.null?"(":"(!"+v+" || ",P+="typeof "+v+' !== "object")',delete h.null,delete h.array,delete h.object;if(h.number)delete h.integer;for(var W in h)P+=(P?" && ":"")+o0(W,v,Q,!0);return P}}var UQ=t0(["string","number","integer","boolean","null"]);function IJ(f,v){if(Array.isArray(v)){var Q=[];for(var P=0;P<v.length;P++){var h=v[P];if(UQ[h])Q[Q.length]=h;else if(f==="array"&&h==="array")Q[Q.length]=h}if(Q.length)return Q}else if(UQ[v])return[v];else if(f==="array"&&v==="array")return["array"]}function t0(f){var v={};for(var Q=0;Q<f.length;Q++)v[f[Q]]=!0;return v}var CJ=/^[a-z$_][a-z$_0-9]*$/i,ZJ=/'|\\/g;function e0(f){return typeof f=="number"?"["+f+"]":CJ.test(f)?"."+f:"['"+vh(f)+"']"}function vh(f){return f.replace(ZJ,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function TJ(f,v){v+="[^0-9]";var Q=f.match(new RegExp(v,"g"));return Q?Q.length:0}function xJ(f,v,Q){return v+="([^0-9])",Q=Q.replace(/\$/g,"$$$$"),f.replace(new RegExp(v,"g"),Q+"$1")}function uJ(f,v){if(typeof f=="boolean")return!f;for(var Q in f)if(v[Q])return!0}function aJ(f,v,Q){if(typeof f=="boolean")return!f&&Q!="not";for(var P in f)if(P!=Q&&v[P])return!0}function mJ(f,v){if(typeof f=="boolean")return;for(var Q in f)if(!v[Q])return Q}function s0(f){return"'"+vh(f)+"'"}function nJ(f,v,Q,P){var h=Q?"'/' + "+v+(P?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):P?"'[' + "+v+" + ']'":"'[\\'' + "+v+" + '\\']'";return NQ(f,h)}function cJ(f,v,Q){var P=Q?s0("/"+fh(v)):s0(e0(v));return NQ(f,P)}var pJ=/^\/(?:[^~]|~0|~1)*$/,iJ=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function dJ(f,v,Q){var P,h,W,J;if(f==="")return"rootData";if(f[0]=="/"){if(!pJ.test(f))throw Error("Invalid JSON-pointer: "+f);h=f,W="rootData"}else{if(J=f.match(iJ),!J)throw Error("Invalid JSON-pointer: "+f);if(P=+J[1],h=J[2],h=="#"){if(P>=v)throw Error("Cannot access property/index "+P+" levels up, current level is "+v);return Q[v-P]}if(P>v)throw Error("Cannot access data "+P+" levels up, current level is "+v);if(W="data"+(v-P||""),!h)return W}var X=W,Y=h.split("/");for(var G=0;G<Y.length;G++){var z=Y[G];if(z)W+=e0(hh(z)),X+=" && "+W}return X}function NQ(f,v){if(f=='""')return v;return(f+" + "+v).replace(/([^\\])' \+ '/g,"$1")}function oJ(f){return hh(decodeURIComponent(f))}function sJ(f){return encodeURIComponent(fh(f))}function fh(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}function hh(f){return f.replace(/~1/g,"/").replace(/~0/g,"~")}});var Qh=p((cX,AQ)=>{var tJ=Zf();AQ.exports=eJ;function eJ(f){tJ.copy(f,this)}});var bQ=p((pX,jQ)=>{var Uf=jQ.exports=function(f,v,Q){if(typeof v=="function")Q=v,v={};Q=v.cb||Q;var P=typeof Q=="function"?Q:Q.pre||function(){},h=Q.post||function(){};W0(v,P,h,f,"",f)};Uf.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Uf.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Uf.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Uf.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function W0(f,v,Q,P,h,W,J,X,Y,G){if(P&&typeof P=="object"&&!Array.isArray(P)){v(P,h,W,J,X,Y,G);for(var z in P){var K=P[z];if(Array.isArray(K)){if(z in Uf.arrayKeywords)for(var E=0;E<K.length;E++)W0(f,v,Q,K[E],h+"/"+z+"/"+E,W,h,z,P,E)}else if(z in Uf.propsKeywords){if(K&&typeof K=="object")for(var B in K)W0(f,v,Q,K[B],h+"/"+z+"/"+v6(B),W,h,z,P,B)}else if(z in Uf.keywords||f.allKeys&&!(z in Uf.skipKeywords))W0(f,v,Q,K,h+"/"+z,W,h,z,P)}Q(P,h,W,J,X,Y,G)}}function v6(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}});var l0=p((iX,_Q)=>{var S1=MQ(),SQ=P0(),Y0=Zf(),J0=Qh(),f6=bQ();_Q.exports=Ff;Ff.normalizeId=Nf;Ff.fullPath=w0;Ff.url=X0;Ff.ids=J6;Ff.inlineRef=Ph;Ff.schema=B0;function Ff(f,v,Q){var P=this._refs[Q];if(typeof P=="string")if(this._refs[P])P=this._refs[P];else return Ff.call(this,f,v,P);if(P=P||this._schemas[Q],P instanceof J0)return Ph(P.schema,this._opts.inlineRefs)?P.schema:P.validate||this._compile(P);var h=B0.call(this,v,Q),W,J,X;if(h)W=h.schema,v=h.root,X=h.baseId;if(W instanceof J0)J=W.validate||f.call(this,W.schema,v,void 0,X);else if(W!==void 0)J=Ph(W,this._opts.inlineRefs)?W:f.call(this,W,v,void 0,X);return J}function B0(f,v){var Q=S1.parse(v),P=gQ(Q),h=w0(this._getId(f.schema));if(Object.keys(f.schema).length===0||P!==h){var W=Nf(P),J=this._refs[W];if(typeof J=="string")return h6.call(this,f,J,Q);else if(J instanceof J0){if(!J.validate)this._compile(J);f=J}else if(J=this._schemas[W],J instanceof J0){if(!J.validate)this._compile(J);if(W==Nf(v))return{schema:J,root:f,baseId:h};f=J}else return;if(!f.schema)return;h=w0(this._getId(f.schema))}return RQ.call(this,Q,h,f.schema,f)}function h6(f,v,Q){var P=B0.call(this,f,v);if(P){var{schema:h,baseId:W}=P;f=P.root;var J=this._getId(h);if(J)W=X0(W,J);return RQ.call(this,Q,W,h,f)}}var Q6=Y0.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function RQ(f,v,Q,P){if(f.fragment=f.fragment||"",f.fragment.slice(0,1)!="/")return;var h=f.fragment.split("/");for(var W=1;W<h.length;W++){var J=h[W];if(J){if(J=Y0.unescapeFragment(J),Q=Q[J],Q===void 0)break;var X;if(!Q6[J]){if(X=this._getId(Q),X)v=X0(v,X);if(Q.$ref){var Y=X0(v,Q.$ref),G=B0.call(this,P,Y);if(G)Q=G.schema,P=G.root,v=G.baseId}}}}if(Q!==void 0&&Q!==P.schema)return{schema:Q,root:P,baseId:v}}var P6=Y0.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Ph(f,v){if(v===!1)return!1;if(v===void 0||v===!0)return Wh(f);else if(v)return Jh(f)<=v}function Wh(f){var v;if(Array.isArray(f)){for(var Q=0;Q<f.length;Q++)if(v=f[Q],typeof v=="object"&&!Wh(v))return!1}else for(var P in f){if(P=="$ref")return!1;if(v=f[P],typeof v=="object"&&!Wh(v))return!1}return!0}function Jh(f){var v=0,Q;if(Array.isArray(f))for(var P=0;P<f.length;P++){if(Q=f[P],typeof Q=="object")v+=Jh(Q);if(v==1/0)return 1/0}else for(var h in f){if(h=="$ref")return 1/0;if(P6[h])v++;else{if(Q=f[h],typeof Q=="object")v+=Jh(Q)+1;if(v==1/0)return 1/0}}return v}function w0(f,v){if(v!==!1)f=Nf(f);var Q=S1.parse(f);return gQ(Q)}function gQ(f){return S1.serialize(f).split("#")[0]+"#"}var W6=/#\/?$/;function Nf(f){return f?f.replace(W6,""):""}function X0(f,v){return v=Nf(v),S1.resolve(f,v)}function J6(f){var v=Nf(this._getId(f)),Q={"":v},P={"":w0(v,!1)},h={},W=this;return f6(f,{allKeys:!0},function(J,X,Y,G,z,K,E){if(X==="")return;var B=W._getId(J),D=Q[G],M=P[G]+"/"+z;if(E!==void 0)M+="/"+(typeof E=="number"?E:Y0.escapeFragment(E));if(typeof B=="string"){B=D=Nf(D?S1.resolve(D,B):B);var H=W._refs[B];if(typeof H=="string")H=W._refs[H];if(H&&H.schema){if(!SQ(J,H.schema))throw Error('id "'+B+'" resolves to more than one schema')}else if(B!=Nf(M))if(B[0]=="#"){if(h[B]&&!SQ(J,h[B]))throw Error('id "'+B+'" resolves to more than one schema');h[B]=J}else W._refs[B]=M}Q[X]=D,P[X]=M}),h}});var G0=p((dX,kQ)=>{var wh=l0();kQ.exports={Validation:yQ(w6),MissingRef:yQ(Xh)};function w6(f){this.message="validation failed",this.errors=f,this.ajv=this.validation=!0}Xh.message=function(f,v){return"can't resolve reference "+v+" from id "+f};function Xh(f,v,Q){this.message=Q||Xh.message(f,v),this.missingRef=wh.url(f,v),this.missingSchema=wh.normalizeId(wh.fullPath(this.missingRef))}function yQ(f){return f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f}});var Yh=p((oX,rQ)=>{rQ.exports=function(f,v){if(!v)v={};if(typeof v==="function")v={cmp:v};var Q=typeof v.cycles==="boolean"?v.cycles:!1,P=v.cmp&&function(W){return function(J){return function(X,Y){var G={key:X,value:J[X]},z={key:Y,value:J[Y]};return W(G,z)}}}(v.cmp),h=[];return function W(J){if(J&&J.toJSON&&typeof J.toJSON==="function")J=J.toJSON();if(J===void 0)return;if(typeof J=="number")return isFinite(J)?""+J:"null";if(typeof J!=="object")return JSON.stringify(J);var X,Y;if(Array.isArray(J)){Y="[";for(X=0;X<J.length;X++){if(X)Y+=",";Y+=W(J[X])||"null"}return Y+"]"}if(J===null)return"null";if(h.indexOf(J)!==-1){if(Q)return JSON.stringify("__cycle__");throw TypeError("Converting circular structure to JSON")}var G=h.push(J)-1,z=Object.keys(J).sort(P&&P(J));Y="";for(X=0;X<z.length;X++){var K=z[X],E=W(J[K]);if(!E)continue;if(Y)Y+=",";Y+=JSON.stringify(K)+":"+E}return h.splice(G,1),"{"+Y+"}"}(f)}});var Bh=p((sX,IQ)=>{IQ.exports=function(v,Q,P){var h="",W=v.schema.$async===!0,J=v.util.schemaHasRulesExcept(v.schema,v.RULES.all,"$ref"),X=v.self._getId(v.schema);if(v.opts.strictKeywords){var Y=v.util.schemaUnknownRules(v.schema,v.RULES.keywords);if(Y){var G="unknown keyword: "+Y;if(v.opts.strictKeywords==="log")v.logger.warn(G);else throw Error(G)}}if(v.isTop){if(h+=" var validate = ",W)v.async=!0,h+="async ";if(h+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",X&&(v.opts.sourceCode||v.opts.processCode))h+=" "+("/*# sourceURL="+X+" */")+" "}if(typeof v.schema=="boolean"||!(J||v.schema.$ref)){var Q="false schema",z=v.level,K=v.dataLevel,E=v.schema[Q],B=v.schemaPath+v.util.getProperty(Q),D=v.errSchemaPath+"/"+Q,S=!v.opts.allErrors,T,M="data"+(K||""),N="valid"+z;if(v.schema===!1){if(v.isTop)S=!0;else h+=" var "+N+" = false; ";var H=H||[];if(H.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: '"+(T||"false schema")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(D)+" , params: {} ",v.opts.messages!==!1)h+=" , message: 'boolean schema is false' ";if(v.opts.verbose)h+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";h+=" } "}else h+=" {} ";var V=h;if(h=H.pop(),!v.compositeRule&&S)if(v.async)h+=" throw new ValidationError(["+V+"]); ";else h+=" validate.errors = ["+V+"]; return false; ";else h+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else if(v.isTop)if(W)h+=" return data; ";else h+=" validate.errors = null; return true; ";else h+=" var "+N+" = true; ";if(v.isTop)h+=" }; return validate; ";return h}if(v.isTop){var F=v.isTop,z=v.level=0,K=v.dataLevel=0,M="data";if(v.rootId=v.resolve.fullPath(v.self._getId(v.root.schema)),v.baseId=v.baseId||v.rootId,delete v.isTop,v.dataPathArr=[""],v.schema.default!==void 0&&v.opts.useDefaults&&v.opts.strictDefaults){var U="default is ignored in the schema root";if(v.opts.strictDefaults==="log")v.logger.warn(U);else throw Error(U)}h+=" var vErrors = null; ",h+=" var errors = 0;     ",h+=" if (rootData === undefined) rootData = data; "}else{var{level:z,dataLevel:K}=v,M="data"+(K||"");if(X)v.baseId=v.resolve.url(v.baseId,X);if(W&&!v.async)throw Error("async schema in sync schema");h+=" var errs_"+z+" = errors;"}var N="valid"+z,S=!v.opts.allErrors,y="",a="",T,R=v.schema.type,x=Array.isArray(R);if(R&&v.opts.nullable&&v.schema.nullable===!0){if(x){if(R.indexOf("null")==-1)R=R.concat("null")}else if(R!="null")R=[R,"null"],x=!0}if(x&&R.length==1)R=R[0],x=!1;if(v.schema.$ref&&J){if(v.opts.extendRefs=="fail")throw Error('$ref: validation keywords used in schema at path "'+v.errSchemaPath+'" (see option extendRefs)');else if(v.opts.extendRefs!==!0)J=!1,v.logger.warn('$ref: keywords ignored in schema at path "'+v.errSchemaPath+'"')}if(v.schema.$comment&&v.opts.$comment)h+=" "+v.RULES.all.$comment.code(v,"$comment");if(R){if(v.opts.coerceTypes)var Z=v.util.coerceToTypes(v.opts.coerceTypes,R);var I=v.RULES.types[R];if(Z||x||I===!0||I&&!Fv(I)){var B=v.schemaPath+".type",D=v.errSchemaPath+"/type",B=v.schemaPath+".type",D=v.errSchemaPath+"/type",b=x?"checkDataTypes":"checkDataType";if(h+=" if ("+v.util[b](R,M,v.opts.strictNumbers,!0)+") { ",Z){var g="dataType"+z,C="coerced"+z;if(h+=" var "+g+" = typeof "+M+"; var "+C+" = undefined; ",v.opts.coerceTypes=="array")h+=" if ("+g+" == 'object' && Array.isArray("+M+") && "+M+".length == 1) { "+M+" = "+M+"[0]; "+g+" = typeof "+M+"; if ("+v.util.checkDataType(v.schema.type,M,v.opts.strictNumbers)+") "+C+" = "+M+"; } ";h+=" if ("+C+" !== undefined) ; ";var Xv=Z;if(Xv){var t,fv=-1,s=Xv.length-1;while(fv<s)if(t=Xv[fv+=1],t=="string")h+=" else if ("+g+" == 'number' || "+g+" == 'boolean') "+C+" = '' + "+M+"; else if ("+M+" === null) "+C+" = ''; ";else if(t=="number"||t=="integer"){if(h+=" else if ("+g+" == 'boolean' || "+M+" === null || ("+g+" == 'string' && "+M+" && "+M+" == +"+M+" ",t=="integer")h+=" && !("+M+" % 1)";h+=")) "+C+" = +"+M+"; "}else if(t=="boolean")h+=" else if ("+M+" === 'false' || "+M+" === 0 || "+M+" === null) "+C+" = false; else if ("+M+" === 'true' || "+M+" === 1) "+C+" = true; ";else if(t=="null")h+=" else if ("+M+" === '' || "+M+" === 0 || "+M+" === false) "+C+" = null; ";else if(v.opts.coerceTypes=="array"&&t=="array")h+=" else if ("+g+" == 'string' || "+g+" == 'number' || "+g+" == 'boolean' || "+M+" == null) "+C+" = ["+M+"]; "}h+=" else {   ";var H=H||[];if(H.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: '"+(T||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(D)+" , params: { type: '",x)h+=""+R.join(",");else h+=""+R;if(h+="' } ",v.opts.messages!==!1){if(h+=" , message: 'should be ",x)h+=""+R.join(",");else h+=""+R;h+="' "}if(v.opts.verbose)h+=" , schema: validate.schema"+B+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";h+=" } "}else h+=" {} ";var V=h;if(h=H.pop(),!v.compositeRule&&S)if(v.async)h+=" throw new ValidationError(["+V+"]); ";else h+=" validate.errors = ["+V+"]; return false; ";else h+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";h+=" } if ("+C+" !== undefined) {  ";var m=K?"data"+(K-1||""):"parentData",$v=K?v.dataPathArr[K]:"parentDataProperty";if(h+=" "+M+" = "+C+"; ",!K)h+="if ("+m+" !== undefined)";h+=" "+m+"["+$v+"] = "+C+"; } "}else{var H=H||[];if(H.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: '"+(T||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(D)+" , params: { type: '",x)h+=""+R.join(",");else h+=""+R;if(h+="' } ",v.opts.messages!==!1){if(h+=" , message: 'should be ",x)h+=""+R.join(",");else h+=""+R;h+="' "}if(v.opts.verbose)h+=" , schema: validate.schema"+B+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";h+=" } "}else h+=" {} ";var V=h;if(h=H.pop(),!v.compositeRule&&S)if(v.async)h+=" throw new ValidationError(["+V+"]); ";else h+=" validate.errors = ["+V+"]; return false; ";else h+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}h+=" } "}}if(v.schema.$ref&&!J){if(h+=" "+v.RULES.all.$ref.code(v,"$ref")+" ",S){if(h+=" } if (errors === ",F)h+="0";else h+="errs_"+z;h+=") { ",a+="}"}}else{var jv=v.RULES;if(jv){var I,Rv=-1,Pv=jv.length-1;while(Rv<Pv)if(I=jv[Rv+=1],Fv(I)){if(I.type)h+=" if ("+v.util.checkDataType(I.type,M,v.opts.strictNumbers)+") { ";if(v.opts.useDefaults){if(I.type=="object"&&v.schema.properties){var E=v.schema.properties,Ov=Object.keys(E),Nv=Ov;if(Nv){var gv,Kf=-1,Yf=Nv.length-1;while(Kf<Yf){gv=Nv[Kf+=1];var Lv=E[gv];if(Lv.default!==void 0){var Ev=M+v.util.getProperty(gv);if(v.compositeRule){if(v.opts.strictDefaults){var U="default is ignored for: "+Ev;if(v.opts.strictDefaults==="log")v.logger.warn(U);else throw Error(U)}}else{if(h+=" if ("+Ev+" === undefined ",v.opts.useDefaults=="empty")h+=" || "+Ev+" === null || "+Ev+" === '' ";if(h+=" ) "+Ev+" = ",v.opts.useDefaults=="shared")h+=" "+v.useDefault(Lv.default)+" ";else h+=" "+JSON.stringify(Lv.default)+" ";h+="; "}}}}}else if(I.type=="array"&&Array.isArray(v.schema.items)){var jf=v.schema.items;if(jf){var Lv,fv=-1,bv=jf.length-1;while(fv<bv)if(Lv=jf[fv+=1],Lv.default!==void 0){var Ev=M+"["+fv+"]";if(v.compositeRule){if(v.opts.strictDefaults){var U="default is ignored for: "+Ev;if(v.opts.strictDefaults==="log")v.logger.warn(U);else throw Error(U)}}else{if(h+=" if ("+Ev+" === undefined ",v.opts.useDefaults=="empty")h+=" || "+Ev+" === null || "+Ev+" === '' ";if(h+=" ) "+Ev+" = ",v.opts.useDefaults=="shared")h+=" "+v.useDefault(Lv.default)+" ";else h+=" "+JSON.stringify(Lv.default)+" ";h+="; "}}}}}var Jv=I.rules;if(Jv){var $f,Bf=-1,bf=Jv.length-1;while(Bf<bf)if($f=Jv[Bf+=1],av($f)){var Sf=$f.code(v,$f.keyword,I.type);if(Sf){if(h+=" "+Sf+" ",S)y+="}"}}}if(S)h+=" "+y+" ",y="";if(I.type){if(h+=" } ",R&&R===I.type&&!Z){h+=" else { ";var B=v.schemaPath+".type",D=v.errSchemaPath+"/type",H=H||[];if(H.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: '"+(T||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(D)+" , params: { type: '",x)h+=""+R.join(",");else h+=""+R;if(h+="' } ",v.opts.messages!==!1){if(h+=" , message: 'should be ",x)h+=""+R.join(",");else h+=""+R;h+="' "}if(v.opts.verbose)h+=" , schema: validate.schema"+B+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";h+=" } "}else h+=" {} ";var V=h;if(h=H.pop(),!v.compositeRule&&S)if(v.async)h+=" throw new ValidationError(["+V+"]); ";else h+=" validate.errors = ["+V+"]; return false; ";else h+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";h+=" } "}}if(S){if(h+=" if (errors === ",F)h+="0";else h+="errs_"+z;h+=") { ",a+="}"}}}}if(S)h+=" "+a+" ";if(F){if(W)h+=" if (errors === 0) return data;           ",h+=" else throw new ValidationError(vErrors); ";else h+=" validate.errors = vErrors; ",h+=" return errors === 0;       ";h+=" }; return validate;"}else h+=" var "+N+" = errors === errs_"+z+";";function Fv(_v){var hf=_v.rules;for(var Zv=0;Zv<hf.length;Zv++)if(av(hf[Zv]))return!0}function av(_v){return v.schema[_v.keyword]!==void 0||_v.implements&&kv(_v)}function kv(_v){var hf=_v.implements;for(var Zv=0;Zv<hf.length;Zv++)if(v.schema[hf[Zv]]!==void 0)return!0}return h}});var uQ=p((tX,xQ)=>{var q0=l0(),D0=Zf(),ZQ=G0(),X6=Yh(),CQ=Bh(),Y6=D0.ucs2length,B6=P0(),l6=ZQ.Validation;xQ.exports=lh;function lh(f,v,Q,P){var h=this,W=this._opts,J=[void 0],X={},Y=[],G={},z=[],K={},E=[];v=v||{schema:f,refVal:J,refs:X};var B=G6.call(this,f,v,P),D=this._compilations[B.index];if(B.compiling)return D.callValidate=U;var M=this._formats,H=this.RULES;try{var V=N(f,v,Q,P);D.validate=V;var F=D.callValidate;if(F){if(F.schema=V.schema,F.errors=null,F.refs=V.refs,F.refVal=V.refVal,F.root=V.root,F.$async=V.$async,W.sourceCode)F.source=V.source}return V}finally{q6.call(this,f,v,P)}function U(){var b=D.validate,g=b.apply(this,arguments);return U.errors=b.errors,g}function N(b,g,C,Xv){var t=!g||g&&g.schema==b;if(g.schema!=v.schema)return lh.call(h,b,g,C,Xv);var fv=b.$async===!0,s=CQ({isTop:!0,schema:b,isRoot:t,baseId:Xv,root:g,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:ZQ.MissingRef,RULES:H,validate:CQ,util:D0,resolve:q0,resolveRef:S,usePattern:x,useDefault:Z,useCustomRule:I,opts:W,formats:M,logger:h.logger,self:h});if(s=z0(J,H6)+z0(Y,z6)+z0(z,D6)+z0(E,K6)+s,W.processCode)s=W.processCode(s,b);var m;try{var $v=Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",s);m=$v(h,H,M,v,J,z,E,B6,Y6,l6),J[0]=m}catch(jv){throw h.logger.error("Error compiling schema, function code:",s),jv}if(m.schema=b,m.errors=null,m.refs=X,m.refVal=J,m.root=t?m:g,fv)m.$async=!0;if(W.sourceCode===!0)m.source={code:s,patterns:Y,defaults:z};return m}function S(b,g,C){g=q0.url(b,g);var Xv=X[g],t,fv;if(Xv!==void 0)return t=J[Xv],fv="refVal["+Xv+"]",R(t,fv);if(!C&&v.refs){var s=v.refs[g];if(s!==void 0)return t=v.refVal[s],fv=y(g,t),R(t,fv)}fv=y(g);var m=q0.call(h,N,v,g);if(m===void 0){var $v=Q&&Q[g];if($v)m=q0.inlineRef($v,W.inlineRefs)?$v:lh.call(h,$v,v,Q,b)}if(m===void 0)a(g);else return T(g,m),R(m,fv)}function y(b,g){var C=J.length;return J[C]=g,X[b]=C,"refVal"+C}function a(b){delete X[b]}function T(b,g){var C=X[b];J[C]=g}function R(b,g){return typeof b=="object"||typeof b=="boolean"?{code:g,schema:b,inline:!0}:{code:g,$async:b&&!!b.$async}}function x(b){var g=G[b];if(g===void 0)g=G[b]=Y.length,Y[g]=b;return"pattern"+g}function Z(b){switch(typeof b){case"boolean":case"number":return""+b;case"string":return D0.toQuotedString(b);case"object":if(b===null)return"null";var g=X6(b),C=K[g];if(C===void 0)C=K[g]=z.length,z[C]=b;return"default"+C}}function I(b,g,C,Xv){if(h._opts.validateSchema!==!1){var t=b.definition.dependencies;if(t&&!t.every(function(Nv){return Object.prototype.hasOwnProperty.call(C,Nv)}))throw Error("parent schema must have all required keywords: "+t.join(","));var fv=b.definition.validateSchema;if(fv){var s=fv(g);if(!s){var m="keyword schema is invalid: "+h.errorsText(fv.errors);if(h._opts.validateSchema=="log")h.logger.error(m);else throw Error(m)}}}var $v=b.definition.compile,jv=b.definition.inline,Rv=b.definition.macro,Pv;if($v)Pv=$v.call(h,g,C,Xv);else if(Rv){if(Pv=Rv.call(h,g,C,Xv),W.validateSchema!==!1)h.validateSchema(Pv,!0)}else if(jv)Pv=jv.call(h,Xv,b.keyword,g,C);else if(Pv=b.definition.validate,!Pv)return;if(Pv===void 0)throw Error('custom keyword "'+b.keyword+'"failed to compile');var Ov=E.length;return E[Ov]=Pv,{code:"customRule"+Ov,validate:Pv}}}function G6(f,v,Q){var P=TQ.call(this,f,v,Q);if(P>=0)return{index:P,compiling:!0};return P=this._compilations.length,this._compilations[P]={schema:f,root:v,baseId:Q},{index:P,compiling:!1}}function q6(f,v,Q){var P=TQ.call(this,f,v,Q);if(P>=0)this._compilations.splice(P,1)}function TQ(f,v,Q){for(var P=0;P<this._compilations.length;P++){var h=this._compilations[P];if(h.schema==f&&h.root==v&&h.baseId==Q)return P}return-1}function z6(f,v){return"var pattern"+f+" = new RegExp("+D0.toQuotedString(v[f])+");"}function D6(f){return"var default"+f+" = defaults["+f+"];"}function H6(f,v){return v[f]===void 0?"":"var refVal"+f+" = refVal["+f+"];"}function K6(f){return"var customRule"+f+" = customRules["+f+"];"}function z0(f,v){if(!f.length)return"";var Q="";for(var P=0;P<f.length;P++)Q+=v(P,f);return Q}});var mQ=p((eX,aQ)=>{var H0=aQ.exports=function(){this._cache={}};H0.prototype.put=function(v,Q){this._cache[v]=Q};H0.prototype.get=function(v){return this._cache[v]};H0.prototype.del=function(v){delete this._cache[v]};H0.prototype.clear=function(){this._cache={}}});var hP=p((v5,fP)=>{var $6=Zf(),E6=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,M6=[0,31,28,31,30,31,30,31,31,30,31,30,31],O6=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,nQ=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,L6=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,V6=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,cQ=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,pQ=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,iQ=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,dQ=/^(?:\/(?:[^~/]|~0|~1)*)*$/,oQ=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,sQ=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;fP.exports=K0;function K0(f){return f=f=="full"?"full":"fast",$6.copy(K0[f])}K0.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":cQ,url:pQ,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:nQ,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:vP,uuid:iQ,"json-pointer":dQ,"json-pointer-uri-fragment":oQ,"relative-json-pointer":sQ};K0.full={date:tQ,time:eQ,"date-time":F6,uri:j6,"uri-reference":V6,"uri-template":cQ,url:pQ,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:nQ,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:vP,uuid:iQ,"json-pointer":dQ,"json-pointer-uri-fragment":oQ,"relative-json-pointer":sQ};function U6(f){return f%4===0&&(f%100!==0||f%400===0)}function tQ(f){var v=f.match(E6);if(!v)return!1;var Q=+v[1],P=+v[2],h=+v[3];return P>=1&&P<=12&&h>=1&&h<=(P==2&&U6(Q)?29:M6[P])}function eQ(f,v){var Q=f.match(O6);if(!Q)return!1;var P=Q[1],h=Q[2],W=Q[3],J=Q[5];return(P<=23&&h<=59&&W<=59||P==23&&h==59&&W==60)&&(!v||J)}var N6=/t|\s/i;function F6(f){var v=f.split(N6);return v.length==2&&tQ(v[0])&&eQ(v[1],!0)}var A6=/\/|:/;function j6(f){return A6.test(f)&&L6.test(f)}var b6=/[^\\]\\Z/;function vP(f){if(b6.test(f))return!1;try{return new RegExp(f),!0}catch(v){return!1}}});var PP=p((f5,QP)=>{QP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.errSchemaPath+"/"+Q,G=!v.opts.allErrors,z="data"+(J||""),K="valid"+W,E,B;if(X=="#"||X=="#/")if(v.isRoot)E=v.async,B="validate";else E=v.root.schema.$async===!0,B="root.refVal[0]";else{var D=v.resolveRef(v.baseId,X,v.isRoot);if(D===void 0){var M=v.MissingRefError.message(v.baseId,X);if(v.opts.missingRefs=="fail"){v.logger.error(M);var H=H||[];if(H.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(Y)+" , params: { ref: '"+v.util.escapeQuotes(X)+"' } ",v.opts.messages!==!1)h+=" , message: 'can\\'t resolve reference "+v.util.escapeQuotes(X)+"' ";if(v.opts.verbose)h+=" , schema: "+v.util.toQuotedString(X)+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+z+" ";h+=" } "}else h+=" {} ";var V=h;if(h=H.pop(),!v.compositeRule&&G)if(v.async)h+=" throw new ValidationError(["+V+"]); ";else h+=" validate.errors = ["+V+"]; return false; ";else h+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(G)h+=" if (false) { "}else if(v.opts.missingRefs=="ignore"){if(v.logger.warn(M),G)h+=" if (true) { "}else throw new v.MissingRefError(v.baseId,X,M)}else if(D.inline){var F=v.util.copy(v);F.level++;var U="valid"+F.level;F.schema=D.schema,F.schemaPath="",F.errSchemaPath=X;var N=v.validate(F).replace(/validate\.schema/g,D.code);if(h+=" "+N+" ",G)h+=" if ("+U+") { "}else E=D.$async===!0||v.async&&D.$async!==!1,B=D.code}if(B){var H=H||[];if(H.push(h),h="",v.opts.passContext)h+=" "+B+".call(this, ";else h+=" "+B+"( ";if(h+=" "+z+", (dataPath || '')",v.errorPath!='""')h+=" + "+v.errorPath;var S=J?"data"+(J-1||""):"parentData",y=J?v.dataPathArr[J]:"parentDataProperty";h+=" , "+S+" , "+y+", rootData)  ";var a=h;if(h=H.pop(),E){if(!v.async)throw Error("async schema referenced by sync schema");if(G)h+=" var "+K+"; ";if(h+=" try { await "+a+"; ",G)h+=" "+K+" = true; ";if(h+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",G)h+=" "+K+" = false; ";if(h+=" } ",G)h+=" if ("+K+") { "}else if(h+=" if (!"+a+") { if (vErrors === null) vErrors = "+B+".errors; else vErrors = vErrors.concat("+B+".errors); errors = vErrors.length; } ",G)h+=" else { "}return h}});var JP=p((h5,WP)=>{WP.exports=function(v,Q,P){var h=" ",W=v.schema[Q],J=v.schemaPath+v.util.getProperty(Q),X=v.errSchemaPath+"/"+Q,Y=!v.opts.allErrors,G=v.util.copy(v),z="";G.level++;var K="valid"+G.level,E=G.baseId,B=!0,D=W;if(D){var M,H=-1,V=D.length-1;while(H<V)if(M=D[H+=1],v.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:v.util.schemaHasRules(M,v.RULES.all)){if(B=!1,G.schema=M,G.schemaPath=J+"["+H+"]",G.errSchemaPath=X+"/"+H,h+="  "+v.validate(G)+" ",G.baseId=E,Y)h+=" if ("+K+") { ",z+="}"}}if(Y)if(B)h+=" if (true) { ";else h+=" "+z.slice(0,-1)+" ";return h}});var XP=p((Q5,wP)=>{wP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="valid"+W,B="errs__"+W,D=v.util.copy(v),M="";D.level++;var H="valid"+D.level,V=X.every(function(T){return v.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:v.util.schemaHasRules(T,v.RULES.all)});if(V){var F=D.baseId;h+=" var "+B+" = errors; var "+E+" = false;  ";var U=v.compositeRule;v.compositeRule=D.compositeRule=!0;var N=X;if(N){var S,y=-1,a=N.length-1;while(y<a)S=N[y+=1],D.schema=S,D.schemaPath=Y+"["+y+"]",D.errSchemaPath=G+"/"+y,h+="  "+v.validate(D)+" ",D.baseId=F,h+=" "+E+" = "+E+" || "+H+"; if (!"+E+") { ",M+="}"}if(v.compositeRule=D.compositeRule=U,h+=" "+M+" if (!"+E+") {   var err =   ",v.createErrors!==!1){if(h+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: {} ",v.opts.messages!==!1)h+=" , message: 'should match some schema in anyOf' ";if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";if(h+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(vErrors); ";else h+=" validate.errors = vErrors; return false; ";if(h+=" } else {  errors = "+B+"; if (vErrors !== null) { if ("+B+") vErrors.length = "+B+"; else vErrors = null; } ",v.opts.allErrors)h+=" } "}else if(z)h+=" if (true) { ";return h}});var BP=p((P5,YP)=>{YP.exports=function(v,Q,P){var h=" ",W=v.schema[Q],J=v.errSchemaPath+"/"+Q,X=!v.opts.allErrors,Y=v.util.toQuotedString(W);if(v.opts.$comment===!0)h+=" console.log("+Y+");";else if(typeof v.opts.$comment=="function")h+=" self._opts.$comment("+Y+", "+v.util.toQuotedString(J)+", validate.root.schema);";return h}});var GP=p((W5,lP)=>{lP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="valid"+W,B=v.opts.$data&&X&&X.$data,D;if(B)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",D="schema"+W;else D=X;if(!B)h+=" var schema"+W+" = validate.schema"+Y+";";h+="var "+E+" = equal("+K+", schema"+W+"); if (!"+E+") {   ";var M=M||[];if(M.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'const' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { allowedValue: schema"+W+" } ",v.opts.messages!==!1)h+=" , message: 'should be equal to constant' ";if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";var H=h;if(h=M.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+H+"]); ";else h+=" validate.errors = ["+H+"]; return false; ";else h+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+=" }",z)h+=" else { ";return h}});var zP=p((J5,qP)=>{qP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="valid"+W,B="errs__"+W,D=v.util.copy(v),M="";D.level++;var H="valid"+D.level,V="i"+W,F=D.dataLevel=v.dataLevel+1,U="data"+F,N=v.baseId,S=v.opts.strictKeywords?typeof X=="object"&&Object.keys(X).length>0||X===!1:v.util.schemaHasRules(X,v.RULES.all);if(h+="var "+B+" = errors;var "+E+";",S){var y=v.compositeRule;v.compositeRule=D.compositeRule=!0,D.schema=X,D.schemaPath=Y,D.errSchemaPath=G,h+=" var "+H+" = false; for (var "+V+" = 0; "+V+" < "+K+".length; "+V+"++) { ",D.errorPath=v.util.getPathExpr(v.errorPath,V,v.opts.jsonPointers,!0);var a=K+"["+V+"]";D.dataPathArr[F]=V;var T=v.validate(D);if(D.baseId=N,v.util.varOccurences(T,U)<2)h+=" "+v.util.varReplace(T,U,a)+" ";else h+=" var "+U+" = "+a+"; "+T+" ";h+=" if ("+H+") break; }  ",v.compositeRule=D.compositeRule=y,h+=" "+M+" if (!"+H+") {"}else h+=" if ("+K+".length == 0) {";var R=R||[];if(R.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: {} ",v.opts.messages!==!1)h+=" , message: 'should contain a valid item' ";if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";var x=h;if(h=R.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+x+"]); ";else h+=" validate.errors = ["+x+"]; return false; ";else h+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+=" } else { ",S)h+="  errors = "+B+"; if (vErrors !== null) { if ("+B+") vErrors.length = "+B+"; else vErrors = null; } ";if(v.opts.allErrors)h+=" } ";return h}});var HP=p((w5,DP)=>{DP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="errs__"+W,B=v.util.copy(v),D="";B.level++;var M="valid"+B.level,H={},V={},F=v.opts.ownProperties;for(y in X){if(y=="__proto__")continue;var U=X[y],N=Array.isArray(U)?V:H;N[y]=U}h+="var "+E+" = errors;";var S=v.errorPath;h+="var missing"+W+";";for(var y in V)if(N=V[y],N.length){if(h+=" if ( "+K+v.util.getProperty(y)+" !== undefined ",F)h+=" && Object.prototype.hasOwnProperty.call("+K+", '"+v.util.escapeQuotes(y)+"') ";if(z){h+=" && ( ";var a=N;if(a){var T,R=-1,x=a.length-1;while(R<x){if(T=a[R+=1],R)h+=" || ";var Z=v.util.getProperty(T),I=K+Z;if(h+=" ( ( "+I+" === undefined ",F)h+=" || ! Object.prototype.hasOwnProperty.call("+K+", '"+v.util.escapeQuotes(T)+"') ";h+=") && (missing"+W+" = "+v.util.toQuotedString(v.opts.jsonPointers?T:Z)+") ) "}}h+=")) {  ";var b="missing"+W,g="' + "+b+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(S,b,!0):S+" + "+b;var C=C||[];if(C.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { property: '"+v.util.escapeQuotes(y)+"', missingProperty: '"+g+"', depsCount: "+N.length+", deps: '"+v.util.escapeQuotes(N.length==1?N[0]:N.join(", "))+"' } ",v.opts.messages!==!1){if(h+=" , message: 'should have ",N.length==1)h+="property "+v.util.escapeQuotes(N[0]);else h+="properties "+v.util.escapeQuotes(N.join(", "));h+=" when property "+v.util.escapeQuotes(y)+" is present' "}if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";var Xv=h;if(h=C.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+Xv+"]); ";else h+=" validate.errors = ["+Xv+"]; return false; ";else h+=" var err = "+Xv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{h+=" ) { ";var t=N;if(t){var T,fv=-1,s=t.length-1;while(fv<s){T=t[fv+=1];var Z=v.util.getProperty(T),g=v.util.escapeQuotes(T),I=K+Z;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(S,T,v.opts.jsonPointers);if(h+=" if ( "+I+" === undefined ",F)h+=" || ! Object.prototype.hasOwnProperty.call("+K+", '"+v.util.escapeQuotes(T)+"') ";if(h+=") {  var err =   ",v.createErrors!==!1){if(h+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { property: '"+v.util.escapeQuotes(y)+"', missingProperty: '"+g+"', depsCount: "+N.length+", deps: '"+v.util.escapeQuotes(N.length==1?N[0]:N.join(", "))+"' } ",v.opts.messages!==!1){if(h+=" , message: 'should have ",N.length==1)h+="property "+v.util.escapeQuotes(N[0]);else h+="properties "+v.util.escapeQuotes(N.join(", "));h+=" when property "+v.util.escapeQuotes(y)+" is present' "}if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";h+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}if(h+=" }   ",z)D+="}",h+=" else { "}v.errorPath=S;var m=B.baseId;for(var y in H){var U=H[y];if(v.opts.strictKeywords?typeof U=="object"&&Object.keys(U).length>0||U===!1:v.util.schemaHasRules(U,v.RULES.all)){if(h+=" "+M+" = true; if ( "+K+v.util.getProperty(y)+" !== undefined ",F)h+=" && Object.prototype.hasOwnProperty.call("+K+", '"+v.util.escapeQuotes(y)+"') ";if(h+=") { ",B.schema=U,B.schemaPath=Y+v.util.getProperty(y),B.errSchemaPath=G+"/"+v.util.escapeFragment(y),h+="  "+v.validate(B)+" ",B.baseId=m,h+=" }  ",z)h+=" if ("+M+") { ",D+="}"}}if(z)h+="   "+D+" if ("+E+" == errors) {";return h}});var $P=p((X5,KP)=>{KP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="valid"+W,B=v.opts.$data&&X&&X.$data,D;if(B)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",D="schema"+W;else D=X;var M="i"+W,H="schema"+W;if(!B)h+=" var "+H+" = validate.schema"+Y+";";if(h+="var "+E+";",B)h+=" if (schema"+W+" === undefined) "+E+" = true; else if (!Array.isArray(schema"+W+")) "+E+" = false; else {";if(h+=""+E+" = false;for (var "+M+"=0; "+M+"<"+H+".length; "+M+"++) if (equal("+K+", "+H+"["+M+"])) { "+E+" = true; break; }",B)h+="  }  ";h+=" if (!"+E+") {   ";var V=V||[];if(V.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { allowedValues: schema"+W+" } ",v.opts.messages!==!1)h+=" , message: 'should be equal to one of the allowed values' ";if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";var F=h;if(h=V.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+F+"]); ";else h+=" validate.errors = ["+F+"]; return false; ";else h+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+=" }",z)h+=" else { ";return h}});var MP=p((Y5,EP)=>{EP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||"");if(v.opts.format===!1){if(z)h+=" if (true) { ";return h}var E=v.opts.$data&&X&&X.$data,B;if(E)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",B="schema"+W;else B=X;var D=v.opts.unknownFormats,M=Array.isArray(D);if(E){var H="format"+W,V="isObject"+W,F="formatType"+W;if(h+=" var "+H+" = formats["+B+"]; var "+V+" = typeof "+H+" == 'object' && !("+H+" instanceof RegExp) && "+H+".validate; var "+F+" = "+V+" && "+H+".type || 'string'; if ("+V+") { ",v.async)h+=" var async"+W+" = "+H+".async; ";if(h+=" "+H+" = "+H+".validate; } if (  ",E)h+=" ("+B+" !== undefined && typeof "+B+" != 'string') || ";if(h+=" (",D!="ignore"){if(h+=" ("+B+" && !"+H+" ",M)h+=" && self._opts.unknownFormats.indexOf("+B+") == -1 ";h+=") || "}if(h+=" ("+H+" && "+F+" == '"+P+"' && !(typeof "+H+" == 'function' ? ",v.async)h+=" (async"+W+" ? await "+H+"("+K+") : "+H+"("+K+")) ";else h+=" "+H+"("+K+") ";h+=" : "+H+".test("+K+"))))) {"}else{var H=v.formats[X];if(!H)if(D=="ignore"){if(v.logger.warn('unknown format "'+X+'" ignored in schema at path "'+v.errSchemaPath+'"'),z)h+=" if (true) { ";return h}else if(M&&D.indexOf(X)>=0){if(z)h+=" if (true) { ";return h}else throw Error('unknown format "'+X+'" is used in schema at path "'+v.errSchemaPath+'"');var V=typeof H=="object"&&!(H instanceof RegExp)&&H.validate,F=V&&H.type||"string";if(V){var U=H.async===!0;H=H.validate}if(F!=P){if(z)h+=" if (true) { ";return h}if(U){if(!v.async)throw Error("async format in sync schema");var N="formats"+v.util.getProperty(X)+".validate";h+=" if (!(await "+N+"("+K+"))) { "}else{h+=" if (! ";var N="formats"+v.util.getProperty(X);if(V)N+=".validate";if(typeof H=="function")h+=" "+N+"("+K+") ";else h+=" "+N+".test("+K+") ";h+=") { "}}var S=S||[];if(S.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'format' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { format:  ",E)h+=""+B;else h+=""+v.util.toQuotedString(X);if(h+="  } ",v.opts.messages!==!1){if(h+=` , message: 'should match format "`,E)h+="' + "+B+" + '";else h+=""+v.util.escapeQuotes(X);h+=`"' `}if(v.opts.verbose){if(h+=" , schema:  ",E)h+="validate.schema"+Y;else h+=""+v.util.toQuotedString(X);h+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" "}h+=" } "}else h+=" {} ";var y=h;if(h=S.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+y+"]); ";else h+=" validate.errors = ["+y+"]; return false; ";else h+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+=" } ",z)h+=" else { ";return h}});var LP=p((B5,OP)=>{OP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="valid"+W,B="errs__"+W,D=v.util.copy(v);D.level++;var M="valid"+D.level,H=v.schema.then,V=v.schema.else,F=H!==void 0&&(v.opts.strictKeywords?typeof H=="object"&&Object.keys(H).length>0||H===!1:v.util.schemaHasRules(H,v.RULES.all)),U=V!==void 0&&(v.opts.strictKeywords?typeof V=="object"&&Object.keys(V).length>0||V===!1:v.util.schemaHasRules(V,v.RULES.all)),N=D.baseId;if(F||U){var S;D.createErrors=!1,D.schema=X,D.schemaPath=Y,D.errSchemaPath=G,h+=" var "+B+" = errors; var "+E+" = true;  ";var y=v.compositeRule;if(v.compositeRule=D.compositeRule=!0,h+="  "+v.validate(D)+" ",D.baseId=N,D.createErrors=!0,h+="  errors = "+B+"; if (vErrors !== null) { if ("+B+") vErrors.length = "+B+"; else vErrors = null; }  ",v.compositeRule=D.compositeRule=y,F){if(h+=" if ("+M+") {  ",D.schema=v.schema.then,D.schemaPath=v.schemaPath+".then",D.errSchemaPath=v.errSchemaPath+"/then",h+="  "+v.validate(D)+" ",D.baseId=N,h+=" "+E+" = "+M+"; ",F&&U)S="ifClause"+W,h+=" var "+S+" = 'then'; ";else S="'then'";if(h+=" } ",U)h+=" else { "}else h+=" if (!"+M+") { ";if(U){if(D.schema=v.schema.else,D.schemaPath=v.schemaPath+".else",D.errSchemaPath=v.errSchemaPath+"/else",h+="  "+v.validate(D)+" ",D.baseId=N,h+=" "+E+" = "+M+"; ",F&&U)S="ifClause"+W,h+=" var "+S+" = 'else'; ";else S="'else'";h+=" } "}if(h+=" if (!"+E+") {   var err =   ",v.createErrors!==!1){if(h+=" { keyword: 'if' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { failingKeyword: "+S+" } ",v.opts.messages!==!1)h+=` , message: 'should match "' + `+S+` + '" schema' `;if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";if(h+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(vErrors); ";else h+=" validate.errors = vErrors; return false; ";if(h+=" }   ",z)h+=" else { "}else if(z)h+=" if (true) { ";return h}});var UP=p((l5,VP)=>{VP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="valid"+W,B="errs__"+W,D=v.util.copy(v),M="";D.level++;var H="valid"+D.level,V="i"+W,F=D.dataLevel=v.dataLevel+1,U="data"+F,N=v.baseId;if(h+="var "+B+" = errors;var "+E+";",Array.isArray(X)){var S=v.schema.additionalItems;if(S===!1){h+=" "+E+" = "+K+".length <= "+X.length+"; ";var y=G;G=v.errSchemaPath+"/additionalItems",h+="  if (!"+E+") {   ";var a=a||[];if(a.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { limit: "+X.length+" } ",v.opts.messages!==!1)h+=" , message: 'should NOT have more than "+X.length+" items' ";if(v.opts.verbose)h+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";var T=h;if(h=a.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+T+"]); ";else h+=" validate.errors = ["+T+"]; return false; ";else h+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+=" } ",G=y,z)M+="}",h+=" else { "}var R=X;if(R){var x,Z=-1,I=R.length-1;while(Z<I)if(x=R[Z+=1],v.opts.strictKeywords?typeof x=="object"&&Object.keys(x).length>0||x===!1:v.util.schemaHasRules(x,v.RULES.all)){h+=" "+H+" = true; if ("+K+".length > "+Z+") { ";var b=K+"["+Z+"]";D.schema=x,D.schemaPath=Y+"["+Z+"]",D.errSchemaPath=G+"/"+Z,D.errorPath=v.util.getPathExpr(v.errorPath,Z,v.opts.jsonPointers,!0),D.dataPathArr[F]=Z;var g=v.validate(D);if(D.baseId=N,v.util.varOccurences(g,U)<2)h+=" "+v.util.varReplace(g,U,b)+" ";else h+=" var "+U+" = "+b+"; "+g+" ";if(h+=" }  ",z)h+=" if ("+H+") { ",M+="}"}}if(typeof S=="object"&&(v.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:v.util.schemaHasRules(S,v.RULES.all))){D.schema=S,D.schemaPath=v.schemaPath+".additionalItems",D.errSchemaPath=v.errSchemaPath+"/additionalItems",h+=" "+H+" = true; if ("+K+".length > "+X.length+") {  for (var "+V+" = "+X.length+"; "+V+" < "+K+".length; "+V+"++) { ",D.errorPath=v.util.getPathExpr(v.errorPath,V,v.opts.jsonPointers,!0);var b=K+"["+V+"]";D.dataPathArr[F]=V;var g=v.validate(D);if(D.baseId=N,v.util.varOccurences(g,U)<2)h+=" "+v.util.varReplace(g,U,b)+" ";else h+=" var "+U+" = "+b+"; "+g+" ";if(z)h+=" if (!"+H+") break; ";if(h+=" } }  ",z)h+=" if ("+H+") { ",M+="}"}}else if(v.opts.strictKeywords?typeof X=="object"&&Object.keys(X).length>0||X===!1:v.util.schemaHasRules(X,v.RULES.all)){D.schema=X,D.schemaPath=Y,D.errSchemaPath=G,h+="  for (var "+V+" = 0; "+V+" < "+K+".length; "+V+"++) { ",D.errorPath=v.util.getPathExpr(v.errorPath,V,v.opts.jsonPointers,!0);var b=K+"["+V+"]";D.dataPathArr[F]=V;var g=v.validate(D);if(D.baseId=N,v.util.varOccurences(g,U)<2)h+=" "+v.util.varReplace(g,U,b)+" ";else h+=" var "+U+" = "+b+"; "+g+" ";if(z)h+=" if (!"+H+") break; ";h+=" }"}if(z)h+=" "+M+" if ("+B+" == errors) {";return h}});var Gh=p((G5,NP)=>{NP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,N,K="data"+(J||""),E=v.opts.$data&&X&&X.$data,B;if(E)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",B="schema"+W;else B=X;var D=Q=="maximum",M=D?"exclusiveMaximum":"exclusiveMinimum",H=v.schema[M],V=v.opts.$data&&H&&H.$data,F=D?"<":">",U=D?">":"<",N=void 0;if(!(E||typeof X=="number"||X===void 0))throw Error(Q+" must be number");if(!(V||H===void 0||typeof H=="number"||typeof H=="boolean"))throw Error(M+" must be number or boolean");if(V){var S=v.util.getData(H.$data,J,v.dataPathArr),y="exclusive"+W,a="exclType"+W,T="exclIsNumber"+W,R="op"+W,x="' + "+R+" + '";h+=" var schemaExcl"+W+" = "+S+"; ",S="schemaExcl"+W,h+=" var "+y+"; var "+a+" = typeof "+S+"; if ("+a+" != 'boolean' && "+a+" != 'undefined' && "+a+" != 'number') { ";var N=M,Z=Z||[];if(Z.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: '"+(N||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: {} ",v.opts.messages!==!1)h+=" , message: '"+M+" should be boolean' ";if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";var I=h;if(h=Z.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+I+"]); ";else h+=" validate.errors = ["+I+"]; return false; ";else h+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+=" } else if ( ",E)h+=" ("+B+" !== undefined && typeof "+B+" != 'number') || ";if(h+=" "+a+" == 'number' ? ( ("+y+" = "+B+" === undefined || "+S+" "+F+"= "+B+") ? "+K+" "+U+"= "+S+" : "+K+" "+U+" "+B+" ) : ( ("+y+" = "+S+" === true) ? "+K+" "+U+"= "+B+" : "+K+" "+U+" "+B+" ) || "+K+" !== "+K+") { var op"+W+" = "+y+" ? '"+F+"' : '"+F+"='; ",X===void 0)N=M,G=v.errSchemaPath+"/"+M,B=S,E=V}else{var T=typeof H=="number",x=F;if(T&&E){var R="'"+x+"'";if(h+=" if ( ",E)h+=" ("+B+" !== undefined && typeof "+B+" != 'number') || ";h+=" ( "+B+" === undefined || "+H+" "+F+"= "+B+" ? "+K+" "+U+"= "+H+" : "+K+" "+U+" "+B+" ) || "+K+" !== "+K+") { "}else{if(T&&X===void 0)y=!0,N=M,G=v.errSchemaPath+"/"+M,B=H,U+="=";else{if(T)B=Math[D?"min":"max"](H,X);if(H===(T?B:!0))y=!0,N=M,G=v.errSchemaPath+"/"+M,U+="=";else y=!1,x+="="}var R="'"+x+"'";if(h+=" if ( ",E)h+=" ("+B+" !== undefined && typeof "+B+" != 'number') || ";h+=" "+K+" "+U+" "+B+" || "+K+" !== "+K+") { "}}N=N||Q;var Z=Z||[];if(Z.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: '"+(N||"_limit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { comparison: "+R+", limit: "+B+", exclusive: "+y+" } ",v.opts.messages!==!1)if(h+=" , message: 'should be "+x+" ",E)h+="' + "+B;else h+=""+B+"'";if(v.opts.verbose){if(h+=" , schema:  ",E)h+="validate.schema"+Y;else h+=""+X;h+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" "}h+=" } "}else h+=" {} ";var I=h;if(h=Z.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+I+"]); ";else h+=" validate.errors = ["+I+"]; return false; ";else h+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+=" } ",z)h+=" else { ";return h}});var qh=p((q5,FP)=>{FP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,M,K="data"+(J||""),E=v.opts.$data&&X&&X.$data,B;if(E)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",B="schema"+W;else B=X;if(!(E||typeof X=="number"))throw Error(Q+" must be number");var D=Q=="maxItems"?">":"<";if(h+="if ( ",E)h+=" ("+B+" !== undefined && typeof "+B+" != 'number') || ";h+=" "+K+".length "+D+" "+B+") { ";var M=Q,H=H||[];if(H.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: '"+(M||"_limitItems")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { limit: "+B+" } ",v.opts.messages!==!1){if(h+=" , message: 'should NOT have ",Q=="maxItems")h+="more";else h+="fewer";if(h+=" than ",E)h+="' + "+B+" + '";else h+=""+X;h+=" items' "}if(v.opts.verbose){if(h+=" , schema:  ",E)h+="validate.schema"+Y;else h+=""+X;h+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" "}h+=" } "}else h+=" {} ";var V=h;if(h=H.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+V+"]); ";else h+=" validate.errors = ["+V+"]; return false; ";else h+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+="} ",z)h+=" else { ";return h}});var zh=p((z5,AP)=>{AP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,M,K="data"+(J||""),E=v.opts.$data&&X&&X.$data,B;if(E)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",B="schema"+W;else B=X;if(!(E||typeof X=="number"))throw Error(Q+" must be number");var D=Q=="maxLength"?">":"<";if(h+="if ( ",E)h+=" ("+B+" !== undefined && typeof "+B+" != 'number') || ";if(v.opts.unicode===!1)h+=" "+K+".length ";else h+=" ucs2length("+K+") ";h+=" "+D+" "+B+") { ";var M=Q,H=H||[];if(H.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: '"+(M||"_limitLength")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { limit: "+B+" } ",v.opts.messages!==!1){if(h+=" , message: 'should NOT be ",Q=="maxLength")h+="longer";else h+="shorter";if(h+=" than ",E)h+="' + "+B+" + '";else h+=""+X;h+=" characters' "}if(v.opts.verbose){if(h+=" , schema:  ",E)h+="validate.schema"+Y;else h+=""+X;h+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" "}h+=" } "}else h+=" {} ";var V=h;if(h=H.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+V+"]); ";else h+=" validate.errors = ["+V+"]; return false; ";else h+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+="} ",z)h+=" else { ";return h}});var Dh=p((D5,jP)=>{jP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,M,K="data"+(J||""),E=v.opts.$data&&X&&X.$data,B;if(E)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",B="schema"+W;else B=X;if(!(E||typeof X=="number"))throw Error(Q+" must be number");var D=Q=="maxProperties"?">":"<";if(h+="if ( ",E)h+=" ("+B+" !== undefined && typeof "+B+" != 'number') || ";h+=" Object.keys("+K+").length "+D+" "+B+") { ";var M=Q,H=H||[];if(H.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: '"+(M||"_limitProperties")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { limit: "+B+" } ",v.opts.messages!==!1){if(h+=" , message: 'should NOT have ",Q=="maxProperties")h+="more";else h+="fewer";if(h+=" than ",E)h+="' + "+B+" + '";else h+=""+X;h+=" properties' "}if(v.opts.verbose){if(h+=" , schema:  ",E)h+="validate.schema"+Y;else h+=""+X;h+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" "}h+=" } "}else h+=" {} ";var V=h;if(h=H.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+V+"]); ";else h+=" validate.errors = ["+V+"]; return false; ";else h+=" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+="} ",z)h+=" else { ";return h}});var SP=p((H5,bP)=>{bP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E=v.opts.$data&&X&&X.$data,B;if(E)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",B="schema"+W;else B=X;if(!(E||typeof X=="number"))throw Error(Q+" must be number");if(h+="var division"+W+";if (",E)h+=" "+B+" !== undefined && ( typeof "+B+" != 'number' || ";if(h+=" (division"+W+" = "+K+" / "+B+", ",v.opts.multipleOfPrecision)h+=" Math.abs(Math.round(division"+W+") - division"+W+") > 1e-"+v.opts.multipleOfPrecision+" ";else h+=" division"+W+" !== parseInt(division"+W+") ";if(h+=" ) ",E)h+="  )  ";h+=" ) {   ";var D=D||[];if(D.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { multipleOf: "+B+" } ",v.opts.messages!==!1)if(h+=" , message: 'should be multiple of ",E)h+="' + "+B;else h+=""+B+"'";if(v.opts.verbose){if(h+=" , schema:  ",E)h+="validate.schema"+Y;else h+=""+X;h+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" "}h+=" } "}else h+=" {} ";var M=h;if(h=D.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+M+"]); ";else h+=" validate.errors = ["+M+"]; return false; ";else h+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+="} ",z)h+=" else { ";return h}});var gP=p((K5,RP)=>{RP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="errs__"+W,B=v.util.copy(v);B.level++;var D="valid"+B.level;if(v.opts.strictKeywords?typeof X=="object"&&Object.keys(X).length>0||X===!1:v.util.schemaHasRules(X,v.RULES.all)){B.schema=X,B.schemaPath=Y,B.errSchemaPath=G,h+=" var "+E+" = errors;  ";var M=v.compositeRule;v.compositeRule=B.compositeRule=!0,B.createErrors=!1;var H;if(B.opts.allErrors)H=B.opts.allErrors,B.opts.allErrors=!1;if(h+=" "+v.validate(B)+" ",B.createErrors=!0,H)B.opts.allErrors=H;v.compositeRule=B.compositeRule=M,h+=" if ("+D+") {   ";var V=V||[];if(V.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: {} ",v.opts.messages!==!1)h+=" , message: 'should NOT be valid' ";if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";var F=h;if(h=V.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+F+"]); ";else h+=" validate.errors = ["+F+"]; return false; ";else h+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+=" } else {  errors = "+E+"; if (vErrors !== null) { if ("+E+") vErrors.length = "+E+"; else vErrors = null; } ",v.opts.allErrors)h+=" } "}else{if(h+="  var err =   ",v.createErrors!==!1){if(h+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: {} ",v.opts.messages!==!1)h+=" , message: 'should NOT be valid' ";if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";if(h+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",z)h+=" if (false) { "}return h}});var yP=p(($5,_P)=>{_P.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="valid"+W,B="errs__"+W,D=v.util.copy(v),M="";D.level++;var H="valid"+D.level,V=D.baseId,F="prevValid"+W,U="passingSchemas"+W;h+="var "+B+" = errors , "+F+" = false , "+E+" = false , "+U+" = null; ";var N=v.compositeRule;v.compositeRule=D.compositeRule=!0;var S=X;if(S){var y,a=-1,T=S.length-1;while(a<T){if(y=S[a+=1],v.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:v.util.schemaHasRules(y,v.RULES.all))D.schema=y,D.schemaPath=Y+"["+a+"]",D.errSchemaPath=G+"/"+a,h+="  "+v.validate(D)+" ",D.baseId=V;else h+=" var "+H+" = true; ";if(a)h+=" if ("+H+" && "+F+") { "+E+" = false; "+U+" = ["+U+", "+a+"]; } else { ",M+="}";h+=" if ("+H+") { "+E+" = "+F+" = true; "+U+" = "+a+"; }"}}if(v.compositeRule=D.compositeRule=N,h+=""+M+"if (!"+E+") {   var err =   ",v.createErrors!==!1){if(h+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { passingSchemas: "+U+" } ",v.opts.messages!==!1)h+=" , message: 'should match exactly one schema in oneOf' ";if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";if(h+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(vErrors); ";else h+=" validate.errors = vErrors; return false; ";if(h+="} else {  errors = "+B+"; if (vErrors !== null) { if ("+B+") vErrors.length = "+B+"; else vErrors = null; }",v.opts.allErrors)h+=" } ";return h}});var rP=p((E5,kP)=>{kP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E=v.opts.$data&&X&&X.$data,B;if(E)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",B="schema"+W;else B=X;var D=E?"(new RegExp("+B+"))":v.usePattern(X);if(h+="if ( ",E)h+=" ("+B+" !== undefined && typeof "+B+" != 'string') || ";h+=" !"+D+".test("+K+") ) {   ";var M=M||[];if(M.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { pattern:  ",E)h+=""+B;else h+=""+v.util.toQuotedString(X);if(h+="  } ",v.opts.messages!==!1){if(h+=` , message: 'should match pattern "`,E)h+="' + "+B+" + '";else h+=""+v.util.escapeQuotes(X);h+=`"' `}if(v.opts.verbose){if(h+=" , schema:  ",E)h+="validate.schema"+Y;else h+=""+v.util.toQuotedString(X);h+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" "}h+=" } "}else h+=" {} ";var H=h;if(h=M.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+H+"]); ";else h+=" validate.errors = ["+H+"]; return false; ";else h+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+="} ",z)h+=" else { ";return h}});var CP=p((M5,IP)=>{IP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="errs__"+W,B=v.util.copy(v),D="";B.level++;var M="valid"+B.level,H="key"+W,V="idx"+W,F=B.dataLevel=v.dataLevel+1,U="data"+F,N="dataProperties"+W,S=Object.keys(X||{}).filter(fv),y=v.schema.patternProperties||{},a=Object.keys(y).filter(fv),T=v.schema.additionalProperties,R=S.length||a.length,x=T===!1,Z=typeof T=="object"&&Object.keys(T).length,I=v.opts.removeAdditional,b=x||Z||I,g=v.opts.ownProperties,C=v.baseId,Xv=v.schema.required;if(Xv&&!(v.opts.$data&&Xv.$data)&&Xv.length<v.opts.loopRequired)var t=v.util.toHash(Xv);function fv(iv){return iv!=="__proto__"}if(h+="var "+E+" = errors;var "+M+" = true;",g)h+=" var "+N+" = undefined;";if(b){if(g)h+=" "+N+" = "+N+" || Object.keys("+K+"); for (var "+V+"=0; "+V+"<"+N+".length; "+V+"++) { var "+H+" = "+N+"["+V+"]; ";else h+=" for (var "+H+" in "+K+") { ";if(R){if(h+=" var isAdditional"+W+" = !(false ",S.length)if(S.length>8)h+=" || validate.schema"+Y+".hasOwnProperty("+H+") ";else{var s=S;if(s){var m,$v=-1,jv=s.length-1;while($v<jv)m=s[$v+=1],h+=" || "+H+" == "+v.util.toQuotedString(m)+" "}}if(a.length){var Rv=a;if(Rv){var Pv,Ov=-1,Nv=Rv.length-1;while(Ov<Nv)Pv=Rv[Ov+=1],h+=" || "+v.usePattern(Pv)+".test("+H+") "}}h+=" ); if (isAdditional"+W+") { "}if(I=="all")h+=" delete "+K+"["+H+"]; ";else{var gv=v.errorPath,Kf="' + "+H+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);if(x)if(I)h+=" delete "+K+"["+H+"]; ";else{h+=" "+M+" = false; ";var Yf=G;G=v.errSchemaPath+"/additionalProperties";var Lv=Lv||[];if(Lv.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { additionalProperty: '"+Kf+"' } ",v.opts.messages!==!1){if(h+=" , message: '",v.opts._errorDataPathProperty)h+="is an invalid additional property";else h+="should NOT have additional properties";h+="' "}if(v.opts.verbose)h+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";var Ev=h;if(h=Lv.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+Ev+"]); ";else h+=" validate.errors = ["+Ev+"]; return false; ";else h+=" var err = "+Ev+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(G=Yf,z)h+=" break; "}else if(Z)if(I=="failing"){h+=" var "+E+" = errors;  ";var jf=v.compositeRule;v.compositeRule=B.compositeRule=!0,B.schema=T,B.schemaPath=v.schemaPath+".additionalProperties",B.errSchemaPath=v.errSchemaPath+"/additionalProperties",B.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);var bv=K+"["+H+"]";B.dataPathArr[F]=H;var Jv=v.validate(B);if(B.baseId=C,v.util.varOccurences(Jv,U)<2)h+=" "+v.util.varReplace(Jv,U,bv)+" ";else h+=" var "+U+" = "+bv+"; "+Jv+" ";h+=" if (!"+M+") { errors = "+E+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+K+"["+H+"]; }  ",v.compositeRule=B.compositeRule=jf}else{B.schema=T,B.schemaPath=v.schemaPath+".additionalProperties",B.errSchemaPath=v.errSchemaPath+"/additionalProperties",B.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);var bv=K+"["+H+"]";B.dataPathArr[F]=H;var Jv=v.validate(B);if(B.baseId=C,v.util.varOccurences(Jv,U)<2)h+=" "+v.util.varReplace(Jv,U,bv)+" ";else h+=" var "+U+" = "+bv+"; "+Jv+" ";if(z)h+=" if (!"+M+") break; "}v.errorPath=gv}if(R)h+=" } ";if(h+=" }  ",z)h+=" if ("+M+") { ",D+="}"}var $f=v.opts.useDefaults&&!v.compositeRule;if(S.length){var Bf=S;if(Bf){var m,bf=-1,Sf=Bf.length-1;while(bf<Sf){m=Bf[bf+=1];var Fv=X[m];if(v.opts.strictKeywords?typeof Fv=="object"&&Object.keys(Fv).length>0||Fv===!1:v.util.schemaHasRules(Fv,v.RULES.all)){var av=v.util.getProperty(m),bv=K+av,kv=$f&&Fv.default!==void 0;B.schema=Fv,B.schemaPath=Y+av,B.errSchemaPath=G+"/"+v.util.escapeFragment(m),B.errorPath=v.util.getPath(v.errorPath,m,v.opts.jsonPointers),B.dataPathArr[F]=v.util.toQuotedString(m);var Jv=v.validate(B);if(B.baseId=C,v.util.varOccurences(Jv,U)<2){Jv=v.util.varReplace(Jv,U,bv);var _v=bv}else{var _v=U;h+=" var "+U+" = "+bv+"; "}if(kv)h+=" "+Jv+" ";else{if(t&&t[m]){if(h+=" if ( "+_v+" === undefined ",g)h+=" || ! Object.prototype.hasOwnProperty.call("+K+", '"+v.util.escapeQuotes(m)+"') ";h+=") { "+M+" = false; ";var gv=v.errorPath,Yf=G,hf=v.util.escapeQuotes(m);if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(gv,m,v.opts.jsonPointers);G=v.errSchemaPath+"/required";var Lv=Lv||[];if(Lv.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+hf+"' } ",v.opts.messages!==!1){if(h+=" , message: '",v.opts._errorDataPathProperty)h+="is a required property";else h+="should have required property \\'"+hf+"\\'";h+="' "}if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";var Ev=h;if(h=Lv.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+Ev+"]); ";else h+=" validate.errors = ["+Ev+"]; return false; ";else h+=" var err = "+Ev+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";G=Yf,v.errorPath=gv,h+=" } else { "}else if(z){if(h+=" if ( "+_v+" === undefined ",g)h+=" || ! Object.prototype.hasOwnProperty.call("+K+", '"+v.util.escapeQuotes(m)+"') ";h+=") { "+M+" = true; } else { "}else{if(h+=" if ("+_v+" !== undefined ",g)h+=" &&   Object.prototype.hasOwnProperty.call("+K+", '"+v.util.escapeQuotes(m)+"') ";h+=" ) { "}h+=" "+Jv+" } "}}if(z)h+=" if ("+M+") { ",D+="}"}}}if(a.length){var Zv=a;if(Zv){var Pv,_1=-1,S0=Zv.length-1;while(_1<S0){Pv=Zv[_1+=1];var Fv=y[Pv];if(v.opts.strictKeywords?typeof Fv=="object"&&Object.keys(Fv).length>0||Fv===!1:v.util.schemaHasRules(Fv,v.RULES.all)){if(B.schema=Fv,B.schemaPath=v.schemaPath+".patternProperties"+v.util.getProperty(Pv),B.errSchemaPath=v.errSchemaPath+"/patternProperties/"+v.util.escapeFragment(Pv),g)h+=" "+N+" = "+N+" || Object.keys("+K+"); for (var "+V+"=0; "+V+"<"+N+".length; "+V+"++) { var "+H+" = "+N+"["+V+"]; ";else h+=" for (var "+H+" in "+K+") { ";h+=" if ("+v.usePattern(Pv)+".test("+H+")) { ",B.errorPath=v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);var bv=K+"["+H+"]";B.dataPathArr[F]=H;var Jv=v.validate(B);if(B.baseId=C,v.util.varOccurences(Jv,U)<2)h+=" "+v.util.varReplace(Jv,U,bv)+" ";else h+=" var "+U+" = "+bv+"; "+Jv+" ";if(z)h+=" if (!"+M+") break; ";if(h+=" } ",z)h+=" else "+M+" = true; ";if(h+=" }  ",z)h+=" if ("+M+") { ",D+="}"}}}}if(z)h+=" "+D+" if ("+E+" == errors) {";return h}});var TP=p((O5,ZP)=>{ZP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="errs__"+W,B=v.util.copy(v),D="";B.level++;var M="valid"+B.level;if(h+="var "+E+" = errors;",v.opts.strictKeywords?typeof X=="object"&&Object.keys(X).length>0||X===!1:v.util.schemaHasRules(X,v.RULES.all)){B.schema=X,B.schemaPath=Y,B.errSchemaPath=G;var H="key"+W,V="idx"+W,F="i"+W,U="' + "+H+" + '",N=B.dataLevel=v.dataLevel+1,S="data"+N,y="dataProperties"+W,a=v.opts.ownProperties,T=v.baseId;if(a)h+=" var "+y+" = undefined; ";if(a)h+=" "+y+" = "+y+" || Object.keys("+K+"); for (var "+V+"=0; "+V+"<"+y+".length; "+V+"++) { var "+H+" = "+y+"["+V+"]; ";else h+=" for (var "+H+" in "+K+") { ";h+=" var startErrs"+W+" = errors; ";var R=H,x=v.compositeRule;v.compositeRule=B.compositeRule=!0;var Z=v.validate(B);if(B.baseId=T,v.util.varOccurences(Z,S)<2)h+=" "+v.util.varReplace(Z,S,R)+" ";else h+=" var "+S+" = "+R+"; "+Z+" ";if(v.compositeRule=B.compositeRule=x,h+=" if (!"+M+") { for (var "+F+"=startErrs"+W+"; "+F+"<errors; "+F+"++) { vErrors["+F+"].propertyName = "+H+"; }   var err =   ",v.createErrors!==!1){if(h+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { propertyName: '"+U+"' } ",v.opts.messages!==!1)h+=" , message: 'property name \\'"+U+"\\' is invalid' ";if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";if(h+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(vErrors); ";else h+=" validate.errors = vErrors; return false; ";if(z)h+=" break; ";h+=" } }"}if(z)h+=" "+D+" if ("+E+" == errors) {";return h}});var uP=p((L5,xP)=>{xP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="valid"+W,B=v.opts.$data&&X&&X.$data,D;if(B)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",D="schema"+W;else D=X;var M="schema"+W;if(!B)if(X.length<v.opts.loopRequired&&v.schema.properties&&Object.keys(v.schema.properties).length){var H=[],V=X;if(V){var F,U=-1,N=V.length-1;while(U<N){F=V[U+=1];var S=v.schema.properties[F];if(!(S&&(v.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:v.util.schemaHasRules(S,v.RULES.all))))H[H.length]=F}}}else var H=X;if(B||H.length){var y=v.errorPath,a=B||H.length>=v.opts.loopRequired,T=v.opts.ownProperties;if(z)if(h+=" var missing"+W+"; ",a){if(!B)h+=" var "+M+" = validate.schema"+Y+"; ";var R="i"+W,x="schema"+W+"["+R+"]",Z="' + "+x+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(y,x,v.opts.jsonPointers);if(h+=" var "+E+" = true; ",B)h+=" if (schema"+W+" === undefined) "+E+" = true; else if (!Array.isArray(schema"+W+")) "+E+" = false; else {";if(h+=" for (var "+R+" = 0; "+R+" < "+M+".length; "+R+"++) { "+E+" = "+K+"["+M+"["+R+"]] !== undefined ",T)h+=" &&   Object.prototype.hasOwnProperty.call("+K+", "+M+"["+R+"]) ";if(h+="; if (!"+E+") break; } ",B)h+="  }  ";h+="  if (!"+E+") {   ";var I=I||[];if(I.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(h+=" , message: '",v.opts._errorDataPathProperty)h+="is a required property";else h+="should have required property \\'"+Z+"\\'";h+="' "}if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";var b=h;if(h=I.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+b+"]); ";else h+=" validate.errors = ["+b+"]; return false; ";else h+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";h+=" } else { "}else{h+=" if ( ";var g=H;if(g){var C,R=-1,Xv=g.length-1;while(R<Xv){if(C=g[R+=1],R)h+=" || ";var t=v.util.getProperty(C),fv=K+t;if(h+=" ( ( "+fv+" === undefined ",T)h+=" || ! Object.prototype.hasOwnProperty.call("+K+", '"+v.util.escapeQuotes(C)+"') ";h+=") && (missing"+W+" = "+v.util.toQuotedString(v.opts.jsonPointers?C:t)+") ) "}}h+=") {  ";var x="missing"+W,Z="' + "+x+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(y,x,!0):y+" + "+x;var I=I||[];if(I.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(h+=" , message: '",v.opts._errorDataPathProperty)h+="is a required property";else h+="should have required property \\'"+Z+"\\'";h+="' "}if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";var b=h;if(h=I.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+b+"]); ";else h+=" validate.errors = ["+b+"]; return false; ";else h+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";h+=" } else { "}else if(a){if(!B)h+=" var "+M+" = validate.schema"+Y+"; ";var R="i"+W,x="schema"+W+"["+R+"]",Z="' + "+x+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(y,x,v.opts.jsonPointers);if(B){if(h+=" if ("+M+" && !Array.isArray("+M+")) {  var err =   ",v.createErrors!==!1){if(h+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(h+=" , message: '",v.opts._errorDataPathProperty)h+="is a required property";else h+="should have required property \\'"+Z+"\\'";h+="' "}if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";h+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+M+" !== undefined) { "}if(h+=" for (var "+R+" = 0; "+R+" < "+M+".length; "+R+"++) { if ("+K+"["+M+"["+R+"]] === undefined ",T)h+=" || ! Object.prototype.hasOwnProperty.call("+K+", "+M+"["+R+"]) ";if(h+=") {  var err =   ",v.createErrors!==!1){if(h+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(h+=" , message: '",v.opts._errorDataPathProperty)h+="is a required property";else h+="should have required property \\'"+Z+"\\'";h+="' "}if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";if(h+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",B)h+="  }  "}else{var s=H;if(s){var C,m=-1,$v=s.length-1;while(m<$v){C=s[m+=1];var t=v.util.getProperty(C),Z=v.util.escapeQuotes(C),fv=K+t;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(y,C,v.opts.jsonPointers);if(h+=" if ( "+fv+" === undefined ",T)h+=" || ! Object.prototype.hasOwnProperty.call("+K+", '"+v.util.escapeQuotes(C)+"') ";if(h+=") {  var err =   ",v.createErrors!==!1){if(h+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(h+=" , message: '",v.opts._errorDataPathProperty)h+="is a required property";else h+="should have required property \\'"+Z+"\\'";h+="' "}if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" ";h+=" } "}else h+=" {} ";h+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}v.errorPath=y}else if(z)h+=" if (true) {";return h}});var mP=p((V5,aP)=>{aP.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K="data"+(J||""),E="valid"+W,B=v.opts.$data&&X&&X.$data,D;if(B)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",D="schema"+W;else D=X;if((X||B)&&v.opts.uniqueItems!==!1){if(B)h+=" var "+E+"; if ("+D+" === false || "+D+" === undefined) "+E+" = true; else if (typeof "+D+" != 'boolean') "+E+" = false; else { ";h+=" var i = "+K+".length , "+E+" = true , j; if (i > 1) { ";var M=v.schema.items&&v.schema.items.type,H=Array.isArray(M);if(!M||M=="object"||M=="array"||H&&(M.indexOf("object")>=0||M.indexOf("array")>=0))h+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+K+"[i], "+K+"[j])) { "+E+" = false; break outer; } } } ";else{h+=" var itemIndices = {}, item; for (;i--;) { var item = "+K+"[i]; ";var V="checkDataType"+(H?"s":"");if(h+=" if ("+v.util[V](M,"item",v.opts.strictNumbers,!0)+") continue; ",H)h+=` if (typeof item == 'string') item = '"' + item; `;h+=" if (typeof itemIndices[item] == 'number') { "+E+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}if(h+=" } ",B)h+="  }  ";h+=" if (!"+E+") {   ";var F=F||[];if(F.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { i: i, j: j } ",v.opts.messages!==!1)h+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' ";if(v.opts.verbose){if(h+=" , schema:  ",B)h+="validate.schema"+Y;else h+=""+X;h+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+K+" "}h+=" } "}else h+=" {} ";var U=h;if(h=F.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+U+"]); ";else h+=" validate.errors = ["+U+"]; return false; ";else h+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(h+=" } ",z)h+=" else { "}else if(z)h+=" if (true) { ";return h}});var cP=p((U5,nP)=>{nP.exports={$ref:PP(),allOf:JP(),anyOf:XP(),$comment:BP(),const:GP(),contains:zP(),dependencies:HP(),enum:$P(),format:MP(),if:LP(),items:UP(),maximum:Gh(),minimum:Gh(),maxItems:qh(),minItems:qh(),maxLength:zh(),minLength:zh(),maxProperties:Dh(),minProperties:Dh(),multipleOf:SP(),not:gP(),oneOf:yP(),pattern:rP(),properties:CP(),propertyNames:TP(),required:uP(),uniqueItems:mP(),validate:Bh()}});var dP=p((N5,iP)=>{var pP=cP(),Hh=Zf().toHash;iP.exports=function(){var v=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],Q=["type","$comment"],P=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],h=["number","integer","string","array","object","boolean","null"];return v.all=Hh(Q),v.types=Hh(h),v.forEach(function(W){if(W.rules=W.rules.map(function(J){var X;if(typeof J=="object"){var Y=Object.keys(J)[0];X=J[Y],J=Y,X.forEach(function(z){Q.push(z),v.all[z]=!0})}Q.push(J);var G=v.all[J]={keyword:J,code:pP[J],implements:X};return G}),v.all.$comment={keyword:"$comment",code:pP.$comment},W.type)v.types[W.type]=W}),v.keywords=Hh(Q.concat(P)),v.custom={},v}});var tP=p((F5,sP)=>{var oP=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];sP.exports=function(f,v){for(var Q=0;Q<v.length;Q++){f=JSON.parse(JSON.stringify(f));var P=v[Q].split("/"),h=f,W;for(W=1;W<P.length;W++)h=h[P[W]];for(W=0;W<oP.length;W++){var J=oP[W],X=h[J];if(X)h[J]={anyOf:[X,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}}return f}});var fW=p((A5,vW)=>{var S6=G0().MissingRef;vW.exports=eP;function eP(f,v,Q){var P=this;if(typeof this._opts.loadSchema!="function")throw Error("options.loadSchema should be a function");if(typeof v=="function")Q=v,v=void 0;var h=W(f).then(function(){var X=P._addSchema(f,void 0,v);return X.validate||J(X)});if(Q)h.then(function(X){Q(null,X)},Q);return h;function W(X){var Y=X.$schema;return Y&&!P.getSchema(Y)?eP.call(P,{$ref:Y},!0):Promise.resolve()}function J(X){try{return P._compile(X)}catch(G){if(G instanceof S6)return Y(G);throw G}function Y(G){var z=G.missingSchema;if(B(z))throw Error("Schema "+z+" is loaded but "+G.missingRef+" cannot be resolved");var K=P._loadingSchemas[z];if(!K)K=P._loadingSchemas[z]=P._opts.loadSchema(z),K.then(E,E);return K.then(function(D){if(!B(z))return W(D).then(function(){if(!B(z))P.addSchema(D,z,void 0,v)})}).then(function(){return J(X)});function E(){delete P._loadingSchemas[z]}function B(D){return P._refs[D]||P._schemas[D]}}}}});var QW=p((j5,hW)=>{hW.exports=function(v,Q,P){var h=" ",W=v.level,J=v.dataLevel,X=v.schema[Q],Y=v.schemaPath+v.util.getProperty(Q),G=v.errSchemaPath+"/"+Q,z=!v.opts.allErrors,K,E="data"+(J||""),B="valid"+W,D="errs__"+W,M=v.opts.$data&&X&&X.$data,H;if(M)h+=" var schema"+W+" = "+v.util.getData(X.$data,J,v.dataPathArr)+"; ",H="schema"+W;else H=X;var V=this,F="definition"+W,U=V.definition,N="",S,y,a,T,R;if(M&&U.$data){R="keywordValidate"+W;var x=U.validateSchema;h+=" var "+F+" = RULES.custom['"+Q+"'].definition; var "+R+" = "+F+".validate;"}else{if(T=v.useCustomRule(V,X,v.schema,v),!T)return;H="validate.schema"+Y,R=T.code,S=U.compile,y=U.inline,a=U.macro}var Z=R+".errors",I="i"+W,b="ruleErr"+W,g=U.async;if(g&&!v.async)throw Error("async keyword in sync schema");if(!(y||a))h+=""+Z+" = null;";if(h+="var "+D+" = errors;var "+B+";",M&&U.$data){if(N+="}",h+=" if ("+H+" === undefined) { "+B+" = true; } else { ",x)N+="}",h+=" "+B+" = "+F+".validateSchema("+H+"); if ("+B+") { "}if(y)if(U.statements)h+=" "+T.validate+" ";else h+=" "+B+" = "+T.validate+"; ";else if(a){var C=v.util.copy(v),N="";C.level++;var Xv="valid"+C.level;C.schema=T.validate,C.schemaPath="";var t=v.compositeRule;v.compositeRule=C.compositeRule=!0;var fv=v.validate(C).replace(/validate\.schema/g,R);v.compositeRule=C.compositeRule=t,h+=" "+fv}else{var s=s||[];if(s.push(h),h="",h+="  "+R+".call( ",v.opts.passContext)h+="this";else h+="self";if(S||U.schema===!1)h+=" , "+E+" ";else h+=" , "+H+" , "+E+" , validate.schema"+v.schemaPath+" ";if(h+=" , (dataPath || '')",v.errorPath!='""')h+=" + "+v.errorPath;var m=J?"data"+(J-1||""):"parentData",$v=J?v.dataPathArr[J]:"parentDataProperty";h+=" , "+m+" , "+$v+" , rootData )  ";var jv=h;if(h=s.pop(),U.errors===!1){if(h+=" "+B+" = ",g)h+="await ";h+=""+jv+"; "}else if(g)Z="customErrors"+W,h+=" var "+Z+" = null; try { "+B+" = await "+jv+"; } catch (e) { "+B+" = false; if (e instanceof ValidationError) "+Z+" = e.errors; else throw e; } ";else h+=" "+Z+" = null; "+B+" = "+jv+"; "}if(U.modifying)h+=" if ("+m+") "+E+" = "+m+"["+$v+"];";if(h+=""+N,U.valid){if(z)h+=" if (true) { "}else{if(h+=" if ( ",U.valid===void 0)if(h+=" !",a)h+=""+Xv;else h+=""+B;else h+=" "+!U.valid+" ";h+=") { ",K=V.keyword;var s=s||[];s.push(h),h="";var s=s||[];if(s.push(h),h="",v.createErrors!==!1){if(h+=" { keyword: '"+(K||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { keyword: '"+V.keyword+"' } ",v.opts.messages!==!1)h+=` , message: 'should pass "`+V.keyword+`" keyword validation' `;if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+E+" ";h+=" } "}else h+=" {} ";var Rv=h;if(h=s.pop(),!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(["+Rv+"]); ";else h+=" validate.errors = ["+Rv+"]; return false; ";else h+=" var err = "+Rv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Pv=h;if(h=s.pop(),y)if(U.errors){if(U.errors!="full"){if(h+="  for (var "+I+"="+D+"; "+I+"<errors; "+I+"++) { var "+b+" = vErrors["+I+"]; if ("+b+".dataPath === undefined) "+b+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+b+".schemaPath === undefined) { "+b+'.schemaPath = "'+G+'"; } ',v.opts.verbose)h+=" "+b+".schema = "+H+"; "+b+".data = "+E+"; ";h+=" } "}}else if(U.errors===!1)h+=" "+Pv+" ";else{if(h+=" if ("+D+" == errors) { "+Pv+" } else {  for (var "+I+"="+D+"; "+I+"<errors; "+I+"++) { var "+b+" = vErrors["+I+"]; if ("+b+".dataPath === undefined) "+b+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+b+".schemaPath === undefined) { "+b+'.schemaPath = "'+G+'"; } ',v.opts.verbose)h+=" "+b+".schema = "+H+"; "+b+".data = "+E+"; ";h+=" } } "}else if(a){if(h+="   var err =   ",v.createErrors!==!1){if(h+=" { keyword: '"+(K||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { keyword: '"+V.keyword+"' } ",v.opts.messages!==!1)h+=` , message: 'should pass "`+V.keyword+`" keyword validation' `;if(v.opts.verbose)h+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+E+" ";h+=" } "}else h+=" {} ";if(h+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)h+=" throw new ValidationError(vErrors); ";else h+=" validate.errors = vErrors; return false; "}else if(U.errors===!1)h+=" "+Pv+" ";else{if(h+=" if (Array.isArray("+Z+")) { if (vErrors === null) vErrors = "+Z+"; else vErrors = vErrors.concat("+Z+"); errors = vErrors.length;  for (var "+I+"="+D+"; "+I+"<errors; "+I+"++) { var "+b+" = vErrors["+I+"]; if ("+b+".dataPath === undefined) "+b+".dataPath = (dataPath || '') + "+v.errorPath+";  "+b+'.schemaPath = "'+G+'";  ',v.opts.verbose)h+=" "+b+".schema = "+H+"; "+b+".data = "+E+"; ";h+=" } } else { "+Pv+" } "}if(h+=" } ",z)h+=" else { "}return h}});var Kh=p((b5,R6)=>{R6.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var JW=p((S5,WW)=>{var PW=Kh();WW.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:PW.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:PW.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var XW=p((R5,wW)=>{var g6=/^[a-z_$][a-z0-9_$-]*$/i,_6=QW(),y6=JW();wW.exports={add:k6,get:r6,remove:I6,validate:$h};function k6(f,v){var Q=this.RULES;if(Q.keywords[f])throw Error("Keyword "+f+" is already defined");if(!g6.test(f))throw Error("Keyword "+f+" is not a valid identifier");if(v){this.validateKeyword(v,!0);var P=v.type;if(Array.isArray(P))for(var h=0;h<P.length;h++)J(f,P[h],v);else J(f,P,v);var W=v.metaSchema;if(W){if(v.$data&&this._opts.$data)W={anyOf:[W,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]};v.validateSchema=this.compile(W,!0)}}Q.keywords[f]=Q.all[f]=!0;function J(X,Y,G){var z;for(var K=0;K<Q.length;K++){var E=Q[K];if(E.type==Y){z=E;break}}if(!z)z={type:Y,rules:[]},Q.push(z);var B={keyword:X,definition:G,custom:!0,code:_6,implements:G.implements};z.rules.push(B),Q.custom[X]=B}return this}function r6(f){var v=this.RULES.custom[f];return v?v.definition:this.RULES.keywords[f]||!1}function I6(f){var v=this.RULES;delete v.keywords[f],delete v.all[f],delete v.custom[f];for(var Q=0;Q<v.length;Q++){var P=v[Q].rules;for(var h=0;h<P.length;h++)if(P[h].keyword==f){P.splice(h,1);break}}return this}function $h(f,v){$h.errors=null;var Q=this._validateKeyword=this._validateKeyword||this.compile(y6,!0);if(Q(f))return!0;if($h.errors=Q.errors,v)throw Error("custom keyword definition is invalid: "+this.errorsText(Q.errors));else return!1}});var YW=p((g5,C6)=>{C6.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var EW=p((_5,$W)=>{var lW=uQ(),Tf=l0(),Z6=mQ(),GW=Qh(),T6=Yh(),x6=hP(),u6=dP(),qW=tP(),zW=Zf();$W.exports=Mv;Mv.prototype.validate=m6;Mv.prototype.compile=n6;Mv.prototype.addSchema=c6;Mv.prototype.addMetaSchema=p6;Mv.prototype.validateSchema=i6;Mv.prototype.getSchema=o6;Mv.prototype.removeSchema=t6;Mv.prototype.addFormat=Jw;Mv.prototype.errorsText=Ww;Mv.prototype._addSchema=e6;Mv.prototype._compile=vw;Mv.prototype.compileAsync=fW();var M0=XW();Mv.prototype.addKeyword=M0.add;Mv.prototype.getKeyword=M0.get;Mv.prototype.removeKeyword=M0.remove;Mv.prototype.validateKeyword=M0.validate;var DW=G0();Mv.ValidationError=DW.Validation;Mv.MissingRefError=DW.MissingRef;Mv.$dataMetaSchema=qW;var E0="http://json-schema.org/draft-07/schema",BW=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],a6=["/properties"];function Mv(f){if(!(this instanceof Mv))return new Mv(f);if(f=this._opts=zW.copy(f)||{},Gw(this),this._schemas={},this._refs={},this._fragments={},this._formats=x6(f.format),this._cache=f.cache||new Z6,this._loadingSchemas={},this._compilations=[],this.RULES=u6(),this._getId=fw(f),f.loopRequired=f.loopRequired||1/0,f.errorDataPath=="property")f._errorDataPathProperty=!0;if(f.serialize===void 0)f.serialize=T6;if(this._metaOpts=lw(this),f.formats)Yw(this);if(f.keywords)Bw(this);if(ww(this),typeof f.meta=="object")this.addMetaSchema(f.meta);if(f.nullable)this.addKeyword("nullable",{metaSchema:{type:"boolean"}});Xw(this)}function m6(f,v){var Q;if(typeof f=="string"){if(Q=this.getSchema(f),!Q)throw Error('no schema with key or ref "'+f+'"')}else{var P=this._addSchema(f);Q=P.validate||this._compile(P)}var h=Q(v);if(Q.$async!==!0)this.errors=Q.errors;return h}function n6(f,v){var Q=this._addSchema(f,void 0,v);return Q.validate||this._compile(Q)}function c6(f,v,Q,P){if(Array.isArray(f)){for(var h=0;h<f.length;h++)this.addSchema(f[h],void 0,Q,P);return this}var W=this._getId(f);if(W!==void 0&&typeof W!="string")throw Error("schema id must be string");return v=Tf.normalizeId(v||W),KW(this,v),this._schemas[v]=this._addSchema(f,Q,P,!0),this}function p6(f,v,Q){return this.addSchema(f,v,Q,!0),this}function i6(f,v){var Q=f.$schema;if(Q!==void 0&&typeof Q!="string")throw Error("$schema must be a string");if(Q=Q||this._opts.defaultMeta||d6(this),!Q)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var P=this.validate(Q,f);if(!P&&v){var h="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(h);else throw Error(h)}return P}function d6(f){var v=f._opts.meta;return f._opts.defaultMeta=typeof v=="object"?f._getId(v)||v:f.getSchema(E0)?E0:void 0,f._opts.defaultMeta}function o6(f){var v=HW(this,f);switch(typeof v){case"object":return v.validate||this._compile(v);case"string":return this.getSchema(v);case"undefined":return s6(this,f)}}function s6(f,v){var Q=Tf.schema.call(f,{schema:{}},v);if(Q){var{schema:P,root:h,baseId:W}=Q,J=lW.call(f,P,h,void 0,W);return f._fragments[v]=new GW({ref:v,fragment:!0,schema:P,root:h,baseId:W,validate:J}),J}}function HW(f,v){return v=Tf.normalizeId(v),f._schemas[v]||f._refs[v]||f._fragments[v]}function t6(f){if(f instanceof RegExp)return $0(this,this._schemas,f),$0(this,this._refs,f),this;switch(typeof f){case"undefined":return $0(this,this._schemas),$0(this,this._refs),this._cache.clear(),this;case"string":var v=HW(this,f);if(v)this._cache.del(v.cacheKey);return delete this._schemas[f],delete this._refs[f],this;case"object":var Q=this._opts.serialize,P=Q?Q(f):f;this._cache.del(P);var h=this._getId(f);if(h)h=Tf.normalizeId(h),delete this._schemas[h],delete this._refs[h]}return this}function $0(f,v,Q){for(var P in v){var h=v[P];if(!h.meta&&(!Q||Q.test(P)))f._cache.del(h.cacheKey),delete v[P]}}function e6(f,v,Q,P){if(typeof f!="object"&&typeof f!="boolean")throw Error("schema should be object or boolean");var h=this._opts.serialize,W=h?h(f):f,J=this._cache.get(W);if(J)return J;P=P||this._opts.addUsedSchema!==!1;var X=Tf.normalizeId(this._getId(f));if(X&&P)KW(this,X);var Y=this._opts.validateSchema!==!1&&!v,G;if(Y&&!(G=X&&X==Tf.normalizeId(f.$schema)))this.validateSchema(f,!0);var z=Tf.ids.call(this,f),K=new GW({id:X,schema:f,localRefs:z,cacheKey:W,meta:Q});if(X[0]!="#"&&P)this._refs[X]=K;if(this._cache.put(W,K),Y&&G)this.validateSchema(f,!0);return K}function vw(f,v){if(f.compiling){if(f.validate=h,h.schema=f.schema,h.errors=null,h.root=v?v:h,f.schema.$async===!0)h.$async=!0;return h}f.compiling=!0;var Q;if(f.meta)Q=this._opts,this._opts=this._metaOpts;var P;try{P=lW.call(this,f.schema,v,f.localRefs)}catch(W){throw delete f.validate,W}finally{if(f.compiling=!1,f.meta)this._opts=Q}return f.validate=P,f.refs=P.refs,f.refVal=P.refVal,f.root=P.root,P;function h(){var W=f.validate,J=W.apply(this,arguments);return h.errors=W.errors,J}}function fw(f){switch(f.schemaId){case"auto":return Pw;case"id":return hw;default:return Qw}}function hw(f){if(f.$id)this.logger.warn("schema $id ignored",f.$id);return f.id}function Qw(f){if(f.id)this.logger.warn("schema id ignored",f.id);return f.$id}function Pw(f){if(f.$id&&f.id&&f.$id!=f.id)throw Error("schema $id is different from id");return f.$id||f.id}function Ww(f,v){if(f=f||this.errors,!f)return"No errors";v=v||{};var Q=v.separator===void 0?", ":v.separator,P=v.dataVar===void 0?"data":v.dataVar,h="";for(var W=0;W<f.length;W++){var J=f[W];if(J)h+=P+J.dataPath+" "+J.message+Q}return h.slice(0,-Q.length)}function Jw(f,v){if(typeof v=="string")v=new RegExp(v);return this._formats[f]=v,this}function ww(f){var v;if(f._opts.$data)v=YW(),f.addMetaSchema(v,v.$id,!0);if(f._opts.meta===!1)return;var Q=Kh();if(f._opts.$data)Q=qW(Q,a6);f.addMetaSchema(Q,E0,!0),f._refs["http://json-schema.org/schema"]=E0}function Xw(f){var v=f._opts.schemas;if(!v)return;if(Array.isArray(v))f.addSchema(v);else for(var Q in v)f.addSchema(v[Q],Q)}function Yw(f){for(var v in f._opts.formats){var Q=f._opts.formats[v];f.addFormat(v,Q)}}function Bw(f){for(var v in f._opts.keywords){var Q=f._opts.keywords[v];f.addKeyword(v,Q)}}function KW(f,v){if(f._schemas[v]||f._refs[v])throw Error('schema with key or id "'+v+'" already exists')}function lw(f){var v=zW.copy(f._opts);for(var Q=0;Q<BW.length;Q++)delete v[BW[Q]];return v}function Gw(f){var v=f._opts.logger;if(v===!1)f.logger={log:Eh,warn:Eh,error:Eh};else{if(v===void 0)v=console;if(!(typeof v=="object"&&v.log&&v.warn&&v.error))throw Error("logger must implement log, warn and error methods");f.logger=v}}function Eh(){}});var w={};m8(w,{void:()=>K8,util:()=>e,unknown:()=>D8,union:()=>O8,undefined:()=>G8,tuple:()=>U8,transformer:()=>y8,symbol:()=>l8,string:()=>sh,strictObject:()=>M8,setErrorMap:()=>r9,set:()=>A8,record:()=>N8,quotelessJson:()=>y9,promise:()=>_8,preprocess:()=>I8,pipeline:()=>C8,ostring:()=>Z8,optional:()=>k8,onumber:()=>T8,oboolean:()=>x8,objectUtil:()=>y0,object:()=>E8,number:()=>th,nullable:()=>r8,null:()=>q8,never:()=>H8,nativeEnum:()=>g8,nan:()=>X8,map:()=>F8,makeIssue:()=>E1,literal:()=>S8,lazy:()=>b8,late:()=>J8,isValid:()=>Ef,isDirty:()=>C1,isAsync:()=>tf,isAborted:()=>I1,intersection:()=>V8,instanceof:()=>w8,getParsedType:()=>Wf,getErrorMap:()=>sf,function:()=>j8,enum:()=>R8,effect:()=>y8,discriminatedUnion:()=>L8,defaultErrorMap:()=>zf,datetimeRegex:()=>ih,date:()=>B8,custom:()=>oh,coerce:()=>u8,boolean:()=>eh,bigint:()=>Y8,array:()=>$8,any:()=>z8,addIssueToContext:()=>k,ZodVoid:()=>O1,ZodUnknown:()=>Mf,ZodUnion:()=>P1,ZodUndefined:()=>h1,ZodType:()=>o,ZodTuple:()=>wf,ZodTransformer:()=>ev,ZodSymbol:()=>M1,ZodString:()=>dv,ZodSet:()=>If,ZodSchema:()=>o,ZodRecord:()=>L1,ZodReadonly:()=>l1,ZodPromise:()=>Cf,ZodPipeline:()=>N1,ZodParsedType:()=>_,ZodOptional:()=>sv,ZodObject:()=>Kv,ZodNumber:()=>Of,ZodNullable:()=>Hf,ZodNull:()=>Q1,ZodNever:()=>Jf,ZodNativeEnum:()=>X1,ZodNaN:()=>U1,ZodMap:()=>V1,ZodLiteral:()=>w1,ZodLazy:()=>J1,ZodIssueCode:()=>A,ZodIntersection:()=>W1,ZodFunction:()=>v1,ZodFirstPartyTypeKind:()=>j,ZodError:()=>rv,ZodEnum:()=>Vf,ZodEffects:()=>ev,ZodDiscriminatedUnion:()=>Z1,ZodDefault:()=>Y1,ZodDate:()=>kf,ZodCatch:()=>B1,ZodBranded:()=>T1,ZodBoolean:()=>f1,ZodBigInt:()=>Lf,ZodArray:()=>ov,ZodAny:()=>rf,Schema:()=>o,ParseStatus:()=>Av,OK:()=>Sv,NEVER:()=>a8,INVALID:()=>n,EMPTY_PATH:()=>I9,DIRTY:()=>yf,BRAND:()=>W8});var e;(function(f){f.assertEqual=(h)=>{};function v(h){}f.assertIs=v;function Q(h){throw Error()}f.assertNever=Q,f.arrayToEnum=(h)=>{let W={};for(let J of h)W[J]=J;return W},f.getValidEnumValues=(h)=>{let W=f.objectKeys(h).filter((X)=>typeof h[h[X]]!=="number"),J={};for(let X of W)J[X]=h[X];return f.objectValues(J)},f.objectValues=(h)=>{return f.objectKeys(h).map(function(W){return h[W]})},f.objectKeys=typeof Object.keys==="function"?(h)=>Object.keys(h):(h)=>{let W=[];for(let J in h)if(Object.prototype.hasOwnProperty.call(h,J))W.push(J);return W},f.find=(h,W)=>{for(let J of h)if(W(J))return J;return},f.isInteger=typeof Number.isInteger==="function"?(h)=>Number.isInteger(h):(h)=>typeof h==="number"&&Number.isFinite(h)&&Math.floor(h)===h;function P(h,W=" | "){return h.map((J)=>typeof J==="string"?`'${J}'`:J).join(W)}f.joinValues=P,f.jsonStringifyReplacer=(h,W)=>{if(typeof W==="bigint")return W.toString();return W}})(e||(e={}));var y0;(function(f){f.mergeShapes=(v,Q)=>{return{...v,...Q}}})(y0||(y0={}));var _=e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wf=(f)=>{switch(typeof f){case"undefined":return _.undefined;case"string":return _.string;case"number":return Number.isNaN(f)?_.nan:_.number;case"boolean":return _.boolean;case"function":return _.function;case"bigint":return _.bigint;case"symbol":return _.symbol;case"object":if(Array.isArray(f))return _.array;if(f===null)return _.null;if(f.then&&typeof f.then==="function"&&f.catch&&typeof f.catch==="function")return _.promise;if(typeof Map<"u"&&f instanceof Map)return _.map;if(typeof Set<"u"&&f instanceof Set)return _.set;if(typeof Date<"u"&&f instanceof Date)return _.date;return _.object;default:return _.unknown}};var A=e.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),y9=(f)=>{return JSON.stringify(f,null,2).replace(/"([^"]+)":/g,"$1:")};class rv extends Error{get errors(){return this.issues}constructor(f){super();this.issues=[],this.addIssue=(Q)=>{this.issues=[...this.issues,Q]},this.addIssues=(Q=[])=>{this.issues=[...this.issues,...Q]};let v=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,v);else this.__proto__=v;this.name="ZodError",this.issues=f}format(f){let v=f||function(h){return h.message},Q={_errors:[]},P=(h)=>{for(let W of h.issues)if(W.code==="invalid_union")W.unionErrors.map(P);else if(W.code==="invalid_return_type")P(W.returnTypeError);else if(W.code==="invalid_arguments")P(W.argumentsError);else if(W.path.length===0)Q._errors.push(v(W));else{let J=Q,X=0;while(X<W.path.length){let Y=W.path[X];if(X!==W.path.length-1)J[Y]=J[Y]||{_errors:[]};else J[Y]=J[Y]||{_errors:[]},J[Y]._errors.push(v(W));J=J[Y],X++}}};return P(this),Q}static assert(f){if(!(f instanceof rv))throw Error(`Not a ZodError: ${f}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,e.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(f=(v)=>v.message){let v={},Q=[];for(let P of this.issues)if(P.path.length>0){let h=P.path[0];v[h]=v[h]||[],v[h].push(f(P))}else Q.push(f(P));return{formErrors:Q,fieldErrors:v}}get formErrors(){return this.flatten()}}rv.create=(f)=>{return new rv(f)};var k9=(f,v)=>{let Q;switch(f.code){case A.invalid_type:if(f.received===_.undefined)Q="Required";else Q=`Expected ${f.expected}, received ${f.received}`;break;case A.invalid_literal:Q=`Invalid literal value, expected ${JSON.stringify(f.expected,e.jsonStringifyReplacer)}`;break;case A.unrecognized_keys:Q=`Unrecognized key(s) in object: ${e.joinValues(f.keys,", ")}`;break;case A.invalid_union:Q="Invalid input";break;case A.invalid_union_discriminator:Q=`Invalid discriminator value. Expected ${e.joinValues(f.options)}`;break;case A.invalid_enum_value:Q=`Invalid enum value. Expected ${e.joinValues(f.options)}, received '${f.received}'`;break;case A.invalid_arguments:Q="Invalid function arguments";break;case A.invalid_return_type:Q="Invalid function return type";break;case A.invalid_date:Q="Invalid date";break;case A.invalid_string:if(typeof f.validation==="object")if("includes"in f.validation){if(Q=`Invalid input: must include "${f.validation.includes}"`,typeof f.validation.position==="number")Q=`${Q} at one or more positions greater than or equal to ${f.validation.position}`}else if("startsWith"in f.validation)Q=`Invalid input: must start with "${f.validation.startsWith}"`;else if("endsWith"in f.validation)Q=`Invalid input: must end with "${f.validation.endsWith}"`;else e.assertNever(f.validation);else if(f.validation!=="regex")Q=`Invalid ${f.validation}`;else Q="Invalid";break;case A.too_small:if(f.type==="array")Q=`Array must contain ${f.exact?"exactly":f.inclusive?"at least":"more than"} ${f.minimum} element(s)`;else if(f.type==="string")Q=`String must contain ${f.exact?"exactly":f.inclusive?"at least":"over"} ${f.minimum} character(s)`;else if(f.type==="number")Q=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="bigint")Q=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="date")Q=`Date must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(f.minimum))}`;else Q="Invalid input";break;case A.too_big:if(f.type==="array")Q=`Array must contain ${f.exact?"exactly":f.inclusive?"at most":"less than"} ${f.maximum} element(s)`;else if(f.type==="string")Q=`String must contain ${f.exact?"exactly":f.inclusive?"at most":"under"} ${f.maximum} character(s)`;else if(f.type==="number")Q=`Number must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="bigint")Q=`BigInt must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="date")Q=`Date must be ${f.exact?"exactly":f.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(f.maximum))}`;else Q="Invalid input";break;case A.custom:Q="Invalid input";break;case A.invalid_intersection_types:Q="Intersection results could not be merged";break;case A.not_multiple_of:Q=`Number must be a multiple of ${f.multipleOf}`;break;case A.not_finite:Q="Number must be finite";break;default:Q=v.defaultError,e.assertNever(f)}return{message:Q}},zf=k9;var ah=zf;function r9(f){ah=f}function sf(){return ah}var E1=(f)=>{let{data:v,path:Q,errorMaps:P,issueData:h}=f,W=[...Q,...h.path||[]],J={...h,path:W};if(h.message!==void 0)return{...h,path:W,message:h.message};let X="",Y=P.filter((G)=>!!G).slice().reverse();for(let G of Y)X=G(J,{data:v,defaultError:X}).message;return{...h,path:W,message:X}},I9=[];function k(f,v){let Q=sf(),P=E1({issueData:v,data:f.data,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,Q,Q===zf?void 0:zf].filter((h)=>!!h)});f.common.issues.push(P)}class Av{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(f,v){let Q=[];for(let P of v){if(P.status==="aborted")return n;if(P.status==="dirty")f.dirty();Q.push(P.value)}return{status:f.value,value:Q}}static async mergeObjectAsync(f,v){let Q=[];for(let P of v){let h=await P.key,W=await P.value;Q.push({key:h,value:W})}return Av.mergeObjectSync(f,Q)}static mergeObjectSync(f,v){let Q={};for(let P of v){let{key:h,value:W}=P;if(h.status==="aborted")return n;if(W.status==="aborted")return n;if(h.status==="dirty")f.dirty();if(W.status==="dirty")f.dirty();if(h.value!=="__proto__"&&(typeof W.value<"u"||P.alwaysSet))Q[h.value]=W.value}return{status:f.value,value:Q}}}var n=Object.freeze({status:"aborted"}),yf=(f)=>({status:"dirty",value:f}),Sv=(f)=>({status:"valid",value:f}),I1=(f)=>f.status==="aborted",C1=(f)=>f.status==="dirty",Ef=(f)=>f.status==="valid",tf=(f)=>typeof Promise<"u"&&f instanceof Promise;var u;(function(f){f.errToObj=(v)=>typeof v==="string"?{message:v}:v||{},f.toString=(v)=>typeof v==="string"?v:v?.message})(u||(u={}));class tv{constructor(f,v,Q,P){this._cachedPath=[],this.parent=f,this.data=v,this._path=Q,this._key=P}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var mh=(f,v)=>{if(Ef(v))return{success:!0,data:v.value};else{if(!f.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let Q=new rv(f.common.issues);return this._error=Q,this._error}}}};function i(f){if(!f)return{};let{errorMap:v,invalid_type_error:Q,required_error:P,description:h}=f;if(v&&(Q||P))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:h};return{errorMap:(J,X)=>{let{message:Y}=f;if(J.code==="invalid_enum_value")return{message:Y??X.defaultError};if(typeof X.data>"u")return{message:Y??P??X.defaultError};if(J.code!=="invalid_type")return{message:X.defaultError};return{message:Y??Q??X.defaultError}},description:h}}class o{get description(){return this._def.description}_getType(f){return Wf(f.data)}_getOrReturnCtx(f,v){return v||{common:f.parent.common,data:f.data,parsedType:Wf(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}_processInputParams(f){return{status:new Av,ctx:{common:f.parent.common,data:f.data,parsedType:Wf(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}}_parseSync(f){let v=this._parse(f);if(tf(v))throw Error("Synchronous parse encountered promise.");return v}_parseAsync(f){let v=this._parse(f);return Promise.resolve(v)}parse(f,v){let Q=this.safeParse(f,v);if(Q.success)return Q.data;throw Q.error}safeParse(f,v){let Q={common:{issues:[],async:v?.async??!1,contextualErrorMap:v?.errorMap},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:Wf(f)},P=this._parseSync({data:f,path:Q.path,parent:Q});return mh(Q,P)}"~validate"(f){let v={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:Wf(f)};if(!this["~standard"].async)try{let Q=this._parseSync({data:f,path:[],parent:v});return Ef(Q)?{value:Q.value}:{issues:v.common.issues}}catch(Q){if(Q?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;v.common={issues:[],async:!0}}return this._parseAsync({data:f,path:[],parent:v}).then((Q)=>Ef(Q)?{value:Q.value}:{issues:v.common.issues})}async parseAsync(f,v){let Q=await this.safeParseAsync(f,v);if(Q.success)return Q.data;throw Q.error}async safeParseAsync(f,v){let Q={common:{issues:[],contextualErrorMap:v?.errorMap,async:!0},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:Wf(f)},P=this._parse({data:f,path:Q.path,parent:Q}),h=await(tf(P)?P:Promise.resolve(P));return mh(Q,h)}refine(f,v){let Q=(P)=>{if(typeof v==="string"||typeof v>"u")return{message:v};else if(typeof v==="function")return v(P);else return v};return this._refinement((P,h)=>{let W=f(P),J=()=>h.addIssue({code:A.custom,...Q(P)});if(typeof Promise<"u"&&W instanceof Promise)return W.then((X)=>{if(!X)return J(),!1;else return!0});if(!W)return J(),!1;else return!0})}refinement(f,v){return this._refinement((Q,P)=>{if(!f(Q))return P.addIssue(typeof v==="function"?v(Q,P):v),!1;else return!0})}_refinement(f){return new ev({schema:this,typeName:j.ZodEffects,effect:{type:"refinement",refinement:f}})}superRefine(f){return this._refinement(f)}constructor(f){this.spa=this.safeParseAsync,this._def=f,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(v)=>this["~validate"](v)}}optional(){return sv.create(this,this._def)}nullable(){return Hf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ov.create(this)}promise(){return Cf.create(this,this._def)}or(f){return P1.create([this,f],this._def)}and(f){return W1.create(this,f,this._def)}transform(f){return new ev({...i(this._def),schema:this,typeName:j.ZodEffects,effect:{type:"transform",transform:f}})}default(f){let v=typeof f==="function"?f:()=>f;return new Y1({...i(this._def),innerType:this,defaultValue:v,typeName:j.ZodDefault})}brand(){return new T1({typeName:j.ZodBranded,type:this,...i(this._def)})}catch(f){let v=typeof f==="function"?f:()=>f;return new B1({...i(this._def),innerType:this,catchValue:v,typeName:j.ZodCatch})}describe(f){return new this.constructor({...this._def,description:f})}pipe(f){return N1.create(this,f)}readonly(){return l1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var C9=/^c[^\s-]{8,}$/i,Z9=/^[0-9a-z]+$/,T9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,x9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,u9=/^[a-z0-9_-]{21}$/i,a9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,m9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,n9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,c9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",k0,p9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,i9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,d9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,o9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,s9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,t9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ch="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",e9=new RegExp(`^${ch}$`);function ph(f){let v="[0-5]\\d";if(f.precision)v=`${v}\\.\\d{${f.precision}}`;else if(f.precision==null)v=`${v}(\\.\\d+)?`;let Q=f.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${v})${Q}`}function v8(f){return new RegExp(`^${ph(f)}$`)}function ih(f){let v=`${ch}T${ph(f)}`,Q=[];if(Q.push(f.local?"Z?":"Z"),f.offset)Q.push("([+-]\\d{2}:?\\d{2})");return v=`${v}(${Q.join("|")})`,new RegExp(`^${v}$`)}function f8(f,v){if((v==="v4"||!v)&&p9.test(f))return!0;if((v==="v6"||!v)&&d9.test(f))return!0;return!1}function h8(f,v){if(!a9.test(f))return!1;try{let[Q]=f.split(".");if(!Q)return!1;let P=Q.replace(/-/g,"+").replace(/_/g,"/").padEnd(Q.length+(4-Q.length%4)%4,"="),h=JSON.parse(atob(P));if(typeof h!=="object"||h===null)return!1;if("typ"in h&&h?.typ!=="JWT")return!1;if(!h.alg)return!1;if(v&&h.alg!==v)return!1;return!0}catch{return!1}}function Q8(f,v){if((v==="v4"||!v)&&i9.test(f))return!0;if((v==="v6"||!v)&&o9.test(f))return!0;return!1}class dv extends o{_parse(f){if(this._def.coerce)f.data=String(f.data);if(this._getType(f)!==_.string){let h=this._getOrReturnCtx(f);return k(h,{code:A.invalid_type,expected:_.string,received:h.parsedType}),n}let Q=new Av,P=void 0;for(let h of this._def.checks)if(h.kind==="min"){if(f.data.length<h.value)P=this._getOrReturnCtx(f,P),k(P,{code:A.too_small,minimum:h.value,type:"string",inclusive:!0,exact:!1,message:h.message}),Q.dirty()}else if(h.kind==="max"){if(f.data.length>h.value)P=this._getOrReturnCtx(f,P),k(P,{code:A.too_big,maximum:h.value,type:"string",inclusive:!0,exact:!1,message:h.message}),Q.dirty()}else if(h.kind==="length"){let W=f.data.length>h.value,J=f.data.length<h.value;if(W||J){if(P=this._getOrReturnCtx(f,P),W)k(P,{code:A.too_big,maximum:h.value,type:"string",inclusive:!0,exact:!0,message:h.message});else if(J)k(P,{code:A.too_small,minimum:h.value,type:"string",inclusive:!0,exact:!0,message:h.message});Q.dirty()}}else if(h.kind==="email"){if(!n9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"email",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="emoji"){if(!k0)k0=new RegExp(c9,"u");if(!k0.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"emoji",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="uuid"){if(!x9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"uuid",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="nanoid"){if(!u9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"nanoid",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="cuid"){if(!C9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"cuid",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="cuid2"){if(!Z9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"cuid2",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="ulid"){if(!T9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"ulid",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="url")try{new URL(f.data)}catch{P=this._getOrReturnCtx(f,P),k(P,{validation:"url",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="regex"){if(h.regex.lastIndex=0,!h.regex.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"regex",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="trim")f.data=f.data.trim();else if(h.kind==="includes"){if(!f.data.includes(h.value,h.position))P=this._getOrReturnCtx(f,P),k(P,{code:A.invalid_string,validation:{includes:h.value,position:h.position},message:h.message}),Q.dirty()}else if(h.kind==="toLowerCase")f.data=f.data.toLowerCase();else if(h.kind==="toUpperCase")f.data=f.data.toUpperCase();else if(h.kind==="startsWith"){if(!f.data.startsWith(h.value))P=this._getOrReturnCtx(f,P),k(P,{code:A.invalid_string,validation:{startsWith:h.value},message:h.message}),Q.dirty()}else if(h.kind==="endsWith"){if(!f.data.endsWith(h.value))P=this._getOrReturnCtx(f,P),k(P,{code:A.invalid_string,validation:{endsWith:h.value},message:h.message}),Q.dirty()}else if(h.kind==="datetime"){if(!ih(h).test(f.data))P=this._getOrReturnCtx(f,P),k(P,{code:A.invalid_string,validation:"datetime",message:h.message}),Q.dirty()}else if(h.kind==="date"){if(!e9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{code:A.invalid_string,validation:"date",message:h.message}),Q.dirty()}else if(h.kind==="time"){if(!v8(h).test(f.data))P=this._getOrReturnCtx(f,P),k(P,{code:A.invalid_string,validation:"time",message:h.message}),Q.dirty()}else if(h.kind==="duration"){if(!m9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"duration",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="ip"){if(!f8(f.data,h.version))P=this._getOrReturnCtx(f,P),k(P,{validation:"ip",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="jwt"){if(!h8(f.data,h.alg))P=this._getOrReturnCtx(f,P),k(P,{validation:"jwt",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="cidr"){if(!Q8(f.data,h.version))P=this._getOrReturnCtx(f,P),k(P,{validation:"cidr",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="base64"){if(!s9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"base64",code:A.invalid_string,message:h.message}),Q.dirty()}else if(h.kind==="base64url"){if(!t9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"base64url",code:A.invalid_string,message:h.message}),Q.dirty()}else e.assertNever(h);return{status:Q.value,value:f.data}}_regex(f,v,Q){return this.refinement((P)=>f.test(P),{validation:v,code:A.invalid_string,...u.errToObj(Q)})}_addCheck(f){return new dv({...this._def,checks:[...this._def.checks,f]})}email(f){return this._addCheck({kind:"email",...u.errToObj(f)})}url(f){return this._addCheck({kind:"url",...u.errToObj(f)})}emoji(f){return this._addCheck({kind:"emoji",...u.errToObj(f)})}uuid(f){return this._addCheck({kind:"uuid",...u.errToObj(f)})}nanoid(f){return this._addCheck({kind:"nanoid",...u.errToObj(f)})}cuid(f){return this._addCheck({kind:"cuid",...u.errToObj(f)})}cuid2(f){return this._addCheck({kind:"cuid2",...u.errToObj(f)})}ulid(f){return this._addCheck({kind:"ulid",...u.errToObj(f)})}base64(f){return this._addCheck({kind:"base64",...u.errToObj(f)})}base64url(f){return this._addCheck({kind:"base64url",...u.errToObj(f)})}jwt(f){return this._addCheck({kind:"jwt",...u.errToObj(f)})}ip(f){return this._addCheck({kind:"ip",...u.errToObj(f)})}cidr(f){return this._addCheck({kind:"cidr",...u.errToObj(f)})}datetime(f){if(typeof f==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:f});return this._addCheck({kind:"datetime",precision:typeof f?.precision>"u"?null:f?.precision,offset:f?.offset??!1,local:f?.local??!1,...u.errToObj(f?.message)})}date(f){return this._addCheck({kind:"date",message:f})}time(f){if(typeof f==="string")return this._addCheck({kind:"time",precision:null,message:f});return this._addCheck({kind:"time",precision:typeof f?.precision>"u"?null:f?.precision,...u.errToObj(f?.message)})}duration(f){return this._addCheck({kind:"duration",...u.errToObj(f)})}regex(f,v){return this._addCheck({kind:"regex",regex:f,...u.errToObj(v)})}includes(f,v){return this._addCheck({kind:"includes",value:f,position:v?.position,...u.errToObj(v?.message)})}startsWith(f,v){return this._addCheck({kind:"startsWith",value:f,...u.errToObj(v)})}endsWith(f,v){return this._addCheck({kind:"endsWith",value:f,...u.errToObj(v)})}min(f,v){return this._addCheck({kind:"min",value:f,...u.errToObj(v)})}max(f,v){return this._addCheck({kind:"max",value:f,...u.errToObj(v)})}length(f,v){return this._addCheck({kind:"length",value:f,...u.errToObj(v)})}nonempty(f){return this.min(1,u.errToObj(f))}trim(){return new dv({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new dv({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new dv({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((f)=>f.kind==="datetime")}get isDate(){return!!this._def.checks.find((f)=>f.kind==="date")}get isTime(){return!!this._def.checks.find((f)=>f.kind==="time")}get isDuration(){return!!this._def.checks.find((f)=>f.kind==="duration")}get isEmail(){return!!this._def.checks.find((f)=>f.kind==="email")}get isURL(){return!!this._def.checks.find((f)=>f.kind==="url")}get isEmoji(){return!!this._def.checks.find((f)=>f.kind==="emoji")}get isUUID(){return!!this._def.checks.find((f)=>f.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((f)=>f.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((f)=>f.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((f)=>f.kind==="cuid2")}get isULID(){return!!this._def.checks.find((f)=>f.kind==="ulid")}get isIP(){return!!this._def.checks.find((f)=>f.kind==="ip")}get isCIDR(){return!!this._def.checks.find((f)=>f.kind==="cidr")}get isBase64(){return!!this._def.checks.find((f)=>f.kind==="base64")}get isBase64url(){return!!this._def.checks.find((f)=>f.kind==="base64url")}get minLength(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxLength(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}dv.create=(f)=>{return new dv({checks:[],typeName:j.ZodString,coerce:f?.coerce??!1,...i(f)})};function P8(f,v){let Q=(f.toString().split(".")[1]||"").length,P=(v.toString().split(".")[1]||"").length,h=Q>P?Q:P,W=Number.parseInt(f.toFixed(h).replace(".","")),J=Number.parseInt(v.toFixed(h).replace(".",""));return W%J/10**h}class Of extends o{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(f){if(this._def.coerce)f.data=Number(f.data);if(this._getType(f)!==_.number){let h=this._getOrReturnCtx(f);return k(h,{code:A.invalid_type,expected:_.number,received:h.parsedType}),n}let Q=void 0,P=new Av;for(let h of this._def.checks)if(h.kind==="int"){if(!e.isInteger(f.data))Q=this._getOrReturnCtx(f,Q),k(Q,{code:A.invalid_type,expected:"integer",received:"float",message:h.message}),P.dirty()}else if(h.kind==="min"){if(h.inclusive?f.data<h.value:f.data<=h.value)Q=this._getOrReturnCtx(f,Q),k(Q,{code:A.too_small,minimum:h.value,type:"number",inclusive:h.inclusive,exact:!1,message:h.message}),P.dirty()}else if(h.kind==="max"){if(h.inclusive?f.data>h.value:f.data>=h.value)Q=this._getOrReturnCtx(f,Q),k(Q,{code:A.too_big,maximum:h.value,type:"number",inclusive:h.inclusive,exact:!1,message:h.message}),P.dirty()}else if(h.kind==="multipleOf"){if(P8(f.data,h.value)!==0)Q=this._getOrReturnCtx(f,Q),k(Q,{code:A.not_multiple_of,multipleOf:h.value,message:h.message}),P.dirty()}else if(h.kind==="finite"){if(!Number.isFinite(f.data))Q=this._getOrReturnCtx(f,Q),k(Q,{code:A.not_finite,message:h.message}),P.dirty()}else e.assertNever(h);return{status:P.value,value:f.data}}gte(f,v){return this.setLimit("min",f,!0,u.toString(v))}gt(f,v){return this.setLimit("min",f,!1,u.toString(v))}lte(f,v){return this.setLimit("max",f,!0,u.toString(v))}lt(f,v){return this.setLimit("max",f,!1,u.toString(v))}setLimit(f,v,Q,P){return new Of({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:Q,message:u.toString(P)}]})}_addCheck(f){return new Of({...this._def,checks:[...this._def.checks,f]})}int(f){return this._addCheck({kind:"int",message:u.toString(f)})}positive(f){return this._addCheck({kind:"min",value:0,inclusive:!1,message:u.toString(f)})}negative(f){return this._addCheck({kind:"max",value:0,inclusive:!1,message:u.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:0,inclusive:!0,message:u.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:0,inclusive:!0,message:u.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:u.toString(v)})}finite(f){return this._addCheck({kind:"finite",message:u.toString(f)})}safe(f){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:u.toString(f)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:u.toString(f)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}get isInt(){return!!this._def.checks.find((f)=>f.kind==="int"||f.kind==="multipleOf"&&e.isInteger(f.value))}get isFinite(){let f=null,v=null;for(let Q of this._def.checks)if(Q.kind==="finite"||Q.kind==="int"||Q.kind==="multipleOf")return!0;else if(Q.kind==="min"){if(v===null||Q.value>v)v=Q.value}else if(Q.kind==="max"){if(f===null||Q.value<f)f=Q.value}return Number.isFinite(v)&&Number.isFinite(f)}}Of.create=(f)=>{return new Of({checks:[],typeName:j.ZodNumber,coerce:f?.coerce||!1,...i(f)})};class Lf extends o{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(f){if(this._def.coerce)try{f.data=BigInt(f.data)}catch{return this._getInvalidInput(f)}if(this._getType(f)!==_.bigint)return this._getInvalidInput(f);let Q=void 0,P=new Av;for(let h of this._def.checks)if(h.kind==="min"){if(h.inclusive?f.data<h.value:f.data<=h.value)Q=this._getOrReturnCtx(f,Q),k(Q,{code:A.too_small,type:"bigint",minimum:h.value,inclusive:h.inclusive,message:h.message}),P.dirty()}else if(h.kind==="max"){if(h.inclusive?f.data>h.value:f.data>=h.value)Q=this._getOrReturnCtx(f,Q),k(Q,{code:A.too_big,type:"bigint",maximum:h.value,inclusive:h.inclusive,message:h.message}),P.dirty()}else if(h.kind==="multipleOf"){if(f.data%h.value!==BigInt(0))Q=this._getOrReturnCtx(f,Q),k(Q,{code:A.not_multiple_of,multipleOf:h.value,message:h.message}),P.dirty()}else e.assertNever(h);return{status:P.value,value:f.data}}_getInvalidInput(f){let v=this._getOrReturnCtx(f);return k(v,{code:A.invalid_type,expected:_.bigint,received:v.parsedType}),n}gte(f,v){return this.setLimit("min",f,!0,u.toString(v))}gt(f,v){return this.setLimit("min",f,!1,u.toString(v))}lte(f,v){return this.setLimit("max",f,!0,u.toString(v))}lt(f,v){return this.setLimit("max",f,!1,u.toString(v))}setLimit(f,v,Q,P){return new Lf({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:Q,message:u.toString(P)}]})}_addCheck(f){return new Lf({...this._def,checks:[...this._def.checks,f]})}positive(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:u.toString(f)})}negative(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:u.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:u.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:u.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:u.toString(v)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}Lf.create=(f)=>{return new Lf({checks:[],typeName:j.ZodBigInt,coerce:f?.coerce??!1,...i(f)})};class f1 extends o{_parse(f){if(this._def.coerce)f.data=Boolean(f.data);if(this._getType(f)!==_.boolean){let Q=this._getOrReturnCtx(f);return k(Q,{code:A.invalid_type,expected:_.boolean,received:Q.parsedType}),n}return Sv(f.data)}}f1.create=(f)=>{return new f1({typeName:j.ZodBoolean,coerce:f?.coerce||!1,...i(f)})};class kf extends o{_parse(f){if(this._def.coerce)f.data=new Date(f.data);if(this._getType(f)!==_.date){let h=this._getOrReturnCtx(f);return k(h,{code:A.invalid_type,expected:_.date,received:h.parsedType}),n}if(Number.isNaN(f.data.getTime())){let h=this._getOrReturnCtx(f);return k(h,{code:A.invalid_date}),n}let Q=new Av,P=void 0;for(let h of this._def.checks)if(h.kind==="min"){if(f.data.getTime()<h.value)P=this._getOrReturnCtx(f,P),k(P,{code:A.too_small,message:h.message,inclusive:!0,exact:!1,minimum:h.value,type:"date"}),Q.dirty()}else if(h.kind==="max"){if(f.data.getTime()>h.value)P=this._getOrReturnCtx(f,P),k(P,{code:A.too_big,message:h.message,inclusive:!0,exact:!1,maximum:h.value,type:"date"}),Q.dirty()}else e.assertNever(h);return{status:Q.value,value:new Date(f.data.getTime())}}_addCheck(f){return new kf({...this._def,checks:[...this._def.checks,f]})}min(f,v){return this._addCheck({kind:"min",value:f.getTime(),message:u.toString(v)})}max(f,v){return this._addCheck({kind:"max",value:f.getTime(),message:u.toString(v)})}get minDate(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f!=null?new Date(f):null}get maxDate(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f!=null?new Date(f):null}}kf.create=(f)=>{return new kf({checks:[],coerce:f?.coerce||!1,typeName:j.ZodDate,...i(f)})};class M1 extends o{_parse(f){if(this._getType(f)!==_.symbol){let Q=this._getOrReturnCtx(f);return k(Q,{code:A.invalid_type,expected:_.symbol,received:Q.parsedType}),n}return Sv(f.data)}}M1.create=(f)=>{return new M1({typeName:j.ZodSymbol,...i(f)})};class h1 extends o{_parse(f){if(this._getType(f)!==_.undefined){let Q=this._getOrReturnCtx(f);return k(Q,{code:A.invalid_type,expected:_.undefined,received:Q.parsedType}),n}return Sv(f.data)}}h1.create=(f)=>{return new h1({typeName:j.ZodUndefined,...i(f)})};class Q1 extends o{_parse(f){if(this._getType(f)!==_.null){let Q=this._getOrReturnCtx(f);return k(Q,{code:A.invalid_type,expected:_.null,received:Q.parsedType}),n}return Sv(f.data)}}Q1.create=(f)=>{return new Q1({typeName:j.ZodNull,...i(f)})};class rf extends o{constructor(){super(...arguments);this._any=!0}_parse(f){return Sv(f.data)}}rf.create=(f)=>{return new rf({typeName:j.ZodAny,...i(f)})};class Mf extends o{constructor(){super(...arguments);this._unknown=!0}_parse(f){return Sv(f.data)}}Mf.create=(f)=>{return new Mf({typeName:j.ZodUnknown,...i(f)})};class Jf extends o{_parse(f){let v=this._getOrReturnCtx(f);return k(v,{code:A.invalid_type,expected:_.never,received:v.parsedType}),n}}Jf.create=(f)=>{return new Jf({typeName:j.ZodNever,...i(f)})};class O1 extends o{_parse(f){if(this._getType(f)!==_.undefined){let Q=this._getOrReturnCtx(f);return k(Q,{code:A.invalid_type,expected:_.void,received:Q.parsedType}),n}return Sv(f.data)}}O1.create=(f)=>{return new O1({typeName:j.ZodVoid,...i(f)})};class ov extends o{_parse(f){let{ctx:v,status:Q}=this._processInputParams(f),P=this._def;if(v.parsedType!==_.array)return k(v,{code:A.invalid_type,expected:_.array,received:v.parsedType}),n;if(P.exactLength!==null){let W=v.data.length>P.exactLength.value,J=v.data.length<P.exactLength.value;if(W||J)k(v,{code:W?A.too_big:A.too_small,minimum:J?P.exactLength.value:void 0,maximum:W?P.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:P.exactLength.message}),Q.dirty()}if(P.minLength!==null){if(v.data.length<P.minLength.value)k(v,{code:A.too_small,minimum:P.minLength.value,type:"array",inclusive:!0,exact:!1,message:P.minLength.message}),Q.dirty()}if(P.maxLength!==null){if(v.data.length>P.maxLength.value)k(v,{code:A.too_big,maximum:P.maxLength.value,type:"array",inclusive:!0,exact:!1,message:P.maxLength.message}),Q.dirty()}if(v.common.async)return Promise.all([...v.data].map((W,J)=>{return P.type._parseAsync(new tv(v,W,v.path,J))})).then((W)=>{return Av.mergeArray(Q,W)});let h=[...v.data].map((W,J)=>{return P.type._parseSync(new tv(v,W,v.path,J))});return Av.mergeArray(Q,h)}get element(){return this._def.type}min(f,v){return new ov({...this._def,minLength:{value:f,message:u.toString(v)}})}max(f,v){return new ov({...this._def,maxLength:{value:f,message:u.toString(v)}})}length(f,v){return new ov({...this._def,exactLength:{value:f,message:u.toString(v)}})}nonempty(f){return this.min(1,f)}}ov.create=(f,v)=>{return new ov({type:f,minLength:null,maxLength:null,exactLength:null,typeName:j.ZodArray,...i(v)})};function ef(f){if(f instanceof Kv){let v={};for(let Q in f.shape){let P=f.shape[Q];v[Q]=sv.create(ef(P))}return new Kv({...f._def,shape:()=>v})}else if(f instanceof ov)return new ov({...f._def,type:ef(f.element)});else if(f instanceof sv)return sv.create(ef(f.unwrap()));else if(f instanceof Hf)return Hf.create(ef(f.unwrap()));else if(f instanceof wf)return wf.create(f.items.map((v)=>ef(v)));else return f}class Kv extends o{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let f=this._def.shape(),v=e.objectKeys(f);return this._cached={shape:f,keys:v},this._cached}_parse(f){if(this._getType(f)!==_.object){let Y=this._getOrReturnCtx(f);return k(Y,{code:A.invalid_type,expected:_.object,received:Y.parsedType}),n}let{status:Q,ctx:P}=this._processInputParams(f),{shape:h,keys:W}=this._getCached(),J=[];if(!(this._def.catchall instanceof Jf&&this._def.unknownKeys==="strip")){for(let Y in P.data)if(!W.includes(Y))J.push(Y)}let X=[];for(let Y of W){let G=h[Y],z=P.data[Y];X.push({key:{status:"valid",value:Y},value:G._parse(new tv(P,z,P.path,Y)),alwaysSet:Y in P.data})}if(this._def.catchall instanceof Jf){let Y=this._def.unknownKeys;if(Y==="passthrough")for(let G of J)X.push({key:{status:"valid",value:G},value:{status:"valid",value:P.data[G]}});else if(Y==="strict"){if(J.length>0)k(P,{code:A.unrecognized_keys,keys:J}),Q.dirty()}else if(Y==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let Y=this._def.catchall;for(let G of J){let z=P.data[G];X.push({key:{status:"valid",value:G},value:Y._parse(new tv(P,z,P.path,G)),alwaysSet:G in P.data})}}if(P.common.async)return Promise.resolve().then(async()=>{let Y=[];for(let G of X){let z=await G.key,K=await G.value;Y.push({key:z,value:K,alwaysSet:G.alwaysSet})}return Y}).then((Y)=>{return Av.mergeObjectSync(Q,Y)});else return Av.mergeObjectSync(Q,X)}get shape(){return this._def.shape()}strict(f){return u.errToObj,new Kv({...this._def,unknownKeys:"strict",...f!==void 0?{errorMap:(v,Q)=>{let P=this._def.errorMap?.(v,Q).message??Q.defaultError;if(v.code==="unrecognized_keys")return{message:u.errToObj(f).message??P};return{message:P}}}:{}})}strip(){return new Kv({...this._def,unknownKeys:"strip"})}passthrough(){return new Kv({...this._def,unknownKeys:"passthrough"})}extend(f){return new Kv({...this._def,shape:()=>({...this._def.shape(),...f})})}merge(f){return new Kv({unknownKeys:f._def.unknownKeys,catchall:f._def.catchall,shape:()=>({...this._def.shape(),...f._def.shape()}),typeName:j.ZodObject})}setKey(f,v){return this.augment({[f]:v})}catchall(f){return new Kv({...this._def,catchall:f})}pick(f){let v={};for(let Q of e.objectKeys(f))if(f[Q]&&this.shape[Q])v[Q]=this.shape[Q];return new Kv({...this._def,shape:()=>v})}omit(f){let v={};for(let Q of e.objectKeys(this.shape))if(!f[Q])v[Q]=this.shape[Q];return new Kv({...this._def,shape:()=>v})}deepPartial(){return ef(this)}partial(f){let v={};for(let Q of e.objectKeys(this.shape)){let P=this.shape[Q];if(f&&!f[Q])v[Q]=P;else v[Q]=P.optional()}return new Kv({...this._def,shape:()=>v})}required(f){let v={};for(let Q of e.objectKeys(this.shape))if(f&&!f[Q])v[Q]=this.shape[Q];else{let h=this.shape[Q];while(h instanceof sv)h=h._def.innerType;v[Q]=h}return new Kv({...this._def,shape:()=>v})}keyof(){return dh(e.objectKeys(this.shape))}}Kv.create=(f,v)=>{return new Kv({shape:()=>f,unknownKeys:"strip",catchall:Jf.create(),typeName:j.ZodObject,...i(v)})};Kv.strictCreate=(f,v)=>{return new Kv({shape:()=>f,unknownKeys:"strict",catchall:Jf.create(),typeName:j.ZodObject,...i(v)})};Kv.lazycreate=(f,v)=>{return new Kv({shape:f,unknownKeys:"strip",catchall:Jf.create(),typeName:j.ZodObject,...i(v)})};class P1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f),Q=this._def.options;function P(h){for(let J of h)if(J.result.status==="valid")return J.result;for(let J of h)if(J.result.status==="dirty")return v.common.issues.push(...J.ctx.common.issues),J.result;let W=h.map((J)=>new rv(J.ctx.common.issues));return k(v,{code:A.invalid_union,unionErrors:W}),n}if(v.common.async)return Promise.all(Q.map(async(h)=>{let W={...v,common:{...v.common,issues:[]},parent:null};return{result:await h._parseAsync({data:v.data,path:v.path,parent:W}),ctx:W}})).then(P);else{let h=void 0,W=[];for(let X of Q){let Y={...v,common:{...v.common,issues:[]},parent:null},G=X._parseSync({data:v.data,path:v.path,parent:Y});if(G.status==="valid")return G;else if(G.status==="dirty"&&!h)h={result:G,ctx:Y};if(Y.common.issues.length)W.push(Y.common.issues)}if(h)return v.common.issues.push(...h.ctx.common.issues),h.result;let J=W.map((X)=>new rv(X));return k(v,{code:A.invalid_union,unionErrors:J}),n}}get options(){return this._def.options}}P1.create=(f,v)=>{return new P1({options:f,typeName:j.ZodUnion,...i(v)})};var Df=(f)=>{if(f instanceof J1)return Df(f.schema);else if(f instanceof ev)return Df(f.innerType());else if(f instanceof w1)return[f.value];else if(f instanceof Vf)return f.options;else if(f instanceof X1)return e.objectValues(f.enum);else if(f instanceof Y1)return Df(f._def.innerType);else if(f instanceof h1)return[void 0];else if(f instanceof Q1)return[null];else if(f instanceof sv)return[void 0,...Df(f.unwrap())];else if(f instanceof Hf)return[null,...Df(f.unwrap())];else if(f instanceof T1)return Df(f.unwrap());else if(f instanceof l1)return Df(f.unwrap());else if(f instanceof B1)return Df(f._def.innerType);else return[]};class Z1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==_.object)return k(v,{code:A.invalid_type,expected:_.object,received:v.parsedType}),n;let Q=this.discriminator,P=v.data[Q],h=this.optionsMap.get(P);if(!h)return k(v,{code:A.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[Q]}),n;if(v.common.async)return h._parseAsync({data:v.data,path:v.path,parent:v});else return h._parseSync({data:v.data,path:v.path,parent:v})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(f,v,Q){let P=new Map;for(let h of v){let W=Df(h.shape[f]);if(!W.length)throw Error(`A discriminator value for key \`${f}\` could not be extracted from all schema options`);for(let J of W){if(P.has(J))throw Error(`Discriminator property ${String(f)} has duplicate value ${String(J)}`);P.set(J,h)}}return new Z1({typeName:j.ZodDiscriminatedUnion,discriminator:f,options:v,optionsMap:P,...i(Q)})}}function r0(f,v){let Q=Wf(f),P=Wf(v);if(f===v)return{valid:!0,data:f};else if(Q===_.object&&P===_.object){let h=e.objectKeys(v),W=e.objectKeys(f).filter((X)=>h.indexOf(X)!==-1),J={...f,...v};for(let X of W){let Y=r0(f[X],v[X]);if(!Y.valid)return{valid:!1};J[X]=Y.data}return{valid:!0,data:J}}else if(Q===_.array&&P===_.array){if(f.length!==v.length)return{valid:!1};let h=[];for(let W=0;W<f.length;W++){let J=f[W],X=v[W],Y=r0(J,X);if(!Y.valid)return{valid:!1};h.push(Y.data)}return{valid:!0,data:h}}else if(Q===_.date&&P===_.date&&+f===+v)return{valid:!0,data:f};else return{valid:!1}}class W1 extends o{_parse(f){let{status:v,ctx:Q}=this._processInputParams(f),P=(h,W)=>{if(I1(h)||I1(W))return n;let J=r0(h.value,W.value);if(!J.valid)return k(Q,{code:A.invalid_intersection_types}),n;if(C1(h)||C1(W))v.dirty();return{status:v.value,value:J.data}};if(Q.common.async)return Promise.all([this._def.left._parseAsync({data:Q.data,path:Q.path,parent:Q}),this._def.right._parseAsync({data:Q.data,path:Q.path,parent:Q})]).then(([h,W])=>P(h,W));else return P(this._def.left._parseSync({data:Q.data,path:Q.path,parent:Q}),this._def.right._parseSync({data:Q.data,path:Q.path,parent:Q}))}}W1.create=(f,v,Q)=>{return new W1({left:f,right:v,typeName:j.ZodIntersection,...i(Q)})};class wf extends o{_parse(f){let{status:v,ctx:Q}=this._processInputParams(f);if(Q.parsedType!==_.array)return k(Q,{code:A.invalid_type,expected:_.array,received:Q.parsedType}),n;if(Q.data.length<this._def.items.length)return k(Q,{code:A.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n;if(!this._def.rest&&Q.data.length>this._def.items.length)k(Q,{code:A.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),v.dirty();let h=[...Q.data].map((W,J)=>{let X=this._def.items[J]||this._def.rest;if(!X)return null;return X._parse(new tv(Q,W,Q.path,J))}).filter((W)=>!!W);if(Q.common.async)return Promise.all(h).then((W)=>{return Av.mergeArray(v,W)});else return Av.mergeArray(v,h)}get items(){return this._def.items}rest(f){return new wf({...this._def,rest:f})}}wf.create=(f,v)=>{if(!Array.isArray(f))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new wf({items:f,typeName:j.ZodTuple,rest:null,...i(v)})};class L1 extends o{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:Q}=this._processInputParams(f);if(Q.parsedType!==_.object)return k(Q,{code:A.invalid_type,expected:_.object,received:Q.parsedType}),n;let P=[],h=this._def.keyType,W=this._def.valueType;for(let J in Q.data)P.push({key:h._parse(new tv(Q,J,Q.path,J)),value:W._parse(new tv(Q,Q.data[J],Q.path,J)),alwaysSet:J in Q.data});if(Q.common.async)return Av.mergeObjectAsync(v,P);else return Av.mergeObjectSync(v,P)}get element(){return this._def.valueType}static create(f,v,Q){if(v instanceof o)return new L1({keyType:f,valueType:v,typeName:j.ZodRecord,...i(Q)});return new L1({keyType:dv.create(),valueType:f,typeName:j.ZodRecord,...i(v)})}}class V1 extends o{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:Q}=this._processInputParams(f);if(Q.parsedType!==_.map)return k(Q,{code:A.invalid_type,expected:_.map,received:Q.parsedType}),n;let P=this._def.keyType,h=this._def.valueType,W=[...Q.data.entries()].map(([J,X],Y)=>{return{key:P._parse(new tv(Q,J,Q.path,[Y,"key"])),value:h._parse(new tv(Q,X,Q.path,[Y,"value"]))}});if(Q.common.async){let J=new Map;return Promise.resolve().then(async()=>{for(let X of W){let Y=await X.key,G=await X.value;if(Y.status==="aborted"||G.status==="aborted")return n;if(Y.status==="dirty"||G.status==="dirty")v.dirty();J.set(Y.value,G.value)}return{status:v.value,value:J}})}else{let J=new Map;for(let X of W){let{key:Y,value:G}=X;if(Y.status==="aborted"||G.status==="aborted")return n;if(Y.status==="dirty"||G.status==="dirty")v.dirty();J.set(Y.value,G.value)}return{status:v.value,value:J}}}}V1.create=(f,v,Q)=>{return new V1({valueType:v,keyType:f,typeName:j.ZodMap,...i(Q)})};class If extends o{_parse(f){let{status:v,ctx:Q}=this._processInputParams(f);if(Q.parsedType!==_.set)return k(Q,{code:A.invalid_type,expected:_.set,received:Q.parsedType}),n;let P=this._def;if(P.minSize!==null){if(Q.data.size<P.minSize.value)k(Q,{code:A.too_small,minimum:P.minSize.value,type:"set",inclusive:!0,exact:!1,message:P.minSize.message}),v.dirty()}if(P.maxSize!==null){if(Q.data.size>P.maxSize.value)k(Q,{code:A.too_big,maximum:P.maxSize.value,type:"set",inclusive:!0,exact:!1,message:P.maxSize.message}),v.dirty()}let h=this._def.valueType;function W(X){let Y=new Set;for(let G of X){if(G.status==="aborted")return n;if(G.status==="dirty")v.dirty();Y.add(G.value)}return{status:v.value,value:Y}}let J=[...Q.data.values()].map((X,Y)=>h._parse(new tv(Q,X,Q.path,Y)));if(Q.common.async)return Promise.all(J).then((X)=>W(X));else return W(J)}min(f,v){return new If({...this._def,minSize:{value:f,message:u.toString(v)}})}max(f,v){return new If({...this._def,maxSize:{value:f,message:u.toString(v)}})}size(f,v){return this.min(f,v).max(f,v)}nonempty(f){return this.min(1,f)}}If.create=(f,v)=>{return new If({valueType:f,minSize:null,maxSize:null,typeName:j.ZodSet,...i(v)})};class v1 extends o{constructor(){super(...arguments);this.validate=this.implement}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==_.function)return k(v,{code:A.invalid_type,expected:_.function,received:v.parsedType}),n;function Q(J,X){return E1({data:J,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,sf(),zf].filter((Y)=>!!Y),issueData:{code:A.invalid_arguments,argumentsError:X}})}function P(J,X){return E1({data:J,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,sf(),zf].filter((Y)=>!!Y),issueData:{code:A.invalid_return_type,returnTypeError:X}})}let h={errorMap:v.common.contextualErrorMap},W=v.data;if(this._def.returns instanceof Cf){let J=this;return Sv(async function(...X){let Y=new rv([]),G=await J._def.args.parseAsync(X,h).catch((E)=>{throw Y.addIssue(Q(X,E)),Y}),z=await Reflect.apply(W,this,G);return await J._def.returns._def.type.parseAsync(z,h).catch((E)=>{throw Y.addIssue(P(z,E)),Y})})}else{let J=this;return Sv(function(...X){let Y=J._def.args.safeParse(X,h);if(!Y.success)throw new rv([Q(X,Y.error)]);let G=Reflect.apply(W,this,Y.data),z=J._def.returns.safeParse(G,h);if(!z.success)throw new rv([P(G,z.error)]);return z.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...f){return new v1({...this._def,args:wf.create(f).rest(Mf.create())})}returns(f){return new v1({...this._def,returns:f})}implement(f){return this.parse(f)}strictImplement(f){return this.parse(f)}static create(f,v,Q){return new v1({args:f?f:wf.create([]).rest(Mf.create()),returns:v||Mf.create(),typeName:j.ZodFunction,...i(Q)})}}class J1 extends o{get schema(){return this._def.getter()}_parse(f){let{ctx:v}=this._processInputParams(f);return this._def.getter()._parse({data:v.data,path:v.path,parent:v})}}J1.create=(f,v)=>{return new J1({getter:f,typeName:j.ZodLazy,...i(v)})};class w1 extends o{_parse(f){if(f.data!==this._def.value){let v=this._getOrReturnCtx(f);return k(v,{received:v.data,code:A.invalid_literal,expected:this._def.value}),n}return{status:"valid",value:f.data}}get value(){return this._def.value}}w1.create=(f,v)=>{return new w1({value:f,typeName:j.ZodLiteral,...i(v)})};function dh(f,v){return new Vf({values:f,typeName:j.ZodEnum,...i(v)})}class Vf extends o{_parse(f){if(typeof f.data!=="string"){let v=this._getOrReturnCtx(f),Q=this._def.values;return k(v,{expected:e.joinValues(Q),received:v.parsedType,code:A.invalid_type}),n}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(f.data)){let v=this._getOrReturnCtx(f),Q=this._def.values;return k(v,{received:v.data,code:A.invalid_enum_value,options:Q}),n}return Sv(f.data)}get options(){return this._def.values}get enum(){let f={};for(let v of this._def.values)f[v]=v;return f}get Values(){let f={};for(let v of this._def.values)f[v]=v;return f}get Enum(){let f={};for(let v of this._def.values)f[v]=v;return f}extract(f,v=this._def){return Vf.create(f,{...this._def,...v})}exclude(f,v=this._def){return Vf.create(this.options.filter((Q)=>!f.includes(Q)),{...this._def,...v})}}Vf.create=dh;class X1 extends o{_parse(f){let v=e.getValidEnumValues(this._def.values),Q=this._getOrReturnCtx(f);if(Q.parsedType!==_.string&&Q.parsedType!==_.number){let P=e.objectValues(v);return k(Q,{expected:e.joinValues(P),received:Q.parsedType,code:A.invalid_type}),n}if(!this._cache)this._cache=new Set(e.getValidEnumValues(this._def.values));if(!this._cache.has(f.data)){let P=e.objectValues(v);return k(Q,{received:Q.data,code:A.invalid_enum_value,options:P}),n}return Sv(f.data)}get enum(){return this._def.values}}X1.create=(f,v)=>{return new X1({values:f,typeName:j.ZodNativeEnum,...i(v)})};class Cf extends o{unwrap(){return this._def.type}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==_.promise&&v.common.async===!1)return k(v,{code:A.invalid_type,expected:_.promise,received:v.parsedType}),n;let Q=v.parsedType===_.promise?v.data:Promise.resolve(v.data);return Sv(Q.then((P)=>{return this._def.type.parseAsync(P,{path:v.path,errorMap:v.common.contextualErrorMap})}))}}Cf.create=(f,v)=>{return new Cf({type:f,typeName:j.ZodPromise,...i(v)})};class ev extends o{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===j.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(f){let{status:v,ctx:Q}=this._processInputParams(f),P=this._def.effect||null,h={addIssue:(W)=>{if(k(Q,W),W.fatal)v.abort();else v.dirty()},get path(){return Q.path}};if(h.addIssue=h.addIssue.bind(h),P.type==="preprocess"){let W=P.transform(Q.data,h);if(Q.common.async)return Promise.resolve(W).then(async(J)=>{if(v.value==="aborted")return n;let X=await this._def.schema._parseAsync({data:J,path:Q.path,parent:Q});if(X.status==="aborted")return n;if(X.status==="dirty")return yf(X.value);if(v.value==="dirty")return yf(X.value);return X});else{if(v.value==="aborted")return n;let J=this._def.schema._parseSync({data:W,path:Q.path,parent:Q});if(J.status==="aborted")return n;if(J.status==="dirty")return yf(J.value);if(v.value==="dirty")return yf(J.value);return J}}if(P.type==="refinement"){let W=(J)=>{let X=P.refinement(J,h);if(Q.common.async)return Promise.resolve(X);if(X instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return J};if(Q.common.async===!1){let J=this._def.schema._parseSync({data:Q.data,path:Q.path,parent:Q});if(J.status==="aborted")return n;if(J.status==="dirty")v.dirty();return W(J.value),{status:v.value,value:J.value}}else return this._def.schema._parseAsync({data:Q.data,path:Q.path,parent:Q}).then((J)=>{if(J.status==="aborted")return n;if(J.status==="dirty")v.dirty();return W(J.value).then(()=>{return{status:v.value,value:J.value}})})}if(P.type==="transform")if(Q.common.async===!1){let W=this._def.schema._parseSync({data:Q.data,path:Q.path,parent:Q});if(!Ef(W))return n;let J=P.transform(W.value,h);if(J instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:v.value,value:J}}else return this._def.schema._parseAsync({data:Q.data,path:Q.path,parent:Q}).then((W)=>{if(!Ef(W))return n;return Promise.resolve(P.transform(W.value,h)).then((J)=>({status:v.value,value:J}))});e.assertNever(P)}}ev.create=(f,v,Q)=>{return new ev({schema:f,typeName:j.ZodEffects,effect:v,...i(Q)})};ev.createWithPreprocess=(f,v,Q)=>{return new ev({schema:v,effect:{type:"preprocess",transform:f},typeName:j.ZodEffects,...i(Q)})};class sv extends o{_parse(f){if(this._getType(f)===_.undefined)return Sv(void 0);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}sv.create=(f,v)=>{return new sv({innerType:f,typeName:j.ZodOptional,...i(v)})};class Hf extends o{_parse(f){if(this._getType(f)===_.null)return Sv(null);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}Hf.create=(f,v)=>{return new Hf({innerType:f,typeName:j.ZodNullable,...i(v)})};class Y1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f),Q=v.data;if(v.parsedType===_.undefined)Q=this._def.defaultValue();return this._def.innerType._parse({data:Q,path:v.path,parent:v})}removeDefault(){return this._def.innerType}}Y1.create=(f,v)=>{return new Y1({innerType:f,typeName:j.ZodDefault,defaultValue:typeof v.default==="function"?v.default:()=>v.default,...i(v)})};class B1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f),Q={...v,common:{...v.common,issues:[]}},P=this._def.innerType._parse({data:Q.data,path:Q.path,parent:{...Q}});if(tf(P))return P.then((h)=>{return{status:"valid",value:h.status==="valid"?h.value:this._def.catchValue({get error(){return new rv(Q.common.issues)},input:Q.data})}});else return{status:"valid",value:P.status==="valid"?P.value:this._def.catchValue({get error(){return new rv(Q.common.issues)},input:Q.data})}}removeCatch(){return this._def.innerType}}B1.create=(f,v)=>{return new B1({innerType:f,typeName:j.ZodCatch,catchValue:typeof v.catch==="function"?v.catch:()=>v.catch,...i(v)})};class U1 extends o{_parse(f){if(this._getType(f)!==_.nan){let Q=this._getOrReturnCtx(f);return k(Q,{code:A.invalid_type,expected:_.nan,received:Q.parsedType}),n}return{status:"valid",value:f.data}}}U1.create=(f)=>{return new U1({typeName:j.ZodNaN,...i(f)})};var W8=Symbol("zod_brand");class T1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f),Q=v.data;return this._def.type._parse({data:Q,path:v.path,parent:v})}unwrap(){return this._def.type}}class N1 extends o{_parse(f){let{status:v,ctx:Q}=this._processInputParams(f);if(Q.common.async)return(async()=>{let h=await this._def.in._parseAsync({data:Q.data,path:Q.path,parent:Q});if(h.status==="aborted")return n;if(h.status==="dirty")return v.dirty(),yf(h.value);else return this._def.out._parseAsync({data:h.value,path:Q.path,parent:Q})})();else{let P=this._def.in._parseSync({data:Q.data,path:Q.path,parent:Q});if(P.status==="aborted")return n;if(P.status==="dirty")return v.dirty(),{status:"dirty",value:P.value};else return this._def.out._parseSync({data:P.value,path:Q.path,parent:Q})}}static create(f,v){return new N1({in:f,out:v,typeName:j.ZodPipeline})}}class l1 extends o{_parse(f){let v=this._def.innerType._parse(f),Q=(P)=>{if(Ef(P))P.value=Object.freeze(P.value);return P};return tf(v)?v.then((P)=>Q(P)):Q(v)}unwrap(){return this._def.innerType}}l1.create=(f,v)=>{return new l1({innerType:f,typeName:j.ZodReadonly,...i(v)})};function nh(f,v){let Q=typeof f==="function"?f(v):typeof f==="string"?{message:f}:f;return typeof Q==="string"?{message:Q}:Q}function oh(f,v={},Q){if(f)return rf.create().superRefine((P,h)=>{let W=f(P);if(W instanceof Promise)return W.then((J)=>{if(!J){let X=nh(v,P),Y=X.fatal??Q??!0;h.addIssue({code:"custom",...X,fatal:Y})}});if(!W){let J=nh(v,P),X=J.fatal??Q??!0;h.addIssue({code:"custom",...J,fatal:X})}return});return rf.create()}var J8={object:Kv.lazycreate},j;(function(f){f.ZodString="ZodString",f.ZodNumber="ZodNumber",f.ZodNaN="ZodNaN",f.ZodBigInt="ZodBigInt",f.ZodBoolean="ZodBoolean",f.ZodDate="ZodDate",f.ZodSymbol="ZodSymbol",f.ZodUndefined="ZodUndefined",f.ZodNull="ZodNull",f.ZodAny="ZodAny",f.ZodUnknown="ZodUnknown",f.ZodNever="ZodNever",f.ZodVoid="ZodVoid",f.ZodArray="ZodArray",f.ZodObject="ZodObject",f.ZodUnion="ZodUnion",f.ZodDiscriminatedUnion="ZodDiscriminatedUnion",f.ZodIntersection="ZodIntersection",f.ZodTuple="ZodTuple",f.ZodRecord="ZodRecord",f.ZodMap="ZodMap",f.ZodSet="ZodSet",f.ZodFunction="ZodFunction",f.ZodLazy="ZodLazy",f.ZodLiteral="ZodLiteral",f.ZodEnum="ZodEnum",f.ZodEffects="ZodEffects",f.ZodNativeEnum="ZodNativeEnum",f.ZodOptional="ZodOptional",f.ZodNullable="ZodNullable",f.ZodDefault="ZodDefault",f.ZodCatch="ZodCatch",f.ZodPromise="ZodPromise",f.ZodBranded="ZodBranded",f.ZodPipeline="ZodPipeline",f.ZodReadonly="ZodReadonly"})(j||(j={}));var w8=(f,v={message:`Input not instance of ${f.name}`})=>oh((Q)=>Q instanceof f,v),sh=dv.create,th=Of.create,X8=U1.create,Y8=Lf.create,eh=f1.create,B8=kf.create,l8=M1.create,G8=h1.create,q8=Q1.create,z8=rf.create,D8=Mf.create,H8=Jf.create,K8=O1.create,$8=ov.create,E8=Kv.create,M8=Kv.strictCreate,O8=P1.create,L8=Z1.create,V8=W1.create,U8=wf.create,N8=L1.create,F8=V1.create,A8=If.create,j8=v1.create,b8=J1.create,S8=w1.create,R8=Vf.create,g8=X1.create,_8=Cf.create,y8=ev.create,k8=sv.create,r8=Hf.create,I8=ev.createWithPreprocess,C8=N1.create,Z8=()=>sh().optional(),T8=()=>th().optional(),x8=()=>eh().optional(),u8={string:(f)=>dv.create({...f,coerce:!0}),number:(f)=>Of.create({...f,coerce:!0}),boolean:(f)=>f1.create({...f,coerce:!0}),bigint:(f)=>Lf.create({...f,coerce:!0}),date:(f)=>kf.create({...f,coerce:!0})};var a8=n;var I0="2025-06-18";var vQ=[I0,"2025-03-26","2024-11-05","2024-10-07"],x1="2.0",fQ=w.union([w.string(),w.number().int()]),hQ=w.string(),n8=w.object({progressToken:w.optional(fQ)}).passthrough(),cv=w.object({_meta:w.optional(n8)}).passthrough(),Iv=w.object({method:w.string(),params:w.optional(cv)}),F1=w.object({_meta:w.optional(w.object({}).passthrough())}).passthrough(),Xf=w.object({method:w.string(),params:w.optional(F1)}),pv=w.object({_meta:w.optional(w.object({}).passthrough())}).passthrough(),u1=w.union([w.string(),w.number().int()]),QQ=w.object({jsonrpc:w.literal(x1),id:u1}).merge(Iv).strict(),PQ=(f)=>QQ.safeParse(f).success,WQ=w.object({jsonrpc:w.literal(x1)}).merge(Xf).strict(),JQ=(f)=>WQ.safeParse(f).success,wQ=w.object({jsonrpc:w.literal(x1),id:u1,result:pv}).strict(),C0=(f)=>wQ.safeParse(f).success,lv;(function(f){f[f.ConnectionClosed=-32000]="ConnectionClosed",f[f.RequestTimeout=-32001]="RequestTimeout",f[f.ParseError=-32700]="ParseError",f[f.InvalidRequest=-32600]="InvalidRequest",f[f.MethodNotFound=-32601]="MethodNotFound",f[f.InvalidParams=-32602]="InvalidParams",f[f.InternalError=-32603]="InternalError"})(lv||(lv={}));var XQ=w.object({jsonrpc:w.literal(x1),id:u1,error:w.object({code:w.number().int(),message:w.string(),data:w.optional(w.unknown())})}).strict(),YQ=(f)=>XQ.safeParse(f).success,BQ=w.union([QQ,WQ,wQ,XQ]),a1=pv.strict(),m1=Xf.extend({method:w.literal("notifications/cancelled"),params:F1.extend({requestId:u1,reason:w.string().optional()})}),c8=w.object({src:w.string(),mimeType:w.optional(w.string()),sizes:w.optional(w.array(w.string()))}).passthrough(),A1=w.object({icons:w.array(c8).optional()}).passthrough(),j1=w.object({name:w.string(),title:w.optional(w.string())}).passthrough(),lQ=j1.extend({version:w.string(),websiteUrl:w.optional(w.string())}).merge(A1),p8=w.object({experimental:w.optional(w.object({}).passthrough()),sampling:w.optional(w.object({}).passthrough()),elicitation:w.optional(w.object({}).passthrough()),roots:w.optional(w.object({listChanged:w.optional(w.boolean())}).passthrough())}).passthrough(),Z0=Iv.extend({method:w.literal("initialize"),params:cv.extend({protocolVersion:w.string(),capabilities:p8,clientInfo:lQ})});var i8=w.object({experimental:w.optional(w.object({}).passthrough()),logging:w.optional(w.object({}).passthrough()),completions:w.optional(w.object({}).passthrough()),prompts:w.optional(w.object({listChanged:w.optional(w.boolean())}).passthrough()),resources:w.optional(w.object({subscribe:w.optional(w.boolean()),listChanged:w.optional(w.boolean())}).passthrough()),tools:w.optional(w.object({listChanged:w.optional(w.boolean())}).passthrough())}).passthrough(),d8=pv.extend({protocolVersion:w.string(),capabilities:i8,serverInfo:lQ,instructions:w.optional(w.string())}),T0=Xf.extend({method:w.literal("notifications/initialized")});var n1=Iv.extend({method:w.literal("ping")}),o8=w.object({progress:w.number(),total:w.optional(w.number()),message:w.optional(w.string())}).passthrough(),c1=Xf.extend({method:w.literal("notifications/progress"),params:F1.merge(o8).extend({progressToken:fQ})}),p1=Iv.extend({params:cv.extend({cursor:w.optional(hQ)}).optional()}),i1=pv.extend({nextCursor:w.optional(hQ)}),GQ=w.object({uri:w.string(),mimeType:w.optional(w.string()),_meta:w.optional(w.object({}).passthrough())}).passthrough(),qQ=GQ.extend({text:w.string()}),x0=w.string().refine((f)=>{try{return atob(f),!0}catch(v){return!1}},{message:"Invalid Base64 string"}),zQ=GQ.extend({blob:x0}),DQ=j1.extend({uri:w.string(),description:w.optional(w.string()),mimeType:w.optional(w.string()),_meta:w.optional(w.object({}).passthrough())}).merge(A1),s8=j1.extend({uriTemplate:w.string(),description:w.optional(w.string()),mimeType:w.optional(w.string()),_meta:w.optional(w.object({}).passthrough())}).merge(A1),d1=p1.extend({method:w.literal("resources/list")}),t8=i1.extend({resources:w.array(DQ)}),o1=p1.extend({method:w.literal("resources/templates/list")}),e8=i1.extend({resourceTemplates:w.array(s8)}),s1=Iv.extend({method:w.literal("resources/read"),params:cv.extend({uri:w.string()})}),vJ=pv.extend({contents:w.array(w.union([qQ,zQ]))}),fJ=Xf.extend({method:w.literal("notifications/resources/list_changed")}),hJ=Iv.extend({method:w.literal("resources/subscribe"),params:cv.extend({uri:w.string()})}),QJ=Iv.extend({method:w.literal("resources/unsubscribe"),params:cv.extend({uri:w.string()})}),PJ=Xf.extend({method:w.literal("notifications/resources/updated"),params:F1.extend({uri:w.string()})}),WJ=w.object({name:w.string(),description:w.optional(w.string()),required:w.optional(w.boolean())}).passthrough(),JJ=j1.extend({description:w.optional(w.string()),arguments:w.optional(w.array(WJ)),_meta:w.optional(w.object({}).passthrough())}).merge(A1),t1=p1.extend({method:w.literal("prompts/list")}),wJ=i1.extend({prompts:w.array(JJ)}),e1=Iv.extend({method:w.literal("prompts/get"),params:cv.extend({name:w.string(),arguments:w.optional(w.record(w.string()))})}),u0=w.object({type:w.literal("text"),text:w.string(),_meta:w.optional(w.object({}).passthrough())}).passthrough(),a0=w.object({type:w.literal("image"),data:x0,mimeType:w.string(),_meta:w.optional(w.object({}).passthrough())}).passthrough(),m0=w.object({type:w.literal("audio"),data:x0,mimeType:w.string(),_meta:w.optional(w.object({}).passthrough())}).passthrough(),XJ=w.object({type:w.literal("resource"),resource:w.union([qQ,zQ]),_meta:w.optional(w.object({}).passthrough())}).passthrough(),YJ=DQ.extend({type:w.literal("resource_link")}),HQ=w.union([u0,a0,m0,YJ,XJ]),BJ=w.object({role:w.enum(["user","assistant"]),content:HQ}).passthrough(),lJ=pv.extend({description:w.optional(w.string()),messages:w.array(BJ)}),GJ=Xf.extend({method:w.literal("notifications/prompts/list_changed")}),qJ=w.object({title:w.optional(w.string()),readOnlyHint:w.optional(w.boolean()),destructiveHint:w.optional(w.boolean()),idempotentHint:w.optional(w.boolean()),openWorldHint:w.optional(w.boolean())}).passthrough(),zJ=j1.extend({description:w.optional(w.string()),inputSchema:w.object({type:w.literal("object"),properties:w.optional(w.object({}).passthrough()),required:w.optional(w.array(w.string()))}).passthrough(),outputSchema:w.optional(w.object({type:w.literal("object"),properties:w.optional(w.object({}).passthrough()),required:w.optional(w.array(w.string()))}).passthrough()),annotations:w.optional(qJ),_meta:w.optional(w.object({}).passthrough())}).merge(A1),v0=p1.extend({method:w.literal("tools/list")}),DJ=i1.extend({tools:w.array(zJ)}),KQ=pv.extend({content:w.array(HQ).default([]),structuredContent:w.object({}).passthrough().optional(),isError:w.optional(w.boolean())}),_X=KQ.or(pv.extend({toolResult:w.unknown()})),f0=Iv.extend({method:w.literal("tools/call"),params:cv.extend({name:w.string(),arguments:w.optional(w.record(w.unknown()))})}),HJ=Xf.extend({method:w.literal("notifications/tools/list_changed")}),b1=w.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),n0=Iv.extend({method:w.literal("logging/setLevel"),params:cv.extend({level:b1})}),KJ=Xf.extend({method:w.literal("notifications/message"),params:F1.extend({level:b1,logger:w.optional(w.string()),data:w.unknown()})}),$J=w.object({name:w.string().optional()}).passthrough(),EJ=w.object({hints:w.optional(w.array($J)),costPriority:w.optional(w.number().min(0).max(1)),speedPriority:w.optional(w.number().min(0).max(1)),intelligencePriority:w.optional(w.number().min(0).max(1))}).passthrough(),MJ=w.object({role:w.enum(["user","assistant"]),content:w.union([u0,a0,m0])}).passthrough(),OJ=Iv.extend({method:w.literal("sampling/createMessage"),params:cv.extend({messages:w.array(MJ),systemPrompt:w.optional(w.string()),includeContext:w.optional(w.enum(["none","thisServer","allServers"])),temperature:w.optional(w.number()),maxTokens:w.number().int(),stopSequences:w.optional(w.array(w.string())),metadata:w.optional(w.object({}).passthrough()),modelPreferences:w.optional(EJ)})}),c0=pv.extend({model:w.string(),stopReason:w.optional(w.enum(["endTurn","stopSequence","maxTokens"]).or(w.string())),role:w.enum(["user","assistant"]),content:w.discriminatedUnion("type",[u0,a0,m0])}),LJ=w.object({type:w.literal("boolean"),title:w.optional(w.string()),description:w.optional(w.string()),default:w.optional(w.boolean())}).passthrough(),VJ=w.object({type:w.literal("string"),title:w.optional(w.string()),description:w.optional(w.string()),minLength:w.optional(w.number()),maxLength:w.optional(w.number()),format:w.optional(w.enum(["email","uri","date","date-time"]))}).passthrough(),UJ=w.object({type:w.enum(["number","integer"]),title:w.optional(w.string()),description:w.optional(w.string()),minimum:w.optional(w.number()),maximum:w.optional(w.number())}).passthrough(),NJ=w.object({type:w.literal("string"),title:w.optional(w.string()),description:w.optional(w.string()),enum:w.array(w.string()),enumNames:w.optional(w.array(w.string()))}).passthrough(),FJ=w.union([LJ,VJ,UJ,NJ]),AJ=Iv.extend({method:w.literal("elicitation/create"),params:cv.extend({message:w.string(),requestedSchema:w.object({type:w.literal("object"),properties:w.record(w.string(),FJ),required:w.optional(w.array(w.string()))}).passthrough()})}),p0=pv.extend({action:w.enum(["accept","decline","cancel"]),content:w.optional(w.record(w.string(),w.unknown()))}),jJ=w.object({type:w.literal("ref/resource"),uri:w.string()}).passthrough();var bJ=w.object({type:w.literal("ref/prompt"),name:w.string()}).passthrough(),h0=Iv.extend({method:w.literal("completion/complete"),params:cv.extend({ref:w.union([bJ,jJ]),argument:w.object({name:w.string(),value:w.string()}).passthrough(),context:w.optional(w.object({arguments:w.optional(w.record(w.string(),w.string()))}))})}),SJ=pv.extend({completion:w.object({values:w.array(w.string()).max(100),total:w.optional(w.number().int()),hasMore:w.optional(w.boolean())}).passthrough()}),RJ=w.object({uri:w.string().startsWith("file://"),name:w.optional(w.string()),_meta:w.optional(w.object({}).passthrough())}).passthrough(),gJ=Iv.extend({method:w.literal("roots/list")}),i0=pv.extend({roots:w.array(RJ)}),_J=Xf.extend({method:w.literal("notifications/roots/list_changed")}),yX=w.union([n1,Z0,h0,n0,e1,t1,d1,o1,s1,hJ,QJ,f0,v0]),kX=w.union([m1,c1,T0,_J]),rX=w.union([a1,c0,p0,i0]),IX=w.union([n1,OJ,AJ,gJ]),CX=w.union([m1,c1,KJ,PJ,fJ,HJ,GJ]),ZX=w.union([a1,d8,SJ,lJ,wJ,t8,e8,vJ,KQ,DJ]);class Gv extends Error{constructor(f,v,Q){super(`MCP error ${f}: ${v}`);this.code=f,this.data=Q,this.name="McpError"}}var yJ=60000;class d0{constructor(f){this._options=f,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(m1,(v)=>{let Q=this._requestHandlerAbortControllers.get(v.params.requestId);Q===null||Q===void 0||Q.abort(v.params.reason)}),this.setNotificationHandler(c1,(v)=>{this._onprogress(v)}),this.setRequestHandler(n1,(v)=>({}))}_setupTimeout(f,v,Q,P,h=!1){this._timeoutInfo.set(f,{timeoutId:setTimeout(P,v),startTime:Date.now(),timeout:v,maxTotalTimeout:Q,resetTimeoutOnProgress:h,onTimeout:P})}_resetTimeout(f){let v=this._timeoutInfo.get(f);if(!v)return!1;let Q=Date.now()-v.startTime;if(v.maxTotalTimeout&&Q>=v.maxTotalTimeout)throw this._timeoutInfo.delete(f),new Gv(lv.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:v.maxTotalTimeout,totalElapsed:Q});return clearTimeout(v.timeoutId),v.timeoutId=setTimeout(v.onTimeout,v.timeout),!0}_cleanupTimeout(f){let v=this._timeoutInfo.get(f);if(v)clearTimeout(v.timeoutId),this._timeoutInfo.delete(f)}async connect(f){var v,Q,P;this._transport=f;let h=(v=this.transport)===null||v===void 0?void 0:v.onclose;this._transport.onclose=()=>{h===null||h===void 0||h(),this._onclose()};let W=(Q=this.transport)===null||Q===void 0?void 0:Q.onerror;this._transport.onerror=(X)=>{W===null||W===void 0||W(X),this._onerror(X)};let J=(P=this._transport)===null||P===void 0?void 0:P.onmessage;this._transport.onmessage=(X,Y)=>{if(J===null||J===void 0||J(X,Y),C0(X)||YQ(X))this._onresponse(X);else if(PQ(X))this._onrequest(X,Y);else if(JQ(X))this._onnotification(X);else this._onerror(Error(`Unknown message type: ${JSON.stringify(X)}`))},await this._transport.start()}_onclose(){var f;let v=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(f=this.onclose)===null||f===void 0||f.call(this);let Q=new Gv(lv.ConnectionClosed,"Connection closed");for(let P of v.values())P(Q)}_onerror(f){var v;(v=this.onerror)===null||v===void 0||v.call(this,f)}_onnotification(f){var v;let Q=(v=this._notificationHandlers.get(f.method))!==null&&v!==void 0?v:this.fallbackNotificationHandler;if(Q===void 0)return;Promise.resolve().then(()=>Q(f)).catch((P)=>this._onerror(Error(`Uncaught error in notification handler: ${P}`)))}_onrequest(f,v){var Q,P;let h=(Q=this._requestHandlers.get(f.method))!==null&&Q!==void 0?Q:this.fallbackRequestHandler,W=this._transport;if(h===void 0){W===null||W===void 0||W.send({jsonrpc:"2.0",id:f.id,error:{code:lv.MethodNotFound,message:"Method not found"}}).catch((Y)=>this._onerror(Error(`Failed to send an error response: ${Y}`)));return}let J=new AbortController;this._requestHandlerAbortControllers.set(f.id,J);let X={signal:J.signal,sessionId:W===null||W===void 0?void 0:W.sessionId,_meta:(P=f.params)===null||P===void 0?void 0:P._meta,sendNotification:(Y)=>this.notification(Y,{relatedRequestId:f.id}),sendRequest:(Y,G,z)=>this.request(Y,G,{...z,relatedRequestId:f.id}),authInfo:v===null||v===void 0?void 0:v.authInfo,requestId:f.id,requestInfo:v===null||v===void 0?void 0:v.requestInfo};Promise.resolve().then(()=>h(f,X)).then((Y)=>{if(J.signal.aborted)return;return W===null||W===void 0?void 0:W.send({result:Y,jsonrpc:"2.0",id:f.id})},(Y)=>{var G;if(J.signal.aborted)return;return W===null||W===void 0?void 0:W.send({jsonrpc:"2.0",id:f.id,error:{code:Number.isSafeInteger(Y.code)?Y.code:lv.InternalError,message:(G=Y.message)!==null&&G!==void 0?G:"Internal error"}})}).catch((Y)=>this._onerror(Error(`Failed to send response: ${Y}`))).finally(()=>{this._requestHandlerAbortControllers.delete(f.id)})}_onprogress(f){let{progressToken:v,...Q}=f.params,P=Number(v),h=this._progressHandlers.get(P);if(!h){this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(f)}`));return}let W=this._responseHandlers.get(P),J=this._timeoutInfo.get(P);if(J&&W&&J.resetTimeoutOnProgress)try{this._resetTimeout(P)}catch(X){W(X);return}h(Q)}_onresponse(f){let v=Number(f.id),Q=this._responseHandlers.get(v);if(Q===void 0){this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(f)}`));return}if(this._responseHandlers.delete(v),this._progressHandlers.delete(v),this._cleanupTimeout(v),C0(f))Q(f);else{let P=new Gv(f.error.code,f.error.message,f.error.data);Q(P)}}get transport(){return this._transport}async close(){var f;await((f=this._transport)===null||f===void 0?void 0:f.close())}request(f,v,Q){let{relatedRequestId:P,resumptionToken:h,onresumptiontoken:W}=Q!==null&&Q!==void 0?Q:{};return new Promise((J,X)=>{var Y,G,z,K,E,B;if(!this._transport){X(Error("Not connected"));return}if(((Y=this._options)===null||Y===void 0?void 0:Y.enforceStrictCapabilities)===!0)this.assertCapabilityForMethod(f.method);(G=Q===null||Q===void 0?void 0:Q.signal)===null||G===void 0||G.throwIfAborted();let D=this._requestMessageId++,M={...f,jsonrpc:"2.0",id:D};if(Q===null||Q===void 0?void 0:Q.onprogress)this._progressHandlers.set(D,Q.onprogress),M.params={...f.params,_meta:{...((z=f.params)===null||z===void 0?void 0:z._meta)||{},progressToken:D}};let H=(U)=>{var N;this._responseHandlers.delete(D),this._progressHandlers.delete(D),this._cleanupTimeout(D),(N=this._transport)===null||N===void 0||N.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:D,reason:String(U)}},{relatedRequestId:P,resumptionToken:h,onresumptiontoken:W}).catch((S)=>this._onerror(Error(`Failed to send cancellation: ${S}`))),X(U)};this._responseHandlers.set(D,(U)=>{var N;if((N=Q===null||Q===void 0?void 0:Q.signal)===null||N===void 0?void 0:N.aborted)return;if(U instanceof Error)return X(U);try{let S=v.parse(U.result);J(S)}catch(S){X(S)}}),(K=Q===null||Q===void 0?void 0:Q.signal)===null||K===void 0||K.addEventListener("abort",()=>{var U;H((U=Q===null||Q===void 0?void 0:Q.signal)===null||U===void 0?void 0:U.reason)});let V=(E=Q===null||Q===void 0?void 0:Q.timeout)!==null&&E!==void 0?E:yJ,F=()=>H(new Gv(lv.RequestTimeout,"Request timed out",{timeout:V}));this._setupTimeout(D,V,Q===null||Q===void 0?void 0:Q.maxTotalTimeout,F,(B=Q===null||Q===void 0?void 0:Q.resetTimeoutOnProgress)!==null&&B!==void 0?B:!1),this._transport.send(M,{relatedRequestId:P,resumptionToken:h,onresumptiontoken:W}).catch((U)=>{this._cleanupTimeout(D),X(U)})})}async notification(f,v){var Q,P;if(!this._transport)throw Error("Not connected");if(this.assertNotificationCapability(f.method),((P=(Q=this._options)===null||Q===void 0?void 0:Q.debouncedNotificationMethods)!==null&&P!==void 0?P:[]).includes(f.method)&&!f.params&&!(v===null||v===void 0?void 0:v.relatedRequestId)){if(this._pendingDebouncedNotifications.has(f.method))return;this._pendingDebouncedNotifications.add(f.method),Promise.resolve().then(()=>{var X;if(this._pendingDebouncedNotifications.delete(f.method),!this._transport)return;let Y={...f,jsonrpc:"2.0"};(X=this._transport)===null||X===void 0||X.send(Y,v).catch((G)=>this._onerror(G))});return}let J={...f,jsonrpc:"2.0"};await this._transport.send(J,v)}setRequestHandler(f,v){let Q=f.shape.method.value;this.assertRequestHandlerCapability(Q),this._requestHandlers.set(Q,(P,h)=>{return Promise.resolve(v(f.parse(P),h))})}removeRequestHandler(f){this._requestHandlers.delete(f)}assertCanSetRequestHandler(f){if(this._requestHandlers.has(f))throw Error(`A request handler for ${f} already exists, which would be overridden`)}setNotificationHandler(f,v){this._notificationHandlers.set(f.shape.method.value,(Q)=>Promise.resolve(v(f.parse(Q))))}removeNotificationHandler(f){this._notificationHandlers.delete(f)}}function $Q(f,v){return Object.entries(v).reduce((Q,[P,h])=>{if(h&&typeof h==="object")Q[P]=Q[P]?{...Q[P],...h}:h;else Q[P]=h;return Q},{...f})}var OW=MW(EW(),1);class Mh extends d0{constructor(f,v){var Q;super(v);if(this._serverInfo=f,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(b1.options.map((P,h)=>[P,h])),this.isMessageIgnored=(P,h)=>{let W=this._loggingLevels.get(h);return W?this.LOG_LEVEL_SEVERITY.get(P)<this.LOG_LEVEL_SEVERITY.get(W):!1},this._capabilities=(Q=v===null||v===void 0?void 0:v.capabilities)!==null&&Q!==void 0?Q:{},this._instructions=v===null||v===void 0?void 0:v.instructions,this.setRequestHandler(Z0,(P)=>this._oninitialize(P)),this.setNotificationHandler(T0,()=>{var P;return(P=this.oninitialized)===null||P===void 0?void 0:P.call(this)}),this._capabilities.logging)this.setRequestHandler(n0,async(P,h)=>{var W;let J=h.sessionId||((W=h.requestInfo)===null||W===void 0?void 0:W.headers["mcp-session-id"])||void 0,{level:X}=P.params,Y=b1.safeParse(X);if(Y.success)this._loggingLevels.set(J,Y.data);return{}})}registerCapabilities(f){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=$Q(this._capabilities,f)}assertCapabilityForMethod(f){var v,Q,P;switch(f){case"sampling/createMessage":if(!((v=this._clientCapabilities)===null||v===void 0?void 0:v.sampling))throw Error(`Client does not support sampling (required for ${f})`);break;case"elicitation/create":if(!((Q=this._clientCapabilities)===null||Q===void 0?void 0:Q.elicitation))throw Error(`Client does not support elicitation (required for ${f})`);break;case"roots/list":if(!((P=this._clientCapabilities)===null||P===void 0?void 0:P.roots))throw Error(`Client does not support listing roots (required for ${f})`);break;case"ping":break}}assertNotificationCapability(f){switch(f){case"notifications/message":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${f})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw Error(`Server does not support notifying about resources (required for ${f})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw Error(`Server does not support notifying of tool list changes (required for ${f})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw Error(`Server does not support notifying of prompt list changes (required for ${f})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(f){switch(f){case"sampling/createMessage":if(!this._capabilities.sampling)throw Error(`Server does not support sampling (required for ${f})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${f})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw Error(`Server does not support prompts (required for ${f})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw Error(`Server does not support resources (required for ${f})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw Error(`Server does not support tools (required for ${f})`);break;case"ping":case"initialize":break}}async _oninitialize(f){let v=f.params.protocolVersion;return this._clientCapabilities=f.params.capabilities,this._clientVersion=f.params.clientInfo,{protocolVersion:vQ.includes(v)?v:I0,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},a1)}async createMessage(f,v){return this.request({method:"sampling/createMessage",params:f},c0,v)}async elicitInput(f,v){let Q=await this.request({method:"elicitation/create",params:f},p0,v);if(Q.action==="accept"&&Q.content)try{let P=new OW.default,h=P.compile(f.requestedSchema);if(!h(Q.content))throw new Gv(lv.InvalidParams,`Elicitation response content does not match requested schema: ${P.errorsText(h.errors)}`)}catch(P){if(P instanceof Gv)throw P;throw new Gv(lv.InternalError,`Error validating elicitation response: ${P}`)}return Q}async listRoots(f,v){return this.request({method:"roots/list",params:f},i0,v)}async sendLoggingMessage(f,v){if(this._capabilities.logging){if(!this.isMessageIgnored(f.level,v))return this.notification({method:"notifications/message",params:f})}}async sendResourceUpdated(f){return this.notification({method:"notifications/resources/updated",params:f})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}var VW=Symbol("Let zodToJsonSchema decide on which parser to use");var LW={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},UW=(f)=>typeof f==="string"?{...LW,name:f}:{...LW,...f};var NW=(f)=>{let v=UW(f),Q=v.name!==void 0?[...v.basePath,v.definitionPath,v.name]:v.basePath;return{...v,flags:{hasReferencedOpenAiAnyType:!1},currentPath:Q,propertyPath:void 0,seen:new Map(Object.entries(v.definitions).map(([P,h])=>[h._def,{def:h._def,path:[...v.basePath,v.definitionPath,P],jsonSchema:void 0}]))}};function Oh(f,v,Q,P){if(!P?.errorMessages)return;if(Q)f.errorMessage={...f.errorMessage,[v]:Q}}function vv(f,v,Q,P,h){f[v]=Q,Oh(f,v,P,h)}var O0=(f,v)=>{let Q=0;for(;Q<f.length&&Q<v.length;Q++)if(f[Q]!==v[Q])break;return[(f.length-Q).toString(),...v.slice(Q)].join("/")};function zv(f){if(f.target!=="openAi")return{};let v=[...f.basePath,f.definitionPath,f.openAiAnyTypeName];return f.flags.hasReferencedOpenAiAnyType=!0,{$ref:f.$refStrategy==="relative"?O0(v,f.currentPath):v.join("/")}}function FW(f,v){let Q={type:"array"};if(f.type?._def&&f.type?._def?.typeName!==j.ZodAny)Q.items=c(f.type._def,{...v,currentPath:[...v.currentPath,"items"]});if(f.minLength)vv(Q,"minItems",f.minLength.value,f.minLength.message,v);if(f.maxLength)vv(Q,"maxItems",f.maxLength.value,f.maxLength.message,v);if(f.exactLength)vv(Q,"minItems",f.exactLength.value,f.exactLength.message,v),vv(Q,"maxItems",f.exactLength.value,f.exactLength.message,v);return Q}function AW(f,v){let Q={type:"integer",format:"int64"};if(!f.checks)return Q;for(let P of f.checks)switch(P.kind){case"min":if(v.target==="jsonSchema7")if(P.inclusive)vv(Q,"minimum",P.value,P.message,v);else vv(Q,"exclusiveMinimum",P.value,P.message,v);else{if(!P.inclusive)Q.exclusiveMinimum=!0;vv(Q,"minimum",P.value,P.message,v)}break;case"max":if(v.target==="jsonSchema7")if(P.inclusive)vv(Q,"maximum",P.value,P.message,v);else vv(Q,"exclusiveMaximum",P.value,P.message,v);else{if(!P.inclusive)Q.exclusiveMaximum=!0;vv(Q,"maximum",P.value,P.message,v)}break;case"multipleOf":vv(Q,"multipleOf",P.value,P.message,v);break}return Q}function jW(){return{type:"boolean"}}function L0(f,v){return c(f.type._def,v)}var bW=(f,v)=>{return c(f.innerType._def,v)};function Lh(f,v,Q){let P=Q??v.dateStrategy;if(Array.isArray(P))return{anyOf:P.map((h,W)=>Lh(f,v,h))};switch(P){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return qw(f,v)}}var qw=(f,v)=>{let Q={type:"integer",format:"unix-time"};if(v.target==="openApi3")return Q;for(let P of f.checks)switch(P.kind){case"min":vv(Q,"minimum",P.value,P.message,v);break;case"max":vv(Q,"maximum",P.value,P.message,v);break}return Q};function SW(f,v){return{...c(f.innerType._def,v),default:f.defaultValue()}}function RW(f,v){return v.effectStrategy==="input"?c(f.schema._def,v):zv(v)}function gW(f){return{type:"string",enum:Array.from(f.values)}}var zw=(f)=>{if("type"in f&&f.type==="string")return!1;return"allOf"in f};function _W(f,v){let Q=[c(f.left._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),c(f.right._def,{...v,currentPath:[...v.currentPath,"allOf","1"]})].filter((W)=>!!W),P=v.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,h=[];return Q.forEach((W)=>{if(zw(W)){if(h.push(...W.allOf),W.unevaluatedProperties===void 0)P=void 0}else{let J=W;if("additionalProperties"in W&&W.additionalProperties===!1){let{additionalProperties:X,...Y}=W;J=Y}else P=void 0;h.push(J)}}),h.length?{allOf:h,...P}:void 0}function yW(f,v){let Q=typeof f.value;if(Q!=="bigint"&&Q!=="number"&&Q!=="boolean"&&Q!=="string")return{type:Array.isArray(f.value)?"array":"object"};if(v.target==="openApi3")return{type:Q==="bigint"?"integer":Q,enum:[f.value]};return{type:Q==="bigint"?"integer":Q,const:f.value}}var Vh=void 0,vf={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(Vh===void 0)Vh=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");return Vh},uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function V0(f,v){let Q={type:"string"};if(f.checks)for(let P of f.checks)switch(P.kind){case"min":vv(Q,"minLength",typeof Q.minLength==="number"?Math.max(Q.minLength,P.value):P.value,P.message,v);break;case"max":vv(Q,"maxLength",typeof Q.maxLength==="number"?Math.min(Q.maxLength,P.value):P.value,P.message,v);break;case"email":switch(v.emailStrategy){case"format:email":ff(Q,"email",P.message,v);break;case"format:idn-email":ff(Q,"idn-email",P.message,v);break;case"pattern:zod":yv(Q,vf.email,P.message,v);break}break;case"url":ff(Q,"uri",P.message,v);break;case"uuid":ff(Q,"uuid",P.message,v);break;case"regex":yv(Q,P.regex,P.message,v);break;case"cuid":yv(Q,vf.cuid,P.message,v);break;case"cuid2":yv(Q,vf.cuid2,P.message,v);break;case"startsWith":yv(Q,RegExp(`^${Uh(P.value,v)}`),P.message,v);break;case"endsWith":yv(Q,RegExp(`${Uh(P.value,v)}$`),P.message,v);break;case"datetime":ff(Q,"date-time",P.message,v);break;case"date":ff(Q,"date",P.message,v);break;case"time":ff(Q,"time",P.message,v);break;case"duration":ff(Q,"duration",P.message,v);break;case"length":vv(Q,"minLength",typeof Q.minLength==="number"?Math.max(Q.minLength,P.value):P.value,P.message,v),vv(Q,"maxLength",typeof Q.maxLength==="number"?Math.min(Q.maxLength,P.value):P.value,P.message,v);break;case"includes":{yv(Q,RegExp(Uh(P.value,v)),P.message,v);break}case"ip":{if(P.version!=="v6")ff(Q,"ipv4",P.message,v);if(P.version!=="v4")ff(Q,"ipv6",P.message,v);break}case"base64url":yv(Q,vf.base64url,P.message,v);break;case"jwt":yv(Q,vf.jwt,P.message,v);break;case"cidr":{if(P.version!=="v6")yv(Q,vf.ipv4Cidr,P.message,v);if(P.version!=="v4")yv(Q,vf.ipv6Cidr,P.message,v);break}case"emoji":yv(Q,vf.emoji(),P.message,v);break;case"ulid":{yv(Q,vf.ulid,P.message,v);break}case"base64":{switch(v.base64Strategy){case"format:binary":{ff(Q,"binary",P.message,v);break}case"contentEncoding:base64":{vv(Q,"contentEncoding","base64",P.message,v);break}case"pattern:zod":{yv(Q,vf.base64,P.message,v);break}}break}case"nanoid":yv(Q,vf.nanoid,P.message,v);case"toLowerCase":case"toUpperCase":case"trim":break;default:((h)=>{})(P)}return Q}function Uh(f,v){return v.patternStrategy==="escape"?Hw(f):f}var Dw=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Hw(f){let v="";for(let Q=0;Q<f.length;Q++){if(!Dw.has(f[Q]))v+="\\";v+=f[Q]}return v}function ff(f,v,Q,P){if(f.format||f.anyOf?.some((h)=>h.format)){if(!f.anyOf)f.anyOf=[];if(f.format){if(f.anyOf.push({format:f.format,...f.errorMessage&&P.errorMessages&&{errorMessage:{format:f.errorMessage.format}}}),delete f.format,f.errorMessage){if(delete f.errorMessage.format,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.anyOf.push({format:v,...Q&&P.errorMessages&&{errorMessage:{format:Q}}})}else vv(f,"format",v,Q,P)}function yv(f,v,Q,P){if(f.pattern||f.allOf?.some((h)=>h.pattern)){if(!f.allOf)f.allOf=[];if(f.pattern){if(f.allOf.push({pattern:f.pattern,...f.errorMessage&&P.errorMessages&&{errorMessage:{pattern:f.errorMessage.pattern}}}),delete f.pattern,f.errorMessage){if(delete f.errorMessage.pattern,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.allOf.push({pattern:kW(v,P),...Q&&P.errorMessages&&{errorMessage:{pattern:Q}}})}else vv(f,"pattern",kW(v,P),Q,P)}function kW(f,v){if(!v.applyRegexFlags||!f.flags)return f.source;let Q={i:f.flags.includes("i"),m:f.flags.includes("m"),s:f.flags.includes("s")},P=Q.i?f.source.toLowerCase():f.source,h="",W=!1,J=!1,X=!1;for(let Y=0;Y<P.length;Y++){if(W){h+=P[Y],W=!1;continue}if(Q.i){if(J){if(P[Y].match(/[a-z]/)){if(X)h+=P[Y],h+=`${P[Y-2]}-${P[Y]}`.toUpperCase(),X=!1;else if(P[Y+1]==="-"&&P[Y+2]?.match(/[a-z]/))h+=P[Y],X=!0;else h+=`${P[Y]}${P[Y].toUpperCase()}`;continue}}else if(P[Y].match(/[a-z]/)){h+=`[${P[Y]}${P[Y].toUpperCase()}]`;continue}}if(Q.m){if(P[Y]==="^"){h+=`(^|(?<=[\r
]))`;continue}else if(P[Y]==="$"){h+=`($|(?=[\r
]))`;continue}}if(Q.s&&P[Y]==="."){h+=J?`${P[Y]}\r
`:`[${P[Y]}\r
]`;continue}if(h+=P[Y],P[Y]==="\\")W=!0;else if(J&&P[Y]==="]")J=!1;else if(!J&&P[Y]==="[")J=!0}try{new RegExp(h)}catch{return console.warn(`Could not convert regex pattern at ${v.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),f.source}return h}function U0(f,v){if(v.target==="openAi")console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.");if(v.target==="openApi3"&&f.keyType?._def.typeName===j.ZodEnum)return{type:"object",required:f.keyType._def.values,properties:f.keyType._def.values.reduce((P,h)=>({...P,[h]:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"properties",h]})??zv(v)}),{}),additionalProperties:v.rejectedAdditionalProperties};let Q={type:"object",additionalProperties:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]})??v.allowedAdditionalProperties};if(v.target==="openApi3")return Q;if(f.keyType?._def.typeName===j.ZodString&&f.keyType._def.checks?.length){let{type:P,...h}=V0(f.keyType._def,v);return{...Q,propertyNames:h}}else if(f.keyType?._def.typeName===j.ZodEnum)return{...Q,propertyNames:{enum:f.keyType._def.values}};else if(f.keyType?._def.typeName===j.ZodBranded&&f.keyType._def.type._def.typeName===j.ZodString&&f.keyType._def.type._def.checks?.length){let{type:P,...h}=L0(f.keyType._def,v);return{...Q,propertyNames:h}}return Q}function rW(f,v){if(v.mapStrategy==="record")return U0(f,v);let Q=c(f.keyType._def,{...v,currentPath:[...v.currentPath,"items","items","0"]})||zv(v),P=c(f.valueType._def,{...v,currentPath:[...v.currentPath,"items","items","1"]})||zv(v);return{type:"array",maxItems:125,items:{type:"array",items:[Q,P],minItems:2,maxItems:2}}}function IW(f){let v=f.values,P=Object.keys(f.values).filter((W)=>{return typeof v[v[W]]!=="number"}).map((W)=>v[W]),h=Array.from(new Set(P.map((W)=>typeof W)));return{type:h.length===1?h[0]==="string"?"string":"number":["string","number"],enum:P}}function CW(f){return f.target==="openAi"?void 0:{not:zv({...f,currentPath:[...f.currentPath,"not"]})}}function ZW(f){return f.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var R1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function xW(f,v){if(v.target==="openApi3")return TW(f,v);let Q=f.options instanceof Map?Array.from(f.options.values()):f.options;if(Q.every((P)=>(P._def.typeName in R1)&&(!P._def.checks||!P._def.checks.length))){let P=Q.reduce((h,W)=>{let J=R1[W._def.typeName];return J&&!h.includes(J)?[...h,J]:h},[]);return{type:P.length>1?P:P[0]}}else if(Q.every((P)=>P._def.typeName==="ZodLiteral"&&!P.description)){let P=Q.reduce((h,W)=>{let J=typeof W._def.value;switch(J){case"string":case"number":case"boolean":return[...h,J];case"bigint":return[...h,"integer"];case"object":if(W._def.value===null)return[...h,"null"];case"symbol":case"undefined":case"function":default:return h}},[]);if(P.length===Q.length){let h=P.filter((W,J,X)=>X.indexOf(W)===J);return{type:h.length>1?h:h[0],enum:Q.reduce((W,J)=>{return W.includes(J._def.value)?W:[...W,J._def.value]},[])}}}else if(Q.every((P)=>P._def.typeName==="ZodEnum"))return{type:"string",enum:Q.reduce((P,h)=>[...P,...h._def.values.filter((W)=>!P.includes(W))],[])};return TW(f,v)}var TW=(f,v)=>{let Q=(f.options instanceof Map?Array.from(f.options.values()):f.options).map((P,h)=>c(P._def,{...v,currentPath:[...v.currentPath,"anyOf",`${h}`]})).filter((P)=>!!P&&(!v.strictUnions||typeof P==="object"&&Object.keys(P).length>0));return Q.length?{anyOf:Q}:void 0};function uW(f,v){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(f.innerType._def.typeName)&&(!f.innerType._def.checks||!f.innerType._def.checks.length)){if(v.target==="openApi3")return{type:R1[f.innerType._def.typeName],nullable:!0};return{type:[R1[f.innerType._def.typeName],"null"]}}if(v.target==="openApi3"){let P=c(f.innerType._def,{...v,currentPath:[...v.currentPath]});if(P&&"$ref"in P)return{allOf:[P],nullable:!0};return P&&{...P,nullable:!0}}let Q=c(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","0"]});return Q&&{anyOf:[Q,{type:"null"}]}}function aW(f,v){let Q={type:"number"};if(!f.checks)return Q;for(let P of f.checks)switch(P.kind){case"int":Q.type="integer",Oh(Q,"type",P.message,v);break;case"min":if(v.target==="jsonSchema7")if(P.inclusive)vv(Q,"minimum",P.value,P.message,v);else vv(Q,"exclusiveMinimum",P.value,P.message,v);else{if(!P.inclusive)Q.exclusiveMinimum=!0;vv(Q,"minimum",P.value,P.message,v)}break;case"max":if(v.target==="jsonSchema7")if(P.inclusive)vv(Q,"maximum",P.value,P.message,v);else vv(Q,"exclusiveMaximum",P.value,P.message,v);else{if(!P.inclusive)Q.exclusiveMaximum=!0;vv(Q,"maximum",P.value,P.message,v)}break;case"multipleOf":vv(Q,"multipleOf",P.value,P.message,v);break}return Q}function mW(f,v){let Q=v.target==="openAi",P={type:"object",properties:{}},h=[],W=f.shape();for(let X in W){let Y=W[X];if(Y===void 0||Y._def===void 0)continue;let G=$w(Y);if(G&&Q){if(Y._def.typeName==="ZodOptional")Y=Y._def.innerType;if(!Y.isNullable())Y=Y.nullable();G=!1}let z=c(Y._def,{...v,currentPath:[...v.currentPath,"properties",X],propertyPath:[...v.currentPath,"properties",X]});if(z===void 0)continue;if(P.properties[X]=z,!G)h.push(X)}if(h.length)P.required=h;let J=Kw(f,v);if(J!==void 0)P.additionalProperties=J;return P}function Kw(f,v){if(f.catchall._def.typeName!=="ZodNever")return c(f.catchall._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]});switch(f.unknownKeys){case"passthrough":return v.allowedAdditionalProperties;case"strict":return v.rejectedAdditionalProperties;case"strip":return v.removeAdditionalStrategy==="strict"?v.allowedAdditionalProperties:v.rejectedAdditionalProperties}}function $w(f){try{return f.isOptional()}catch{return!0}}var nW=(f,v)=>{if(v.currentPath.toString()===v.propertyPath?.toString())return c(f.innerType._def,v);let Q=c(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","1"]});return Q?{anyOf:[{not:zv(v)},Q]}:zv(v)};var cW=(f,v)=>{if(v.pipeStrategy==="input")return c(f.in._def,v);else if(v.pipeStrategy==="output")return c(f.out._def,v);let Q=c(f.in._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),P=c(f.out._def,{...v,currentPath:[...v.currentPath,"allOf",Q?"1":"0"]});return{allOf:[Q,P].filter((h)=>h!==void 0)}};function pW(f,v){return c(f.type._def,v)}function iW(f,v){let P={type:"array",uniqueItems:!0,items:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"items"]})};if(f.minSize)vv(P,"minItems",f.minSize.value,f.minSize.message,v);if(f.maxSize)vv(P,"maxItems",f.maxSize.value,f.maxSize.message,v);return P}function dW(f,v){if(f.rest)return{type:"array",minItems:f.items.length,items:f.items.map((Q,P)=>c(Q._def,{...v,currentPath:[...v.currentPath,"items",`${P}`]})).reduce((Q,P)=>P===void 0?Q:[...Q,P],[]),additionalItems:c(f.rest._def,{...v,currentPath:[...v.currentPath,"additionalItems"]})};else return{type:"array",minItems:f.items.length,maxItems:f.items.length,items:f.items.map((Q,P)=>c(Q._def,{...v,currentPath:[...v.currentPath,"items",`${P}`]})).reduce((Q,P)=>P===void 0?Q:[...Q,P],[])}}function oW(f){return{not:zv(f)}}function sW(f){return zv(f)}var tW=(f,v)=>{return c(f.innerType._def,v)};var eW=(f,v,Q)=>{switch(v){case j.ZodString:return V0(f,Q);case j.ZodNumber:return aW(f,Q);case j.ZodObject:return mW(f,Q);case j.ZodBigInt:return AW(f,Q);case j.ZodBoolean:return jW();case j.ZodDate:return Lh(f,Q);case j.ZodUndefined:return oW(Q);case j.ZodNull:return ZW(Q);case j.ZodArray:return FW(f,Q);case j.ZodUnion:case j.ZodDiscriminatedUnion:return xW(f,Q);case j.ZodIntersection:return _W(f,Q);case j.ZodTuple:return dW(f,Q);case j.ZodRecord:return U0(f,Q);case j.ZodLiteral:return yW(f,Q);case j.ZodEnum:return gW(f);case j.ZodNativeEnum:return IW(f);case j.ZodNullable:return uW(f,Q);case j.ZodOptional:return nW(f,Q);case j.ZodMap:return rW(f,Q);case j.ZodSet:return iW(f,Q);case j.ZodLazy:return()=>f.getter()._def;case j.ZodPromise:return pW(f,Q);case j.ZodNaN:case j.ZodNever:return CW(Q);case j.ZodEffects:return RW(f,Q);case j.ZodAny:return zv(Q);case j.ZodUnknown:return sW(Q);case j.ZodDefault:return SW(f,Q);case j.ZodBranded:return L0(f,Q);case j.ZodReadonly:return tW(f,Q);case j.ZodCatch:return bW(f,Q);case j.ZodPipeline:return cW(f,Q);case j.ZodFunction:case j.ZodVoid:case j.ZodSymbol:return;default:return((P)=>{return})(v)}};function c(f,v,Q=!1){let P=v.seen.get(f);if(v.override){let X=v.override?.(f,v,P,Q);if(X!==VW)return X}if(P&&!Q){let X=Ew(P,v);if(X!==void 0)return X}let h={def:f,path:v.currentPath,jsonSchema:void 0};v.seen.set(f,h);let W=eW(f,f.typeName,v),J=typeof W==="function"?c(W(),v):W;if(J)Mw(f,v,J);if(v.postProcess){let X=v.postProcess(J,f,v);return h.jsonSchema=J,X}return h.jsonSchema=J,J}var Ew=(f,v)=>{switch(v.$refStrategy){case"root":return{$ref:f.path.join("/")};case"relative":return{$ref:O0(v.currentPath,f.path)};case"none":case"seen":{if(f.path.length<v.currentPath.length&&f.path.every((Q,P)=>v.currentPath[P]===Q))return console.warn(`Recursive reference detected at ${v.currentPath.join("/")}! Defaulting to any`),zv(v);return v.$refStrategy==="seen"?zv(v):void 0}}},Mw=(f,v,Q)=>{if(f.description){if(Q.description=f.description,v.markdownDescription)Q.markdownDescription=f.description}return Q};var N0=(f,v)=>{let Q=NW(v),P=typeof v==="object"&&v.definitions?Object.entries(v.definitions).reduce((Y,[G,z])=>({...Y,[G]:c(z._def,{...Q,currentPath:[...Q.basePath,Q.definitionPath,G]},!0)??zv(Q)}),{}):void 0,h=typeof v==="string"?v:v?.nameStrategy==="title"?void 0:v?.name,W=c(f._def,h===void 0?Q:{...Q,currentPath:[...Q.basePath,Q.definitionPath,h]},!1)??zv(Q),J=typeof v==="object"&&v.name!==void 0&&v.nameStrategy==="title"?v.name:void 0;if(J!==void 0)W.title=J;if(Q.flags.hasReferencedOpenAiAnyType){if(!P)P={};if(!P[Q.openAiAnyTypeName])P[Q.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:Q.$refStrategy==="relative"?"1":[...Q.basePath,Q.definitionPath,Q.openAiAnyTypeName].join("/")}}}let X=h===void 0?P?{...W,[Q.definitionPath]:P}:W:{$ref:[...Q.$refStrategy==="relative"?[]:Q.basePath,Q.definitionPath,h].join("/"),[Q.definitionPath]:{...P,[h]:W}};if(Q.target==="jsonSchema7")X.$schema="http://json-schema.org/draft-07/schema#";else if(Q.target==="jsonSchema2019-09"||Q.target==="openAi")X.$schema="https://json-schema.org/draft/2019-09/schema#";if(Q.target==="openAi"&&(("anyOf"in X)||("oneOf"in X)||("allOf"in X)||("type"in X)&&Array.isArray(X.type)))console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.");return X};var Nh;(function(f){f.Completable="McpCompletable"})(Nh||(Nh={}));class g1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f),Q=v.data;return this._def.type._parse({data:Q,path:v.path,parent:v})}unwrap(){return this._def.type}}g1.create=(f,v)=>{return new g1({type:f,typeName:Nh.Completable,complete:v.complete,...Ow(v)})};function Ow(f){if(!f)return{};let{errorMap:v,invalid_type_error:Q,required_error:P,description:h}=f;if(v&&(Q||P))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:h};return{errorMap:(J,X)=>{var Y,G;let{message:z}=f;if(J.code==="invalid_enum_value")return{message:z!==null&&z!==void 0?z:X.defaultError};if(typeof X.data>"u")return{message:(Y=z!==null&&z!==void 0?z:P)!==null&&Y!==void 0?Y:X.defaultError};if(J.code!=="invalid_type")return{message:X.defaultError};return{message:(G=z!==null&&z!==void 0?z:Q)!==null&&G!==void 0?G:X.defaultError}},description:h}}class Fh{constructor(f,v){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Mh(f,v)}async connect(f){return await this.server.connect(f)}async close(){await this.server.close()}setToolRequestHandlers(){if(this._toolHandlersInitialized)return;this.server.assertCanSetRequestHandler(v0.shape.method.value),this.server.assertCanSetRequestHandler(f0.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(v0,()=>({tools:Object.entries(this._registeredTools).filter(([,f])=>f.enabled).map(([f,v])=>{let Q={name:f,title:v.title,description:v.description,inputSchema:v.inputSchema?N0(v.inputSchema,{strictUnions:!0}):Lw,annotations:v.annotations,_meta:v._meta};if(v.outputSchema)Q.outputSchema=N0(v.outputSchema,{strictUnions:!0});return Q})})),this.server.setRequestHandler(f0,async(f,v)=>{let Q=this._registeredTools[f.params.name];if(!Q)throw new Gv(lv.InvalidParams,`Tool ${f.params.name} not found`);if(!Q.enabled)throw new Gv(lv.InvalidParams,`Tool ${f.params.name} disabled`);let P;if(Q.inputSchema){let h=await Q.inputSchema.safeParseAsync(f.params.arguments);if(!h.success)throw new Gv(lv.InvalidParams,`Invalid arguments for tool ${f.params.name}: ${h.error.message}`);let W=h.data,J=Q.callback;try{P=await Promise.resolve(J(W,v))}catch(X){P={content:[{type:"text",text:X instanceof Error?X.message:String(X)}],isError:!0}}}else{let h=Q.callback;try{P=await Promise.resolve(h(v))}catch(W){P={content:[{type:"text",text:W instanceof Error?W.message:String(W)}],isError:!0}}}if(Q.outputSchema&&!P.isError){if(!P.structuredContent)throw new Gv(lv.InvalidParams,`Tool ${f.params.name} has an output schema but no structured content was provided`);let h=await Q.outputSchema.safeParseAsync(P.structuredContent);if(!h.success)throw new Gv(lv.InvalidParams,`Invalid structured content for tool ${f.params.name}: ${h.error.message}`)}return P}),this._toolHandlersInitialized=!0}setCompletionRequestHandler(){if(this._completionHandlerInitialized)return;this.server.assertCanSetRequestHandler(h0.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(h0,async(f)=>{switch(f.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(f,f.params.ref);case"ref/resource":return this.handleResourceCompletion(f,f.params.ref);default:throw new Gv(lv.InvalidParams,`Invalid completion reference: ${f.params.ref}`)}}),this._completionHandlerInitialized=!0}async handlePromptCompletion(f,v){let Q=this._registeredPrompts[v.name];if(!Q)throw new Gv(lv.InvalidParams,`Prompt ${v.name} not found`);if(!Q.enabled)throw new Gv(lv.InvalidParams,`Prompt ${v.name} disabled`);if(!Q.argsSchema)return F0;let P=Q.argsSchema.shape[f.params.argument.name];if(!(P instanceof g1))return F0;let W=await P._def.complete(f.params.argument.value,f.params.context);return f9(W)}async handleResourceCompletion(f,v){let Q=Object.values(this._registeredResourceTemplates).find((W)=>W.resourceTemplate.uriTemplate.toString()===v.uri);if(!Q){if(this._registeredResources[v.uri])return F0;throw new Gv(lv.InvalidParams,`Resource template ${f.params.ref.uri} not found`)}let P=Q.resourceTemplate.completeCallback(f.params.argument.name);if(!P)return F0;let h=await P(f.params.argument.value,f.params.context);return f9(h)}setResourceRequestHandlers(){if(this._resourceHandlersInitialized)return;this.server.assertCanSetRequestHandler(d1.shape.method.value),this.server.assertCanSetRequestHandler(o1.shape.method.value),this.server.assertCanSetRequestHandler(s1.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(d1,async(f,v)=>{let Q=Object.entries(this._registeredResources).filter(([h,W])=>W.enabled).map(([h,W])=>({uri:h,name:W.name,...W.metadata})),P=[];for(let h of Object.values(this._registeredResourceTemplates)){if(!h.resourceTemplate.listCallback)continue;let W=await h.resourceTemplate.listCallback(v);for(let J of W.resources)P.push({...h.metadata,...J})}return{resources:[...Q,...P]}}),this.server.setRequestHandler(o1,async()=>{return{resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([v,Q])=>({name:v,uriTemplate:Q.resourceTemplate.uriTemplate.toString(),...Q.metadata}))}}),this.server.setRequestHandler(s1,async(f,v)=>{let Q=new URL(f.params.uri),P=this._registeredResources[Q.toString()];if(P){if(!P.enabled)throw new Gv(lv.InvalidParams,`Resource ${Q} disabled`);return P.readCallback(Q,v)}for(let h of Object.values(this._registeredResourceTemplates)){let W=h.resourceTemplate.uriTemplate.match(Q.toString());if(W)return h.readCallback(Q,W,v)}throw new Gv(lv.InvalidParams,`Resource ${Q} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0}setPromptRequestHandlers(){if(this._promptHandlersInitialized)return;this.server.assertCanSetRequestHandler(t1.shape.method.value),this.server.assertCanSetRequestHandler(e1.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(t1,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,f])=>f.enabled).map(([f,v])=>{return{name:f,title:v.title,description:v.description,arguments:v.argsSchema?Uw(v.argsSchema):void 0}})})),this.server.setRequestHandler(e1,async(f,v)=>{let Q=this._registeredPrompts[f.params.name];if(!Q)throw new Gv(lv.InvalidParams,`Prompt ${f.params.name} not found`);if(!Q.enabled)throw new Gv(lv.InvalidParams,`Prompt ${f.params.name} disabled`);if(Q.argsSchema){let P=await Q.argsSchema.safeParseAsync(f.params.arguments);if(!P.success)throw new Gv(lv.InvalidParams,`Invalid arguments for prompt ${f.params.name}: ${P.error.message}`);let h=P.data,W=Q.callback;return await Promise.resolve(W(h,v))}else{let P=Q.callback;return await Promise.resolve(P(v))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0}resource(f,v,...Q){let P;if(typeof Q[0]==="object")P=Q.shift();let h=Q[0];if(typeof v==="string"){if(this._registeredResources[v])throw Error(`Resource ${v} is already registered`);let W=this._createRegisteredResource(f,void 0,v,P,h);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),W}else{if(this._registeredResourceTemplates[f])throw Error(`Resource template ${f} is already registered`);let W=this._createRegisteredResourceTemplate(f,void 0,v,P,h);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),W}}registerResource(f,v,Q,P){if(typeof v==="string"){if(this._registeredResources[v])throw Error(`Resource ${v} is already registered`);let h=this._createRegisteredResource(f,Q.title,v,Q,P);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),h}else{if(this._registeredResourceTemplates[f])throw Error(`Resource template ${f} is already registered`);let h=this._createRegisteredResourceTemplate(f,Q.title,v,Q,P);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),h}}_createRegisteredResource(f,v,Q,P,h){let W={name:f,title:v,metadata:P,readCallback:h,enabled:!0,disable:()=>W.update({enabled:!1}),enable:()=>W.update({enabled:!0}),remove:()=>W.update({uri:null}),update:(J)=>{if(typeof J.uri<"u"&&J.uri!==Q){if(delete this._registeredResources[Q],J.uri)this._registeredResources[J.uri]=W}if(typeof J.name<"u")W.name=J.name;if(typeof J.title<"u")W.title=J.title;if(typeof J.metadata<"u")W.metadata=J.metadata;if(typeof J.callback<"u")W.readCallback=J.callback;if(typeof J.enabled<"u")W.enabled=J.enabled;this.sendResourceListChanged()}};return this._registeredResources[Q]=W,W}_createRegisteredResourceTemplate(f,v,Q,P,h){let W={resourceTemplate:Q,title:v,metadata:P,readCallback:h,enabled:!0,disable:()=>W.update({enabled:!1}),enable:()=>W.update({enabled:!0}),remove:()=>W.update({name:null}),update:(J)=>{if(typeof J.name<"u"&&J.name!==f){if(delete this._registeredResourceTemplates[f],J.name)this._registeredResourceTemplates[J.name]=W}if(typeof J.title<"u")W.title=J.title;if(typeof J.template<"u")W.resourceTemplate=J.template;if(typeof J.metadata<"u")W.metadata=J.metadata;if(typeof J.callback<"u")W.readCallback=J.callback;if(typeof J.enabled<"u")W.enabled=J.enabled;this.sendResourceListChanged()}};return this._registeredResourceTemplates[f]=W,W}_createRegisteredPrompt(f,v,Q,P,h){let W={title:v,description:Q,argsSchema:P===void 0?void 0:w.object(P),callback:h,enabled:!0,disable:()=>W.update({enabled:!1}),enable:()=>W.update({enabled:!0}),remove:()=>W.update({name:null}),update:(J)=>{if(typeof J.name<"u"&&J.name!==f){if(delete this._registeredPrompts[f],J.name)this._registeredPrompts[J.name]=W}if(typeof J.title<"u")W.title=J.title;if(typeof J.description<"u")W.description=J.description;if(typeof J.argsSchema<"u")W.argsSchema=w.object(J.argsSchema);if(typeof J.callback<"u")W.callback=J.callback;if(typeof J.enabled<"u")W.enabled=J.enabled;this.sendPromptListChanged()}};return this._registeredPrompts[f]=W,W}_createRegisteredTool(f,v,Q,P,h,W,J,X){let Y={title:v,description:Q,inputSchema:P===void 0?void 0:w.object(P),outputSchema:h===void 0?void 0:w.object(h),annotations:W,_meta:J,callback:X,enabled:!0,disable:()=>Y.update({enabled:!1}),enable:()=>Y.update({enabled:!0}),remove:()=>Y.update({name:null}),update:(G)=>{if(typeof G.name<"u"&&G.name!==f){if(delete this._registeredTools[f],G.name)this._registeredTools[G.name]=Y}if(typeof G.title<"u")Y.title=G.title;if(typeof G.description<"u")Y.description=G.description;if(typeof G.paramsSchema<"u")Y.inputSchema=w.object(G.paramsSchema);if(typeof G.callback<"u")Y.callback=G.callback;if(typeof G.annotations<"u")Y.annotations=G.annotations;if(typeof G._meta<"u")Y._meta=G._meta;if(typeof G.enabled<"u")Y.enabled=G.enabled;this.sendToolListChanged()}};return this._registeredTools[f]=Y,this.setToolRequestHandlers(),this.sendToolListChanged(),Y}tool(f,...v){if(this._registeredTools[f])throw Error(`Tool ${f} is already registered`);let Q,P,h,W;if(typeof v[0]==="string")Q=v.shift();if(v.length>1){let X=v[0];if(v9(X)){if(P=v.shift(),v.length>1&&typeof v[0]==="object"&&v[0]!==null&&!v9(v[0]))W=v.shift()}else if(typeof X==="object"&&X!==null)W=v.shift()}let J=v[0];return this._createRegisteredTool(f,void 0,Q,P,h,W,void 0,J)}registerTool(f,v,Q){if(this._registeredTools[f])throw Error(`Tool ${f} is already registered`);let{title:P,description:h,inputSchema:W,outputSchema:J,annotations:X,_meta:Y}=v;return this._createRegisteredTool(f,P,h,W,J,X,Y,Q)}prompt(f,...v){if(this._registeredPrompts[f])throw Error(`Prompt ${f} is already registered`);let Q;if(typeof v[0]==="string")Q=v.shift();let P;if(v.length>1)P=v.shift();let h=v[0],W=this._createRegisteredPrompt(f,void 0,Q,P,h);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),W}registerPrompt(f,v,Q){if(this._registeredPrompts[f])throw Error(`Prompt ${f} is already registered`);let{title:P,description:h,argsSchema:W}=v,J=this._createRegisteredPrompt(f,P,h,W,Q);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),J}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(f,v){return this.server.sendLoggingMessage(f,v)}sendResourceListChanged(){if(this.isConnected())this.server.sendResourceListChanged()}sendToolListChanged(){if(this.isConnected())this.server.sendToolListChanged()}sendPromptListChanged(){if(this.isConnected())this.server.sendPromptListChanged()}}var Lw={type:"object",properties:{}};function v9(f){if(typeof f!=="object"||f===null)return!1;return Object.keys(f).length===0||Object.values(f).some(Vw)}function Vw(f){return f!==null&&typeof f==="object"&&"parse"in f&&typeof f.parse==="function"&&"safeParse"in f&&typeof f.safeParse==="function"}function Uw(f){return Object.entries(f.shape).map(([v,Q])=>({name:v,description:Q.description,required:!Q.isOptional()}))}function f9(f){return{completion:{values:f.slice(0,100),total:f.length,hasMore:f.length>100}}}var F0={completion:{values:[],hasMore:!1}};import Q9 from"node:process";class Ah{append(f){this._buffer=this._buffer?Buffer.concat([this._buffer,f]):f}readMessage(){if(!this._buffer)return null;let f=this._buffer.indexOf(`
`);if(f===-1)return null;let v=this._buffer.toString("utf8",0,f).replace(/\r$/,"");return this._buffer=this._buffer.subarray(f+1),Nw(v)}clear(){this._buffer=void 0}}function Nw(f){return BQ.parse(JSON.parse(f))}function h9(f){return JSON.stringify(f)+`
`}class jh{constructor(f=Q9.stdin,v=Q9.stdout){this._stdin=f,this._stdout=v,this._readBuffer=new Ah,this._started=!1,this._ondata=(Q)=>{this._readBuffer.append(Q),this.processReadBuffer()},this._onerror=(Q)=>{var P;(P=this.onerror)===null||P===void 0||P.call(this,Q)}}async start(){if(this._started)throw Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){var f,v;while(!0)try{let Q=this._readBuffer.readMessage();if(Q===null)break;(f=this.onmessage)===null||f===void 0||f.call(this,Q)}catch(Q){(v=this.onerror)===null||v===void 0||v.call(this,Q)}}async close(){var f;if(this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0)this._stdin.pause();this._readBuffer.clear(),(f=this.onclose)===null||f===void 0||f.call(this)}send(f){return new Promise((v)=>{let Q=h9(f);if(this._stdout.write(Q))v();else this._stdout.once("drain",v)})}}function Fw(f){f.registerTool("codebase_search",{description:`Search project source files, documentation, and code. Use this to find implementations, functions, classes, or any code-related content.

**IMPORTANT: Use this tool PROACTIVELY before starting work, not reactively when stuck.**

This tool searches across all codebase files and returns the most relevant matches with content snippets.

When to use this tool (BEFORE starting work):
- **Before implementation**: Find existing patterns, similar functions, or reusable components
- **Before refactoring**: Understand current implementation and dependencies
- **Before adding features**: Check for existing similar functionality or conflicting code
- **Before debugging**: Search for error messages, function names, or related code
- **Before writing tests**: Find existing test patterns and test utilities

The search includes:
- Source code files (.ts, .js, .tsx, .jsx, etc.)
- Configuration files (.json, .yaml, .toml, etc.)
- Documentation files (.md, .txt, etc.)
- Build and deployment files

**Best Practice**: Search the codebase BEFORE writing new code to avoid duplication and follow existing patterns.`,inputSchema:{query:w.string().describe("Search query - use natural language, function names, or technical terms"),limit:w.number().default(10).optional().describe("Maximum number of results to return (default: 10)"),include_content:w.boolean().default(!0).optional().describe("Include file content snippets in results (default: true)"),file_extensions:w.array(w.string()).optional().describe('Filter by file extensions (e.g., [".ts", ".tsx", ".js"])'),path_filter:w.string().optional().describe('Filter by path pattern (e.g., "src/components", "tests", "docs")'),exclude_paths:w.array(w.string()).optional().describe('Exclude paths containing these patterns (e.g., ["node_modules", ".git", "dist"])')}},async({query:v,limit:Q=10,include_content:P=!0,file_extensions:h,path_filter:W,exclude_paths:J})=>{try{await uv.initialize();let X=await uv.searchCodebase(v,{limit:Q,include_content:P,file_extensions:h,path_filter:W,exclude_paths:J});return uv.formatResultsForMCP(X.results,v,X.totalIndexed)}catch(X){return{content:[{type:"text",text:` Codebase search error: ${X.message}`}]}}})}function P9(f){Fw(f)}function jw(f){f.registerTool("knowledge_search",{description:`Search knowledge base, documentation, guides, and reference materials. Use this for domain knowledge, best practices, setup instructions, and conceptual information.

**IMPORTANT: Use this tool PROACTIVELY before starting work, not reactively when stuck.**

This tool searches across all knowledge resources and returns the most relevant matches. Use include_content=false to reduce context usage, then use knowledge_get for specific documents.

When to use this tool (BEFORE starting work):
- **Before research/clarification**: Check relevant stack/universal knowledge to understand domain constraints
- **Before design/architecture**: Review architecture patterns, security, and performance best practices
- **Before implementation**: Consult framework-specific patterns, common pitfalls, and best practices
- **Before testing/QA**: Review testing strategies, coverage requirements, and quality standards
- **Before deployment**: Check deployment patterns, infrastructure, and monitoring guidance

Available knowledge categories:
- **stacks**: Framework-specific patterns (React, Next.js, Node.js)
- **data**: Database patterns (SQL, indexing, migrations)
- **guides**: Architecture guidance (SaaS, tech stack, UI/UX)
- **universal**: Cross-cutting concerns (security, performance, testing, deployment)

The knowledge is curated for LLM code generation - includes decision trees, common bugs, and practical patterns.

**Best Practice**: Check relevant knowledge BEFORE making decisions or writing code, not after encountering issues.`,inputSchema:{query:w.string().describe("Search query - use natural language, technology names, or topic keywords"),limit:w.number().default(10).optional().describe("Maximum number of results to return (default: 10)"),include_content:w.boolean().default(!0).optional().describe("Include full content in results (default: true). Use false to reduce context, then knowledge_get for specific docs")}},async({query:v,limit:Q=10,include_content:P=!0})=>{try{await uv.initialize();let h=await uv.getStatus();if(h.knowledge.isIndexing)return{content:[{type:"text",text:` **Knowledge Indexing in Progress**

- Progress: ${h.knowledge.progress||0}%
- Status: Building search index

*This typically takes <1 second for knowledge base.*

**Please wait a moment and try again.**`}]};if(!h.knowledge.indexed)return{content:[{type:"text",text:`\uD83D\uDCED **No Knowledge Documents Available**

The knowledge base appears to be empty or not properly initialized.

**To fix:**
- Check if knowledge files exist in assets/knowledge/
- Try restarting the MCP server to trigger indexing
- Use CLI: \`sylphx search status\` for diagnostics

**Expected knowledge files:**
- stacks/ (framework-specific patterns)
- guides/ (architecture guidance)
- universal/ (cross-cutting concerns)
- data/ (database patterns)`}]};let W=await uv.searchKnowledge(v,{limit:Q,include_content:P});return uv.formatResultsForMCP(W.results,v,W.totalIndexed)}catch(h){return{content:[{type:"text",text:` Knowledge search error: ${h.message}`}]}}})}function bw(f){f.registerTool("knowledge_get",{description:`Get knowledge resource by exact URI.

**NOTE: Prefer using 'knowledge_search' with include_content=false first, then use this tool for specific documents.**

This tool retrieves a specific knowledge resource when you already know its exact URI from search results.

The available URIs are dynamically generated from the indexed knowledge base. Use 'knowledge_search' to discover relevant URIs first.`,inputSchema:{uri:w.string().describe('Knowledge URI to access (e.g., "knowledge://stacks/react-app")')}},async({uri:v})=>{try{let{getKnowledgeContent:Q}=await import("./knowledge-resources-zfrpabr9.js");return{content:[{type:"text",text:Q(v)}]}}catch(Q){let P=Q instanceof Error?Q.message:String(Q),h=await uv.getAvailableKnowledgeURIs(),W=h.length>0?h.map((J)=>` ${J}`).join(`
`):"No knowledge documents available";return{content:[{type:"text",text:` Error: ${P}

Available knowledge URIs:
${W}`}],isError:!0}}})}function W9(f){jw(f),bw(f)}var xf=new J9,Cv={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};async function Sw(f){try{let{key:v,value:Q,namespace:P="default"}=f,h=JSON.parse(Q);return await xf.set(v,h,P),Cv.info(`Stored memory: ${P}:${v}`),{content:[{type:"text",text:` Stored memory: ${P}:${v}`}]}}catch(v){let Q=v instanceof Error?v.message:String(v);return Cv.error("Error storing memory",v),{content:[{type:"text",text:` Error storing memory: ${Q}`}],isError:!0}}}async function Rw(f){try{let{key:v,namespace:Q="default"}=f,P=await xf.get(v,Q);if(!P)return{content:[{type:"text",text:` Memory not found: ${Q}:${v}`}],isError:!0};let h=Date.now()-P.timestamp;return Cv.info(`Retrieved memory: ${Q}:${v}`),{content:[{type:"text",text:JSON.stringify({key:`${Q}:${v}`,value:P.value,namespace:P.namespace,timestamp:P.timestamp,created_at:P.created_at,updated_at:P.updated_at,age_seconds:Math.floor(h/1000)},null,2)}]}}catch(v){let Q=v instanceof Error?v.message:String(v);return Cv.error("Error retrieving memory",v),{content:[{type:"text",text:` Error retrieving memory: ${Q}`}],isError:!0}}}async function gw(f){try{let{pattern:v,namespace:Q}=f,h=(await xf.getAll()).filter((W)=>{let J=W.key.toLowerCase().includes(v.toLowerCase())||W.namespace.toLowerCase().includes(v.toLowerCase())||JSON.stringify(W.value).toLowerCase().includes(v.toLowerCase()),X=!Q||W.namespace===Q;return J&&X});return Cv.info(`Searched memory: "${v}" (${h.length} results)`),{content:[{type:"text",text:JSON.stringify({pattern:v,namespace:Q||"all",count:h.length,results:h.map((W)=>({key:W.key,namespace:W.namespace,value:W.value,timestamp:W.timestamp,updated_at:W.updated_at}))},null,2)}]}}catch(v){let Q=v instanceof Error?v.message:String(v);return Cv.error("Error searching memory",v),{content:[{type:"text",text:` Error searching memory: ${Q}`}],isError:!0}}}async function _w(f){try{let{namespace:v}=f,Q=await xf.getAll();return Cv.info(`Listed memory: ${Q.length} entries`),{content:[{type:"text",text:JSON.stringify({namespace:v||"all",count:Q.length,entries:Q.map((P)=>({key:P.key,namespace:P.namespace,value:P.value,timestamp:P.timestamp,updated_at:P.updated_at}))},null,2)}]}}catch(v){let Q=v instanceof Error?v.message:String(v);return Cv.error("Error listing memory",v),{content:[{type:"text",text:` Error listing memory: ${Q}`}],isError:!0}}}async function yw(f){try{let{key:v,namespace:Q="default"}=f;if(!await xf.delete(v,Q))return{content:[{type:"text",text:` Memory not found: ${Q}:${v}`}],isError:!0};return Cv.info(`Deleted memory: ${Q}:${v}`),{content:[{type:"text",text:` Deleted memory: ${Q}:${v}`}]}}catch(v){let Q=v instanceof Error?v.message:String(v);return Cv.error("Error deleting memory",v),{content:[{type:"text",text:` Error deleting memory: ${Q}`}],isError:!0}}}async function kw(f){try{let{namespace:v}=f;return await xf.clear(v),Cv.info(`Cleared memory: ${v||"all"}`),{content:[{type:"text",text:` Cleared memory: ${v||"all namespaces"}`}]}}catch(v){let Q=v instanceof Error?v.message:String(v);return Cv.error("Error clearing memory",v),{content:[{type:"text",text:` Error clearing memory: ${Q}`}],isError:!0}}}async function rw(){try{let f=await xf.getStats();return Cv.info("Retrieved memory stats"),{content:[{type:"text",text:JSON.stringify({total_entries:f.totalEntries,namespaces:f.namespaces,oldest_entry:f.oldestEntry,newest_entry:f.newestEntry,database_path:".sylphx-flow/memory.db"},null,2)}]}}catch(f){let v=f instanceof Error?f.message:String(f);return Cv.error("Error getting memory stats",f),{content:[{type:"text",text:` Error getting memory stats: ${v}`}],isError:!0}}}function w9(f){f.registerTool("memory_set",{description:"Store a value in persistent memory for agent coordination",inputSchema:{key:w.string().describe("Memory key (e.g., 'swarm/coder/status')"),value:w.string().describe("Value to store (will be JSON stringified)"),namespace:w.string().optional().describe("Optional namespace for organization")}},Sw),f.registerTool("memory_get",{description:"Retrieve a value from persistent memory",inputSchema:{key:w.string().describe("Memory key to retrieve"),namespace:w.string().optional().describe("Optional namespace")}},Rw),f.registerTool("memory_search",{description:"Search memory entries by pattern",inputSchema:{pattern:w.string().describe("Search pattern (matches keys, namespaces, and values)"),namespace:w.string().optional().describe("Optional namespace to limit search")}},gw),f.registerTool("memory_list",{description:"List all memory entries",inputSchema:{namespace:w.string().optional().describe("Optional namespace to filter by")}},_w),f.registerTool("memory_delete",{description:"Delete a memory entry",inputSchema:{key:w.string().describe("Memory key to delete"),namespace:w.string().optional().describe("Optional namespace")}},yw),f.registerTool("memory_clear",{description:"Clear memory entries",inputSchema:{namespace:w.string().optional().describe("Optional namespace to clear (omits to clear all)")}},kw),f.registerTool("memory_stats",{description:"Get memory storage statistics",inputSchema:{}},rw)}import{execSync as Cw}from"node:child_process";import{existsSync as Zw,mkdirSync as Tw,writeFileSync as xw}from"node:fs";import{join as B9}from"node:path";import{readFileSync as X9,writeFileSync as Iw}from"node:fs";import{join as Y9}from"node:path";class bh{templatesDir;mode;constructor(f,v="coordinator"){this.templatesDir=f,this.mode=v}loadTemplate(f){if(["spec","plan","validation","reviews"].includes(f)){let P=Y9(this.templatesDir,"shared",`${f}-template.md`);return X9(P,"utf8")}let Q=Y9(this.templatesDir,this.mode,`${f}-template.md`);return X9(Q,"utf8")}replaceVariables(f,v){let Q=f;for(let[P,h]of Object.entries(v)){let W=new RegExp(`{{${P}}}`,"g");Q=Q.replace(W,String(h))}return Q=Q.replace(/{{#if (\w+)}}([\s\S]*?){{\/if}}/g,(P,h,W)=>{let J=v[h];return J&&J!=="false"&&J!=="0"&&J!==""?W:""}),Q=Q.replace(/{{#each (\w+)}}([\s\S]*?){{\/each}}/g,(P,h,W)=>{let J=v[h];if(!Array.isArray(J))return"";return J.map((X,Y)=>{let G=W;return G=G.replace(/{{this}}/g,String(X)),G=G.replace(/{{@index}}/g,String(Y)),G}).join(`
`)}),Q}generateTemplate(f,v){let Q=this.loadTemplate(f);return this.replaceVariables(Q,v)}createFile(f,v,Q){let P=this.generateTemplate(f,v);Iw(Q,P,"utf8")}generateAllProjectTemplates(f){let v={},Q=["spec","progress","plan","tasks","validation","reviews"];for(let P of Q)v[P]=this.generateTemplate(P,f);return v}}var Af={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};function uw(){let v="";for(let Q=0;Q<8;Q++)v+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(Math.random()*36));return`-${v}`}function aw(f,v){return`${{feature:"feat",bugfix:"fix",hotfix:"fix",refactor:"refactor",migration:"feat"}[f]||"feat"}(${f}): initialize ${v} workspace and comprehensive templates`}function mw(f,v){let Q={feature:`New feature implementation for ${v}`,bugfix:`Bug fix for ${v} issue`,hotfix:`Critical hotfix for ${v}`,refactor:`Code refactoring for ${v}`,migration:`Migration project for ${v}`},P={feature:["Define feature specifications","Implement core functionality","Write comprehensive tests","Update documentation","Code review and validation"],bugfix:["Identify root cause","Implement fix","Add regression tests","Verify fix resolves issue","Update documentation if needed"],hotfix:["Implement immediate fix","Test critical path","Deploy hotfix","Schedule proper fix follow-up"],refactor:["Analyze current code structure","Plan refactoring approach","Implement refactored code","Ensure all tests pass","Update documentation"],migration:["Analyze current system","Plan migration strategy","Implement migration code","Test migration process","Deploy and verify"]},h={feature:`Successfully implement the ${v} feature with full functionality and testing`,bugfix:`Resolve the ${v} issue completely and prevent recurrence`,hotfix:`Quickly address critical ${v} issue to restore system stability`,refactor:`Improve code quality and maintainability for ${v}`,migration:`Successfully migrate ${v} to new system with minimal disruption`},W={feature:"Implementation of new feature including frontend, backend, tests, and documentation",bugfix:"Fix for specific issue including root cause analysis and prevention measures",hotfix:"Minimal change to address critical issue with immediate deployment",refactor:"Code structure improvements without changing external behavior",migration:"Complete migration of existing functionality to new system or platform"};return{description:Q[f]||`Project for ${v}`,requirements:P[f]||["Define requirements","Implement solution","Test and validate"],objective:h[f]||`Complete ${v} project successfully`,scope:W[f]||"Project scope to be defined"}}function A0(f){try{return{success:!0,output:Cw(f,{encoding:"utf8",cwd:process.cwd()}).trim(),error:""}}catch(v){return{success:!1,output:"",error:v instanceof Error?v.message:"Unknown error"}}}function nw(f){if(!Zw(f))Tw(f,{recursive:!0}),Af.info(`Created directory: ${f}`)}function cw(f,v){xw(f,v,"utf8"),Af.info(`Created file: ${f}`)}function G9(f){f.registerTool("project_startup",{description:"Initialize a new project with comprehensive templates and workspace structure",inputSchema:{project_type:w.enum(["feature","bugfix","hotfix","refactor","migration"]).describe("Type of project"),project_name:w.string().describe("Name of the project (use letters, numbers, hyphens, underscores only)"),create_branch:w.boolean().optional().describe("Whether to create a git branch (default: true)"),mode:w.enum(["coordinator","implementer"]).optional().describe("Execution mode: coordinator (delegation-based) or implementer (direct execution). Default: coordinator")}},pw)}function pw(f){try{let{project_type:v,project_name:Q,create_branch:P=!0,mode:h="coordinator"}=f,W=mw(v,Q),{description:J,requirements:X,objective:Y,scope:G}=W;if(!/^[a-zA-Z0-9-_]+$/.test(Q))return{content:[{type:"text",text:` Invalid project name: "${Q}". Use only letters, numbers, hyphens, and underscores.`}],isError:!0};let z=uw(),K=`${v}/${Q}${z}`,E=B9("specs",v,`${Q}${z}`),B=new Date().toISOString().split("T")[0];Af.info(`\uD83D\uDE80 Starting project initialization: ${K}`);let D={success:!0,output:"",error:""};if(P){let N=A0("git rev-parse --abbrev-ref HEAD");if(N.success&&N.output!=="main")return{content:[{type:"text",text:` Not on main branch. Current branch: ${N.output}. Please switch to main first.`}],isError:!0};if(D=A0(`git checkout -b ${K}`),!D.success)return{content:[{type:"text",text:` Failed to create branch "${K}": ${D.error}`}],isError:!0};Af.success(` Created and checked out branch: ${K}`)}nw(E);let M={PROJECT_NAME:Q,PROJECT_TYPE:v,DESCRIPTION:J,REQUIREMENTS:X,TIMESTAMP:B,BRANCH_NAME:K,PROJECT_ID:`${Q}${z}`,CURRENT_PHASE:"Phase 1: Requirements Analysis",LAST_UPDATED:new Date().toISOString(),NEXT_ACTION:"Complete requirements specification and proceed to Phase 2",STATUS:"Not Started",PHASE_1_STATUS:"In Progress",PHASE_1_COMPLETE:"0",PHASE_1_UPDATED:new Date().toISOString(),PHASE_1_NOTES:"Starting requirements analysis (0% complete)",PHASE_2_STATUS:"Not Started",PHASE_2_COMPLETE:"0",PHASE_2_UPDATED:new Date().toISOString(),PHASE_2_NOTES:"Awaiting research and clarification",PHASE_3_STATUS:"Not Started",PHASE_3_COMPLETE:"0",PHASE_3_UPDATED:new Date().toISOString(),PHASE_3_NOTES:"Awaiting design phase",PHASE_4_STATUS:"Not Started",PHASE_4_COMPLETE:"0",PHASE_4_UPDATED:new Date().toISOString(),PHASE_4_NOTES:"Awaiting task breakdown",PHASE_5_STATUS:"Not Started",PHASE_5_COMPLETE:"0",PHASE_5_UPDATED:new Date().toISOString(),PHASE_5_NOTES:"Awaiting validation",PHASE_6_STATUS:"Not Started",PHASE_6_COMPLETE:"0",PHASE_6_UPDATED:new Date().toISOString(),PHASE_6_NOTES:"Awaiting implementation",PHASE_7_STATUS:"Not Started",PHASE_7_COMPLETE:"0",PHASE_7_UPDATED:new Date().toISOString(),PHASE_7_NOTES:"Awaiting testing and review",PHASE_8_STATUS:"Not Started",PHASE_8_COMPLETE:"0",PHASE_8_UPDATED:new Date().toISOString(),PHASE_8_NOTES:"Awaiting final merge",OBJECTIVE:Y||`Implement ${Q}`,SCOPE:G||"To be defined",CRITICAL_PATH:"To be defined during task breakdown",PARALLEL_OPPORTUNITIES:"To be identified during planning",RESOURCE_CONFLICTS:"To be resolved during planning",INTEGRATION_POINTS:"To be identified during design",VALIDATED_BY:"To be assigned",VALIDATION_DATE:B,OVERALL_STATUS:"Pending",REVIEW_PERIOD:`${B} onwards`,TOTAL_REVIEWS:"0",QUALITY_SCORE:"0",REVIEW_DATE:B,REVIEWER:"To be assigned",REVIEW_SCOPE:"Full implementation review",IMPLEMENTATION_STATUS:"Not Started",VALIDATOR:"To be assigned",VALIDATION_SCOPE:"Full project validation",REQUIREMENTS_COVERAGE_STATUS:"Pending",ACCEPTANCE_CRITERIA_MAPPED:"Pending",SUCCESS_CRITERIA_MEASURABLE:"Pending",SCOPE_CREEP_PREVENTION:"Pending",ARCHITECTURE_ALIGNMENT:"Pending",INTEGRATION_POINTS_VERIFIED:"Pending",DESIGN_CONFLICTS_RESOLVED:"Pending",TECHNICAL_FEASIBILITY:"Pending",TASK_COMPLETENESS:"Pending",DEPENDENCY_MAPPING_ACCURACY:"Pending",RESOURCE_ALLOCATION_ADEQUATE:"Pending",CRITICAL_PATH_IDENTIFIED:"Pending",TDD_STRATEGY_DEFINED:"Pending",TASK_1_ID:"TASK-001",TASK_1_DESC:"To be defined",TASK_1_STATUS:"Not Started",TASK_1_COMPLETION:"0",TASK_1_DELIVERABLE:"To be defined",TASK_1_QUALITY:"Pending",TASK_2_ID:"TASK-002",TASK_2_DESC:"To be defined",TASK_2_STATUS:"Not Started",TASK_2_COMPLETION:"0",TASK_2_DELIVERABLE:"To be defined",TASK_2_QUALITY:"Pending",TASK_3_ID:"TASK-003",TASK_3_DESC:"To be defined",TASK_3_STATUS:"Not Started",TASK_3_COMPLETION:"0",TASK_3_DELIVERABLE:"To be defined",TASK_3_QUALITY:"Pending",OVERALL_TASK_COMPLETION:"0",ALL_TASKS_COMPLETED:"No",TOTAL_COMMITS:"0",COMMITS_PER_TASK:"0",COMMIT_QUALITY:"Pending",BRANCH_STRATEGY_COMPLIANCE:"Pending"},H=l9(),F=new bh(H,h).generateAllProjectTemplates(M),U=[];for(let[N,S]of Object.entries(F)){let y=B9(E,`${N}.md`);cw(y,S),U.push(`${N}.md`)}if(P){let N=A0("git add ."),S=A0(`git commit -m "${aw(v,Q)}"`);if(!N.success||!S.success)Af.error("Warning: Failed to create initial commit");else Af.success(" Created initial commit with project templates")}return Af.success(` Project "${Q}" initialized successfully!`),{content:[{type:"text",text:JSON.stringify({success:!0,project:{type:v,name:Q,branch:K,workspace:E,description:J,requirements:X,objective:Y,scope:G},setup:{branch_created:P&&D.success,workspace_created:!0,templates_created:U,initial_commit:P},next_steps:[`1. Review and update specs/${v}/${Q}/spec.md with detailed requirements`,"2. Fill in project-specific data in all template files","3. Proceed with Phase 1: SPECIFY & CLARIFY","4. Follow the workflow in progress.md"]},null,2)}]}}catch(v){let Q=v instanceof Error?v.message:String(v);return Af.error("Error in project startup",v),{content:[{type:"text",text:` Error initializing project: ${Q}`}],isError:!0}}}var j0={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};function Sh(f){try{return Intl.DateTimeFormat(void 0,{timeZone:f}),!0}catch{return!1}}function iw(f){return/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(f)}function dw(f){try{let{timezone:v}=f;if(!Sh(v))return{content:[{type:"text",text:` Invalid timezone: ${v}. Please use a valid IANA timezone name (e.g., 'America/New_York', 'Europe/London', 'Asia/Tokyo').`}],isError:!0};let Q=new Date,P=new Intl.DateTimeFormat("en-US",{timeZone:v,year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"long",hour12:!1}),h=P.formatToParts(Q),W={};for(let Y of h)W[Y.type]=Y.value;let J=new Intl.DateTimeFormat("en-US",{timeZone:v,hour:"2-digit",minute:"2-digit",hour12:!1}).format(Q),X=Q.toLocaleString("sv-SE",{timeZone:v});return j0.info(`Retrieved current time for timezone: ${v}`),{content:[{type:"text",text:JSON.stringify({timezone:v,current_time:{date:`${W.month} ${W.day}, ${W.year}`,time_24h:J,time_with_seconds:P.format(Q),timezone_name:W.timeZoneName,iso_format:`${X.replace(" ","T")}Z`,unix_timestamp:Math.floor(Q.getTime()/1000)}},null,2)}]}}catch(v){let Q=v instanceof Error?v.message:String(v);return j0.error("Error getting current time",v),{content:[{type:"text",text:` Error getting current time: ${Q}`}],isError:!0}}}function ow(f){try{let{source_timezone:v,time:Q,target_timezone:P}=f;if(!Sh(v))return{content:[{type:"text",text:` Invalid source timezone: ${v}. Please use a valid IANA timezone name.`}],isError:!0};if(!Sh(P))return{content:[{type:"text",text:` Invalid target timezone: ${P}. Please use a valid IANA timezone name.`}],isError:!0};if(!iw(Q))return{content:[{type:"text",text:` Invalid time format: ${Q}. Please use 24-hour format (HH:MM).`}],isError:!0};let[h,W]=Q.split(":").map(Number),J=new Date,X=new Date(J.getFullYear(),J.getMonth(),J.getDate(),h,W),Y=new Intl.DateTimeFormat("en-US",{timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),G=Y.formatToParts(X),z={};for(let F of G)z[F.type]=F.value;let K=new Intl.DateTimeFormat("en-US",{timeZone:P,year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"long",hour12:!1}),E=new Intl.DateTimeFormat("en-US",{timeZone:P,hour:"2-digit",minute:"2-digit",hour12:!1}).format(X),B=K.formatToParts(X),D={};for(let F of B)D[F.type]=F.value;let H=new Date(X.toLocaleString("en-US",{timeZone:P})).getTime()-X.getTime(),V=Math.round(H/3600000);return j0.info(`Converted time from ${v} to ${P}`),{content:[{type:"text",text:JSON.stringify({conversion:{source:{timezone:v,time:Q,formatted:Y.format(X)},target:{timezone:P,time_24h:E,formatted:K.format(X),date:`${D.month} ${D.day}, ${D.year}`,timezone_name:D.timeZoneName},time_difference_hours:V}},null,2)}]}}catch(v){let Q=v instanceof Error?v.message:String(v);return j0.error("Error converting time",v),{content:[{type:"text",text:` Error converting time: ${Q}`}],isError:!0}}}function q9(f){f.registerTool("get_current_time",{description:"Get current time in a specific timezone or system timezone",inputSchema:{timezone:w.string().describe("IANA timezone name (e.g., 'America/New_York', 'Europe/London')")}},dw),f.registerTool("convert_time",{description:"Convert time between timezones",inputSchema:{source_timezone:w.string().describe("Source IANA timezone name"),time:w.string().describe("Time in 24-hour format (HH:MM)"),target_timezone:w.string().describe("Target IANA timezone name")}},ow)}var b0={name:"sylphx-flow",version:"1.0.0",description:"Sylphx Flow MCP server providing coordination tools for AI agents. Persistent SQLite-based storage with namespace support for agent coordination and state management."},uf={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};function sw(){let f=process.argv.slice(2),v={};if(f.includes("--disable-memory"))v.disableMemory=!0;if(f.includes("--disable-time"))v.disableTime=!0;if(f.includes("--disable-project-startup"))v.disableProjectStartup=!0;if(f.includes("--disable-knowledge"))v.disableKnowledge=!0;if(f.includes("--disable-codebase-search"))v.disableCodebaseSearch=!0;if(f.includes("--enable-memory"))v.disableMemory=!1;if(f.includes("--enable-time"))v.disableTime=!1;if(f.includes("--enable-project-startup"))v.disableProjectStartup=!1;if(f.includes("--enable-knowledge"))v.disableKnowledge=!1;return v}async function M2(f={}){if(Object.keys(f).length===0)f=sw();console.error("Debug: Final config =",f),console.log("\uD83D\uDE80 Starting Sylphx Flow MCP Server..."),console.log("\uD83D\uDCCD Database: .sylphx-flow/memory.db"),console.log("\uD83D\uDD0D Initializing embedding provider...");try{let P=await z9();console.log(` Embedding provider initialized: ${P.name}`),await uv.initialize(),console.log(" Search service initialized with embeddings")}catch(P){console.log("  Failed to initialize embeddings, using TF-IDF only:",P),await uv.initialize()}uf.info(`\uD83D\uDCCB Description: ${b0.description.substring(0,100)}...`);let v=new Fh({name:b0.name,version:b0.version,description:b0.description}),Q=[];if(!f.disableMemory)w9(v),Q.push("memory_set, memory_get, memory_search, memory_list, memory_delete, memory_clear, memory_stats");if(!f.disableTime)q9(v),Q.push("time_get_current, time_format, time_parse");if(!f.disableProjectStartup)G9(v),Q.push("project_startup");if(!f.disableCodebaseSearch)uf.info("\uD83D\uDD0D Registering codebase tools"),P9(v),Q.push("codebase_search"),console.log("\uD83D\uDD0D Codebase Tools: Enabled");if(!f.disableKnowledge)uf.info("\uD83D\uDCDA Registering knowledge tools"),W9(v),Q.push("knowledge_search","knowledge_get"),console.log("\uD83D\uDCDA Knowledge Tools: Enabled");if(Q.length>0)console.log(`\uD83D\uDD27 Enabled tools: ${Q.join(", ")}`);else console.log("\uD83D\uDD27 All tools disabled");try{let P=new jh;return await v.connect(P),uf.success(" MCP Server connected and ready"),console.log("\uD83D\uDCA1 Press Ctrl+C to stop the server"),v}catch(P){throw uf.error("Failed to start MCP server",P),P}}process.on("SIGINT",()=>{uf.info("\uD83D\uDED1 Shutting down MCP server..."),process.exit(0)});process.on("SIGTERM",()=>{uf.info("\uD83D\uDED1 Shutting down MCP server..."),process.exit(0)});export{M2 as startSylphxFlowMCPServer};
