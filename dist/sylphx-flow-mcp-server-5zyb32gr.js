#!/usr/bin/env node
import{c as w9}from"./index-6trre8s9.js";import{d as Bw,e as p,f as u8}from"./index-vkz1hhmk.js";var Nh=p((P0,Vh)=>{(function(f,v){typeof P0==="object"&&typeof Vh<"u"?v(P0):typeof define==="function"&&define.amd?define(["exports"],v):v(f.URI=f.URI||{})})(P0,function(f){function v(){for(var q=arguments.length,B=Array(q),K=0;K<q;K++)B[K]=arguments[K];if(B.length>1){B[0]=B[0].slice(0,-1);var O=B.length-1;for(var V=1;V<O;++V)B[V]=B[V].slice(1,-1);return B[O]=B[O].slice(1),B.join("")}else return B[0]}function h(q){return"(?:"+q+")"}function P(q){return q===void 0?"undefined":q===null?"null":Object.prototype.toString.call(q).split(" ").pop().split("]").shift().toLowerCase()}function Q(q){return q.toUpperCase()}function W(q){return q!==void 0&&q!==null?q instanceof Array?q:typeof q.length!=="number"||q.split||q.setInterval||q.call?[q]:Array.prototype.slice.call(q):[]}function J(q,B){var K=q;if(B)for(var O in B)K[O]=B[O];return K}function w(q){var B="[A-Za-z]",K="[\\x0D]",O="[0-9]",V="[\\x22]",r=v(O,"[A-Fa-f]"),d="[\\x0A]",hv="[\\x20]",wv=h(h("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+h("%[89A-Fa-f]"+r+"%"+r+r)+"|"+h("%"+r+r)),Vv="[\\:\\/\\?\\#\\[\\]\\@]",Qv="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Dv=v(Vv,Qv),Nv=q?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",qv=q?"[\\uE000-\\uF8FF]":"[]",Wv=v(B,O,"[\\-\\.\\_\\~]",Nv),Hv=h(B+v(B,O,"[\\+\\-\\.]")+"*"),Yv=h(h(wv+"|"+v(Wv,Qv,"[\\:]"))+"*"),Rf=h(h("25[0-5]")+"|"+h("2[0-4]"+O)+"|"+h("1"+O+O)+"|"+h("[1-9]"+O)+"|"+O),Tv=h(h("25[0-5]")+"|"+h("2[0-4]"+O)+"|"+h("1"+O+O)+"|"+h("0?[1-9]"+O)+"|0?0?"+O),mv=h(Tv+"\\."+Tv+"\\."+Tv+"\\."+Tv),lv=h(r+"{1,4}"),xv=h(h(lv+"\\:"+lv)+"|"+mv),nv=h(h(lv+"\\:")+"{6}"+xv),Pf=h("\\:\\:"+h(lv+"\\:")+"{5}"+xv),_f=h(h(lv)+"?\\:\\:"+h(lv+"\\:")+"{4}"+xv),Bf=h(h(h(lv+"\\:")+"{0,1}"+lv)+"?\\:\\:"+h(lv+"\\:")+"{3}"+xv),z1=h(h(h(lv+"\\:")+"{0,2}"+lv)+"?\\:\\:"+h(lv+"\\:")+"{2}"+xv),k1=h(h(h(lv+"\\:")+"{0,3}"+lv)+"?\\:\\:"+lv+"\\:"+xv),r1=h(h(h(lv+"\\:")+"{0,4}"+lv)+"?\\:\\:"+xv),mf=h(h(h(lv+"\\:")+"{0,5}"+lv)+"?\\:\\:"+lv),nf=h(h(h(lv+"\\:")+"{0,6}"+lv)+"?\\:\\:"),Gf=h([nv,Pf,_f,Bf,z1,k1,r1,mf,nf].join("|")),cf=h(h(Wv+"|"+wv)+"+"),y0=h(Gf+"\\%25"+cf),gf=h(Gf+h("\\%25|\\%(?!"+r+"{2})")+cf),U9=h("[vV]"+r+"+\\."+v(Wv,Qv,"[\\:]")+"+"),F9=h("\\["+h(gf+"|"+Gf+"|"+U9)+"\\]"),aQ=h(h(wv+"|"+v(Wv,Qv))+"*"),D1=h(F9+"|"+mv+"(?!"+aQ+")|"+aQ),H1=h(O+"*"),mQ=h(h(Yv+"@")+"?"+D1+h("\\:"+H1)+"?"),K1=h(wv+"|"+v(Wv,Qv,"[\\:\\@]")),A9=h(K1+"*"),nQ=h(K1+"+"),j9=h(h(wv+"|"+v(Wv,Qv,"[\\@]"))+"+"),qf=h(h("\\/"+A9)+"*"),pf=h("\\/"+h(nQ+qf)+"?"),k0=h(j9+qf),I1=h(nQ+qf),df="(?!"+K1+")",iw=h(qf+"|"+pf+"|"+k0+"|"+I1+"|"+df),of=h(h(K1+"|"+v("[\\/\\?]",qv))+"*"),$1=h(h(K1+"|[\\/\\?]")+"*"),cQ=h(h("\\/\\/"+mQ+qf)+"|"+pf+"|"+I1+"|"+df),b9=h(Hv+"\\:"+cQ+h("\\?"+of)+"?"+h("\\#"+$1)+"?"),S9=h(h("\\/\\/"+mQ+qf)+"|"+pf+"|"+k0+"|"+df),R9=h(S9+h("\\?"+of)+"?"+h("\\#"+$1)+"?"),dw=h(b9+"|"+R9),ow=h(Hv+"\\:"+cQ+h("\\?"+of)+"?"),sw="^("+Hv+")\\:"+h(h("\\/\\/("+h("("+Yv+")@")+"?("+D1+")"+h("\\:("+H1+")")+"?)")+"?("+qf+"|"+pf+"|"+I1+"|"+df+")")+h("\\?("+of+")")+"?"+h("\\#("+$1+")")+"?$",tw="^(){0}"+h(h("\\/\\/("+h("("+Yv+")@")+"?("+D1+")"+h("\\:("+H1+")")+"?)")+"?("+qf+"|"+pf+"|"+k0+"|"+df+")")+h("\\?("+of+")")+"?"+h("\\#("+$1+")")+"?$",ew="^("+Hv+")\\:"+h(h("\\/\\/("+h("("+Yv+")@")+"?("+D1+")"+h("\\:("+H1+")")+"?)")+"?("+qf+"|"+pf+"|"+I1+"|"+df+")")+h("\\?("+of+")")+"?$",vX="^"+h("\\#("+$1+")")+"?$",fX="^"+h("("+Yv+")@")+"?("+D1+")"+h("\\:("+H1+")")+"?$";return{NOT_SCHEME:new RegExp(v("[^]",B,O,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(v("[^\\%\\:]",Wv,Qv),"g"),NOT_HOST:new RegExp(v("[^\\%\\[\\]\\:]",Wv,Qv),"g"),NOT_PATH:new RegExp(v("[^\\%\\/\\:\\@]",Wv,Qv),"g"),NOT_PATH_NOSCHEME:new RegExp(v("[^\\%\\/\\@]",Wv,Qv),"g"),NOT_QUERY:new RegExp(v("[^\\%]",Wv,Qv,"[\\:\\@\\/\\?]",qv),"g"),NOT_FRAGMENT:new RegExp(v("[^\\%]",Wv,Qv,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(v("[^]",Wv,Qv),"g"),UNRESERVED:new RegExp(Wv,"g"),OTHER_CHARS:new RegExp(v("[^\\%]",Wv,Dv),"g"),PCT_ENCODED:new RegExp(wv,"g"),IPV4ADDRESS:new RegExp("^("+mv+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Gf+")"+h(h("\\%25|\\%(?!"+r+"{2})")+"("+cf+")")+"?\\]?$")}}var Y=w(!1),G=w(!0),z=function(){function q(B,K){var O=[],V=!0,r=!1,d=void 0;try{for(var hv=B[Symbol.iterator](),wv;!(V=(wv=hv.next()).done);V=!0)if(O.push(wv.value),K&&O.length===K)break}catch(Vv){r=!0,d=Vv}finally{try{if(!V&&hv.return)hv.return()}finally{if(r)throw d}}return O}return function(B,K){if(Array.isArray(B))return B;else if(Symbol.iterator in Object(B))return q(B,K);else throw TypeError("Invalid attempt to destructure non-iterable instance")}}(),$=function(q){if(Array.isArray(q)){for(var B=0,K=Array(q.length);B<q.length;B++)K[B]=q[B];return K}else return Array.from(q)},E=2147483647,l=36,D=1,M=26,H=38,L=700,U=72,N=128,b="-",S=/^xn--/,y=/[^\0-\x7E]/,a=/[\x2E\u3002\uFF0E\uFF61]/g,T={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=l-D,x=Math.floor,Z=String.fromCharCode;function I(q){throw RangeError(T[q])}function j(q,B){var K=[],O=q.length;while(O--)K[O]=B(q[O]);return K}function _(q,B){var K=q.split("@"),O="";if(K.length>1)O=K[0]+"@",q=K[1];q=q.replace(a,".");var V=q.split("."),r=j(V,B).join(".");return O+r}function C(q){var B=[],K=0,O=q.length;while(K<O){var V=q.charCodeAt(K++);if(V>=55296&&V<=56319&&K<O){var r=q.charCodeAt(K++);if((r&64512)==56320)B.push(((V&1023)<<10)+(r&1023)+65536);else B.push(V),K--}else B.push(V)}return B}var Xv=function(B){return String.fromCodePoint.apply(String,$(B))},t=function(B){if(B-48<10)return B-22;if(B-65<26)return B-65;if(B-97<26)return B-97;return l},fv=function(B,K){return B+22+75*(B<26)-((K!=0)<<5)},s=function(B,K,O){var V=0;B=O?x(B/L):B>>1,B+=x(B/K);for(;B>R*M>>1;V+=l)B=x(B/R);return x(V+(R+1)*B/(B+H))},m=function(B){var K=[],O=B.length,V=0,r=N,d=U,hv=B.lastIndexOf(b);if(hv<0)hv=0;for(var wv=0;wv<hv;++wv){if(B.charCodeAt(wv)>=128)I("not-basic");K.push(B.charCodeAt(wv))}for(var Vv=hv>0?hv+1:0;Vv<O;){var Qv=V;for(var Dv=1,Nv=l;;Nv+=l){if(Vv>=O)I("invalid-input");var qv=t(B.charCodeAt(Vv++));if(qv>=l||qv>x((E-V)/Dv))I("overflow");V+=qv*Dv;var Wv=Nv<=d?D:Nv>=d+M?M:Nv-d;if(qv<Wv)break;var Hv=l-Wv;if(Dv>x(E/Hv))I("overflow");Dv*=Hv}var Yv=K.length+1;if(d=s(V-Qv,Yv,Qv==0),x(V/Yv)>E-r)I("overflow");r+=x(V/Yv),V%=Yv,K.splice(V++,0,r)}return String.fromCodePoint.apply(String,K)},$v=function(B){var K=[];B=C(B);var O=B.length,V=N,r=0,d=U,hv=!0,wv=!1,Vv=void 0;try{for(var Qv=B[Symbol.iterator](),Dv;!(hv=(Dv=Qv.next()).done);hv=!0){var Nv=Dv.value;if(Nv<128)K.push(Z(Nv))}}catch(gf){wv=!0,Vv=gf}finally{try{if(!hv&&Qv.return)Qv.return()}finally{if(wv)throw Vv}}var qv=K.length,Wv=qv;if(qv)K.push(b);while(Wv<O){var Hv=E,Yv=!0,Rf=!1,Tv=void 0;try{for(var mv=B[Symbol.iterator](),lv;!(Yv=(lv=mv.next()).done);Yv=!0){var xv=lv.value;if(xv>=V&&xv<Hv)Hv=xv}}catch(gf){Rf=!0,Tv=gf}finally{try{if(!Yv&&mv.return)mv.return()}finally{if(Rf)throw Tv}}var nv=Wv+1;if(Hv-V>x((E-r)/nv))I("overflow");r+=(Hv-V)*nv,V=Hv;var Pf=!0,_f=!1,Bf=void 0;try{for(var z1=B[Symbol.iterator](),k1;!(Pf=(k1=z1.next()).done);Pf=!0){var r1=k1.value;if(r1<V&&++r>E)I("overflow");if(r1==V){var mf=r;for(var nf=l;;nf+=l){var Gf=nf<=d?D:nf>=d+M?M:nf-d;if(mf<Gf)break;var cf=mf-Gf,y0=l-Gf;K.push(Z(fv(Gf+cf%y0,0))),mf=x(cf/y0)}K.push(Z(fv(mf,0))),d=s(r,nv,Wv==qv),r=0,++Wv}}}catch(gf){_f=!0,Bf=gf}finally{try{if(!Pf&&z1.return)z1.return()}finally{if(_f)throw Bf}}++r,++V}return K.join("")},jv=function(B){return _(B,function(K){return S.test(K)?m(K.slice(4).toLowerCase()):K})},Rv=function(B){return _(B,function(K){return y.test(K)?"xn--"+$v(K):K})},Pv={version:"2.1.0",ucs2:{decode:C,encode:Xv},decode:m,encode:$v,toASCII:Rv,toUnicode:jv},Ov={};function Uv(q){var B=q.charCodeAt(0),K=void 0;if(B<16)K="%0"+B.toString(16).toUpperCase();else if(B<128)K="%"+B.toString(16).toUpperCase();else if(B<2048)K="%"+(B>>6|192).toString(16).toUpperCase()+"%"+(B&63|128).toString(16).toUpperCase();else K="%"+(B>>12|224).toString(16).toUpperCase()+"%"+(B>>6&63|128).toString(16).toUpperCase()+"%"+(B&63|128).toString(16).toUpperCase();return K}function _v(q){var B="",K=0,O=q.length;while(K<O){var V=parseInt(q.substr(K+1,2),16);if(V<128)B+=String.fromCharCode(V),K+=3;else if(V>=194&&V<224){if(O-K>=6){var r=parseInt(q.substr(K+4,2),16);B+=String.fromCharCode((V&31)<<6|r&63)}else B+=q.substr(K,6);K+=6}else if(V>=224){if(O-K>=9){var d=parseInt(q.substr(K+4,2),16),hv=parseInt(q.substr(K+7,2),16);B+=String.fromCharCode((V&15)<<12|(d&63)<<6|hv&63)}else B+=q.substr(K,9);K+=9}else B+=q.substr(K,3),K+=3}return B}function Kf(q,B){function K(O){var V=_v(O);return!V.match(B.UNRESERVED)?O:V}if(q.scheme)q.scheme=String(q.scheme).replace(B.PCT_ENCODED,K).toLowerCase().replace(B.NOT_SCHEME,"");if(q.userinfo!==void 0)q.userinfo=String(q.userinfo).replace(B.PCT_ENCODED,K).replace(B.NOT_USERINFO,Uv).replace(B.PCT_ENCODED,Q);if(q.host!==void 0)q.host=String(q.host).replace(B.PCT_ENCODED,K).toLowerCase().replace(B.NOT_HOST,Uv).replace(B.PCT_ENCODED,Q);if(q.path!==void 0)q.path=String(q.path).replace(B.PCT_ENCODED,K).replace(q.scheme?B.NOT_PATH:B.NOT_PATH_NOSCHEME,Uv).replace(B.PCT_ENCODED,Q);if(q.query!==void 0)q.query=String(q.query).replace(B.PCT_ENCODED,K).replace(B.NOT_QUERY,Uv).replace(B.PCT_ENCODED,Q);if(q.fragment!==void 0)q.fragment=String(q.fragment).replace(B.PCT_ENCODED,K).replace(B.NOT_FRAGMENT,Uv).replace(B.PCT_ENCODED,Q);return q}function Yf(q){return q.replace(/^0*(.*)/,"$1")||"0"}function Lv(q,B){var K=q.match(B.IPV4ADDRESS)||[],O=z(K,2),V=O[1];if(V)return V.split(".").map(Yf).join(".");else return q}function Ev(q,B){var K=q.match(B.IPV6ADDRESS)||[],O=z(K,3),V=O[1],r=O[2];if(V){var d=V.toLowerCase().split("::").reverse(),hv=z(d,2),wv=hv[0],Vv=hv[1],Qv=Vv?Vv.split(":").map(Yf):[],Dv=wv.split(":").map(Yf),Nv=B.IPV4ADDRESS.test(Dv[Dv.length-1]),qv=Nv?7:8,Wv=Dv.length-qv,Hv=Array(qv);for(var Yv=0;Yv<qv;++Yv)Hv[Yv]=Qv[Yv]||Dv[Wv+Yv]||"";if(Nv)Hv[qv-1]=Lv(Hv[qv-1],B);var Rf=Hv.reduce(function(nv,Pf,_f){if(!Pf||Pf==="0"){var Bf=nv[nv.length-1];if(Bf&&Bf.index+Bf.length===_f)Bf.length++;else nv.push({index:_f,length:1})}return nv},[]),Tv=Rf.sort(function(nv,Pf){return Pf.length-nv.length})[0],mv=void 0;if(Tv&&Tv.length>1){var lv=Hv.slice(0,Tv.index),xv=Hv.slice(Tv.index+Tv.length);mv=lv.join(":")+"::"+xv.join(":")}else mv=Hv.join(":");if(r)mv+="%"+r;return mv}else return q}var jf=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,bv="".match(/(){0}/)[1]===void 0;function Jv(q){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K={},O=B.iri!==!1?G:Y;if(B.reference==="suffix")q=(B.scheme?B.scheme+":":"")+"//"+q;var V=q.match(jf);if(V){if(bv){if(K.scheme=V[1],K.userinfo=V[3],K.host=V[4],K.port=parseInt(V[5],10),K.path=V[6]||"",K.query=V[7],K.fragment=V[8],isNaN(K.port))K.port=V[5]}else if(K.scheme=V[1]||void 0,K.userinfo=q.indexOf("@")!==-1?V[3]:void 0,K.host=q.indexOf("//")!==-1?V[4]:void 0,K.port=parseInt(V[5],10),K.path=V[6]||"",K.query=q.indexOf("?")!==-1?V[7]:void 0,K.fragment=q.indexOf("#")!==-1?V[8]:void 0,isNaN(K.port))K.port=q.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?V[4]:void 0;if(K.host)K.host=Ev(Lv(K.host,O),O);if(K.scheme===void 0&&K.userinfo===void 0&&K.host===void 0&&K.port===void 0&&!K.path&&K.query===void 0)K.reference="same-document";else if(K.scheme===void 0)K.reference="relative";else if(K.fragment===void 0)K.reference="absolute";else K.reference="uri";if(B.reference&&B.reference!=="suffix"&&B.reference!==K.reference)K.error=K.error||"URI is not a "+B.reference+" reference.";var r=Ov[(B.scheme||K.scheme||"").toLowerCase()];if(!B.unicodeSupport&&(!r||!r.unicodeSupport)){if(K.host&&(B.domainHost||r&&r.domainHost))try{K.host=Pv.toASCII(K.host.replace(O.PCT_ENCODED,_v).toLowerCase())}catch(d){K.error=K.error||"Host's domain name can not be converted to ASCII via punycode: "+d}Kf(K,Y)}else Kf(K,O);if(r&&r.parse)r.parse(K,B)}else K.error=K.error||"URI can not be parsed.";return K}function $f(q,B){var K=B.iri!==!1?G:Y,O=[];if(q.userinfo!==void 0)O.push(q.userinfo),O.push("@");if(q.host!==void 0)O.push(Ev(Lv(String(q.host),K),K).replace(K.IPV6ADDRESS,function(V,r,d){return"["+r+(d?"%25"+d:"")+"]"}));if(typeof q.port==="number"||typeof q.port==="string")O.push(":"),O.push(String(q.port));return O.length?O.join(""):void 0}var lf=/^\.\.?\//,bf=/^\/\.(\/|$)/,Sf=/^\/\.\.(\/|$)/,Fv=/^\/?(?:.|\n)*?(?=\/|$)/;function av(q){var B=[];while(q.length)if(q.match(lf))q=q.replace(lf,"");else if(q.match(bf))q=q.replace(bf,"/");else if(q.match(Sf))q=q.replace(Sf,"/"),B.pop();else if(q==="."||q==="..")q="";else{var K=q.match(Fv);if(K){var O=K[0];q=q.slice(O.length),B.push(O)}else throw Error("Unexpected dot segment condition")}return B.join("")}function kv(q){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=B.iri?G:Y,O=[],V=Ov[(B.scheme||q.scheme||"").toLowerCase()];if(V&&V.serialize)V.serialize(q,B);if(q.host){if(K.IPV6ADDRESS.test(q.host));else if(B.domainHost||V&&V.domainHost)try{q.host=!B.iri?Pv.toASCII(q.host.replace(K.PCT_ENCODED,_v).toLowerCase()):Pv.toUnicode(q.host)}catch(hv){q.error=q.error||"Host's domain name can not be converted to "+(!B.iri?"ASCII":"Unicode")+" via punycode: "+hv}}if(Kf(q,K),B.reference!=="suffix"&&q.scheme)O.push(q.scheme),O.push(":");var r=$f(q,B);if(r!==void 0){if(B.reference!=="suffix")O.push("//");if(O.push(r),q.path&&q.path.charAt(0)!=="/")O.push("/")}if(q.path!==void 0){var d=q.path;if(!B.absolutePath&&(!V||!V.absolutePath))d=av(d);if(r===void 0)d=d.replace(/^\/\//,"/%2F");O.push(d)}if(q.query!==void 0)O.push("?"),O.push(q.query);if(q.fragment!==void 0)O.push("#"),O.push(q.fragment);return O.join("")}function gv(q,B){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},O=arguments[3],V={};if(!O)q=Jv(kv(q,K),K),B=Jv(kv(B,K),K);if(K=K||{},!K.tolerant&&B.scheme)V.scheme=B.scheme,V.userinfo=B.userinfo,V.host=B.host,V.port=B.port,V.path=av(B.path||""),V.query=B.query;else{if(B.userinfo!==void 0||B.host!==void 0||B.port!==void 0)V.userinfo=B.userinfo,V.host=B.host,V.port=B.port,V.path=av(B.path||""),V.query=B.query;else{if(!B.path)if(V.path=q.path,B.query!==void 0)V.query=B.query;else V.query=q.query;else{if(B.path.charAt(0)==="/")V.path=av(B.path);else{if((q.userinfo!==void 0||q.host!==void 0||q.port!==void 0)&&!q.path)V.path="/"+B.path;else if(!q.path)V.path=B.path;else V.path=q.path.slice(0,q.path.lastIndexOf("/")+1)+B.path;V.path=av(V.path)}V.query=B.query}V.userinfo=q.userinfo,V.host=q.host,V.port=q.port}V.scheme=q.scheme}return V.fragment=B.fragment,V}function Qf(q,B,K){var O=J({scheme:"null"},K);return kv(gv(Jv(q,O),Jv(B,O),O,!0),O)}function Zv(q,B){if(typeof q==="string")q=kv(Jv(q,B),B);else if(P(q)==="object")q=Jv(kv(q,B),B);return q}function y1(q,B,K){if(typeof q==="string")q=kv(Jv(q,K),K);else if(P(q)==="object")q=kv(q,K);if(typeof B==="string")B=kv(Jv(B,K),K);else if(P(B)==="object")B=kv(B,K);return q===B}function _0(q,B){return q&&q.toString().replace(!B||!B.iri?Y.ESCAPE:G.ESCAPE,Uv)}function iv(q,B){return q&&q.toString().replace(!B||!B.iri?Y.PCT_ENCODED:G.PCT_ENCODED,_v)}var G1={scheme:"http",domainHost:!0,parse:function(B,K){if(!B.host)B.error=B.error||"HTTP URIs must have a host.";return B},serialize:function(B,K){var O=String(B.scheme).toLowerCase()==="https";if(B.port===(O?443:80)||B.port==="")B.port=void 0;if(!B.path)B.path="/";return B}},kQ={scheme:"https",domainHost:G1.domainHost,parse:G1.parse,serialize:G1.serialize};function rQ(q){return typeof q.secure==="boolean"?q.secure:String(q.scheme).toLowerCase()==="wss"}var q1={scheme:"ws",domainHost:!0,parse:function(B,K){var O=B;return O.secure=rQ(O),O.resourceName=(O.path||"/")+(O.query?"?"+O.query:""),O.path=void 0,O.query=void 0,O},serialize:function(B,K){if(B.port===(rQ(B)?443:80)||B.port==="")B.port=void 0;if(typeof B.secure==="boolean")B.scheme=B.secure?"wss":"ws",B.secure=void 0;if(B.resourceName){var O=B.resourceName.split("?"),V=z(O,2),r=V[0],d=V[1];B.path=r&&r!=="/"?r:void 0,B.query=d,B.resourceName=void 0}return B.fragment=void 0,B}},IQ={scheme:"wss",domainHost:q1.domainHost,parse:q1.parse,serialize:q1.serialize},q9={},z9=!0,CQ="[A-Za-z0-9\\-\\.\\_\\~"+(z9?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",hf="[0-9A-Fa-f]",D9=h(h("%[EFef]"+hf+"%"+hf+hf+"%"+hf+hf)+"|"+h("%[89A-Fa-f]"+hf+"%"+hf+hf)+"|"+h("%"+hf+hf)),H9="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",K9="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",$9=v(K9,"[\\\"\\\\]"),E9="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",M9=new RegExp(CQ,"g"),af=new RegExp(D9,"g"),O9=new RegExp(v("[^]",H9,"[\\.]","[\\\"]",$9),"g"),ZQ=new RegExp(v("[^]",CQ,E9),"g"),L9=ZQ;function g0(q){var B=_v(q);return!B.match(M9)?q:B}var TQ={scheme:"mailto",parse:function(B,K){var O=B,V=O.to=O.path?O.path.split(","):[];if(O.path=void 0,O.query){var r=!1,d={},hv=O.query.split("&");for(var wv=0,Vv=hv.length;wv<Vv;++wv){var Qv=hv[wv].split("=");switch(Qv[0]){case"to":var Dv=Qv[1].split(",");for(var Nv=0,qv=Dv.length;Nv<qv;++Nv)V.push(Dv[Nv]);break;case"subject":O.subject=iv(Qv[1],K);break;case"body":O.body=iv(Qv[1],K);break;default:r=!0,d[iv(Qv[0],K)]=iv(Qv[1],K);break}}if(r)O.headers=d}O.query=void 0;for(var Wv=0,Hv=V.length;Wv<Hv;++Wv){var Yv=V[Wv].split("@");if(Yv[0]=iv(Yv[0]),!K.unicodeSupport)try{Yv[1]=Pv.toASCII(iv(Yv[1],K).toLowerCase())}catch(Rf){O.error=O.error||"Email address's domain name can not be converted to ASCII via punycode: "+Rf}else Yv[1]=iv(Yv[1],K).toLowerCase();V[Wv]=Yv.join("@")}return O},serialize:function(B,K){var O=B,V=W(B.to);if(V){for(var r=0,d=V.length;r<d;++r){var hv=String(V[r]),wv=hv.lastIndexOf("@"),Vv=hv.slice(0,wv).replace(af,g0).replace(af,Q).replace(O9,Uv),Qv=hv.slice(wv+1);try{Qv=!K.iri?Pv.toASCII(iv(Qv,K).toLowerCase()):Pv.toUnicode(Qv)}catch(Wv){O.error=O.error||"Email address's domain name can not be converted to "+(!K.iri?"ASCII":"Unicode")+" via punycode: "+Wv}V[r]=Vv+"@"+Qv}O.path=V.join(",")}var Dv=B.headers=B.headers||{};if(B.subject)Dv.subject=B.subject;if(B.body)Dv.body=B.body;var Nv=[];for(var qv in Dv)if(Dv[qv]!==q9[qv])Nv.push(qv.replace(af,g0).replace(af,Q).replace(ZQ,Uv)+"="+Dv[qv].replace(af,g0).replace(af,Q).replace(L9,Uv));if(Nv.length)O.query=Nv.join("&");return O}},V9=/^([^\:]+)\:(.*)/,xQ={scheme:"urn",parse:function(B,K){var O=B.path&&B.path.match(V9),V=B;if(O){var r=K.scheme||V.scheme||"urn",d=O[1].toLowerCase(),hv=O[2],wv=r+":"+(K.nid||d),Vv=Ov[wv];if(V.nid=d,V.nss=hv,V.path=void 0,Vv)V=Vv.parse(V,K)}else V.error=V.error||"URN can not be parsed.";return V},serialize:function(B,K){var O=K.scheme||B.scheme||"urn",V=B.nid,r=O+":"+(K.nid||V),d=Ov[r];if(d)B=d.serialize(B,K);var hv=B,wv=B.nss;return hv.path=(V||K.nid)+":"+wv,hv}},N9=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,uQ={scheme:"urn:uuid",parse:function(B,K){var O=B;if(O.uuid=O.nss,O.nss=void 0,!K.tolerant&&(!O.uuid||!O.uuid.match(N9)))O.error=O.error||"UUID is not valid.";return O},serialize:function(B,K){var O=B;return O.nss=(B.uuid||"").toLowerCase(),O}};Ov[G1.scheme]=G1,Ov[kQ.scheme]=kQ,Ov[q1.scheme]=q1,Ov[IQ.scheme]=IQ,Ov[TQ.scheme]=TQ,Ov[xQ.scheme]=xQ,Ov[uQ.scheme]=uQ,f.SCHEMES=Ov,f.pctEncChar=Uv,f.pctDecChars=_v,f.parse=Jv,f.removeDotSegments=av,f.serialize=kv,f.resolveComponents=gv,f.resolve=Qf,f.normalize=Zv,f.equal=y1,f.escapeComponent=_0,f.unescapeComponent=iv,Object.defineProperty(f,"__esModule",{value:!0})})});var W0=p((ZX,Uh)=>{Uh.exports=function f(v,h){if(v===h)return!0;if(v&&h&&typeof v=="object"&&typeof h=="object"){if(v.constructor!==h.constructor)return!1;var P,Q,W;if(Array.isArray(v)){if(P=v.length,P!=h.length)return!1;for(Q=P;Q--!==0;)if(!f(v[Q],h[Q]))return!1;return!0}if(v.constructor===RegExp)return v.source===h.source&&v.flags===h.flags;if(v.valueOf!==Object.prototype.valueOf)return v.valueOf()===h.valueOf();if(v.toString!==Object.prototype.toString)return v.toString()===h.toString();if(W=Object.keys(v),P=W.length,P!==Object.keys(h).length)return!1;for(Q=P;Q--!==0;)if(!Object.prototype.hasOwnProperty.call(h,W[Q]))return!1;for(Q=P;Q--!==0;){var J=W[Q];if(!f(v[J],h[J]))return!1}return!0}return v!==v&&h!==h}});var Ah=p((TX,Fh)=>{Fh.exports=function(v){var h=0,P=v.length,Q=0,W;while(Q<P)if(h++,W=v.charCodeAt(Q++),W>=55296&&W<=56319&&Q<P){if(W=v.charCodeAt(Q),(W&64512)==56320)Q++}return h}});var Zf=p((xX,Sh)=>{Sh.exports={copy:gJ,checkDataType:t0,checkDataTypes:yJ,coerceToTypes:kJ,toHash:vQ,getProperty:fQ,escapeQuotes:QQ,equal:W0(),ucs2length:Ah(),varOccurences:CJ,varReplace:ZJ,schemaHasRules:TJ,schemaHasRulesExcept:xJ,schemaUnknownRules:uJ,toQuotedString:e0,getPathExpr:aJ,getPath:mJ,getData:pJ,unescapeFragment:iJ,unescapeJsonPointer:PQ,escapeFragment:dJ,escapeJsonPointer:hQ};function gJ(f,v){v=v||{};for(var h in f)v[h]=f[h];return v}function t0(f,v,h,P){var Q=P?" !== ":" === ",W=P?" || ":" && ",J=P?"!":"",w=P?"":"!";switch(f){case"null":return v+Q+"null";case"array":return J+"Array.isArray("+v+")";case"object":return"("+J+v+W+"typeof "+v+Q+'"object"'+W+w+"Array.isArray("+v+"))";case"integer":return"(typeof "+v+Q+'"number"'+W+w+"("+v+" % 1)"+W+v+Q+v+(h?W+J+"isFinite("+v+")":"")+")";case"number":return"(typeof "+v+Q+'"'+f+'"'+(h?W+J+"isFinite("+v+")":"")+")";default:return"typeof "+v+Q+'"'+f+'"'}}function yJ(f,v,h){switch(f.length){case 1:return t0(f[0],v,h,!0);default:var P="",Q=vQ(f);if(Q.array&&Q.object)P=Q.null?"(":"(!"+v+" || ",P+="typeof "+v+' !== "object")',delete Q.null,delete Q.array,delete Q.object;if(Q.number)delete Q.integer;for(var W in Q)P+=(P?" && ":"")+t0(W,v,h,!0);return P}}var jh=vQ(["string","number","integer","boolean","null"]);function kJ(f,v){if(Array.isArray(v)){var h=[];for(var P=0;P<v.length;P++){var Q=v[P];if(jh[Q])h[h.length]=Q;else if(f==="array"&&Q==="array")h[h.length]=Q}if(h.length)return h}else if(jh[v])return[v];else if(f==="array"&&v==="array")return["array"]}function vQ(f){var v={};for(var h=0;h<f.length;h++)v[f[h]]=!0;return v}var rJ=/^[a-z$_][a-z$_0-9]*$/i,IJ=/'|\\/g;function fQ(f){return typeof f=="number"?"["+f+"]":rJ.test(f)?"."+f:"['"+QQ(f)+"']"}function QQ(f){return f.replace(IJ,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function CJ(f,v){v+="[^0-9]";var h=f.match(new RegExp(v,"g"));return h?h.length:0}function ZJ(f,v,h){return v+="([^0-9])",h=h.replace(/\$/g,"$$$$"),f.replace(new RegExp(v,"g"),h+"$1")}function TJ(f,v){if(typeof f=="boolean")return!f;for(var h in f)if(v[h])return!0}function xJ(f,v,h){if(typeof f=="boolean")return!f&&h!="not";for(var P in f)if(P!=h&&v[P])return!0}function uJ(f,v){if(typeof f=="boolean")return;for(var h in f)if(!v[h])return h}function e0(f){return"'"+QQ(f)+"'"}function aJ(f,v,h,P){var Q=h?"'/' + "+v+(P?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):P?"'[' + "+v+" + ']'":"'[\\'' + "+v+" + '\\']'";return bh(f,Q)}function mJ(f,v,h){var P=h?e0("/"+hQ(v)):e0(fQ(v));return bh(f,P)}var nJ=/^\/(?:[^~]|~0|~1)*$/,cJ=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function pJ(f,v,h){var P,Q,W,J;if(f==="")return"rootData";if(f[0]=="/"){if(!nJ.test(f))throw Error("Invalid JSON-pointer: "+f);Q=f,W="rootData"}else{if(J=f.match(cJ),!J)throw Error("Invalid JSON-pointer: "+f);if(P=+J[1],Q=J[2],Q=="#"){if(P>=v)throw Error("Cannot access property/index "+P+" levels up, current level is "+v);return h[v-P]}if(P>v)throw Error("Cannot access data "+P+" levels up, current level is "+v);if(W="data"+(v-P||""),!Q)return W}var w=W,Y=Q.split("/");for(var G=0;G<Y.length;G++){var z=Y[G];if(z)W+=fQ(PQ(z)),w+=" && "+W}return w}function bh(f,v){if(f=='""')return v;return(f+" + "+v).replace(/([^\\])' \+ '/g,"$1")}function iJ(f){return PQ(decodeURIComponent(f))}function dJ(f){return encodeURIComponent(hQ(f))}function hQ(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}function PQ(f){return f.replace(/~1/g,"/").replace(/~0/g,"~")}});var WQ=p((uX,Rh)=>{var oJ=Zf();Rh.exports=sJ;function sJ(f){oJ.copy(f,this)}});var gh=p((aX,_h)=>{var Nf=_h.exports=function(f,v,h){if(typeof v=="function")h=v,v={};h=v.cb||h;var P=typeof h=="function"?h:h.pre||function(){},Q=h.post||function(){};J0(v,P,Q,f,"",f)};Nf.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Nf.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Nf.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Nf.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function J0(f,v,h,P,Q,W,J,w,Y,G){if(P&&typeof P=="object"&&!Array.isArray(P)){v(P,Q,W,J,w,Y,G);for(var z in P){var $=P[z];if(Array.isArray($)){if(z in Nf.arrayKeywords)for(var E=0;E<$.length;E++)J0(f,v,h,$[E],Q+"/"+z+"/"+E,W,Q,z,P,E)}else if(z in Nf.propsKeywords){if($&&typeof $=="object")for(var l in $)J0(f,v,h,$[l],Q+"/"+z+"/"+tJ(l),W,Q,z,P,l)}else if(z in Nf.keywords||f.allKeys&&!(z in Nf.skipKeywords))J0(f,v,h,$,Q+"/"+z,W,Q,z,P)}h(P,Q,W,J,w,Y,G)}}function tJ(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}});var G0=p((mX,Ih)=>{var S1=Nh(),yh=W0(),l0=Zf(),w0=WQ(),eJ=gh();Ih.exports=Ff;Ff.normalizeId=Uf;Ff.fullPath=X0;Ff.url=Y0;Ff.ids=P6;Ff.inlineRef=JQ;Ff.schema=B0;function Ff(f,v,h){var P=this._refs[h];if(typeof P=="string")if(this._refs[P])P=this._refs[P];else return Ff.call(this,f,v,P);if(P=P||this._schemas[h],P instanceof w0)return JQ(P.schema,this._opts.inlineRefs)?P.schema:P.validate||this._compile(P);var Q=B0.call(this,v,h),W,J,w;if(Q)W=Q.schema,v=Q.root,w=Q.baseId;if(W instanceof w0)J=W.validate||f.call(this,W.schema,v,void 0,w);else if(W!==void 0)J=JQ(W,this._opts.inlineRefs)?W:f.call(this,W,v,void 0,w);return J}function B0(f,v){var h=S1.parse(v),P=rh(h),Q=X0(this._getId(f.schema));if(Object.keys(f.schema).length===0||P!==Q){var W=Uf(P),J=this._refs[W];if(typeof J=="string")return v6.call(this,f,J,h);else if(J instanceof w0){if(!J.validate)this._compile(J);f=J}else if(J=this._schemas[W],J instanceof w0){if(!J.validate)this._compile(J);if(W==Uf(v))return{schema:J,root:f,baseId:Q};f=J}else return;if(!f.schema)return;Q=X0(this._getId(f.schema))}return kh.call(this,h,Q,f.schema,f)}function v6(f,v,h){var P=B0.call(this,f,v);if(P){var{schema:Q,baseId:W}=P;f=P.root;var J=this._getId(Q);if(J)W=Y0(W,J);return kh.call(this,h,W,Q,f)}}var f6=l0.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function kh(f,v,h,P){if(f.fragment=f.fragment||"",f.fragment.slice(0,1)!="/")return;var Q=f.fragment.split("/");for(var W=1;W<Q.length;W++){var J=Q[W];if(J){if(J=l0.unescapeFragment(J),h=h[J],h===void 0)break;var w;if(!f6[J]){if(w=this._getId(h),w)v=Y0(v,w);if(h.$ref){var Y=Y0(v,h.$ref),G=B0.call(this,P,Y);if(G)h=G.schema,P=G.root,v=G.baseId}}}}if(h!==void 0&&h!==P.schema)return{schema:h,root:P,baseId:v}}var Q6=l0.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function JQ(f,v){if(v===!1)return!1;if(v===void 0||v===!0)return wQ(f);else if(v)return XQ(f)<=v}function wQ(f){var v;if(Array.isArray(f)){for(var h=0;h<f.length;h++)if(v=f[h],typeof v=="object"&&!wQ(v))return!1}else for(var P in f){if(P=="$ref")return!1;if(v=f[P],typeof v=="object"&&!wQ(v))return!1}return!0}function XQ(f){var v=0,h;if(Array.isArray(f))for(var P=0;P<f.length;P++){if(h=f[P],typeof h=="object")v+=XQ(h);if(v==1/0)return 1/0}else for(var Q in f){if(Q=="$ref")return 1/0;if(Q6[Q])v++;else{if(h=f[Q],typeof h=="object")v+=XQ(h)+1;if(v==1/0)return 1/0}}return v}function X0(f,v){if(v!==!1)f=Uf(f);var h=S1.parse(f);return rh(h)}function rh(f){return S1.serialize(f).split("#")[0]+"#"}var h6=/#\/?$/;function Uf(f){return f?f.replace(h6,""):""}function Y0(f,v){return v=Uf(v),S1.resolve(f,v)}function P6(f){var v=Uf(this._getId(f)),h={"":v},P={"":X0(v,!1)},Q={},W=this;return eJ(f,{allKeys:!0},function(J,w,Y,G,z,$,E){if(w==="")return;var l=W._getId(J),D=h[G],M=P[G]+"/"+z;if(E!==void 0)M+="/"+(typeof E=="number"?E:l0.escapeFragment(E));if(typeof l=="string"){l=D=Uf(D?S1.resolve(D,l):l);var H=W._refs[l];if(typeof H=="string")H=W._refs[H];if(H&&H.schema){if(!yh(J,H.schema))throw Error('id "'+l+'" resolves to more than one schema')}else if(l!=Uf(M))if(l[0]=="#"){if(Q[l]&&!yh(J,Q[l]))throw Error('id "'+l+'" resolves to more than one schema');Q[l]=J}else W._refs[l]=M}h[w]=D,P[w]=M}),Q}});var q0=p((nX,Zh)=>{var YQ=G0();Zh.exports={Validation:Ch(W6),MissingRef:Ch(lQ)};function W6(f){this.message="validation failed",this.errors=f,this.ajv=this.validation=!0}lQ.message=function(f,v){return"can't resolve reference "+v+" from id "+f};function lQ(f,v,h){this.message=h||lQ.message(f,v),this.missingRef=YQ.url(f,v),this.missingSchema=YQ.normalizeId(YQ.fullPath(this.missingRef))}function Ch(f){return f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f}});var BQ=p((cX,Th)=>{Th.exports=function(f,v){if(!v)v={};if(typeof v==="function")v={cmp:v};var h=typeof v.cycles==="boolean"?v.cycles:!1,P=v.cmp&&function(W){return function(J){return function(w,Y){var G={key:w,value:J[w]},z={key:Y,value:J[Y]};return W(G,z)}}}(v.cmp),Q=[];return function W(J){if(J&&J.toJSON&&typeof J.toJSON==="function")J=J.toJSON();if(J===void 0)return;if(typeof J=="number")return isFinite(J)?""+J:"null";if(typeof J!=="object")return JSON.stringify(J);var w,Y;if(Array.isArray(J)){Y="[";for(w=0;w<J.length;w++){if(w)Y+=",";Y+=W(J[w])||"null"}return Y+"]"}if(J===null)return"null";if(Q.indexOf(J)!==-1){if(h)return JSON.stringify("__cycle__");throw TypeError("Converting circular structure to JSON")}var G=Q.push(J)-1,z=Object.keys(J).sort(P&&P(J));Y="";for(w=0;w<z.length;w++){var $=z[w],E=W(J[$]);if(!E)continue;if(Y)Y+=",";Y+=JSON.stringify($)+":"+E}return Q.splice(G,1),"{"+Y+"}"}(f)}});var GQ=p((pX,xh)=>{xh.exports=function(v,h,P){var Q="",W=v.schema.$async===!0,J=v.util.schemaHasRulesExcept(v.schema,v.RULES.all,"$ref"),w=v.self._getId(v.schema);if(v.opts.strictKeywords){var Y=v.util.schemaUnknownRules(v.schema,v.RULES.keywords);if(Y){var G="unknown keyword: "+Y;if(v.opts.strictKeywords==="log")v.logger.warn(G);else throw Error(G)}}if(v.isTop){if(Q+=" var validate = ",W)v.async=!0,Q+="async ";if(Q+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",w&&(v.opts.sourceCode||v.opts.processCode))Q+=" "+("/*# sourceURL="+w+" */")+" "}if(typeof v.schema=="boolean"||!(J||v.schema.$ref)){var h="false schema",z=v.level,$=v.dataLevel,E=v.schema[h],l=v.schemaPath+v.util.getProperty(h),D=v.errSchemaPath+"/"+h,S=!v.opts.allErrors,T,M="data"+($||""),b="valid"+z;if(v.schema===!1){if(v.isTop)S=!0;else Q+=" var "+b+" = false; ";var H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(T||"false schema")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(D)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'boolean schema is false' ";if(v.opts.verbose)Q+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var L=Q;if(Q=H.pop(),!v.compositeRule&&S)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else if(v.isTop)if(W)Q+=" return data; ";else Q+=" validate.errors = null; return true; ";else Q+=" var "+b+" = true; ";if(v.isTop)Q+=" }; return validate; ";return Q}if(v.isTop){var U=v.isTop,z=v.level=0,$=v.dataLevel=0,M="data";if(v.rootId=v.resolve.fullPath(v.self._getId(v.root.schema)),v.baseId=v.baseId||v.rootId,delete v.isTop,v.dataPathArr=[""],v.schema.default!==void 0&&v.opts.useDefaults&&v.opts.strictDefaults){var N="default is ignored in the schema root";if(v.opts.strictDefaults==="log")v.logger.warn(N);else throw Error(N)}Q+=" var vErrors = null; ",Q+=" var errors = 0;     ",Q+=" if (rootData === undefined) rootData = data; "}else{var{level:z,dataLevel:$}=v,M="data"+($||"");if(w)v.baseId=v.resolve.url(v.baseId,w);if(W&&!v.async)throw Error("async schema in sync schema");Q+=" var errs_"+z+" = errors;"}var b="valid"+z,S=!v.opts.allErrors,y="",a="",T,R=v.schema.type,x=Array.isArray(R);if(R&&v.opts.nullable&&v.schema.nullable===!0){if(x){if(R.indexOf("null")==-1)R=R.concat("null")}else if(R!="null")R=[R,"null"],x=!0}if(x&&R.length==1)R=R[0],x=!1;if(v.schema.$ref&&J){if(v.opts.extendRefs=="fail")throw Error('$ref: validation keywords used in schema at path "'+v.errSchemaPath+'" (see option extendRefs)');else if(v.opts.extendRefs!==!0)J=!1,v.logger.warn('$ref: keywords ignored in schema at path "'+v.errSchemaPath+'"')}if(v.schema.$comment&&v.opts.$comment)Q+=" "+v.RULES.all.$comment.code(v,"$comment");if(R){if(v.opts.coerceTypes)var Z=v.util.coerceToTypes(v.opts.coerceTypes,R);var I=v.RULES.types[R];if(Z||x||I===!0||I&&!Fv(I)){var l=v.schemaPath+".type",D=v.errSchemaPath+"/type",l=v.schemaPath+".type",D=v.errSchemaPath+"/type",j=x?"checkDataTypes":"checkDataType";if(Q+=" if ("+v.util[j](R,M,v.opts.strictNumbers,!0)+") { ",Z){var _="dataType"+z,C="coerced"+z;if(Q+=" var "+_+" = typeof "+M+"; var "+C+" = undefined; ",v.opts.coerceTypes=="array")Q+=" if ("+_+" == 'object' && Array.isArray("+M+") && "+M+".length == 1) { "+M+" = "+M+"[0]; "+_+" = typeof "+M+"; if ("+v.util.checkDataType(v.schema.type,M,v.opts.strictNumbers)+") "+C+" = "+M+"; } ";Q+=" if ("+C+" !== undefined) ; ";var Xv=Z;if(Xv){var t,fv=-1,s=Xv.length-1;while(fv<s)if(t=Xv[fv+=1],t=="string")Q+=" else if ("+_+" == 'number' || "+_+" == 'boolean') "+C+" = '' + "+M+"; else if ("+M+" === null) "+C+" = ''; ";else if(t=="number"||t=="integer"){if(Q+=" else if ("+_+" == 'boolean' || "+M+" === null || ("+_+" == 'string' && "+M+" && "+M+" == +"+M+" ",t=="integer")Q+=" && !("+M+" % 1)";Q+=")) "+C+" = +"+M+"; "}else if(t=="boolean")Q+=" else if ("+M+" === 'false' || "+M+" === 0 || "+M+" === null) "+C+" = false; else if ("+M+" === 'true' || "+M+" === 1) "+C+" = true; ";else if(t=="null")Q+=" else if ("+M+" === '' || "+M+" === 0 || "+M+" === false) "+C+" = null; ";else if(v.opts.coerceTypes=="array"&&t=="array")Q+=" else if ("+_+" == 'string' || "+_+" == 'number' || "+_+" == 'boolean' || "+M+" == null) "+C+" = ["+M+"]; "}Q+=" else {   ";var H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(T||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(D)+" , params: { type: '",x)Q+=""+R.join(",");else Q+=""+R;if(Q+="' } ",v.opts.messages!==!1){if(Q+=" , message: 'should be ",x)Q+=""+R.join(",");else Q+=""+R;Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var L=Q;if(Q=H.pop(),!v.compositeRule&&S)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } if ("+C+" !== undefined) {  ";var m=$?"data"+($-1||""):"parentData",$v=$?v.dataPathArr[$]:"parentDataProperty";if(Q+=" "+M+" = "+C+"; ",!$)Q+="if ("+m+" !== undefined)";Q+=" "+m+"["+$v+"] = "+C+"; } "}else{var H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(T||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(D)+" , params: { type: '",x)Q+=""+R.join(",");else Q+=""+R;if(Q+="' } ",v.opts.messages!==!1){if(Q+=" , message: 'should be ",x)Q+=""+R.join(",");else Q+=""+R;Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var L=Q;if(Q=H.pop(),!v.compositeRule&&S)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}Q+=" } "}}if(v.schema.$ref&&!J){if(Q+=" "+v.RULES.all.$ref.code(v,"$ref")+" ",S){if(Q+=" } if (errors === ",U)Q+="0";else Q+="errs_"+z;Q+=") { ",a+="}"}}else{var jv=v.RULES;if(jv){var I,Rv=-1,Pv=jv.length-1;while(Rv<Pv)if(I=jv[Rv+=1],Fv(I)){if(I.type)Q+=" if ("+v.util.checkDataType(I.type,M,v.opts.strictNumbers)+") { ";if(v.opts.useDefaults){if(I.type=="object"&&v.schema.properties){var E=v.schema.properties,Ov=Object.keys(E),Uv=Ov;if(Uv){var _v,Kf=-1,Yf=Uv.length-1;while(Kf<Yf){_v=Uv[Kf+=1];var Lv=E[_v];if(Lv.default!==void 0){var Ev=M+v.util.getProperty(_v);if(v.compositeRule){if(v.opts.strictDefaults){var N="default is ignored for: "+Ev;if(v.opts.strictDefaults==="log")v.logger.warn(N);else throw Error(N)}}else{if(Q+=" if ("+Ev+" === undefined ",v.opts.useDefaults=="empty")Q+=" || "+Ev+" === null || "+Ev+" === '' ";if(Q+=" ) "+Ev+" = ",v.opts.useDefaults=="shared")Q+=" "+v.useDefault(Lv.default)+" ";else Q+=" "+JSON.stringify(Lv.default)+" ";Q+="; "}}}}}else if(I.type=="array"&&Array.isArray(v.schema.items)){var jf=v.schema.items;if(jf){var Lv,fv=-1,bv=jf.length-1;while(fv<bv)if(Lv=jf[fv+=1],Lv.default!==void 0){var Ev=M+"["+fv+"]";if(v.compositeRule){if(v.opts.strictDefaults){var N="default is ignored for: "+Ev;if(v.opts.strictDefaults==="log")v.logger.warn(N);else throw Error(N)}}else{if(Q+=" if ("+Ev+" === undefined ",v.opts.useDefaults=="empty")Q+=" || "+Ev+" === null || "+Ev+" === '' ";if(Q+=" ) "+Ev+" = ",v.opts.useDefaults=="shared")Q+=" "+v.useDefault(Lv.default)+" ";else Q+=" "+JSON.stringify(Lv.default)+" ";Q+="; "}}}}}var Jv=I.rules;if(Jv){var $f,lf=-1,bf=Jv.length-1;while(lf<bf)if($f=Jv[lf+=1],av($f)){var Sf=$f.code(v,$f.keyword,I.type);if(Sf){if(Q+=" "+Sf+" ",S)y+="}"}}}if(S)Q+=" "+y+" ",y="";if(I.type){if(Q+=" } ",R&&R===I.type&&!Z){Q+=" else { ";var l=v.schemaPath+".type",D=v.errSchemaPath+"/type",H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(T||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(D)+" , params: { type: '",x)Q+=""+R.join(",");else Q+=""+R;if(Q+="' } ",v.opts.messages!==!1){if(Q+=" , message: 'should be ",x)Q+=""+R.join(",");else Q+=""+R;Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";Q+=" } "}else Q+=" {} ";var L=Q;if(Q=H.pop(),!v.compositeRule&&S)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } "}}if(S){if(Q+=" if (errors === ",U)Q+="0";else Q+="errs_"+z;Q+=") { ",a+="}"}}}}if(S)Q+=" "+a+" ";if(U){if(W)Q+=" if (errors === 0) return data;           ",Q+=" else throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; ",Q+=" return errors === 0;       ";Q+=" }; return validate;"}else Q+=" var "+b+" = errors === errs_"+z+";";function Fv(gv){var Qf=gv.rules;for(var Zv=0;Zv<Qf.length;Zv++)if(av(Qf[Zv]))return!0}function av(gv){return v.schema[gv.keyword]!==void 0||gv.implements&&kv(gv)}function kv(gv){var Qf=gv.implements;for(var Zv=0;Zv<Qf.length;Zv++)if(v.schema[Qf[Zv]]!==void 0)return!0}return Q}});var ch=p((iX,nh)=>{var z0=G0(),H0=Zf(),ah=q0(),J6=BQ(),uh=GQ(),w6=H0.ucs2length,X6=W0(),Y6=ah.Validation;nh.exports=qQ;function qQ(f,v,h,P){var Q=this,W=this._opts,J=[void 0],w={},Y=[],G={},z=[],$={},E=[];v=v||{schema:f,refVal:J,refs:w};var l=l6.call(this,f,v,P),D=this._compilations[l.index];if(l.compiling)return D.callValidate=N;var M=this._formats,H=this.RULES;try{var L=b(f,v,h,P);D.validate=L;var U=D.callValidate;if(U){if(U.schema=L.schema,U.errors=null,U.refs=L.refs,U.refVal=L.refVal,U.root=L.root,U.$async=L.$async,W.sourceCode)U.source=L.source}return L}finally{B6.call(this,f,v,P)}function N(){var j=D.validate,_=j.apply(this,arguments);return N.errors=j.errors,_}function b(j,_,C,Xv){var t=!_||_&&_.schema==j;if(_.schema!=v.schema)return qQ.call(Q,j,_,C,Xv);var fv=j.$async===!0,s=uh({isTop:!0,schema:j,isRoot:t,baseId:Xv,root:_,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:ah.MissingRef,RULES:H,validate:uh,util:H0,resolve:z0,resolveRef:S,usePattern:x,useDefault:Z,useCustomRule:I,opts:W,formats:M,logger:Q.logger,self:Q});if(s=D0(J,z6)+D0(Y,G6)+D0(z,q6)+D0(E,D6)+s,W.processCode)s=W.processCode(s,j);var m;try{var $v=Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",s);m=$v(Q,H,M,v,J,z,E,X6,w6,Y6),J[0]=m}catch(jv){throw Q.logger.error("Error compiling schema, function code:",s),jv}if(m.schema=j,m.errors=null,m.refs=w,m.refVal=J,m.root=t?m:_,fv)m.$async=!0;if(W.sourceCode===!0)m.source={code:s,patterns:Y,defaults:z};return m}function S(j,_,C){_=z0.url(j,_);var Xv=w[_],t,fv;if(Xv!==void 0)return t=J[Xv],fv="refVal["+Xv+"]",R(t,fv);if(!C&&v.refs){var s=v.refs[_];if(s!==void 0)return t=v.refVal[s],fv=y(_,t),R(t,fv)}fv=y(_);var m=z0.call(Q,b,v,_);if(m===void 0){var $v=h&&h[_];if($v)m=z0.inlineRef($v,W.inlineRefs)?$v:qQ.call(Q,$v,v,h,j)}if(m===void 0)a(_);else return T(_,m),R(m,fv)}function y(j,_){var C=J.length;return J[C]=_,w[j]=C,"refVal"+C}function a(j){delete w[j]}function T(j,_){var C=w[j];J[C]=_}function R(j,_){return typeof j=="object"||typeof j=="boolean"?{code:_,schema:j,inline:!0}:{code:_,$async:j&&!!j.$async}}function x(j){var _=G[j];if(_===void 0)_=G[j]=Y.length,Y[_]=j;return"pattern"+_}function Z(j){switch(typeof j){case"boolean":case"number":return""+j;case"string":return H0.toQuotedString(j);case"object":if(j===null)return"null";var _=J6(j),C=$[_];if(C===void 0)C=$[_]=z.length,z[C]=j;return"default"+C}}function I(j,_,C,Xv){if(Q._opts.validateSchema!==!1){var t=j.definition.dependencies;if(t&&!t.every(function(Uv){return Object.prototype.hasOwnProperty.call(C,Uv)}))throw Error("parent schema must have all required keywords: "+t.join(","));var fv=j.definition.validateSchema;if(fv){var s=fv(_);if(!s){var m="keyword schema is invalid: "+Q.errorsText(fv.errors);if(Q._opts.validateSchema=="log")Q.logger.error(m);else throw Error(m)}}}var $v=j.definition.compile,jv=j.definition.inline,Rv=j.definition.macro,Pv;if($v)Pv=$v.call(Q,_,C,Xv);else if(Rv){if(Pv=Rv.call(Q,_,C,Xv),W.validateSchema!==!1)Q.validateSchema(Pv,!0)}else if(jv)Pv=jv.call(Q,Xv,j.keyword,_,C);else if(Pv=j.definition.validate,!Pv)return;if(Pv===void 0)throw Error('custom keyword "'+j.keyword+'"failed to compile');var Ov=E.length;return E[Ov]=Pv,{code:"customRule"+Ov,validate:Pv}}}function l6(f,v,h){var P=mh.call(this,f,v,h);if(P>=0)return{index:P,compiling:!0};return P=this._compilations.length,this._compilations[P]={schema:f,root:v,baseId:h},{index:P,compiling:!1}}function B6(f,v,h){var P=mh.call(this,f,v,h);if(P>=0)this._compilations.splice(P,1)}function mh(f,v,h){for(var P=0;P<this._compilations.length;P++){var Q=this._compilations[P];if(Q.schema==f&&Q.root==v&&Q.baseId==h)return P}return-1}function G6(f,v){return"var pattern"+f+" = new RegExp("+H0.toQuotedString(v[f])+");"}function q6(f){return"var default"+f+" = defaults["+f+"];"}function z6(f,v){return v[f]===void 0?"":"var refVal"+f+" = refVal["+f+"];"}function D6(f){return"var customRule"+f+" = customRules["+f+"];"}function D0(f,v){if(!f.length)return"";var h="";for(var P=0;P<f.length;P++)h+=v(P,f);return h}});var ih=p((dX,ph)=>{var K0=ph.exports=function(){this._cache={}};K0.prototype.put=function(v,h){this._cache[v]=h};K0.prototype.get=function(v){return this._cache[v]};K0.prototype.del=function(v){delete this._cache[v]};K0.prototype.clear=function(){this._cache={}}});var JP=p((oX,WP)=>{var H6=Zf(),K6=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,$6=[0,31,28,31,30,31,30,31,31,30,31,30,31],E6=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,dh=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,M6=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,O6=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,oh=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,sh=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,th=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,eh=/^(?:\/(?:[^~/]|~0|~1)*)*$/,vP=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,fP=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;WP.exports=$0;function $0(f){return f=f=="full"?"full":"fast",H6.copy($0[f])}$0.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":oh,url:sh,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:dh,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:PP,uuid:th,"json-pointer":eh,"json-pointer-uri-fragment":vP,"relative-json-pointer":fP};$0.full={date:QP,time:hP,"date-time":N6,uri:F6,"uri-reference":O6,"uri-template":oh,url:sh,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:dh,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:PP,uuid:th,"json-pointer":eh,"json-pointer-uri-fragment":vP,"relative-json-pointer":fP};function L6(f){return f%4===0&&(f%100!==0||f%400===0)}function QP(f){var v=f.match(K6);if(!v)return!1;var h=+v[1],P=+v[2],Q=+v[3];return P>=1&&P<=12&&Q>=1&&Q<=(P==2&&L6(h)?29:$6[P])}function hP(f,v){var h=f.match(E6);if(!h)return!1;var P=h[1],Q=h[2],W=h[3],J=h[5];return(P<=23&&Q<=59&&W<=59||P==23&&Q==59&&W==60)&&(!v||J)}var V6=/t|\s/i;function N6(f){var v=f.split(V6);return v.length==2&&QP(v[0])&&hP(v[1],!0)}var U6=/\/|:/;function F6(f){return U6.test(f)&&M6.test(f)}var A6=/[^\\]\\Z/;function PP(f){if(A6.test(f))return!1;try{return new RegExp(f),!0}catch(v){return!1}}});var XP=p((sX,wP)=>{wP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.errSchemaPath+"/"+h,G=!v.opts.allErrors,z="data"+(J||""),$="valid"+W,E,l;if(w=="#"||w=="#/")if(v.isRoot)E=v.async,l="validate";else E=v.root.schema.$async===!0,l="root.refVal[0]";else{var D=v.resolveRef(v.baseId,w,v.isRoot);if(D===void 0){var M=v.MissingRefError.message(v.baseId,w);if(v.opts.missingRefs=="fail"){v.logger.error(M);var H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(Y)+" , params: { ref: '"+v.util.escapeQuotes(w)+"' } ",v.opts.messages!==!1)Q+=" , message: 'can\\'t resolve reference "+v.util.escapeQuotes(w)+"' ";if(v.opts.verbose)Q+=" , schema: "+v.util.toQuotedString(w)+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+z+" ";Q+=" } "}else Q+=" {} ";var L=Q;if(Q=H.pop(),!v.compositeRule&&G)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(G)Q+=" if (false) { "}else if(v.opts.missingRefs=="ignore"){if(v.logger.warn(M),G)Q+=" if (true) { "}else throw new v.MissingRefError(v.baseId,w,M)}else if(D.inline){var U=v.util.copy(v);U.level++;var N="valid"+U.level;U.schema=D.schema,U.schemaPath="",U.errSchemaPath=w;var b=v.validate(U).replace(/validate\.schema/g,D.code);if(Q+=" "+b+" ",G)Q+=" if ("+N+") { "}else E=D.$async===!0||v.async&&D.$async!==!1,l=D.code}if(l){var H=H||[];if(H.push(Q),Q="",v.opts.passContext)Q+=" "+l+".call(this, ";else Q+=" "+l+"( ";if(Q+=" "+z+", (dataPath || '')",v.errorPath!='""')Q+=" + "+v.errorPath;var S=J?"data"+(J-1||""):"parentData",y=J?v.dataPathArr[J]:"parentDataProperty";Q+=" , "+S+" , "+y+", rootData)  ";var a=Q;if(Q=H.pop(),E){if(!v.async)throw Error("async schema referenced by sync schema");if(G)Q+=" var "+$+"; ";if(Q+=" try { await "+a+"; ",G)Q+=" "+$+" = true; ";if(Q+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",G)Q+=" "+$+" = false; ";if(Q+=" } ",G)Q+=" if ("+$+") { "}else if(Q+=" if (!"+a+") { if (vErrors === null) vErrors = "+l+".errors; else vErrors = vErrors.concat("+l+".errors); errors = vErrors.length; } ",G)Q+=" else { "}return Q}});var lP=p((tX,YP)=>{YP.exports=function(v,h,P){var Q=" ",W=v.schema[h],J=v.schemaPath+v.util.getProperty(h),w=v.errSchemaPath+"/"+h,Y=!v.opts.allErrors,G=v.util.copy(v),z="";G.level++;var $="valid"+G.level,E=G.baseId,l=!0,D=W;if(D){var M,H=-1,L=D.length-1;while(H<L)if(M=D[H+=1],v.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:v.util.schemaHasRules(M,v.RULES.all)){if(l=!1,G.schema=M,G.schemaPath=J+"["+H+"]",G.errSchemaPath=w+"/"+H,Q+="  "+v.validate(G)+" ",G.baseId=E,Y)Q+=" if ("+$+") { ",z+="}"}}if(Y)if(l)Q+=" if (true) { ";else Q+=" "+z.slice(0,-1)+" ";return Q}});var GP=p((eX,BP)=>{BP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="valid"+W,l="errs__"+W,D=v.util.copy(v),M="";D.level++;var H="valid"+D.level,L=w.every(function(T){return v.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:v.util.schemaHasRules(T,v.RULES.all)});if(L){var U=D.baseId;Q+=" var "+l+" = errors; var "+E+" = false;  ";var N=v.compositeRule;v.compositeRule=D.compositeRule=!0;var b=w;if(b){var S,y=-1,a=b.length-1;while(y<a)S=b[y+=1],D.schema=S,D.schemaPath=Y+"["+y+"]",D.errSchemaPath=G+"/"+y,Q+="  "+v.validate(D)+" ",D.baseId=U,Q+=" "+E+" = "+E+" || "+H+"; if (!"+E+") { ",M+="}"}if(v.compositeRule=D.compositeRule=N,Q+=" "+M+" if (!"+E+") {   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should match some schema in anyOf' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(Q+=" } else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } ",v.opts.allErrors)Q+=" } "}else if(z)Q+=" if (true) { ";return Q}});var zP=p((v5,qP)=>{qP.exports=function(v,h,P){var Q=" ",W=v.schema[h],J=v.errSchemaPath+"/"+h,w=!v.opts.allErrors,Y=v.util.toQuotedString(W);if(v.opts.$comment===!0)Q+=" console.log("+Y+");";else if(typeof v.opts.$comment=="function")Q+=" self._opts.$comment("+Y+", "+v.util.toQuotedString(J)+", validate.root.schema);";return Q}});var HP=p((f5,DP)=>{DP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="valid"+W,l=v.opts.$data&&w&&w.$data,D;if(l)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",D="schema"+W;else D=w;if(!l)Q+=" var schema"+W+" = validate.schema"+Y+";";Q+="var "+E+" = equal("+$+", schema"+W+"); if (!"+E+") {   ";var M=M||[];if(M.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'const' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { allowedValue: schema"+W+" } ",v.opts.messages!==!1)Q+=" , message: 'should be equal to constant' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";var H=Q;if(Q=M.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+H+"]); ";else Q+=" validate.errors = ["+H+"]; return false; ";else Q+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" }",z)Q+=" else { ";return Q}});var $P=p((Q5,KP)=>{KP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="valid"+W,l="errs__"+W,D=v.util.copy(v),M="";D.level++;var H="valid"+D.level,L="i"+W,U=D.dataLevel=v.dataLevel+1,N="data"+U,b=v.baseId,S=v.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:v.util.schemaHasRules(w,v.RULES.all);if(Q+="var "+l+" = errors;var "+E+";",S){var y=v.compositeRule;v.compositeRule=D.compositeRule=!0,D.schema=w,D.schemaPath=Y,D.errSchemaPath=G,Q+=" var "+H+" = false; for (var "+L+" = 0; "+L+" < "+$+".length; "+L+"++) { ",D.errorPath=v.util.getPathExpr(v.errorPath,L,v.opts.jsonPointers,!0);var a=$+"["+L+"]";D.dataPathArr[U]=L;var T=v.validate(D);if(D.baseId=b,v.util.varOccurences(T,N)<2)Q+=" "+v.util.varReplace(T,N,a)+" ";else Q+=" var "+N+" = "+a+"; "+T+" ";Q+=" if ("+H+") break; }  ",v.compositeRule=D.compositeRule=y,Q+=" "+M+" if (!"+H+") {"}else Q+=" if ("+$+".length == 0) {";var R=R||[];if(R.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should contain a valid item' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";var x=Q;if(Q=R.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+x+"]); ";else Q+=" validate.errors = ["+x+"]; return false; ";else Q+=" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } else { ",S)Q+="  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } ";if(v.opts.allErrors)Q+=" } ";return Q}});var MP=p((h5,EP)=>{EP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="errs__"+W,l=v.util.copy(v),D="";l.level++;var M="valid"+l.level,H={},L={},U=v.opts.ownProperties;for(y in w){if(y=="__proto__")continue;var N=w[y],b=Array.isArray(N)?L:H;b[y]=N}Q+="var "+E+" = errors;";var S=v.errorPath;Q+="var missing"+W+";";for(var y in L)if(b=L[y],b.length){if(Q+=" if ( "+$+v.util.getProperty(y)+" !== undefined ",U)Q+=" && Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(y)+"') ";if(z){Q+=" && ( ";var a=b;if(a){var T,R=-1,x=a.length-1;while(R<x){if(T=a[R+=1],R)Q+=" || ";var Z=v.util.getProperty(T),I=$+Z;if(Q+=" ( ( "+I+" === undefined ",U)Q+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(T)+"') ";Q+=") && (missing"+W+" = "+v.util.toQuotedString(v.opts.jsonPointers?T:Z)+") ) "}}Q+=")) {  ";var j="missing"+W,_="' + "+j+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(S,j,!0):S+" + "+j;var C=C||[];if(C.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { property: '"+v.util.escapeQuotes(y)+"', missingProperty: '"+_+"', depsCount: "+b.length+", deps: '"+v.util.escapeQuotes(b.length==1?b[0]:b.join(", "))+"' } ",v.opts.messages!==!1){if(Q+=" , message: 'should have ",b.length==1)Q+="property "+v.util.escapeQuotes(b[0]);else Q+="properties "+v.util.escapeQuotes(b.join(", "));Q+=" when property "+v.util.escapeQuotes(y)+" is present' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";var Xv=Q;if(Q=C.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+Xv+"]); ";else Q+=" validate.errors = ["+Xv+"]; return false; ";else Q+=" var err = "+Xv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{Q+=" ) { ";var t=b;if(t){var T,fv=-1,s=t.length-1;while(fv<s){T=t[fv+=1];var Z=v.util.getProperty(T),_=v.util.escapeQuotes(T),I=$+Z;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(S,T,v.opts.jsonPointers);if(Q+=" if ( "+I+" === undefined ",U)Q+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(T)+"') ";if(Q+=") {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { property: '"+v.util.escapeQuotes(y)+"', missingProperty: '"+_+"', depsCount: "+b.length+", deps: '"+v.util.escapeQuotes(b.length==1?b[0]:b.join(", "))+"' } ",v.opts.messages!==!1){if(Q+=" , message: 'should have ",b.length==1)Q+="property "+v.util.escapeQuotes(b[0]);else Q+="properties "+v.util.escapeQuotes(b.join(", "));Q+=" when property "+v.util.escapeQuotes(y)+" is present' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}if(Q+=" }   ",z)D+="}",Q+=" else { "}v.errorPath=S;var m=l.baseId;for(var y in H){var N=H[y];if(v.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:v.util.schemaHasRules(N,v.RULES.all)){if(Q+=" "+M+" = true; if ( "+$+v.util.getProperty(y)+" !== undefined ",U)Q+=" && Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(y)+"') ";if(Q+=") { ",l.schema=N,l.schemaPath=Y+v.util.getProperty(y),l.errSchemaPath=G+"/"+v.util.escapeFragment(y),Q+="  "+v.validate(l)+" ",l.baseId=m,Q+=" }  ",z)Q+=" if ("+M+") { ",D+="}"}}if(z)Q+="   "+D+" if ("+E+" == errors) {";return Q}});var LP=p((P5,OP)=>{OP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="valid"+W,l=v.opts.$data&&w&&w.$data,D;if(l)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",D="schema"+W;else D=w;var M="i"+W,H="schema"+W;if(!l)Q+=" var "+H+" = validate.schema"+Y+";";if(Q+="var "+E+";",l)Q+=" if (schema"+W+" === undefined) "+E+" = true; else if (!Array.isArray(schema"+W+")) "+E+" = false; else {";if(Q+=""+E+" = false;for (var "+M+"=0; "+M+"<"+H+".length; "+M+"++) if (equal("+$+", "+H+"["+M+"])) { "+E+" = true; break; }",l)Q+="  }  ";Q+=" if (!"+E+") {   ";var L=L||[];if(L.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { allowedValues: schema"+W+" } ",v.opts.messages!==!1)Q+=" , message: 'should be equal to one of the allowed values' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";var U=Q;if(Q=L.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+U+"]); ";else Q+=" validate.errors = ["+U+"]; return false; ";else Q+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" }",z)Q+=" else { ";return Q}});var NP=p((W5,VP)=>{VP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||"");if(v.opts.format===!1){if(z)Q+=" if (true) { ";return Q}var E=v.opts.$data&&w&&w.$data,l;if(E)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",l="schema"+W;else l=w;var D=v.opts.unknownFormats,M=Array.isArray(D);if(E){var H="format"+W,L="isObject"+W,U="formatType"+W;if(Q+=" var "+H+" = formats["+l+"]; var "+L+" = typeof "+H+" == 'object' && !("+H+" instanceof RegExp) && "+H+".validate; var "+U+" = "+L+" && "+H+".type || 'string'; if ("+L+") { ",v.async)Q+=" var async"+W+" = "+H+".async; ";if(Q+=" "+H+" = "+H+".validate; } if (  ",E)Q+=" ("+l+" !== undefined && typeof "+l+" != 'string') || ";if(Q+=" (",D!="ignore"){if(Q+=" ("+l+" && !"+H+" ",M)Q+=" && self._opts.unknownFormats.indexOf("+l+") == -1 ";Q+=") || "}if(Q+=" ("+H+" && "+U+" == '"+P+"' && !(typeof "+H+" == 'function' ? ",v.async)Q+=" (async"+W+" ? await "+H+"("+$+") : "+H+"("+$+")) ";else Q+=" "+H+"("+$+") ";Q+=" : "+H+".test("+$+"))))) {"}else{var H=v.formats[w];if(!H)if(D=="ignore"){if(v.logger.warn('unknown format "'+w+'" ignored in schema at path "'+v.errSchemaPath+'"'),z)Q+=" if (true) { ";return Q}else if(M&&D.indexOf(w)>=0){if(z)Q+=" if (true) { ";return Q}else throw Error('unknown format "'+w+'" is used in schema at path "'+v.errSchemaPath+'"');var L=typeof H=="object"&&!(H instanceof RegExp)&&H.validate,U=L&&H.type||"string";if(L){var N=H.async===!0;H=H.validate}if(U!=P){if(z)Q+=" if (true) { ";return Q}if(N){if(!v.async)throw Error("async format in sync schema");var b="formats"+v.util.getProperty(w)+".validate";Q+=" if (!(await "+b+"("+$+"))) { "}else{Q+=" if (! ";var b="formats"+v.util.getProperty(w);if(L)b+=".validate";if(typeof H=="function")Q+=" "+b+"("+$+") ";else Q+=" "+b+".test("+$+") ";Q+=") { "}}var S=S||[];if(S.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'format' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { format:  ",E)Q+=""+l;else Q+=""+v.util.toQuotedString(w);if(Q+="  } ",v.opts.messages!==!1){if(Q+=` , message: 'should match format "`,E)Q+="' + "+l+" + '";else Q+=""+v.util.escapeQuotes(w);Q+=`"' `}if(v.opts.verbose){if(Q+=" , schema:  ",E)Q+="validate.schema"+Y;else Q+=""+v.util.toQuotedString(w);Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}Q+=" } "}else Q+=" {} ";var y=Q;if(Q=S.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+y+"]); ";else Q+=" validate.errors = ["+y+"]; return false; ";else Q+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",z)Q+=" else { ";return Q}});var FP=p((J5,UP)=>{UP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="valid"+W,l="errs__"+W,D=v.util.copy(v);D.level++;var M="valid"+D.level,H=v.schema.then,L=v.schema.else,U=H!==void 0&&(v.opts.strictKeywords?typeof H=="object"&&Object.keys(H).length>0||H===!1:v.util.schemaHasRules(H,v.RULES.all)),N=L!==void 0&&(v.opts.strictKeywords?typeof L=="object"&&Object.keys(L).length>0||L===!1:v.util.schemaHasRules(L,v.RULES.all)),b=D.baseId;if(U||N){var S;D.createErrors=!1,D.schema=w,D.schemaPath=Y,D.errSchemaPath=G,Q+=" var "+l+" = errors; var "+E+" = true;  ";var y=v.compositeRule;if(v.compositeRule=D.compositeRule=!0,Q+="  "+v.validate(D)+" ",D.baseId=b,D.createErrors=!0,Q+="  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; }  ",v.compositeRule=D.compositeRule=y,U){if(Q+=" if ("+M+") {  ",D.schema=v.schema.then,D.schemaPath=v.schemaPath+".then",D.errSchemaPath=v.errSchemaPath+"/then",Q+="  "+v.validate(D)+" ",D.baseId=b,Q+=" "+E+" = "+M+"; ",U&&N)S="ifClause"+W,Q+=" var "+S+" = 'then'; ";else S="'then'";if(Q+=" } ",N)Q+=" else { "}else Q+=" if (!"+M+") { ";if(N){if(D.schema=v.schema.else,D.schemaPath=v.schemaPath+".else",D.errSchemaPath=v.errSchemaPath+"/else",Q+="  "+v.validate(D)+" ",D.baseId=b,Q+=" "+E+" = "+M+"; ",U&&N)S="ifClause"+W,Q+=" var "+S+" = 'else'; ";else S="'else'";Q+=" } "}if(Q+=" if (!"+E+") {   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'if' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { failingKeyword: "+S+" } ",v.opts.messages!==!1)Q+=` , message: 'should match "' + `+S+` + '" schema' `;if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(Q+=" }   ",z)Q+=" else { "}else if(z)Q+=" if (true) { ";return Q}});var jP=p((w5,AP)=>{AP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="valid"+W,l="errs__"+W,D=v.util.copy(v),M="";D.level++;var H="valid"+D.level,L="i"+W,U=D.dataLevel=v.dataLevel+1,N="data"+U,b=v.baseId;if(Q+="var "+l+" = errors;var "+E+";",Array.isArray(w)){var S=v.schema.additionalItems;if(S===!1){Q+=" "+E+" = "+$+".length <= "+w.length+"; ";var y=G;G=v.errSchemaPath+"/additionalItems",Q+="  if (!"+E+") {   ";var a=a||[];if(a.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { limit: "+w.length+" } ",v.opts.messages!==!1)Q+=" , message: 'should NOT have more than "+w.length+" items' ";if(v.opts.verbose)Q+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";var T=Q;if(Q=a.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+T+"]); ";else Q+=" validate.errors = ["+T+"]; return false; ";else Q+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",G=y,z)M+="}",Q+=" else { "}var R=w;if(R){var x,Z=-1,I=R.length-1;while(Z<I)if(x=R[Z+=1],v.opts.strictKeywords?typeof x=="object"&&Object.keys(x).length>0||x===!1:v.util.schemaHasRules(x,v.RULES.all)){Q+=" "+H+" = true; if ("+$+".length > "+Z+") { ";var j=$+"["+Z+"]";D.schema=x,D.schemaPath=Y+"["+Z+"]",D.errSchemaPath=G+"/"+Z,D.errorPath=v.util.getPathExpr(v.errorPath,Z,v.opts.jsonPointers,!0),D.dataPathArr[U]=Z;var _=v.validate(D);if(D.baseId=b,v.util.varOccurences(_,N)<2)Q+=" "+v.util.varReplace(_,N,j)+" ";else Q+=" var "+N+" = "+j+"; "+_+" ";if(Q+=" }  ",z)Q+=" if ("+H+") { ",M+="}"}}if(typeof S=="object"&&(v.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:v.util.schemaHasRules(S,v.RULES.all))){D.schema=S,D.schemaPath=v.schemaPath+".additionalItems",D.errSchemaPath=v.errSchemaPath+"/additionalItems",Q+=" "+H+" = true; if ("+$+".length > "+w.length+") {  for (var "+L+" = "+w.length+"; "+L+" < "+$+".length; "+L+"++) { ",D.errorPath=v.util.getPathExpr(v.errorPath,L,v.opts.jsonPointers,!0);var j=$+"["+L+"]";D.dataPathArr[U]=L;var _=v.validate(D);if(D.baseId=b,v.util.varOccurences(_,N)<2)Q+=" "+v.util.varReplace(_,N,j)+" ";else Q+=" var "+N+" = "+j+"; "+_+" ";if(z)Q+=" if (!"+H+") break; ";if(Q+=" } }  ",z)Q+=" if ("+H+") { ",M+="}"}}else if(v.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:v.util.schemaHasRules(w,v.RULES.all)){D.schema=w,D.schemaPath=Y,D.errSchemaPath=G,Q+="  for (var "+L+" = 0; "+L+" < "+$+".length; "+L+"++) { ",D.errorPath=v.util.getPathExpr(v.errorPath,L,v.opts.jsonPointers,!0);var j=$+"["+L+"]";D.dataPathArr[U]=L;var _=v.validate(D);if(D.baseId=b,v.util.varOccurences(_,N)<2)Q+=" "+v.util.varReplace(_,N,j)+" ";else Q+=" var "+N+" = "+j+"; "+_+" ";if(z)Q+=" if (!"+H+") break; ";Q+=" }"}if(z)Q+=" "+M+" if ("+l+" == errors) {";return Q}});var zQ=p((X5,bP)=>{bP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,b,$="data"+(J||""),E=v.opts.$data&&w&&w.$data,l;if(E)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",l="schema"+W;else l=w;var D=h=="maximum",M=D?"exclusiveMaximum":"exclusiveMinimum",H=v.schema[M],L=v.opts.$data&&H&&H.$data,U=D?"<":">",N=D?">":"<",b=void 0;if(!(E||typeof w=="number"||w===void 0))throw Error(h+" must be number");if(!(L||H===void 0||typeof H=="number"||typeof H=="boolean"))throw Error(M+" must be number or boolean");if(L){var S=v.util.getData(H.$data,J,v.dataPathArr),y="exclusive"+W,a="exclType"+W,T="exclIsNumber"+W,R="op"+W,x="' + "+R+" + '";Q+=" var schemaExcl"+W+" = "+S+"; ",S="schemaExcl"+W,Q+=" var "+y+"; var "+a+" = typeof "+S+"; if ("+a+" != 'boolean' && "+a+" != 'undefined' && "+a+" != 'number') { ";var b=M,Z=Z||[];if(Z.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(b||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: '"+M+" should be boolean' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";var I=Q;if(Q=Z.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+I+"]); ";else Q+=" validate.errors = ["+I+"]; return false; ";else Q+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } else if ( ",E)Q+=" ("+l+" !== undefined && typeof "+l+" != 'number') || ";if(Q+=" "+a+" == 'number' ? ( ("+y+" = "+l+" === undefined || "+S+" "+U+"= "+l+") ? "+$+" "+N+"= "+S+" : "+$+" "+N+" "+l+" ) : ( ("+y+" = "+S+" === true) ? "+$+" "+N+"= "+l+" : "+$+" "+N+" "+l+" ) || "+$+" !== "+$+") { var op"+W+" = "+y+" ? '"+U+"' : '"+U+"='; ",w===void 0)b=M,G=v.errSchemaPath+"/"+M,l=S,E=L}else{var T=typeof H=="number",x=U;if(T&&E){var R="'"+x+"'";if(Q+=" if ( ",E)Q+=" ("+l+" !== undefined && typeof "+l+" != 'number') || ";Q+=" ( "+l+" === undefined || "+H+" "+U+"= "+l+" ? "+$+" "+N+"= "+H+" : "+$+" "+N+" "+l+" ) || "+$+" !== "+$+") { "}else{if(T&&w===void 0)y=!0,b=M,G=v.errSchemaPath+"/"+M,l=H,N+="=";else{if(T)l=Math[D?"min":"max"](H,w);if(H===(T?l:!0))y=!0,b=M,G=v.errSchemaPath+"/"+M,N+="=";else y=!1,x+="="}var R="'"+x+"'";if(Q+=" if ( ",E)Q+=" ("+l+" !== undefined && typeof "+l+" != 'number') || ";Q+=" "+$+" "+N+" "+l+" || "+$+" !== "+$+") { "}}b=b||h;var Z=Z||[];if(Z.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(b||"_limit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { comparison: "+R+", limit: "+l+", exclusive: "+y+" } ",v.opts.messages!==!1)if(Q+=" , message: 'should be "+x+" ",E)Q+="' + "+l;else Q+=""+l+"'";if(v.opts.verbose){if(Q+=" , schema:  ",E)Q+="validate.schema"+Y;else Q+=""+w;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}Q+=" } "}else Q+=" {} ";var I=Q;if(Q=Z.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+I+"]); ";else Q+=" validate.errors = ["+I+"]; return false; ";else Q+=" var err = "+I+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",z)Q+=" else { ";return Q}});var DQ=p((Y5,SP)=>{SP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,M,$="data"+(J||""),E=v.opts.$data&&w&&w.$data,l;if(E)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",l="schema"+W;else l=w;if(!(E||typeof w=="number"))throw Error(h+" must be number");var D=h=="maxItems"?">":"<";if(Q+="if ( ",E)Q+=" ("+l+" !== undefined && typeof "+l+" != 'number') || ";Q+=" "+$+".length "+D+" "+l+") { ";var M=h,H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(M||"_limitItems")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { limit: "+l+" } ",v.opts.messages!==!1){if(Q+=" , message: 'should NOT have ",h=="maxItems")Q+="more";else Q+="fewer";if(Q+=" than ",E)Q+="' + "+l+" + '";else Q+=""+w;Q+=" items' "}if(v.opts.verbose){if(Q+=" , schema:  ",E)Q+="validate.schema"+Y;else Q+=""+w;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}Q+=" } "}else Q+=" {} ";var L=Q;if(Q=H.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",z)Q+=" else { ";return Q}});var HQ=p((l5,RP)=>{RP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,M,$="data"+(J||""),E=v.opts.$data&&w&&w.$data,l;if(E)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",l="schema"+W;else l=w;if(!(E||typeof w=="number"))throw Error(h+" must be number");var D=h=="maxLength"?">":"<";if(Q+="if ( ",E)Q+=" ("+l+" !== undefined && typeof "+l+" != 'number') || ";if(v.opts.unicode===!1)Q+=" "+$+".length ";else Q+=" ucs2length("+$+") ";Q+=" "+D+" "+l+") { ";var M=h,H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(M||"_limitLength")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { limit: "+l+" } ",v.opts.messages!==!1){if(Q+=" , message: 'should NOT be ",h=="maxLength")Q+="longer";else Q+="shorter";if(Q+=" than ",E)Q+="' + "+l+" + '";else Q+=""+w;Q+=" characters' "}if(v.opts.verbose){if(Q+=" , schema:  ",E)Q+="validate.schema"+Y;else Q+=""+w;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}Q+=" } "}else Q+=" {} ";var L=Q;if(Q=H.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",z)Q+=" else { ";return Q}});var KQ=p((B5,_P)=>{_P.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,M,$="data"+(J||""),E=v.opts.$data&&w&&w.$data,l;if(E)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",l="schema"+W;else l=w;if(!(E||typeof w=="number"))throw Error(h+" must be number");var D=h=="maxProperties"?">":"<";if(Q+="if ( ",E)Q+=" ("+l+" !== undefined && typeof "+l+" != 'number') || ";Q+=" Object.keys("+$+").length "+D+" "+l+") { ";var M=h,H=H||[];if(H.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+(M||"_limitProperties")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { limit: "+l+" } ",v.opts.messages!==!1){if(Q+=" , message: 'should NOT have ",h=="maxProperties")Q+="more";else Q+="fewer";if(Q+=" than ",E)Q+="' + "+l+" + '";else Q+=""+w;Q+=" properties' "}if(v.opts.verbose){if(Q+=" , schema:  ",E)Q+="validate.schema"+Y;else Q+=""+w;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}Q+=" } "}else Q+=" {} ";var L=Q;if(Q=H.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+L+"]); ";else Q+=" validate.errors = ["+L+"]; return false; ";else Q+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",z)Q+=" else { ";return Q}});var yP=p((G5,gP)=>{gP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E=v.opts.$data&&w&&w.$data,l;if(E)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",l="schema"+W;else l=w;if(!(E||typeof w=="number"))throw Error(h+" must be number");if(Q+="var division"+W+";if (",E)Q+=" "+l+" !== undefined && ( typeof "+l+" != 'number' || ";if(Q+=" (division"+W+" = "+$+" / "+l+", ",v.opts.multipleOfPrecision)Q+=" Math.abs(Math.round(division"+W+") - division"+W+") > 1e-"+v.opts.multipleOfPrecision+" ";else Q+=" division"+W+" !== parseInt(division"+W+") ";if(Q+=" ) ",E)Q+="  )  ";Q+=" ) {   ";var D=D||[];if(D.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { multipleOf: "+l+" } ",v.opts.messages!==!1)if(Q+=" , message: 'should be multiple of ",E)Q+="' + "+l;else Q+=""+l+"'";if(v.opts.verbose){if(Q+=" , schema:  ",E)Q+="validate.schema"+Y;else Q+=""+w;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}Q+=" } "}else Q+=" {} ";var M=Q;if(Q=D.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+M+"]); ";else Q+=" validate.errors = ["+M+"]; return false; ";else Q+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",z)Q+=" else { ";return Q}});var rP=p((q5,kP)=>{kP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="errs__"+W,l=v.util.copy(v);l.level++;var D="valid"+l.level;if(v.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:v.util.schemaHasRules(w,v.RULES.all)){l.schema=w,l.schemaPath=Y,l.errSchemaPath=G,Q+=" var "+E+" = errors;  ";var M=v.compositeRule;v.compositeRule=l.compositeRule=!0,l.createErrors=!1;var H;if(l.opts.allErrors)H=l.opts.allErrors,l.opts.allErrors=!1;if(Q+=" "+v.validate(l)+" ",l.createErrors=!0,H)l.opts.allErrors=H;v.compositeRule=l.compositeRule=M,Q+=" if ("+D+") {   ";var L=L||[];if(L.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should NOT be valid' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";var U=Q;if(Q=L.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+U+"]); ";else Q+=" validate.errors = ["+U+"]; return false; ";else Q+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } else {  errors = "+E+"; if (vErrors !== null) { if ("+E+") vErrors.length = "+E+"; else vErrors = null; } ",v.opts.allErrors)Q+=" } "}else{if(Q+="  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: {} ",v.opts.messages!==!1)Q+=" , message: 'should NOT be valid' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",z)Q+=" if (false) { "}return Q}});var CP=p((z5,IP)=>{IP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="valid"+W,l="errs__"+W,D=v.util.copy(v),M="";D.level++;var H="valid"+D.level,L=D.baseId,U="prevValid"+W,N="passingSchemas"+W;Q+="var "+l+" = errors , "+U+" = false , "+E+" = false , "+N+" = null; ";var b=v.compositeRule;v.compositeRule=D.compositeRule=!0;var S=w;if(S){var y,a=-1,T=S.length-1;while(a<T){if(y=S[a+=1],v.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:v.util.schemaHasRules(y,v.RULES.all))D.schema=y,D.schemaPath=Y+"["+a+"]",D.errSchemaPath=G+"/"+a,Q+="  "+v.validate(D)+" ",D.baseId=L;else Q+=" var "+H+" = true; ";if(a)Q+=" if ("+H+" && "+U+") { "+E+" = false; "+N+" = ["+N+", "+a+"]; } else { ",M+="}";Q+=" if ("+H+") { "+E+" = "+U+" = true; "+N+" = "+a+"; }"}}if(v.compositeRule=D.compositeRule=b,Q+=""+M+"if (!"+E+") {   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { passingSchemas: "+N+" } ",v.opts.messages!==!1)Q+=" , message: 'should match exactly one schema in oneOf' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(Q+="} else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; }",v.opts.allErrors)Q+=" } ";return Q}});var TP=p((D5,ZP)=>{ZP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E=v.opts.$data&&w&&w.$data,l;if(E)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",l="schema"+W;else l=w;var D=E?"(new RegExp("+l+"))":v.usePattern(w);if(Q+="if ( ",E)Q+=" ("+l+" !== undefined && typeof "+l+" != 'string') || ";Q+=" !"+D+".test("+$+") ) {   ";var M=M||[];if(M.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { pattern:  ",E)Q+=""+l;else Q+=""+v.util.toQuotedString(w);if(Q+="  } ",v.opts.messages!==!1){if(Q+=` , message: 'should match pattern "`,E)Q+="' + "+l+" + '";else Q+=""+v.util.escapeQuotes(w);Q+=`"' `}if(v.opts.verbose){if(Q+=" , schema:  ",E)Q+="validate.schema"+Y;else Q+=""+v.util.toQuotedString(w);Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}Q+=" } "}else Q+=" {} ";var H=Q;if(Q=M.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+H+"]); ";else Q+=" validate.errors = ["+H+"]; return false; ";else Q+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+="} ",z)Q+=" else { ";return Q}});var uP=p((H5,xP)=>{xP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="errs__"+W,l=v.util.copy(v),D="";l.level++;var M="valid"+l.level,H="key"+W,L="idx"+W,U=l.dataLevel=v.dataLevel+1,N="data"+U,b="dataProperties"+W,S=Object.keys(w||{}).filter(fv),y=v.schema.patternProperties||{},a=Object.keys(y).filter(fv),T=v.schema.additionalProperties,R=S.length||a.length,x=T===!1,Z=typeof T=="object"&&Object.keys(T).length,I=v.opts.removeAdditional,j=x||Z||I,_=v.opts.ownProperties,C=v.baseId,Xv=v.schema.required;if(Xv&&!(v.opts.$data&&Xv.$data)&&Xv.length<v.opts.loopRequired)var t=v.util.toHash(Xv);function fv(iv){return iv!=="__proto__"}if(Q+="var "+E+" = errors;var "+M+" = true;",_)Q+=" var "+b+" = undefined;";if(j){if(_)Q+=" "+b+" = "+b+" || Object.keys("+$+"); for (var "+L+"=0; "+L+"<"+b+".length; "+L+"++) { var "+H+" = "+b+"["+L+"]; ";else Q+=" for (var "+H+" in "+$+") { ";if(R){if(Q+=" var isAdditional"+W+" = !(false ",S.length)if(S.length>8)Q+=" || validate.schema"+Y+".hasOwnProperty("+H+") ";else{var s=S;if(s){var m,$v=-1,jv=s.length-1;while($v<jv)m=s[$v+=1],Q+=" || "+H+" == "+v.util.toQuotedString(m)+" "}}if(a.length){var Rv=a;if(Rv){var Pv,Ov=-1,Uv=Rv.length-1;while(Ov<Uv)Pv=Rv[Ov+=1],Q+=" || "+v.usePattern(Pv)+".test("+H+") "}}Q+=" ); if (isAdditional"+W+") { "}if(I=="all")Q+=" delete "+$+"["+H+"]; ";else{var _v=v.errorPath,Kf="' + "+H+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);if(x)if(I)Q+=" delete "+$+"["+H+"]; ";else{Q+=" "+M+" = false; ";var Yf=G;G=v.errSchemaPath+"/additionalProperties";var Lv=Lv||[];if(Lv.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { additionalProperty: '"+Kf+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is an invalid additional property";else Q+="should NOT have additional properties";Q+="' "}if(v.opts.verbose)Q+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";var Ev=Q;if(Q=Lv.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+Ev+"]); ";else Q+=" validate.errors = ["+Ev+"]; return false; ";else Q+=" var err = "+Ev+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(G=Yf,z)Q+=" break; "}else if(Z)if(I=="failing"){Q+=" var "+E+" = errors;  ";var jf=v.compositeRule;v.compositeRule=l.compositeRule=!0,l.schema=T,l.schemaPath=v.schemaPath+".additionalProperties",l.errSchemaPath=v.errSchemaPath+"/additionalProperties",l.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);var bv=$+"["+H+"]";l.dataPathArr[U]=H;var Jv=v.validate(l);if(l.baseId=C,v.util.varOccurences(Jv,N)<2)Q+=" "+v.util.varReplace(Jv,N,bv)+" ";else Q+=" var "+N+" = "+bv+"; "+Jv+" ";Q+=" if (!"+M+") { errors = "+E+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+$+"["+H+"]; }  ",v.compositeRule=l.compositeRule=jf}else{l.schema=T,l.schemaPath=v.schemaPath+".additionalProperties",l.errSchemaPath=v.errSchemaPath+"/additionalProperties",l.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);var bv=$+"["+H+"]";l.dataPathArr[U]=H;var Jv=v.validate(l);if(l.baseId=C,v.util.varOccurences(Jv,N)<2)Q+=" "+v.util.varReplace(Jv,N,bv)+" ";else Q+=" var "+N+" = "+bv+"; "+Jv+" ";if(z)Q+=" if (!"+M+") break; "}v.errorPath=_v}if(R)Q+=" } ";if(Q+=" }  ",z)Q+=" if ("+M+") { ",D+="}"}var $f=v.opts.useDefaults&&!v.compositeRule;if(S.length){var lf=S;if(lf){var m,bf=-1,Sf=lf.length-1;while(bf<Sf){m=lf[bf+=1];var Fv=w[m];if(v.opts.strictKeywords?typeof Fv=="object"&&Object.keys(Fv).length>0||Fv===!1:v.util.schemaHasRules(Fv,v.RULES.all)){var av=v.util.getProperty(m),bv=$+av,kv=$f&&Fv.default!==void 0;l.schema=Fv,l.schemaPath=Y+av,l.errSchemaPath=G+"/"+v.util.escapeFragment(m),l.errorPath=v.util.getPath(v.errorPath,m,v.opts.jsonPointers),l.dataPathArr[U]=v.util.toQuotedString(m);var Jv=v.validate(l);if(l.baseId=C,v.util.varOccurences(Jv,N)<2){Jv=v.util.varReplace(Jv,N,bv);var gv=bv}else{var gv=N;Q+=" var "+N+" = "+bv+"; "}if(kv)Q+=" "+Jv+" ";else{if(t&&t[m]){if(Q+=" if ( "+gv+" === undefined ",_)Q+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(m)+"') ";Q+=") { "+M+" = false; ";var _v=v.errorPath,Yf=G,Qf=v.util.escapeQuotes(m);if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(_v,m,v.opts.jsonPointers);G=v.errSchemaPath+"/required";var Lv=Lv||[];if(Lv.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+Qf+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+Qf+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";var Ev=Q;if(Q=Lv.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+Ev+"]); ";else Q+=" validate.errors = ["+Ev+"]; return false; ";else Q+=" var err = "+Ev+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";G=Yf,v.errorPath=_v,Q+=" } else { "}else if(z){if(Q+=" if ( "+gv+" === undefined ",_)Q+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(m)+"') ";Q+=") { "+M+" = true; } else { "}else{if(Q+=" if ("+gv+" !== undefined ",_)Q+=" &&   Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(m)+"') ";Q+=" ) { "}Q+=" "+Jv+" } "}}if(z)Q+=" if ("+M+") { ",D+="}"}}}if(a.length){var Zv=a;if(Zv){var Pv,y1=-1,_0=Zv.length-1;while(y1<_0){Pv=Zv[y1+=1];var Fv=y[Pv];if(v.opts.strictKeywords?typeof Fv=="object"&&Object.keys(Fv).length>0||Fv===!1:v.util.schemaHasRules(Fv,v.RULES.all)){if(l.schema=Fv,l.schemaPath=v.schemaPath+".patternProperties"+v.util.getProperty(Pv),l.errSchemaPath=v.errSchemaPath+"/patternProperties/"+v.util.escapeFragment(Pv),_)Q+=" "+b+" = "+b+" || Object.keys("+$+"); for (var "+L+"=0; "+L+"<"+b+".length; "+L+"++) { var "+H+" = "+b+"["+L+"]; ";else Q+=" for (var "+H+" in "+$+") { ";Q+=" if ("+v.usePattern(Pv)+".test("+H+")) { ",l.errorPath=v.util.getPathExpr(v.errorPath,H,v.opts.jsonPointers);var bv=$+"["+H+"]";l.dataPathArr[U]=H;var Jv=v.validate(l);if(l.baseId=C,v.util.varOccurences(Jv,N)<2)Q+=" "+v.util.varReplace(Jv,N,bv)+" ";else Q+=" var "+N+" = "+bv+"; "+Jv+" ";if(z)Q+=" if (!"+M+") break; ";if(Q+=" } ",z)Q+=" else "+M+" = true; ";if(Q+=" }  ",z)Q+=" if ("+M+") { ",D+="}"}}}}if(z)Q+=" "+D+" if ("+E+" == errors) {";return Q}});var mP=p((K5,aP)=>{aP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="errs__"+W,l=v.util.copy(v),D="";l.level++;var M="valid"+l.level;if(Q+="var "+E+" = errors;",v.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:v.util.schemaHasRules(w,v.RULES.all)){l.schema=w,l.schemaPath=Y,l.errSchemaPath=G;var H="key"+W,L="idx"+W,U="i"+W,N="' + "+H+" + '",b=l.dataLevel=v.dataLevel+1,S="data"+b,y="dataProperties"+W,a=v.opts.ownProperties,T=v.baseId;if(a)Q+=" var "+y+" = undefined; ";if(a)Q+=" "+y+" = "+y+" || Object.keys("+$+"); for (var "+L+"=0; "+L+"<"+y+".length; "+L+"++) { var "+H+" = "+y+"["+L+"]; ";else Q+=" for (var "+H+" in "+$+") { ";Q+=" var startErrs"+W+" = errors; ";var R=H,x=v.compositeRule;v.compositeRule=l.compositeRule=!0;var Z=v.validate(l);if(l.baseId=T,v.util.varOccurences(Z,S)<2)Q+=" "+v.util.varReplace(Z,S,R)+" ";else Q+=" var "+S+" = "+R+"; "+Z+" ";if(v.compositeRule=l.compositeRule=x,Q+=" if (!"+M+") { for (var "+U+"=startErrs"+W+"; "+U+"<errors; "+U+"++) { vErrors["+U+"].propertyName = "+H+"; }   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { propertyName: '"+N+"' } ",v.opts.messages!==!1)Q+=" , message: 'property name \\'"+N+"\\' is invalid' ";if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; ";if(z)Q+=" break; ";Q+=" } }"}if(z)Q+=" "+D+" if ("+E+" == errors) {";return Q}});var cP=p(($5,nP)=>{nP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="valid"+W,l=v.opts.$data&&w&&w.$data,D;if(l)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",D="schema"+W;else D=w;var M="schema"+W;if(!l)if(w.length<v.opts.loopRequired&&v.schema.properties&&Object.keys(v.schema.properties).length){var H=[],L=w;if(L){var U,N=-1,b=L.length-1;while(N<b){U=L[N+=1];var S=v.schema.properties[U];if(!(S&&(v.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:v.util.schemaHasRules(S,v.RULES.all))))H[H.length]=U}}}else var H=w;if(l||H.length){var y=v.errorPath,a=l||H.length>=v.opts.loopRequired,T=v.opts.ownProperties;if(z)if(Q+=" var missing"+W+"; ",a){if(!l)Q+=" var "+M+" = validate.schema"+Y+"; ";var R="i"+W,x="schema"+W+"["+R+"]",Z="' + "+x+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(y,x,v.opts.jsonPointers);if(Q+=" var "+E+" = true; ",l)Q+=" if (schema"+W+" === undefined) "+E+" = true; else if (!Array.isArray(schema"+W+")) "+E+" = false; else {";if(Q+=" for (var "+R+" = 0; "+R+" < "+M+".length; "+R+"++) { "+E+" = "+$+"["+M+"["+R+"]] !== undefined ",T)Q+=" &&   Object.prototype.hasOwnProperty.call("+$+", "+M+"["+R+"]) ";if(Q+="; if (!"+E+") break; } ",l)Q+="  }  ";Q+="  if (!"+E+") {   ";var I=I||[];if(I.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+Z+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";var j=Q;if(Q=I.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+j+"]); ";else Q+=" validate.errors = ["+j+"]; return false; ";else Q+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } else { "}else{Q+=" if ( ";var _=H;if(_){var C,R=-1,Xv=_.length-1;while(R<Xv){if(C=_[R+=1],R)Q+=" || ";var t=v.util.getProperty(C),fv=$+t;if(Q+=" ( ( "+fv+" === undefined ",T)Q+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(C)+"') ";Q+=") && (missing"+W+" = "+v.util.toQuotedString(v.opts.jsonPointers?C:t)+") ) "}}Q+=") {  ";var x="missing"+W,Z="' + "+x+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(y,x,!0):y+" + "+x;var I=I||[];if(I.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+Z+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";var j=Q;if(Q=I.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+j+"]); ";else Q+=" validate.errors = ["+j+"]; return false; ";else Q+=" var err = "+j+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";Q+=" } else { "}else if(a){if(!l)Q+=" var "+M+" = validate.schema"+Y+"; ";var R="i"+W,x="schema"+W+"["+R+"]",Z="' + "+x+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(y,x,v.opts.jsonPointers);if(l){if(Q+=" if ("+M+" && !Array.isArray("+M+")) {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+Z+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+M+" !== undefined) { "}if(Q+=" for (var "+R+" = 0; "+R+" < "+M+".length; "+R+"++) { if ("+$+"["+M+"["+R+"]] === undefined ",T)Q+=" || ! Object.prototype.hasOwnProperty.call("+$+", "+M+"["+R+"]) ";if(Q+=") {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+Z+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",l)Q+="  }  "}else{var s=H;if(s){var C,m=-1,$v=s.length-1;while(m<$v){C=s[m+=1];var t=v.util.getProperty(C),Z=v.util.escapeQuotes(C),fv=$+t;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(y,C,v.opts.jsonPointers);if(Q+=" if ( "+fv+" === undefined ",T)Q+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(C)+"') ";if(Q+=") {  var err =   ",v.createErrors!==!1){if(Q+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { missingProperty: '"+Z+"' } ",v.opts.messages!==!1){if(Q+=" , message: '",v.opts._errorDataPathProperty)Q+="is a required property";else Q+="should have required property \\'"+Z+"\\'";Q+="' "}if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";Q+=" } "}else Q+=" {} ";Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}v.errorPath=y}else if(z)Q+=" if (true) {";return Q}});var iP=p((E5,pP)=>{pP.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$="data"+(J||""),E="valid"+W,l=v.opts.$data&&w&&w.$data,D;if(l)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",D="schema"+W;else D=w;if((w||l)&&v.opts.uniqueItems!==!1){if(l)Q+=" var "+E+"; if ("+D+" === false || "+D+" === undefined) "+E+" = true; else if (typeof "+D+" != 'boolean') "+E+" = false; else { ";Q+=" var i = "+$+".length , "+E+" = true , j; if (i > 1) { ";var M=v.schema.items&&v.schema.items.type,H=Array.isArray(M);if(!M||M=="object"||M=="array"||H&&(M.indexOf("object")>=0||M.indexOf("array")>=0))Q+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+$+"[i], "+$+"[j])) { "+E+" = false; break outer; } } } ";else{Q+=" var itemIndices = {}, item; for (;i--;) { var item = "+$+"[i]; ";var L="checkDataType"+(H?"s":"");if(Q+=" if ("+v.util[L](M,"item",v.opts.strictNumbers,!0)+") continue; ",H)Q+=` if (typeof item == 'string') item = '"' + item; `;Q+=" if (typeof itemIndices[item] == 'number') { "+E+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}if(Q+=" } ",l)Q+="  }  ";Q+=" if (!"+E+") {   ";var U=U||[];if(U.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { i: i, j: j } ",v.opts.messages!==!1)Q+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' ";if(v.opts.verbose){if(Q+=" , schema:  ",l)Q+="validate.schema"+Y;else Q+=""+w;Q+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}Q+=" } "}else Q+=" {} ";var N=Q;if(Q=U.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+N+"]); ";else Q+=" validate.errors = ["+N+"]; return false; ";else Q+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(Q+=" } ",z)Q+=" else { "}else if(z)Q+=" if (true) { ";return Q}});var oP=p((M5,dP)=>{dP.exports={$ref:XP(),allOf:lP(),anyOf:GP(),$comment:zP(),const:HP(),contains:$P(),dependencies:MP(),enum:LP(),format:NP(),if:FP(),items:jP(),maximum:zQ(),minimum:zQ(),maxItems:DQ(),minItems:DQ(),maxLength:HQ(),minLength:HQ(),maxProperties:KQ(),minProperties:KQ(),multipleOf:yP(),not:rP(),oneOf:CP(),pattern:TP(),properties:uP(),propertyNames:mP(),required:cP(),uniqueItems:iP(),validate:GQ()}});var eP=p((O5,tP)=>{var sP=oP(),$Q=Zf().toHash;tP.exports=function(){var v=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],h=["type","$comment"],P=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],Q=["number","integer","string","array","object","boolean","null"];return v.all=$Q(h),v.types=$Q(Q),v.forEach(function(W){if(W.rules=W.rules.map(function(J){var w;if(typeof J=="object"){var Y=Object.keys(J)[0];w=J[Y],J=Y,w.forEach(function(z){h.push(z),v.all[z]=!0})}h.push(J);var G=v.all[J]={keyword:J,code:sP[J],implements:w};return G}),v.all.$comment={keyword:"$comment",code:sP.$comment},W.type)v.types[W.type]=W}),v.keywords=$Q(h.concat(P)),v.custom={},v}});var QW=p((L5,fW)=>{var vW=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];fW.exports=function(f,v){for(var h=0;h<v.length;h++){f=JSON.parse(JSON.stringify(f));var P=v[h].split("/"),Q=f,W;for(W=1;W<P.length;W++)Q=Q[P[W]];for(W=0;W<vW.length;W++){var J=vW[W],w=Q[J];if(w)Q[J]={anyOf:[w,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}}return f}});var WW=p((V5,PW)=>{var j6=q0().MissingRef;PW.exports=hW;function hW(f,v,h){var P=this;if(typeof this._opts.loadSchema!="function")throw Error("options.loadSchema should be a function");if(typeof v=="function")h=v,v=void 0;var Q=W(f).then(function(){var w=P._addSchema(f,void 0,v);return w.validate||J(w)});if(h)Q.then(function(w){h(null,w)},h);return Q;function W(w){var Y=w.$schema;return Y&&!P.getSchema(Y)?hW.call(P,{$ref:Y},!0):Promise.resolve()}function J(w){try{return P._compile(w)}catch(G){if(G instanceof j6)return Y(G);throw G}function Y(G){var z=G.missingSchema;if(l(z))throw Error("Schema "+z+" is loaded but "+G.missingRef+" cannot be resolved");var $=P._loadingSchemas[z];if(!$)$=P._loadingSchemas[z]=P._opts.loadSchema(z),$.then(E,E);return $.then(function(D){if(!l(z))return W(D).then(function(){if(!l(z))P.addSchema(D,z,void 0,v)})}).then(function(){return J(w)});function E(){delete P._loadingSchemas[z]}function l(D){return P._refs[D]||P._schemas[D]}}}}});var wW=p((N5,JW)=>{JW.exports=function(v,h,P){var Q=" ",W=v.level,J=v.dataLevel,w=v.schema[h],Y=v.schemaPath+v.util.getProperty(h),G=v.errSchemaPath+"/"+h,z=!v.opts.allErrors,$,E="data"+(J||""),l="valid"+W,D="errs__"+W,M=v.opts.$data&&w&&w.$data,H;if(M)Q+=" var schema"+W+" = "+v.util.getData(w.$data,J,v.dataPathArr)+"; ",H="schema"+W;else H=w;var L=this,U="definition"+W,N=L.definition,b="",S,y,a,T,R;if(M&&N.$data){R="keywordValidate"+W;var x=N.validateSchema;Q+=" var "+U+" = RULES.custom['"+h+"'].definition; var "+R+" = "+U+".validate;"}else{if(T=v.useCustomRule(L,w,v.schema,v),!T)return;H="validate.schema"+Y,R=T.code,S=N.compile,y=N.inline,a=N.macro}var Z=R+".errors",I="i"+W,j="ruleErr"+W,_=N.async;if(_&&!v.async)throw Error("async keyword in sync schema");if(!(y||a))Q+=""+Z+" = null;";if(Q+="var "+D+" = errors;var "+l+";",M&&N.$data){if(b+="}",Q+=" if ("+H+" === undefined) { "+l+" = true; } else { ",x)b+="}",Q+=" "+l+" = "+U+".validateSchema("+H+"); if ("+l+") { "}if(y)if(N.statements)Q+=" "+T.validate+" ";else Q+=" "+l+" = "+T.validate+"; ";else if(a){var C=v.util.copy(v),b="";C.level++;var Xv="valid"+C.level;C.schema=T.validate,C.schemaPath="";var t=v.compositeRule;v.compositeRule=C.compositeRule=!0;var fv=v.validate(C).replace(/validate\.schema/g,R);v.compositeRule=C.compositeRule=t,Q+=" "+fv}else{var s=s||[];if(s.push(Q),Q="",Q+="  "+R+".call( ",v.opts.passContext)Q+="this";else Q+="self";if(S||N.schema===!1)Q+=" , "+E+" ";else Q+=" , "+H+" , "+E+" , validate.schema"+v.schemaPath+" ";if(Q+=" , (dataPath || '')",v.errorPath!='""')Q+=" + "+v.errorPath;var m=J?"data"+(J-1||""):"parentData",$v=J?v.dataPathArr[J]:"parentDataProperty";Q+=" , "+m+" , "+$v+" , rootData )  ";var jv=Q;if(Q=s.pop(),N.errors===!1){if(Q+=" "+l+" = ",_)Q+="await ";Q+=""+jv+"; "}else if(_)Z="customErrors"+W,Q+=" var "+Z+" = null; try { "+l+" = await "+jv+"; } catch (e) { "+l+" = false; if (e instanceof ValidationError) "+Z+" = e.errors; else throw e; } ";else Q+=" "+Z+" = null; "+l+" = "+jv+"; "}if(N.modifying)Q+=" if ("+m+") "+E+" = "+m+"["+$v+"];";if(Q+=""+b,N.valid){if(z)Q+=" if (true) { "}else{if(Q+=" if ( ",N.valid===void 0)if(Q+=" !",a)Q+=""+Xv;else Q+=""+l;else Q+=" "+!N.valid+" ";Q+=") { ",$=L.keyword;var s=s||[];s.push(Q),Q="";var s=s||[];if(s.push(Q),Q="",v.createErrors!==!1){if(Q+=" { keyword: '"+($||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { keyword: '"+L.keyword+"' } ",v.opts.messages!==!1)Q+=` , message: 'should pass "`+L.keyword+`" keyword validation' `;if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+E+" ";Q+=" } "}else Q+=" {} ";var Rv=Q;if(Q=s.pop(),!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(["+Rv+"]); ";else Q+=" validate.errors = ["+Rv+"]; return false; ";else Q+=" var err = "+Rv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var Pv=Q;if(Q=s.pop(),y)if(N.errors){if(N.errors!="full"){if(Q+="  for (var "+I+"="+D+"; "+I+"<errors; "+I+"++) { var "+j+" = vErrors["+I+"]; if ("+j+".dataPath === undefined) "+j+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+j+".schemaPath === undefined) { "+j+'.schemaPath = "'+G+'"; } ',v.opts.verbose)Q+=" "+j+".schema = "+H+"; "+j+".data = "+E+"; ";Q+=" } "}}else if(N.errors===!1)Q+=" "+Pv+" ";else{if(Q+=" if ("+D+" == errors) { "+Pv+" } else {  for (var "+I+"="+D+"; "+I+"<errors; "+I+"++) { var "+j+" = vErrors["+I+"]; if ("+j+".dataPath === undefined) "+j+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+j+".schemaPath === undefined) { "+j+'.schemaPath = "'+G+'"; } ',v.opts.verbose)Q+=" "+j+".schema = "+H+"; "+j+".data = "+E+"; ";Q+=" } } "}else if(a){if(Q+="   var err =   ",v.createErrors!==!1){if(Q+=" { keyword: '"+($||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(G)+" , params: { keyword: '"+L.keyword+"' } ",v.opts.messages!==!1)Q+=` , message: 'should pass "`+L.keyword+`" keyword validation' `;if(v.opts.verbose)Q+=" , schema: validate.schema"+Y+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+E+" ";Q+=" } "}else Q+=" {} ";if(Q+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)Q+=" throw new ValidationError(vErrors); ";else Q+=" validate.errors = vErrors; return false; "}else if(N.errors===!1)Q+=" "+Pv+" ";else{if(Q+=" if (Array.isArray("+Z+")) { if (vErrors === null) vErrors = "+Z+"; else vErrors = vErrors.concat("+Z+"); errors = vErrors.length;  for (var "+I+"="+D+"; "+I+"<errors; "+I+"++) { var "+j+" = vErrors["+I+"]; if ("+j+".dataPath === undefined) "+j+".dataPath = (dataPath || '') + "+v.errorPath+";  "+j+'.schemaPath = "'+G+'";  ',v.opts.verbose)Q+=" "+j+".schema = "+H+"; "+j+".data = "+E+"; ";Q+=" } } else { "+Pv+" } "}if(Q+=" } ",z)Q+=" else { "}return Q}});var EQ=p((U5,b6)=>{b6.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var lW=p((F5,YW)=>{var XW=EQ();YW.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:XW.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:XW.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var GW=p((A5,BW)=>{var S6=/^[a-z_$][a-z0-9_$-]*$/i,R6=wW(),_6=lW();BW.exports={add:g6,get:y6,remove:k6,validate:MQ};function g6(f,v){var h=this.RULES;if(h.keywords[f])throw Error("Keyword "+f+" is already defined");if(!S6.test(f))throw Error("Keyword "+f+" is not a valid identifier");if(v){this.validateKeyword(v,!0);var P=v.type;if(Array.isArray(P))for(var Q=0;Q<P.length;Q++)J(f,P[Q],v);else J(f,P,v);var W=v.metaSchema;if(W){if(v.$data&&this._opts.$data)W={anyOf:[W,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]};v.validateSchema=this.compile(W,!0)}}h.keywords[f]=h.all[f]=!0;function J(w,Y,G){var z;for(var $=0;$<h.length;$++){var E=h[$];if(E.type==Y){z=E;break}}if(!z)z={type:Y,rules:[]},h.push(z);var l={keyword:w,definition:G,custom:!0,code:R6,implements:G.implements};z.rules.push(l),h.custom[w]=l}return this}function y6(f){var v=this.RULES.custom[f];return v?v.definition:this.RULES.keywords[f]||!1}function k6(f){var v=this.RULES;delete v.keywords[f],delete v.all[f],delete v.custom[f];for(var h=0;h<v.length;h++){var P=v[h].rules;for(var Q=0;Q<P.length;Q++)if(P[Q].keyword==f){P.splice(Q,1);break}}return this}function MQ(f,v){MQ.errors=null;var h=this._validateKeyword=this._validateKeyword||this.compile(_6,!0);if(h(f))return!0;if(MQ.errors=h.errors,v)throw Error("custom keyword definition is invalid: "+this.errorsText(h.errors));else return!1}});var qW=p((j5,r6)=>{r6.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var VW=p((b5,LW)=>{var DW=ch(),Tf=G0(),I6=ih(),HW=WQ(),C6=BQ(),Z6=JP(),T6=eP(),KW=QW(),$W=Zf();LW.exports=Mv;Mv.prototype.validate=u6;Mv.prototype.compile=a6;Mv.prototype.addSchema=m6;Mv.prototype.addMetaSchema=n6;Mv.prototype.validateSchema=c6;Mv.prototype.getSchema=i6;Mv.prototype.removeSchema=o6;Mv.prototype.addFormat=Pw;Mv.prototype.errorsText=hw;Mv.prototype._addSchema=s6;Mv.prototype._compile=t6;Mv.prototype.compileAsync=WW();var O0=GW();Mv.prototype.addKeyword=O0.add;Mv.prototype.getKeyword=O0.get;Mv.prototype.removeKeyword=O0.remove;Mv.prototype.validateKeyword=O0.validate;var EW=q0();Mv.ValidationError=EW.Validation;Mv.MissingRefError=EW.MissingRef;Mv.$dataMetaSchema=KW;var M0="http://json-schema.org/draft-07/schema",zW=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],x6=["/properties"];function Mv(f){if(!(this instanceof Mv))return new Mv(f);if(f=this._opts=$W.copy(f)||{},lw(this),this._schemas={},this._refs={},this._fragments={},this._formats=Z6(f.format),this._cache=f.cache||new I6,this._loadingSchemas={},this._compilations=[],this.RULES=T6(),this._getId=e6(f),f.loopRequired=f.loopRequired||1/0,f.errorDataPath=="property")f._errorDataPathProperty=!0;if(f.serialize===void 0)f.serialize=C6;if(this._metaOpts=Yw(this),f.formats)ww(this);if(f.keywords)Xw(this);if(Ww(this),typeof f.meta=="object")this.addMetaSchema(f.meta);if(f.nullable)this.addKeyword("nullable",{metaSchema:{type:"boolean"}});Jw(this)}function u6(f,v){var h;if(typeof f=="string"){if(h=this.getSchema(f),!h)throw Error('no schema with key or ref "'+f+'"')}else{var P=this._addSchema(f);h=P.validate||this._compile(P)}var Q=h(v);if(h.$async!==!0)this.errors=h.errors;return Q}function a6(f,v){var h=this._addSchema(f,void 0,v);return h.validate||this._compile(h)}function m6(f,v,h,P){if(Array.isArray(f)){for(var Q=0;Q<f.length;Q++)this.addSchema(f[Q],void 0,h,P);return this}var W=this._getId(f);if(W!==void 0&&typeof W!="string")throw Error("schema id must be string");return v=Tf.normalizeId(v||W),OW(this,v),this._schemas[v]=this._addSchema(f,h,P,!0),this}function n6(f,v,h){return this.addSchema(f,v,h,!0),this}function c6(f,v){var h=f.$schema;if(h!==void 0&&typeof h!="string")throw Error("$schema must be a string");if(h=h||this._opts.defaultMeta||p6(this),!h)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var P=this.validate(h,f);if(!P&&v){var Q="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(Q);else throw Error(Q)}return P}function p6(f){var v=f._opts.meta;return f._opts.defaultMeta=typeof v=="object"?f._getId(v)||v:f.getSchema(M0)?M0:void 0,f._opts.defaultMeta}function i6(f){var v=MW(this,f);switch(typeof v){case"object":return v.validate||this._compile(v);case"string":return this.getSchema(v);case"undefined":return d6(this,f)}}function d6(f,v){var h=Tf.schema.call(f,{schema:{}},v);if(h){var{schema:P,root:Q,baseId:W}=h,J=DW.call(f,P,Q,void 0,W);return f._fragments[v]=new HW({ref:v,fragment:!0,schema:P,root:Q,baseId:W,validate:J}),J}}function MW(f,v){return v=Tf.normalizeId(v),f._schemas[v]||f._refs[v]||f._fragments[v]}function o6(f){if(f instanceof RegExp)return E0(this,this._schemas,f),E0(this,this._refs,f),this;switch(typeof f){case"undefined":return E0(this,this._schemas),E0(this,this._refs),this._cache.clear(),this;case"string":var v=MW(this,f);if(v)this._cache.del(v.cacheKey);return delete this._schemas[f],delete this._refs[f],this;case"object":var h=this._opts.serialize,P=h?h(f):f;this._cache.del(P);var Q=this._getId(f);if(Q)Q=Tf.normalizeId(Q),delete this._schemas[Q],delete this._refs[Q]}return this}function E0(f,v,h){for(var P in v){var Q=v[P];if(!Q.meta&&(!h||h.test(P)))f._cache.del(Q.cacheKey),delete v[P]}}function s6(f,v,h,P){if(typeof f!="object"&&typeof f!="boolean")throw Error("schema should be object or boolean");var Q=this._opts.serialize,W=Q?Q(f):f,J=this._cache.get(W);if(J)return J;P=P||this._opts.addUsedSchema!==!1;var w=Tf.normalizeId(this._getId(f));if(w&&P)OW(this,w);var Y=this._opts.validateSchema!==!1&&!v,G;if(Y&&!(G=w&&w==Tf.normalizeId(f.$schema)))this.validateSchema(f,!0);var z=Tf.ids.call(this,f),$=new HW({id:w,schema:f,localRefs:z,cacheKey:W,meta:h});if(w[0]!="#"&&P)this._refs[w]=$;if(this._cache.put(W,$),Y&&G)this.validateSchema(f,!0);return $}function t6(f,v){if(f.compiling){if(f.validate=Q,Q.schema=f.schema,Q.errors=null,Q.root=v?v:Q,f.schema.$async===!0)Q.$async=!0;return Q}f.compiling=!0;var h;if(f.meta)h=this._opts,this._opts=this._metaOpts;var P;try{P=DW.call(this,f.schema,v,f.localRefs)}catch(W){throw delete f.validate,W}finally{if(f.compiling=!1,f.meta)this._opts=h}return f.validate=P,f.refs=P.refs,f.refVal=P.refVal,f.root=P.root,P;function Q(){var W=f.validate,J=W.apply(this,arguments);return Q.errors=W.errors,J}}function e6(f){switch(f.schemaId){case"auto":return Qw;case"id":return vw;default:return fw}}function vw(f){if(f.$id)this.logger.warn("schema $id ignored",f.$id);return f.id}function fw(f){if(f.id)this.logger.warn("schema id ignored",f.id);return f.$id}function Qw(f){if(f.$id&&f.id&&f.$id!=f.id)throw Error("schema $id is different from id");return f.$id||f.id}function hw(f,v){if(f=f||this.errors,!f)return"No errors";v=v||{};var h=v.separator===void 0?", ":v.separator,P=v.dataVar===void 0?"data":v.dataVar,Q="";for(var W=0;W<f.length;W++){var J=f[W];if(J)Q+=P+J.dataPath+" "+J.message+h}return Q.slice(0,-h.length)}function Pw(f,v){if(typeof v=="string")v=new RegExp(v);return this._formats[f]=v,this}function Ww(f){var v;if(f._opts.$data)v=qW(),f.addMetaSchema(v,v.$id,!0);if(f._opts.meta===!1)return;var h=EQ();if(f._opts.$data)h=KW(h,x6);f.addMetaSchema(h,M0,!0),f._refs["http://json-schema.org/schema"]=M0}function Jw(f){var v=f._opts.schemas;if(!v)return;if(Array.isArray(v))f.addSchema(v);else for(var h in v)f.addSchema(v[h],h)}function ww(f){for(var v in f._opts.formats){var h=f._opts.formats[v];f.addFormat(v,h)}}function Xw(f){for(var v in f._opts.keywords){var h=f._opts.keywords[v];f.addKeyword(v,h)}}function OW(f,v){if(f._schemas[v]||f._refs[v])throw Error('schema with key or id "'+v+'" already exists')}function Yw(f){var v=$W.copy(f._opts);for(var h=0;h<zW.length;h++)delete v[zW[h]];return v}function lw(f){var v=f._opts.logger;if(v===!1)f.logger={log:OQ,warn:OQ,error:OQ};else{if(v===void 0)v=console;if(!(typeof v=="object"&&v.log&&v.warn&&v.error))throw Error("logger must implement log, warn and error methods");f.logger=v}}function OQ(){}});var X={};u8(X,{void:()=>D8,util:()=>e,unknown:()=>q8,union:()=>E8,undefined:()=>l8,tuple:()=>L8,transformer:()=>_8,symbol:()=>Y8,string:()=>fh,strictObject:()=>$8,setErrorMap:()=>y9,set:()=>U8,record:()=>V8,quotelessJson:()=>_9,promise:()=>R8,preprocess:()=>k8,pipeline:()=>r8,ostring:()=>I8,optional:()=>g8,onumber:()=>C8,oboolean:()=>Z8,objectUtil:()=>r0,object:()=>K8,number:()=>Qh,nullable:()=>y8,null:()=>B8,never:()=>z8,nativeEnum:()=>S8,nan:()=>J8,map:()=>N8,makeIssue:()=>E1,literal:()=>j8,lazy:()=>A8,late:()=>P8,isValid:()=>Ef,isDirty:()=>Z1,isAsync:()=>tf,isAborted:()=>C1,intersection:()=>O8,instanceof:()=>W8,getParsedType:()=>Wf,getErrorMap:()=>sf,function:()=>F8,enum:()=>b8,effect:()=>_8,discriminatedUnion:()=>M8,defaultErrorMap:()=>zf,datetimeRegex:()=>tQ,date:()=>X8,custom:()=>vh,coerce:()=>T8,boolean:()=>hh,bigint:()=>w8,array:()=>H8,any:()=>G8,addIssueToContext:()=>k,ZodVoid:()=>O1,ZodUnknown:()=>Mf,ZodUnion:()=>P1,ZodUndefined:()=>Q1,ZodType:()=>o,ZodTuple:()=>wf,ZodTransformer:()=>ev,ZodSymbol:()=>M1,ZodString:()=>dv,ZodSet:()=>If,ZodSchema:()=>o,ZodRecord:()=>L1,ZodReadonly:()=>B1,ZodPromise:()=>Cf,ZodPipeline:()=>U1,ZodParsedType:()=>g,ZodOptional:()=>sv,ZodObject:()=>Kv,ZodNumber:()=>Of,ZodNullable:()=>Hf,ZodNull:()=>h1,ZodNever:()=>Jf,ZodNativeEnum:()=>X1,ZodNaN:()=>N1,ZodMap:()=>V1,ZodLiteral:()=>w1,ZodLazy:()=>J1,ZodIssueCode:()=>F,ZodIntersection:()=>W1,ZodFunction:()=>v1,ZodFirstPartyTypeKind:()=>A,ZodError:()=>rv,ZodEnum:()=>Vf,ZodEffects:()=>ev,ZodDiscriminatedUnion:()=>T1,ZodDefault:()=>Y1,ZodDate:()=>kf,ZodCatch:()=>l1,ZodBranded:()=>x1,ZodBoolean:()=>f1,ZodBigInt:()=>Lf,ZodArray:()=>ov,ZodAny:()=>rf,Schema:()=>o,ParseStatus:()=>Av,OK:()=>Sv,NEVER:()=>x8,INVALID:()=>n,EMPTY_PATH:()=>k9,DIRTY:()=>yf,BRAND:()=>h8});var e;(function(f){f.assertEqual=(Q)=>{};function v(Q){}f.assertIs=v;function h(Q){throw Error()}f.assertNever=h,f.arrayToEnum=(Q)=>{let W={};for(let J of Q)W[J]=J;return W},f.getValidEnumValues=(Q)=>{let W=f.objectKeys(Q).filter((w)=>typeof Q[Q[w]]!=="number"),J={};for(let w of W)J[w]=Q[w];return f.objectValues(J)},f.objectValues=(Q)=>{return f.objectKeys(Q).map(function(W){return Q[W]})},f.objectKeys=typeof Object.keys==="function"?(Q)=>Object.keys(Q):(Q)=>{let W=[];for(let J in Q)if(Object.prototype.hasOwnProperty.call(Q,J))W.push(J);return W},f.find=(Q,W)=>{for(let J of Q)if(W(J))return J;return},f.isInteger=typeof Number.isInteger==="function"?(Q)=>Number.isInteger(Q):(Q)=>typeof Q==="number"&&Number.isFinite(Q)&&Math.floor(Q)===Q;function P(Q,W=" | "){return Q.map((J)=>typeof J==="string"?`'${J}'`:J).join(W)}f.joinValues=P,f.jsonStringifyReplacer=(Q,W)=>{if(typeof W==="bigint")return W.toString();return W}})(e||(e={}));var r0;(function(f){f.mergeShapes=(v,h)=>{return{...v,...h}}})(r0||(r0={}));var g=e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Wf=(f)=>{switch(typeof f){case"undefined":return g.undefined;case"string":return g.string;case"number":return Number.isNaN(f)?g.nan:g.number;case"boolean":return g.boolean;case"function":return g.function;case"bigint":return g.bigint;case"symbol":return g.symbol;case"object":if(Array.isArray(f))return g.array;if(f===null)return g.null;if(f.then&&typeof f.then==="function"&&f.catch&&typeof f.catch==="function")return g.promise;if(typeof Map<"u"&&f instanceof Map)return g.map;if(typeof Set<"u"&&f instanceof Set)return g.set;if(typeof Date<"u"&&f instanceof Date)return g.date;return g.object;default:return g.unknown}};var F=e.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_9=(f)=>{return JSON.stringify(f,null,2).replace(/"([^"]+)":/g,"$1:")};class rv extends Error{get errors(){return this.issues}constructor(f){super();this.issues=[],this.addIssue=(h)=>{this.issues=[...this.issues,h]},this.addIssues=(h=[])=>{this.issues=[...this.issues,...h]};let v=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,v);else this.__proto__=v;this.name="ZodError",this.issues=f}format(f){let v=f||function(Q){return Q.message},h={_errors:[]},P=(Q)=>{for(let W of Q.issues)if(W.code==="invalid_union")W.unionErrors.map(P);else if(W.code==="invalid_return_type")P(W.returnTypeError);else if(W.code==="invalid_arguments")P(W.argumentsError);else if(W.path.length===0)h._errors.push(v(W));else{let J=h,w=0;while(w<W.path.length){let Y=W.path[w];if(w!==W.path.length-1)J[Y]=J[Y]||{_errors:[]};else J[Y]=J[Y]||{_errors:[]},J[Y]._errors.push(v(W));J=J[Y],w++}}};return P(this),h}static assert(f){if(!(f instanceof rv))throw Error(`Not a ZodError: ${f}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,e.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(f=(v)=>v.message){let v={},h=[];for(let P of this.issues)if(P.path.length>0){let Q=P.path[0];v[Q]=v[Q]||[],v[Q].push(f(P))}else h.push(f(P));return{formErrors:h,fieldErrors:v}}get formErrors(){return this.flatten()}}rv.create=(f)=>{return new rv(f)};var g9=(f,v)=>{let h;switch(f.code){case F.invalid_type:if(f.received===g.undefined)h="Required";else h=`Expected ${f.expected}, received ${f.received}`;break;case F.invalid_literal:h=`Invalid literal value, expected ${JSON.stringify(f.expected,e.jsonStringifyReplacer)}`;break;case F.unrecognized_keys:h=`Unrecognized key(s) in object: ${e.joinValues(f.keys,", ")}`;break;case F.invalid_union:h="Invalid input";break;case F.invalid_union_discriminator:h=`Invalid discriminator value. Expected ${e.joinValues(f.options)}`;break;case F.invalid_enum_value:h=`Invalid enum value. Expected ${e.joinValues(f.options)}, received '${f.received}'`;break;case F.invalid_arguments:h="Invalid function arguments";break;case F.invalid_return_type:h="Invalid function return type";break;case F.invalid_date:h="Invalid date";break;case F.invalid_string:if(typeof f.validation==="object")if("includes"in f.validation){if(h=`Invalid input: must include "${f.validation.includes}"`,typeof f.validation.position==="number")h=`${h} at one or more positions greater than or equal to ${f.validation.position}`}else if("startsWith"in f.validation)h=`Invalid input: must start with "${f.validation.startsWith}"`;else if("endsWith"in f.validation)h=`Invalid input: must end with "${f.validation.endsWith}"`;else e.assertNever(f.validation);else if(f.validation!=="regex")h=`Invalid ${f.validation}`;else h="Invalid";break;case F.too_small:if(f.type==="array")h=`Array must contain ${f.exact?"exactly":f.inclusive?"at least":"more than"} ${f.minimum} element(s)`;else if(f.type==="string")h=`String must contain ${f.exact?"exactly":f.inclusive?"at least":"over"} ${f.minimum} character(s)`;else if(f.type==="number")h=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="bigint")h=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="date")h=`Date must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(f.minimum))}`;else h="Invalid input";break;case F.too_big:if(f.type==="array")h=`Array must contain ${f.exact?"exactly":f.inclusive?"at most":"less than"} ${f.maximum} element(s)`;else if(f.type==="string")h=`String must contain ${f.exact?"exactly":f.inclusive?"at most":"under"} ${f.maximum} character(s)`;else if(f.type==="number")h=`Number must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="bigint")h=`BigInt must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="date")h=`Date must be ${f.exact?"exactly":f.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(f.maximum))}`;else h="Invalid input";break;case F.custom:h="Invalid input";break;case F.invalid_intersection_types:h="Intersection results could not be merged";break;case F.not_multiple_of:h=`Number must be a multiple of ${f.multipleOf}`;break;case F.not_finite:h="Number must be finite";break;default:h=v.defaultError,e.assertNever(f)}return{message:h}},zf=g9;var pQ=zf;function y9(f){pQ=f}function sf(){return pQ}var E1=(f)=>{let{data:v,path:h,errorMaps:P,issueData:Q}=f,W=[...h,...Q.path||[]],J={...Q,path:W};if(Q.message!==void 0)return{...Q,path:W,message:Q.message};let w="",Y=P.filter((G)=>!!G).slice().reverse();for(let G of Y)w=G(J,{data:v,defaultError:w}).message;return{...Q,path:W,message:w}},k9=[];function k(f,v){let h=sf(),P=E1({issueData:v,data:f.data,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,h,h===zf?void 0:zf].filter((Q)=>!!Q)});f.common.issues.push(P)}class Av{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(f,v){let h=[];for(let P of v){if(P.status==="aborted")return n;if(P.status==="dirty")f.dirty();h.push(P.value)}return{status:f.value,value:h}}static async mergeObjectAsync(f,v){let h=[];for(let P of v){let Q=await P.key,W=await P.value;h.push({key:Q,value:W})}return Av.mergeObjectSync(f,h)}static mergeObjectSync(f,v){let h={};for(let P of v){let{key:Q,value:W}=P;if(Q.status==="aborted")return n;if(W.status==="aborted")return n;if(Q.status==="dirty")f.dirty();if(W.status==="dirty")f.dirty();if(Q.value!=="__proto__"&&(typeof W.value<"u"||P.alwaysSet))h[Q.value]=W.value}return{status:f.value,value:h}}}var n=Object.freeze({status:"aborted"}),yf=(f)=>({status:"dirty",value:f}),Sv=(f)=>({status:"valid",value:f}),C1=(f)=>f.status==="aborted",Z1=(f)=>f.status==="dirty",Ef=(f)=>f.status==="valid",tf=(f)=>typeof Promise<"u"&&f instanceof Promise;var u;(function(f){f.errToObj=(v)=>typeof v==="string"?{message:v}:v||{},f.toString=(v)=>typeof v==="string"?v:v?.message})(u||(u={}));class tv{constructor(f,v,h,P){this._cachedPath=[],this.parent=f,this.data=v,this._path=h,this._key=P}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var iQ=(f,v)=>{if(Ef(v))return{success:!0,data:v.value};else{if(!f.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let h=new rv(f.common.issues);return this._error=h,this._error}}}};function i(f){if(!f)return{};let{errorMap:v,invalid_type_error:h,required_error:P,description:Q}=f;if(v&&(h||P))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:Q};return{errorMap:(J,w)=>{let{message:Y}=f;if(J.code==="invalid_enum_value")return{message:Y??w.defaultError};if(typeof w.data>"u")return{message:Y??P??w.defaultError};if(J.code!=="invalid_type")return{message:w.defaultError};return{message:Y??h??w.defaultError}},description:Q}}class o{get description(){return this._def.description}_getType(f){return Wf(f.data)}_getOrReturnCtx(f,v){return v||{common:f.parent.common,data:f.data,parsedType:Wf(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}_processInputParams(f){return{status:new Av,ctx:{common:f.parent.common,data:f.data,parsedType:Wf(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}}_parseSync(f){let v=this._parse(f);if(tf(v))throw Error("Synchronous parse encountered promise.");return v}_parseAsync(f){let v=this._parse(f);return Promise.resolve(v)}parse(f,v){let h=this.safeParse(f,v);if(h.success)return h.data;throw h.error}safeParse(f,v){let h={common:{issues:[],async:v?.async??!1,contextualErrorMap:v?.errorMap},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:Wf(f)},P=this._parseSync({data:f,path:h.path,parent:h});return iQ(h,P)}"~validate"(f){let v={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:Wf(f)};if(!this["~standard"].async)try{let h=this._parseSync({data:f,path:[],parent:v});return Ef(h)?{value:h.value}:{issues:v.common.issues}}catch(h){if(h?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;v.common={issues:[],async:!0}}return this._parseAsync({data:f,path:[],parent:v}).then((h)=>Ef(h)?{value:h.value}:{issues:v.common.issues})}async parseAsync(f,v){let h=await this.safeParseAsync(f,v);if(h.success)return h.data;throw h.error}async safeParseAsync(f,v){let h={common:{issues:[],contextualErrorMap:v?.errorMap,async:!0},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:Wf(f)},P=this._parse({data:f,path:h.path,parent:h}),Q=await(tf(P)?P:Promise.resolve(P));return iQ(h,Q)}refine(f,v){let h=(P)=>{if(typeof v==="string"||typeof v>"u")return{message:v};else if(typeof v==="function")return v(P);else return v};return this._refinement((P,Q)=>{let W=f(P),J=()=>Q.addIssue({code:F.custom,...h(P)});if(typeof Promise<"u"&&W instanceof Promise)return W.then((w)=>{if(!w)return J(),!1;else return!0});if(!W)return J(),!1;else return!0})}refinement(f,v){return this._refinement((h,P)=>{if(!f(h))return P.addIssue(typeof v==="function"?v(h,P):v),!1;else return!0})}_refinement(f){return new ev({schema:this,typeName:A.ZodEffects,effect:{type:"refinement",refinement:f}})}superRefine(f){return this._refinement(f)}constructor(f){this.spa=this.safeParseAsync,this._def=f,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(v)=>this["~validate"](v)}}optional(){return sv.create(this,this._def)}nullable(){return Hf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ov.create(this)}promise(){return Cf.create(this,this._def)}or(f){return P1.create([this,f],this._def)}and(f){return W1.create(this,f,this._def)}transform(f){return new ev({...i(this._def),schema:this,typeName:A.ZodEffects,effect:{type:"transform",transform:f}})}default(f){let v=typeof f==="function"?f:()=>f;return new Y1({...i(this._def),innerType:this,defaultValue:v,typeName:A.ZodDefault})}brand(){return new x1({typeName:A.ZodBranded,type:this,...i(this._def)})}catch(f){let v=typeof f==="function"?f:()=>f;return new l1({...i(this._def),innerType:this,catchValue:v,typeName:A.ZodCatch})}describe(f){return new this.constructor({...this._def,description:f})}pipe(f){return U1.create(this,f)}readonly(){return B1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var r9=/^c[^\s-]{8,}$/i,I9=/^[0-9a-z]+$/,C9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Z9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,T9=/^[a-z0-9_-]{21}$/i,x9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,u9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,a9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,m9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",I0,n9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,c9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,p9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,i9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,d9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,o9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,oQ="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",s9=new RegExp(`^${oQ}$`);function sQ(f){let v="[0-5]\\d";if(f.precision)v=`${v}\\.\\d{${f.precision}}`;else if(f.precision==null)v=`${v}(\\.\\d+)?`;let h=f.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${v})${h}`}function t9(f){return new RegExp(`^${sQ(f)}$`)}function tQ(f){let v=`${oQ}T${sQ(f)}`,h=[];if(h.push(f.local?"Z?":"Z"),f.offset)h.push("([+-]\\d{2}:?\\d{2})");return v=`${v}(${h.join("|")})`,new RegExp(`^${v}$`)}function e9(f,v){if((v==="v4"||!v)&&n9.test(f))return!0;if((v==="v6"||!v)&&p9.test(f))return!0;return!1}function v8(f,v){if(!x9.test(f))return!1;try{let[h]=f.split(".");if(!h)return!1;let P=h.replace(/-/g,"+").replace(/_/g,"/").padEnd(h.length+(4-h.length%4)%4,"="),Q=JSON.parse(atob(P));if(typeof Q!=="object"||Q===null)return!1;if("typ"in Q&&Q?.typ!=="JWT")return!1;if(!Q.alg)return!1;if(v&&Q.alg!==v)return!1;return!0}catch{return!1}}function f8(f,v){if((v==="v4"||!v)&&c9.test(f))return!0;if((v==="v6"||!v)&&i9.test(f))return!0;return!1}class dv extends o{_parse(f){if(this._def.coerce)f.data=String(f.data);if(this._getType(f)!==g.string){let Q=this._getOrReturnCtx(f);return k(Q,{code:F.invalid_type,expected:g.string,received:Q.parsedType}),n}let h=new Av,P=void 0;for(let Q of this._def.checks)if(Q.kind==="min"){if(f.data.length<Q.value)P=this._getOrReturnCtx(f,P),k(P,{code:F.too_small,minimum:Q.value,type:"string",inclusive:!0,exact:!1,message:Q.message}),h.dirty()}else if(Q.kind==="max"){if(f.data.length>Q.value)P=this._getOrReturnCtx(f,P),k(P,{code:F.too_big,maximum:Q.value,type:"string",inclusive:!0,exact:!1,message:Q.message}),h.dirty()}else if(Q.kind==="length"){let W=f.data.length>Q.value,J=f.data.length<Q.value;if(W||J){if(P=this._getOrReturnCtx(f,P),W)k(P,{code:F.too_big,maximum:Q.value,type:"string",inclusive:!0,exact:!0,message:Q.message});else if(J)k(P,{code:F.too_small,minimum:Q.value,type:"string",inclusive:!0,exact:!0,message:Q.message});h.dirty()}}else if(Q.kind==="email"){if(!a9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"email",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="emoji"){if(!I0)I0=new RegExp(m9,"u");if(!I0.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"emoji",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="uuid"){if(!Z9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"uuid",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="nanoid"){if(!T9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"nanoid",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="cuid"){if(!r9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"cuid",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="cuid2"){if(!I9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"cuid2",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="ulid"){if(!C9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"ulid",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="url")try{new URL(f.data)}catch{P=this._getOrReturnCtx(f,P),k(P,{validation:"url",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="regex"){if(Q.regex.lastIndex=0,!Q.regex.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"regex",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="trim")f.data=f.data.trim();else if(Q.kind==="includes"){if(!f.data.includes(Q.value,Q.position))P=this._getOrReturnCtx(f,P),k(P,{code:F.invalid_string,validation:{includes:Q.value,position:Q.position},message:Q.message}),h.dirty()}else if(Q.kind==="toLowerCase")f.data=f.data.toLowerCase();else if(Q.kind==="toUpperCase")f.data=f.data.toUpperCase();else if(Q.kind==="startsWith"){if(!f.data.startsWith(Q.value))P=this._getOrReturnCtx(f,P),k(P,{code:F.invalid_string,validation:{startsWith:Q.value},message:Q.message}),h.dirty()}else if(Q.kind==="endsWith"){if(!f.data.endsWith(Q.value))P=this._getOrReturnCtx(f,P),k(P,{code:F.invalid_string,validation:{endsWith:Q.value},message:Q.message}),h.dirty()}else if(Q.kind==="datetime"){if(!tQ(Q).test(f.data))P=this._getOrReturnCtx(f,P),k(P,{code:F.invalid_string,validation:"datetime",message:Q.message}),h.dirty()}else if(Q.kind==="date"){if(!s9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{code:F.invalid_string,validation:"date",message:Q.message}),h.dirty()}else if(Q.kind==="time"){if(!t9(Q).test(f.data))P=this._getOrReturnCtx(f,P),k(P,{code:F.invalid_string,validation:"time",message:Q.message}),h.dirty()}else if(Q.kind==="duration"){if(!u9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"duration",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="ip"){if(!e9(f.data,Q.version))P=this._getOrReturnCtx(f,P),k(P,{validation:"ip",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="jwt"){if(!v8(f.data,Q.alg))P=this._getOrReturnCtx(f,P),k(P,{validation:"jwt",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="cidr"){if(!f8(f.data,Q.version))P=this._getOrReturnCtx(f,P),k(P,{validation:"cidr",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="base64"){if(!d9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"base64",code:F.invalid_string,message:Q.message}),h.dirty()}else if(Q.kind==="base64url"){if(!o9.test(f.data))P=this._getOrReturnCtx(f,P),k(P,{validation:"base64url",code:F.invalid_string,message:Q.message}),h.dirty()}else e.assertNever(Q);return{status:h.value,value:f.data}}_regex(f,v,h){return this.refinement((P)=>f.test(P),{validation:v,code:F.invalid_string,...u.errToObj(h)})}_addCheck(f){return new dv({...this._def,checks:[...this._def.checks,f]})}email(f){return this._addCheck({kind:"email",...u.errToObj(f)})}url(f){return this._addCheck({kind:"url",...u.errToObj(f)})}emoji(f){return this._addCheck({kind:"emoji",...u.errToObj(f)})}uuid(f){return this._addCheck({kind:"uuid",...u.errToObj(f)})}nanoid(f){return this._addCheck({kind:"nanoid",...u.errToObj(f)})}cuid(f){return this._addCheck({kind:"cuid",...u.errToObj(f)})}cuid2(f){return this._addCheck({kind:"cuid2",...u.errToObj(f)})}ulid(f){return this._addCheck({kind:"ulid",...u.errToObj(f)})}base64(f){return this._addCheck({kind:"base64",...u.errToObj(f)})}base64url(f){return this._addCheck({kind:"base64url",...u.errToObj(f)})}jwt(f){return this._addCheck({kind:"jwt",...u.errToObj(f)})}ip(f){return this._addCheck({kind:"ip",...u.errToObj(f)})}cidr(f){return this._addCheck({kind:"cidr",...u.errToObj(f)})}datetime(f){if(typeof f==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:f});return this._addCheck({kind:"datetime",precision:typeof f?.precision>"u"?null:f?.precision,offset:f?.offset??!1,local:f?.local??!1,...u.errToObj(f?.message)})}date(f){return this._addCheck({kind:"date",message:f})}time(f){if(typeof f==="string")return this._addCheck({kind:"time",precision:null,message:f});return this._addCheck({kind:"time",precision:typeof f?.precision>"u"?null:f?.precision,...u.errToObj(f?.message)})}duration(f){return this._addCheck({kind:"duration",...u.errToObj(f)})}regex(f,v){return this._addCheck({kind:"regex",regex:f,...u.errToObj(v)})}includes(f,v){return this._addCheck({kind:"includes",value:f,position:v?.position,...u.errToObj(v?.message)})}startsWith(f,v){return this._addCheck({kind:"startsWith",value:f,...u.errToObj(v)})}endsWith(f,v){return this._addCheck({kind:"endsWith",value:f,...u.errToObj(v)})}min(f,v){return this._addCheck({kind:"min",value:f,...u.errToObj(v)})}max(f,v){return this._addCheck({kind:"max",value:f,...u.errToObj(v)})}length(f,v){return this._addCheck({kind:"length",value:f,...u.errToObj(v)})}nonempty(f){return this.min(1,u.errToObj(f))}trim(){return new dv({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new dv({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new dv({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((f)=>f.kind==="datetime")}get isDate(){return!!this._def.checks.find((f)=>f.kind==="date")}get isTime(){return!!this._def.checks.find((f)=>f.kind==="time")}get isDuration(){return!!this._def.checks.find((f)=>f.kind==="duration")}get isEmail(){return!!this._def.checks.find((f)=>f.kind==="email")}get isURL(){return!!this._def.checks.find((f)=>f.kind==="url")}get isEmoji(){return!!this._def.checks.find((f)=>f.kind==="emoji")}get isUUID(){return!!this._def.checks.find((f)=>f.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((f)=>f.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((f)=>f.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((f)=>f.kind==="cuid2")}get isULID(){return!!this._def.checks.find((f)=>f.kind==="ulid")}get isIP(){return!!this._def.checks.find((f)=>f.kind==="ip")}get isCIDR(){return!!this._def.checks.find((f)=>f.kind==="cidr")}get isBase64(){return!!this._def.checks.find((f)=>f.kind==="base64")}get isBase64url(){return!!this._def.checks.find((f)=>f.kind==="base64url")}get minLength(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxLength(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}dv.create=(f)=>{return new dv({checks:[],typeName:A.ZodString,coerce:f?.coerce??!1,...i(f)})};function Q8(f,v){let h=(f.toString().split(".")[1]||"").length,P=(v.toString().split(".")[1]||"").length,Q=h>P?h:P,W=Number.parseInt(f.toFixed(Q).replace(".","")),J=Number.parseInt(v.toFixed(Q).replace(".",""));return W%J/10**Q}class Of extends o{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(f){if(this._def.coerce)f.data=Number(f.data);if(this._getType(f)!==g.number){let Q=this._getOrReturnCtx(f);return k(Q,{code:F.invalid_type,expected:g.number,received:Q.parsedType}),n}let h=void 0,P=new Av;for(let Q of this._def.checks)if(Q.kind==="int"){if(!e.isInteger(f.data))h=this._getOrReturnCtx(f,h),k(h,{code:F.invalid_type,expected:"integer",received:"float",message:Q.message}),P.dirty()}else if(Q.kind==="min"){if(Q.inclusive?f.data<Q.value:f.data<=Q.value)h=this._getOrReturnCtx(f,h),k(h,{code:F.too_small,minimum:Q.value,type:"number",inclusive:Q.inclusive,exact:!1,message:Q.message}),P.dirty()}else if(Q.kind==="max"){if(Q.inclusive?f.data>Q.value:f.data>=Q.value)h=this._getOrReturnCtx(f,h),k(h,{code:F.too_big,maximum:Q.value,type:"number",inclusive:Q.inclusive,exact:!1,message:Q.message}),P.dirty()}else if(Q.kind==="multipleOf"){if(Q8(f.data,Q.value)!==0)h=this._getOrReturnCtx(f,h),k(h,{code:F.not_multiple_of,multipleOf:Q.value,message:Q.message}),P.dirty()}else if(Q.kind==="finite"){if(!Number.isFinite(f.data))h=this._getOrReturnCtx(f,h),k(h,{code:F.not_finite,message:Q.message}),P.dirty()}else e.assertNever(Q);return{status:P.value,value:f.data}}gte(f,v){return this.setLimit("min",f,!0,u.toString(v))}gt(f,v){return this.setLimit("min",f,!1,u.toString(v))}lte(f,v){return this.setLimit("max",f,!0,u.toString(v))}lt(f,v){return this.setLimit("max",f,!1,u.toString(v))}setLimit(f,v,h,P){return new Of({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:h,message:u.toString(P)}]})}_addCheck(f){return new Of({...this._def,checks:[...this._def.checks,f]})}int(f){return this._addCheck({kind:"int",message:u.toString(f)})}positive(f){return this._addCheck({kind:"min",value:0,inclusive:!1,message:u.toString(f)})}negative(f){return this._addCheck({kind:"max",value:0,inclusive:!1,message:u.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:0,inclusive:!0,message:u.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:0,inclusive:!0,message:u.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:u.toString(v)})}finite(f){return this._addCheck({kind:"finite",message:u.toString(f)})}safe(f){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:u.toString(f)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:u.toString(f)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}get isInt(){return!!this._def.checks.find((f)=>f.kind==="int"||f.kind==="multipleOf"&&e.isInteger(f.value))}get isFinite(){let f=null,v=null;for(let h of this._def.checks)if(h.kind==="finite"||h.kind==="int"||h.kind==="multipleOf")return!0;else if(h.kind==="min"){if(v===null||h.value>v)v=h.value}else if(h.kind==="max"){if(f===null||h.value<f)f=h.value}return Number.isFinite(v)&&Number.isFinite(f)}}Of.create=(f)=>{return new Of({checks:[],typeName:A.ZodNumber,coerce:f?.coerce||!1,...i(f)})};class Lf extends o{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(f){if(this._def.coerce)try{f.data=BigInt(f.data)}catch{return this._getInvalidInput(f)}if(this._getType(f)!==g.bigint)return this._getInvalidInput(f);let h=void 0,P=new Av;for(let Q of this._def.checks)if(Q.kind==="min"){if(Q.inclusive?f.data<Q.value:f.data<=Q.value)h=this._getOrReturnCtx(f,h),k(h,{code:F.too_small,type:"bigint",minimum:Q.value,inclusive:Q.inclusive,message:Q.message}),P.dirty()}else if(Q.kind==="max"){if(Q.inclusive?f.data>Q.value:f.data>=Q.value)h=this._getOrReturnCtx(f,h),k(h,{code:F.too_big,type:"bigint",maximum:Q.value,inclusive:Q.inclusive,message:Q.message}),P.dirty()}else if(Q.kind==="multipleOf"){if(f.data%Q.value!==BigInt(0))h=this._getOrReturnCtx(f,h),k(h,{code:F.not_multiple_of,multipleOf:Q.value,message:Q.message}),P.dirty()}else e.assertNever(Q);return{status:P.value,value:f.data}}_getInvalidInput(f){let v=this._getOrReturnCtx(f);return k(v,{code:F.invalid_type,expected:g.bigint,received:v.parsedType}),n}gte(f,v){return this.setLimit("min",f,!0,u.toString(v))}gt(f,v){return this.setLimit("min",f,!1,u.toString(v))}lte(f,v){return this.setLimit("max",f,!0,u.toString(v))}lt(f,v){return this.setLimit("max",f,!1,u.toString(v))}setLimit(f,v,h,P){return new Lf({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:h,message:u.toString(P)}]})}_addCheck(f){return new Lf({...this._def,checks:[...this._def.checks,f]})}positive(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:u.toString(f)})}negative(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:u.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:u.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:u.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:u.toString(v)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}Lf.create=(f)=>{return new Lf({checks:[],typeName:A.ZodBigInt,coerce:f?.coerce??!1,...i(f)})};class f1 extends o{_parse(f){if(this._def.coerce)f.data=Boolean(f.data);if(this._getType(f)!==g.boolean){let h=this._getOrReturnCtx(f);return k(h,{code:F.invalid_type,expected:g.boolean,received:h.parsedType}),n}return Sv(f.data)}}f1.create=(f)=>{return new f1({typeName:A.ZodBoolean,coerce:f?.coerce||!1,...i(f)})};class kf extends o{_parse(f){if(this._def.coerce)f.data=new Date(f.data);if(this._getType(f)!==g.date){let Q=this._getOrReturnCtx(f);return k(Q,{code:F.invalid_type,expected:g.date,received:Q.parsedType}),n}if(Number.isNaN(f.data.getTime())){let Q=this._getOrReturnCtx(f);return k(Q,{code:F.invalid_date}),n}let h=new Av,P=void 0;for(let Q of this._def.checks)if(Q.kind==="min"){if(f.data.getTime()<Q.value)P=this._getOrReturnCtx(f,P),k(P,{code:F.too_small,message:Q.message,inclusive:!0,exact:!1,minimum:Q.value,type:"date"}),h.dirty()}else if(Q.kind==="max"){if(f.data.getTime()>Q.value)P=this._getOrReturnCtx(f,P),k(P,{code:F.too_big,message:Q.message,inclusive:!0,exact:!1,maximum:Q.value,type:"date"}),h.dirty()}else e.assertNever(Q);return{status:h.value,value:new Date(f.data.getTime())}}_addCheck(f){return new kf({...this._def,checks:[...this._def.checks,f]})}min(f,v){return this._addCheck({kind:"min",value:f.getTime(),message:u.toString(v)})}max(f,v){return this._addCheck({kind:"max",value:f.getTime(),message:u.toString(v)})}get minDate(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f!=null?new Date(f):null}get maxDate(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f!=null?new Date(f):null}}kf.create=(f)=>{return new kf({checks:[],coerce:f?.coerce||!1,typeName:A.ZodDate,...i(f)})};class M1 extends o{_parse(f){if(this._getType(f)!==g.symbol){let h=this._getOrReturnCtx(f);return k(h,{code:F.invalid_type,expected:g.symbol,received:h.parsedType}),n}return Sv(f.data)}}M1.create=(f)=>{return new M1({typeName:A.ZodSymbol,...i(f)})};class Q1 extends o{_parse(f){if(this._getType(f)!==g.undefined){let h=this._getOrReturnCtx(f);return k(h,{code:F.invalid_type,expected:g.undefined,received:h.parsedType}),n}return Sv(f.data)}}Q1.create=(f)=>{return new Q1({typeName:A.ZodUndefined,...i(f)})};class h1 extends o{_parse(f){if(this._getType(f)!==g.null){let h=this._getOrReturnCtx(f);return k(h,{code:F.invalid_type,expected:g.null,received:h.parsedType}),n}return Sv(f.data)}}h1.create=(f)=>{return new h1({typeName:A.ZodNull,...i(f)})};class rf extends o{constructor(){super(...arguments);this._any=!0}_parse(f){return Sv(f.data)}}rf.create=(f)=>{return new rf({typeName:A.ZodAny,...i(f)})};class Mf extends o{constructor(){super(...arguments);this._unknown=!0}_parse(f){return Sv(f.data)}}Mf.create=(f)=>{return new Mf({typeName:A.ZodUnknown,...i(f)})};class Jf extends o{_parse(f){let v=this._getOrReturnCtx(f);return k(v,{code:F.invalid_type,expected:g.never,received:v.parsedType}),n}}Jf.create=(f)=>{return new Jf({typeName:A.ZodNever,...i(f)})};class O1 extends o{_parse(f){if(this._getType(f)!==g.undefined){let h=this._getOrReturnCtx(f);return k(h,{code:F.invalid_type,expected:g.void,received:h.parsedType}),n}return Sv(f.data)}}O1.create=(f)=>{return new O1({typeName:A.ZodVoid,...i(f)})};class ov extends o{_parse(f){let{ctx:v,status:h}=this._processInputParams(f),P=this._def;if(v.parsedType!==g.array)return k(v,{code:F.invalid_type,expected:g.array,received:v.parsedType}),n;if(P.exactLength!==null){let W=v.data.length>P.exactLength.value,J=v.data.length<P.exactLength.value;if(W||J)k(v,{code:W?F.too_big:F.too_small,minimum:J?P.exactLength.value:void 0,maximum:W?P.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:P.exactLength.message}),h.dirty()}if(P.minLength!==null){if(v.data.length<P.minLength.value)k(v,{code:F.too_small,minimum:P.minLength.value,type:"array",inclusive:!0,exact:!1,message:P.minLength.message}),h.dirty()}if(P.maxLength!==null){if(v.data.length>P.maxLength.value)k(v,{code:F.too_big,maximum:P.maxLength.value,type:"array",inclusive:!0,exact:!1,message:P.maxLength.message}),h.dirty()}if(v.common.async)return Promise.all([...v.data].map((W,J)=>{return P.type._parseAsync(new tv(v,W,v.path,J))})).then((W)=>{return Av.mergeArray(h,W)});let Q=[...v.data].map((W,J)=>{return P.type._parseSync(new tv(v,W,v.path,J))});return Av.mergeArray(h,Q)}get element(){return this._def.type}min(f,v){return new ov({...this._def,minLength:{value:f,message:u.toString(v)}})}max(f,v){return new ov({...this._def,maxLength:{value:f,message:u.toString(v)}})}length(f,v){return new ov({...this._def,exactLength:{value:f,message:u.toString(v)}})}nonempty(f){return this.min(1,f)}}ov.create=(f,v)=>{return new ov({type:f,minLength:null,maxLength:null,exactLength:null,typeName:A.ZodArray,...i(v)})};function ef(f){if(f instanceof Kv){let v={};for(let h in f.shape){let P=f.shape[h];v[h]=sv.create(ef(P))}return new Kv({...f._def,shape:()=>v})}else if(f instanceof ov)return new ov({...f._def,type:ef(f.element)});else if(f instanceof sv)return sv.create(ef(f.unwrap()));else if(f instanceof Hf)return Hf.create(ef(f.unwrap()));else if(f instanceof wf)return wf.create(f.items.map((v)=>ef(v)));else return f}class Kv extends o{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let f=this._def.shape(),v=e.objectKeys(f);return this._cached={shape:f,keys:v},this._cached}_parse(f){if(this._getType(f)!==g.object){let Y=this._getOrReturnCtx(f);return k(Y,{code:F.invalid_type,expected:g.object,received:Y.parsedType}),n}let{status:h,ctx:P}=this._processInputParams(f),{shape:Q,keys:W}=this._getCached(),J=[];if(!(this._def.catchall instanceof Jf&&this._def.unknownKeys==="strip")){for(let Y in P.data)if(!W.includes(Y))J.push(Y)}let w=[];for(let Y of W){let G=Q[Y],z=P.data[Y];w.push({key:{status:"valid",value:Y},value:G._parse(new tv(P,z,P.path,Y)),alwaysSet:Y in P.data})}if(this._def.catchall instanceof Jf){let Y=this._def.unknownKeys;if(Y==="passthrough")for(let G of J)w.push({key:{status:"valid",value:G},value:{status:"valid",value:P.data[G]}});else if(Y==="strict"){if(J.length>0)k(P,{code:F.unrecognized_keys,keys:J}),h.dirty()}else if(Y==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let Y=this._def.catchall;for(let G of J){let z=P.data[G];w.push({key:{status:"valid",value:G},value:Y._parse(new tv(P,z,P.path,G)),alwaysSet:G in P.data})}}if(P.common.async)return Promise.resolve().then(async()=>{let Y=[];for(let G of w){let z=await G.key,$=await G.value;Y.push({key:z,value:$,alwaysSet:G.alwaysSet})}return Y}).then((Y)=>{return Av.mergeObjectSync(h,Y)});else return Av.mergeObjectSync(h,w)}get shape(){return this._def.shape()}strict(f){return u.errToObj,new Kv({...this._def,unknownKeys:"strict",...f!==void 0?{errorMap:(v,h)=>{let P=this._def.errorMap?.(v,h).message??h.defaultError;if(v.code==="unrecognized_keys")return{message:u.errToObj(f).message??P};return{message:P}}}:{}})}strip(){return new Kv({...this._def,unknownKeys:"strip"})}passthrough(){return new Kv({...this._def,unknownKeys:"passthrough"})}extend(f){return new Kv({...this._def,shape:()=>({...this._def.shape(),...f})})}merge(f){return new Kv({unknownKeys:f._def.unknownKeys,catchall:f._def.catchall,shape:()=>({...this._def.shape(),...f._def.shape()}),typeName:A.ZodObject})}setKey(f,v){return this.augment({[f]:v})}catchall(f){return new Kv({...this._def,catchall:f})}pick(f){let v={};for(let h of e.objectKeys(f))if(f[h]&&this.shape[h])v[h]=this.shape[h];return new Kv({...this._def,shape:()=>v})}omit(f){let v={};for(let h of e.objectKeys(this.shape))if(!f[h])v[h]=this.shape[h];return new Kv({...this._def,shape:()=>v})}deepPartial(){return ef(this)}partial(f){let v={};for(let h of e.objectKeys(this.shape)){let P=this.shape[h];if(f&&!f[h])v[h]=P;else v[h]=P.optional()}return new Kv({...this._def,shape:()=>v})}required(f){let v={};for(let h of e.objectKeys(this.shape))if(f&&!f[h])v[h]=this.shape[h];else{let Q=this.shape[h];while(Q instanceof sv)Q=Q._def.innerType;v[h]=Q}return new Kv({...this._def,shape:()=>v})}keyof(){return eQ(e.objectKeys(this.shape))}}Kv.create=(f,v)=>{return new Kv({shape:()=>f,unknownKeys:"strip",catchall:Jf.create(),typeName:A.ZodObject,...i(v)})};Kv.strictCreate=(f,v)=>{return new Kv({shape:()=>f,unknownKeys:"strict",catchall:Jf.create(),typeName:A.ZodObject,...i(v)})};Kv.lazycreate=(f,v)=>{return new Kv({shape:f,unknownKeys:"strip",catchall:Jf.create(),typeName:A.ZodObject,...i(v)})};class P1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f),h=this._def.options;function P(Q){for(let J of Q)if(J.result.status==="valid")return J.result;for(let J of Q)if(J.result.status==="dirty")return v.common.issues.push(...J.ctx.common.issues),J.result;let W=Q.map((J)=>new rv(J.ctx.common.issues));return k(v,{code:F.invalid_union,unionErrors:W}),n}if(v.common.async)return Promise.all(h.map(async(Q)=>{let W={...v,common:{...v.common,issues:[]},parent:null};return{result:await Q._parseAsync({data:v.data,path:v.path,parent:W}),ctx:W}})).then(P);else{let Q=void 0,W=[];for(let w of h){let Y={...v,common:{...v.common,issues:[]},parent:null},G=w._parseSync({data:v.data,path:v.path,parent:Y});if(G.status==="valid")return G;else if(G.status==="dirty"&&!Q)Q={result:G,ctx:Y};if(Y.common.issues.length)W.push(Y.common.issues)}if(Q)return v.common.issues.push(...Q.ctx.common.issues),Q.result;let J=W.map((w)=>new rv(w));return k(v,{code:F.invalid_union,unionErrors:J}),n}}get options(){return this._def.options}}P1.create=(f,v)=>{return new P1({options:f,typeName:A.ZodUnion,...i(v)})};var Df=(f)=>{if(f instanceof J1)return Df(f.schema);else if(f instanceof ev)return Df(f.innerType());else if(f instanceof w1)return[f.value];else if(f instanceof Vf)return f.options;else if(f instanceof X1)return e.objectValues(f.enum);else if(f instanceof Y1)return Df(f._def.innerType);else if(f instanceof Q1)return[void 0];else if(f instanceof h1)return[null];else if(f instanceof sv)return[void 0,...Df(f.unwrap())];else if(f instanceof Hf)return[null,...Df(f.unwrap())];else if(f instanceof x1)return Df(f.unwrap());else if(f instanceof B1)return Df(f.unwrap());else if(f instanceof l1)return Df(f._def.innerType);else return[]};class T1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==g.object)return k(v,{code:F.invalid_type,expected:g.object,received:v.parsedType}),n;let h=this.discriminator,P=v.data[h],Q=this.optionsMap.get(P);if(!Q)return k(v,{code:F.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[h]}),n;if(v.common.async)return Q._parseAsync({data:v.data,path:v.path,parent:v});else return Q._parseSync({data:v.data,path:v.path,parent:v})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(f,v,h){let P=new Map;for(let Q of v){let W=Df(Q.shape[f]);if(!W.length)throw Error(`A discriminator value for key \`${f}\` could not be extracted from all schema options`);for(let J of W){if(P.has(J))throw Error(`Discriminator property ${String(f)} has duplicate value ${String(J)}`);P.set(J,Q)}}return new T1({typeName:A.ZodDiscriminatedUnion,discriminator:f,options:v,optionsMap:P,...i(h)})}}function C0(f,v){let h=Wf(f),P=Wf(v);if(f===v)return{valid:!0,data:f};else if(h===g.object&&P===g.object){let Q=e.objectKeys(v),W=e.objectKeys(f).filter((w)=>Q.indexOf(w)!==-1),J={...f,...v};for(let w of W){let Y=C0(f[w],v[w]);if(!Y.valid)return{valid:!1};J[w]=Y.data}return{valid:!0,data:J}}else if(h===g.array&&P===g.array){if(f.length!==v.length)return{valid:!1};let Q=[];for(let W=0;W<f.length;W++){let J=f[W],w=v[W],Y=C0(J,w);if(!Y.valid)return{valid:!1};Q.push(Y.data)}return{valid:!0,data:Q}}else if(h===g.date&&P===g.date&&+f===+v)return{valid:!0,data:f};else return{valid:!1}}class W1 extends o{_parse(f){let{status:v,ctx:h}=this._processInputParams(f),P=(Q,W)=>{if(C1(Q)||C1(W))return n;let J=C0(Q.value,W.value);if(!J.valid)return k(h,{code:F.invalid_intersection_types}),n;if(Z1(Q)||Z1(W))v.dirty();return{status:v.value,value:J.data}};if(h.common.async)return Promise.all([this._def.left._parseAsync({data:h.data,path:h.path,parent:h}),this._def.right._parseAsync({data:h.data,path:h.path,parent:h})]).then(([Q,W])=>P(Q,W));else return P(this._def.left._parseSync({data:h.data,path:h.path,parent:h}),this._def.right._parseSync({data:h.data,path:h.path,parent:h}))}}W1.create=(f,v,h)=>{return new W1({left:f,right:v,typeName:A.ZodIntersection,...i(h)})};class wf extends o{_parse(f){let{status:v,ctx:h}=this._processInputParams(f);if(h.parsedType!==g.array)return k(h,{code:F.invalid_type,expected:g.array,received:h.parsedType}),n;if(h.data.length<this._def.items.length)return k(h,{code:F.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n;if(!this._def.rest&&h.data.length>this._def.items.length)k(h,{code:F.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),v.dirty();let Q=[...h.data].map((W,J)=>{let w=this._def.items[J]||this._def.rest;if(!w)return null;return w._parse(new tv(h,W,h.path,J))}).filter((W)=>!!W);if(h.common.async)return Promise.all(Q).then((W)=>{return Av.mergeArray(v,W)});else return Av.mergeArray(v,Q)}get items(){return this._def.items}rest(f){return new wf({...this._def,rest:f})}}wf.create=(f,v)=>{if(!Array.isArray(f))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new wf({items:f,typeName:A.ZodTuple,rest:null,...i(v)})};class L1 extends o{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:h}=this._processInputParams(f);if(h.parsedType!==g.object)return k(h,{code:F.invalid_type,expected:g.object,received:h.parsedType}),n;let P=[],Q=this._def.keyType,W=this._def.valueType;for(let J in h.data)P.push({key:Q._parse(new tv(h,J,h.path,J)),value:W._parse(new tv(h,h.data[J],h.path,J)),alwaysSet:J in h.data});if(h.common.async)return Av.mergeObjectAsync(v,P);else return Av.mergeObjectSync(v,P)}get element(){return this._def.valueType}static create(f,v,h){if(v instanceof o)return new L1({keyType:f,valueType:v,typeName:A.ZodRecord,...i(h)});return new L1({keyType:dv.create(),valueType:f,typeName:A.ZodRecord,...i(v)})}}class V1 extends o{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:h}=this._processInputParams(f);if(h.parsedType!==g.map)return k(h,{code:F.invalid_type,expected:g.map,received:h.parsedType}),n;let P=this._def.keyType,Q=this._def.valueType,W=[...h.data.entries()].map(([J,w],Y)=>{return{key:P._parse(new tv(h,J,h.path,[Y,"key"])),value:Q._parse(new tv(h,w,h.path,[Y,"value"]))}});if(h.common.async){let J=new Map;return Promise.resolve().then(async()=>{for(let w of W){let Y=await w.key,G=await w.value;if(Y.status==="aborted"||G.status==="aborted")return n;if(Y.status==="dirty"||G.status==="dirty")v.dirty();J.set(Y.value,G.value)}return{status:v.value,value:J}})}else{let J=new Map;for(let w of W){let{key:Y,value:G}=w;if(Y.status==="aborted"||G.status==="aborted")return n;if(Y.status==="dirty"||G.status==="dirty")v.dirty();J.set(Y.value,G.value)}return{status:v.value,value:J}}}}V1.create=(f,v,h)=>{return new V1({valueType:v,keyType:f,typeName:A.ZodMap,...i(h)})};class If extends o{_parse(f){let{status:v,ctx:h}=this._processInputParams(f);if(h.parsedType!==g.set)return k(h,{code:F.invalid_type,expected:g.set,received:h.parsedType}),n;let P=this._def;if(P.minSize!==null){if(h.data.size<P.minSize.value)k(h,{code:F.too_small,minimum:P.minSize.value,type:"set",inclusive:!0,exact:!1,message:P.minSize.message}),v.dirty()}if(P.maxSize!==null){if(h.data.size>P.maxSize.value)k(h,{code:F.too_big,maximum:P.maxSize.value,type:"set",inclusive:!0,exact:!1,message:P.maxSize.message}),v.dirty()}let Q=this._def.valueType;function W(w){let Y=new Set;for(let G of w){if(G.status==="aborted")return n;if(G.status==="dirty")v.dirty();Y.add(G.value)}return{status:v.value,value:Y}}let J=[...h.data.values()].map((w,Y)=>Q._parse(new tv(h,w,h.path,Y)));if(h.common.async)return Promise.all(J).then((w)=>W(w));else return W(J)}min(f,v){return new If({...this._def,minSize:{value:f,message:u.toString(v)}})}max(f,v){return new If({...this._def,maxSize:{value:f,message:u.toString(v)}})}size(f,v){return this.min(f,v).max(f,v)}nonempty(f){return this.min(1,f)}}If.create=(f,v)=>{return new If({valueType:f,minSize:null,maxSize:null,typeName:A.ZodSet,...i(v)})};class v1 extends o{constructor(){super(...arguments);this.validate=this.implement}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==g.function)return k(v,{code:F.invalid_type,expected:g.function,received:v.parsedType}),n;function h(J,w){return E1({data:J,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,sf(),zf].filter((Y)=>!!Y),issueData:{code:F.invalid_arguments,argumentsError:w}})}function P(J,w){return E1({data:J,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,sf(),zf].filter((Y)=>!!Y),issueData:{code:F.invalid_return_type,returnTypeError:w}})}let Q={errorMap:v.common.contextualErrorMap},W=v.data;if(this._def.returns instanceof Cf){let J=this;return Sv(async function(...w){let Y=new rv([]),G=await J._def.args.parseAsync(w,Q).catch((E)=>{throw Y.addIssue(h(w,E)),Y}),z=await Reflect.apply(W,this,G);return await J._def.returns._def.type.parseAsync(z,Q).catch((E)=>{throw Y.addIssue(P(z,E)),Y})})}else{let J=this;return Sv(function(...w){let Y=J._def.args.safeParse(w,Q);if(!Y.success)throw new rv([h(w,Y.error)]);let G=Reflect.apply(W,this,Y.data),z=J._def.returns.safeParse(G,Q);if(!z.success)throw new rv([P(G,z.error)]);return z.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...f){return new v1({...this._def,args:wf.create(f).rest(Mf.create())})}returns(f){return new v1({...this._def,returns:f})}implement(f){return this.parse(f)}strictImplement(f){return this.parse(f)}static create(f,v,h){return new v1({args:f?f:wf.create([]).rest(Mf.create()),returns:v||Mf.create(),typeName:A.ZodFunction,...i(h)})}}class J1 extends o{get schema(){return this._def.getter()}_parse(f){let{ctx:v}=this._processInputParams(f);return this._def.getter()._parse({data:v.data,path:v.path,parent:v})}}J1.create=(f,v)=>{return new J1({getter:f,typeName:A.ZodLazy,...i(v)})};class w1 extends o{_parse(f){if(f.data!==this._def.value){let v=this._getOrReturnCtx(f);return k(v,{received:v.data,code:F.invalid_literal,expected:this._def.value}),n}return{status:"valid",value:f.data}}get value(){return this._def.value}}w1.create=(f,v)=>{return new w1({value:f,typeName:A.ZodLiteral,...i(v)})};function eQ(f,v){return new Vf({values:f,typeName:A.ZodEnum,...i(v)})}class Vf extends o{_parse(f){if(typeof f.data!=="string"){let v=this._getOrReturnCtx(f),h=this._def.values;return k(v,{expected:e.joinValues(h),received:v.parsedType,code:F.invalid_type}),n}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(f.data)){let v=this._getOrReturnCtx(f),h=this._def.values;return k(v,{received:v.data,code:F.invalid_enum_value,options:h}),n}return Sv(f.data)}get options(){return this._def.values}get enum(){let f={};for(let v of this._def.values)f[v]=v;return f}get Values(){let f={};for(let v of this._def.values)f[v]=v;return f}get Enum(){let f={};for(let v of this._def.values)f[v]=v;return f}extract(f,v=this._def){return Vf.create(f,{...this._def,...v})}exclude(f,v=this._def){return Vf.create(this.options.filter((h)=>!f.includes(h)),{...this._def,...v})}}Vf.create=eQ;class X1 extends o{_parse(f){let v=e.getValidEnumValues(this._def.values),h=this._getOrReturnCtx(f);if(h.parsedType!==g.string&&h.parsedType!==g.number){let P=e.objectValues(v);return k(h,{expected:e.joinValues(P),received:h.parsedType,code:F.invalid_type}),n}if(!this._cache)this._cache=new Set(e.getValidEnumValues(this._def.values));if(!this._cache.has(f.data)){let P=e.objectValues(v);return k(h,{received:h.data,code:F.invalid_enum_value,options:P}),n}return Sv(f.data)}get enum(){return this._def.values}}X1.create=(f,v)=>{return new X1({values:f,typeName:A.ZodNativeEnum,...i(v)})};class Cf extends o{unwrap(){return this._def.type}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==g.promise&&v.common.async===!1)return k(v,{code:F.invalid_type,expected:g.promise,received:v.parsedType}),n;let h=v.parsedType===g.promise?v.data:Promise.resolve(v.data);return Sv(h.then((P)=>{return this._def.type.parseAsync(P,{path:v.path,errorMap:v.common.contextualErrorMap})}))}}Cf.create=(f,v)=>{return new Cf({type:f,typeName:A.ZodPromise,...i(v)})};class ev extends o{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===A.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(f){let{status:v,ctx:h}=this._processInputParams(f),P=this._def.effect||null,Q={addIssue:(W)=>{if(k(h,W),W.fatal)v.abort();else v.dirty()},get path(){return h.path}};if(Q.addIssue=Q.addIssue.bind(Q),P.type==="preprocess"){let W=P.transform(h.data,Q);if(h.common.async)return Promise.resolve(W).then(async(J)=>{if(v.value==="aborted")return n;let w=await this._def.schema._parseAsync({data:J,path:h.path,parent:h});if(w.status==="aborted")return n;if(w.status==="dirty")return yf(w.value);if(v.value==="dirty")return yf(w.value);return w});else{if(v.value==="aborted")return n;let J=this._def.schema._parseSync({data:W,path:h.path,parent:h});if(J.status==="aborted")return n;if(J.status==="dirty")return yf(J.value);if(v.value==="dirty")return yf(J.value);return J}}if(P.type==="refinement"){let W=(J)=>{let w=P.refinement(J,Q);if(h.common.async)return Promise.resolve(w);if(w instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return J};if(h.common.async===!1){let J=this._def.schema._parseSync({data:h.data,path:h.path,parent:h});if(J.status==="aborted")return n;if(J.status==="dirty")v.dirty();return W(J.value),{status:v.value,value:J.value}}else return this._def.schema._parseAsync({data:h.data,path:h.path,parent:h}).then((J)=>{if(J.status==="aborted")return n;if(J.status==="dirty")v.dirty();return W(J.value).then(()=>{return{status:v.value,value:J.value}})})}if(P.type==="transform")if(h.common.async===!1){let W=this._def.schema._parseSync({data:h.data,path:h.path,parent:h});if(!Ef(W))return n;let J=P.transform(W.value,Q);if(J instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:v.value,value:J}}else return this._def.schema._parseAsync({data:h.data,path:h.path,parent:h}).then((W)=>{if(!Ef(W))return n;return Promise.resolve(P.transform(W.value,Q)).then((J)=>({status:v.value,value:J}))});e.assertNever(P)}}ev.create=(f,v,h)=>{return new ev({schema:f,typeName:A.ZodEffects,effect:v,...i(h)})};ev.createWithPreprocess=(f,v,h)=>{return new ev({schema:v,effect:{type:"preprocess",transform:f},typeName:A.ZodEffects,...i(h)})};class sv extends o{_parse(f){if(this._getType(f)===g.undefined)return Sv(void 0);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}sv.create=(f,v)=>{return new sv({innerType:f,typeName:A.ZodOptional,...i(v)})};class Hf extends o{_parse(f){if(this._getType(f)===g.null)return Sv(null);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}Hf.create=(f,v)=>{return new Hf({innerType:f,typeName:A.ZodNullable,...i(v)})};class Y1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f),h=v.data;if(v.parsedType===g.undefined)h=this._def.defaultValue();return this._def.innerType._parse({data:h,path:v.path,parent:v})}removeDefault(){return this._def.innerType}}Y1.create=(f,v)=>{return new Y1({innerType:f,typeName:A.ZodDefault,defaultValue:typeof v.default==="function"?v.default:()=>v.default,...i(v)})};class l1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f),h={...v,common:{...v.common,issues:[]}},P=this._def.innerType._parse({data:h.data,path:h.path,parent:{...h}});if(tf(P))return P.then((Q)=>{return{status:"valid",value:Q.status==="valid"?Q.value:this._def.catchValue({get error(){return new rv(h.common.issues)},input:h.data})}});else return{status:"valid",value:P.status==="valid"?P.value:this._def.catchValue({get error(){return new rv(h.common.issues)},input:h.data})}}removeCatch(){return this._def.innerType}}l1.create=(f,v)=>{return new l1({innerType:f,typeName:A.ZodCatch,catchValue:typeof v.catch==="function"?v.catch:()=>v.catch,...i(v)})};class N1 extends o{_parse(f){if(this._getType(f)!==g.nan){let h=this._getOrReturnCtx(f);return k(h,{code:F.invalid_type,expected:g.nan,received:h.parsedType}),n}return{status:"valid",value:f.data}}}N1.create=(f)=>{return new N1({typeName:A.ZodNaN,...i(f)})};var h8=Symbol("zod_brand");class x1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f),h=v.data;return this._def.type._parse({data:h,path:v.path,parent:v})}unwrap(){return this._def.type}}class U1 extends o{_parse(f){let{status:v,ctx:h}=this._processInputParams(f);if(h.common.async)return(async()=>{let Q=await this._def.in._parseAsync({data:h.data,path:h.path,parent:h});if(Q.status==="aborted")return n;if(Q.status==="dirty")return v.dirty(),yf(Q.value);else return this._def.out._parseAsync({data:Q.value,path:h.path,parent:h})})();else{let P=this._def.in._parseSync({data:h.data,path:h.path,parent:h});if(P.status==="aborted")return n;if(P.status==="dirty")return v.dirty(),{status:"dirty",value:P.value};else return this._def.out._parseSync({data:P.value,path:h.path,parent:h})}}static create(f,v){return new U1({in:f,out:v,typeName:A.ZodPipeline})}}class B1 extends o{_parse(f){let v=this._def.innerType._parse(f),h=(P)=>{if(Ef(P))P.value=Object.freeze(P.value);return P};return tf(v)?v.then((P)=>h(P)):h(v)}unwrap(){return this._def.innerType}}B1.create=(f,v)=>{return new B1({innerType:f,typeName:A.ZodReadonly,...i(v)})};function dQ(f,v){let h=typeof f==="function"?f(v):typeof f==="string"?{message:f}:f;return typeof h==="string"?{message:h}:h}function vh(f,v={},h){if(f)return rf.create().superRefine((P,Q)=>{let W=f(P);if(W instanceof Promise)return W.then((J)=>{if(!J){let w=dQ(v,P),Y=w.fatal??h??!0;Q.addIssue({code:"custom",...w,fatal:Y})}});if(!W){let J=dQ(v,P),w=J.fatal??h??!0;Q.addIssue({code:"custom",...J,fatal:w})}return});return rf.create()}var P8={object:Kv.lazycreate},A;(function(f){f.ZodString="ZodString",f.ZodNumber="ZodNumber",f.ZodNaN="ZodNaN",f.ZodBigInt="ZodBigInt",f.ZodBoolean="ZodBoolean",f.ZodDate="ZodDate",f.ZodSymbol="ZodSymbol",f.ZodUndefined="ZodUndefined",f.ZodNull="ZodNull",f.ZodAny="ZodAny",f.ZodUnknown="ZodUnknown",f.ZodNever="ZodNever",f.ZodVoid="ZodVoid",f.ZodArray="ZodArray",f.ZodObject="ZodObject",f.ZodUnion="ZodUnion",f.ZodDiscriminatedUnion="ZodDiscriminatedUnion",f.ZodIntersection="ZodIntersection",f.ZodTuple="ZodTuple",f.ZodRecord="ZodRecord",f.ZodMap="ZodMap",f.ZodSet="ZodSet",f.ZodFunction="ZodFunction",f.ZodLazy="ZodLazy",f.ZodLiteral="ZodLiteral",f.ZodEnum="ZodEnum",f.ZodEffects="ZodEffects",f.ZodNativeEnum="ZodNativeEnum",f.ZodOptional="ZodOptional",f.ZodNullable="ZodNullable",f.ZodDefault="ZodDefault",f.ZodCatch="ZodCatch",f.ZodPromise="ZodPromise",f.ZodBranded="ZodBranded",f.ZodPipeline="ZodPipeline",f.ZodReadonly="ZodReadonly"})(A||(A={}));var W8=(f,v={message:`Input not instance of ${f.name}`})=>vh((h)=>h instanceof f,v),fh=dv.create,Qh=Of.create,J8=N1.create,w8=Lf.create,hh=f1.create,X8=kf.create,Y8=M1.create,l8=Q1.create,B8=h1.create,G8=rf.create,q8=Mf.create,z8=Jf.create,D8=O1.create,H8=ov.create,K8=Kv.create,$8=Kv.strictCreate,E8=P1.create,M8=T1.create,O8=W1.create,L8=wf.create,V8=L1.create,N8=V1.create,U8=If.create,F8=v1.create,A8=J1.create,j8=w1.create,b8=Vf.create,S8=X1.create,R8=Cf.create,_8=ev.create,g8=sv.create,y8=Hf.create,k8=ev.createWithPreprocess,r8=U1.create,I8=()=>fh().optional(),C8=()=>Qh().optional(),Z8=()=>hh().optional(),T8={string:(f)=>dv.create({...f,coerce:!0}),number:(f)=>Of.create({...f,coerce:!0}),boolean:(f)=>f1.create({...f,coerce:!0}),bigint:(f)=>Lf.create({...f,coerce:!0}),date:(f)=>kf.create({...f,coerce:!0})};var x8=n;var Z0="2025-06-18";var Ph=[Z0,"2025-03-26","2024-11-05","2024-10-07"],u1="2.0",Wh=X.union([X.string(),X.number().int()]),Jh=X.string(),a8=X.object({progressToken:X.optional(Wh)}).passthrough(),cv=X.object({_meta:X.optional(a8)}).passthrough(),Iv=X.object({method:X.string(),params:X.optional(cv)}),F1=X.object({_meta:X.optional(X.object({}).passthrough())}).passthrough(),Xf=X.object({method:X.string(),params:X.optional(F1)}),pv=X.object({_meta:X.optional(X.object({}).passthrough())}).passthrough(),a1=X.union([X.string(),X.number().int()]),wh=X.object({jsonrpc:X.literal(u1),id:a1}).merge(Iv).strict(),Xh=(f)=>wh.safeParse(f).success,Yh=X.object({jsonrpc:X.literal(u1)}).merge(Xf).strict(),lh=(f)=>Yh.safeParse(f).success,Bh=X.object({jsonrpc:X.literal(u1),id:a1,result:pv}).strict(),T0=(f)=>Bh.safeParse(f).success,Bv;(function(f){f[f.ConnectionClosed=-32000]="ConnectionClosed",f[f.RequestTimeout=-32001]="RequestTimeout",f[f.ParseError=-32700]="ParseError",f[f.InvalidRequest=-32600]="InvalidRequest",f[f.MethodNotFound=-32601]="MethodNotFound",f[f.InvalidParams=-32602]="InvalidParams",f[f.InternalError=-32603]="InternalError"})(Bv||(Bv={}));var Gh=X.object({jsonrpc:X.literal(u1),id:a1,error:X.object({code:X.number().int(),message:X.string(),data:X.optional(X.unknown())})}).strict(),qh=(f)=>Gh.safeParse(f).success,zh=X.union([wh,Yh,Bh,Gh]),m1=pv.strict(),n1=Xf.extend({method:X.literal("notifications/cancelled"),params:F1.extend({requestId:a1,reason:X.string().optional()})}),m8=X.object({src:X.string(),mimeType:X.optional(X.string()),sizes:X.optional(X.array(X.string()))}).passthrough(),A1=X.object({icons:X.array(m8).optional()}).passthrough(),j1=X.object({name:X.string(),title:X.optional(X.string())}).passthrough(),Dh=j1.extend({version:X.string(),websiteUrl:X.optional(X.string())}).merge(A1),n8=X.object({experimental:X.optional(X.object({}).passthrough()),sampling:X.optional(X.object({}).passthrough()),elicitation:X.optional(X.object({}).passthrough()),roots:X.optional(X.object({listChanged:X.optional(X.boolean())}).passthrough())}).passthrough(),x0=Iv.extend({method:X.literal("initialize"),params:cv.extend({protocolVersion:X.string(),capabilities:n8,clientInfo:Dh})});var c8=X.object({experimental:X.optional(X.object({}).passthrough()),logging:X.optional(X.object({}).passthrough()),completions:X.optional(X.object({}).passthrough()),prompts:X.optional(X.object({listChanged:X.optional(X.boolean())}).passthrough()),resources:X.optional(X.object({subscribe:X.optional(X.boolean()),listChanged:X.optional(X.boolean())}).passthrough()),tools:X.optional(X.object({listChanged:X.optional(X.boolean())}).passthrough())}).passthrough(),p8=pv.extend({protocolVersion:X.string(),capabilities:c8,serverInfo:Dh,instructions:X.optional(X.string())}),u0=Xf.extend({method:X.literal("notifications/initialized")});var c1=Iv.extend({method:X.literal("ping")}),i8=X.object({progress:X.number(),total:X.optional(X.number()),message:X.optional(X.string())}).passthrough(),p1=Xf.extend({method:X.literal("notifications/progress"),params:F1.merge(i8).extend({progressToken:Wh})}),i1=Iv.extend({params:cv.extend({cursor:X.optional(Jh)}).optional()}),d1=pv.extend({nextCursor:X.optional(Jh)}),Hh=X.object({uri:X.string(),mimeType:X.optional(X.string()),_meta:X.optional(X.object({}).passthrough())}).passthrough(),Kh=Hh.extend({text:X.string()}),a0=X.string().refine((f)=>{try{return atob(f),!0}catch(v){return!1}},{message:"Invalid Base64 string"}),$h=Hh.extend({blob:a0}),Eh=j1.extend({uri:X.string(),description:X.optional(X.string()),mimeType:X.optional(X.string()),_meta:X.optional(X.object({}).passthrough())}).merge(A1),d8=j1.extend({uriTemplate:X.string(),description:X.optional(X.string()),mimeType:X.optional(X.string()),_meta:X.optional(X.object({}).passthrough())}).merge(A1),o1=i1.extend({method:X.literal("resources/list")}),o8=d1.extend({resources:X.array(Eh)}),s1=i1.extend({method:X.literal("resources/templates/list")}),s8=d1.extend({resourceTemplates:X.array(d8)}),t1=Iv.extend({method:X.literal("resources/read"),params:cv.extend({uri:X.string()})}),t8=pv.extend({contents:X.array(X.union([Kh,$h]))}),e8=Xf.extend({method:X.literal("notifications/resources/list_changed")}),vJ=Iv.extend({method:X.literal("resources/subscribe"),params:cv.extend({uri:X.string()})}),fJ=Iv.extend({method:X.literal("resources/unsubscribe"),params:cv.extend({uri:X.string()})}),QJ=Xf.extend({method:X.literal("notifications/resources/updated"),params:F1.extend({uri:X.string()})}),hJ=X.object({name:X.string(),description:X.optional(X.string()),required:X.optional(X.boolean())}).passthrough(),PJ=j1.extend({description:X.optional(X.string()),arguments:X.optional(X.array(hJ)),_meta:X.optional(X.object({}).passthrough())}).merge(A1),e1=i1.extend({method:X.literal("prompts/list")}),WJ=d1.extend({prompts:X.array(PJ)}),v0=Iv.extend({method:X.literal("prompts/get"),params:cv.extend({name:X.string(),arguments:X.optional(X.record(X.string()))})}),m0=X.object({type:X.literal("text"),text:X.string(),_meta:X.optional(X.object({}).passthrough())}).passthrough(),n0=X.object({type:X.literal("image"),data:a0,mimeType:X.string(),_meta:X.optional(X.object({}).passthrough())}).passthrough(),c0=X.object({type:X.literal("audio"),data:a0,mimeType:X.string(),_meta:X.optional(X.object({}).passthrough())}).passthrough(),JJ=X.object({type:X.literal("resource"),resource:X.union([Kh,$h]),_meta:X.optional(X.object({}).passthrough())}).passthrough(),wJ=Eh.extend({type:X.literal("resource_link")}),Mh=X.union([m0,n0,c0,wJ,JJ]),XJ=X.object({role:X.enum(["user","assistant"]),content:Mh}).passthrough(),YJ=pv.extend({description:X.optional(X.string()),messages:X.array(XJ)}),lJ=Xf.extend({method:X.literal("notifications/prompts/list_changed")}),BJ=X.object({title:X.optional(X.string()),readOnlyHint:X.optional(X.boolean()),destructiveHint:X.optional(X.boolean()),idempotentHint:X.optional(X.boolean()),openWorldHint:X.optional(X.boolean())}).passthrough(),GJ=j1.extend({description:X.optional(X.string()),inputSchema:X.object({type:X.literal("object"),properties:X.optional(X.object({}).passthrough()),required:X.optional(X.array(X.string()))}).passthrough(),outputSchema:X.optional(X.object({type:X.literal("object"),properties:X.optional(X.object({}).passthrough()),required:X.optional(X.array(X.string()))}).passthrough()),annotations:X.optional(BJ),_meta:X.optional(X.object({}).passthrough())}).merge(A1),f0=i1.extend({method:X.literal("tools/list")}),qJ=d1.extend({tools:X.array(GJ)}),Oh=pv.extend({content:X.array(Mh).default([]),structuredContent:X.object({}).passthrough().optional(),isError:X.optional(X.boolean())}),bX=Oh.or(pv.extend({toolResult:X.unknown()})),Q0=Iv.extend({method:X.literal("tools/call"),params:cv.extend({name:X.string(),arguments:X.optional(X.record(X.unknown()))})}),zJ=Xf.extend({method:X.literal("notifications/tools/list_changed")}),b1=X.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),p0=Iv.extend({method:X.literal("logging/setLevel"),params:cv.extend({level:b1})}),DJ=Xf.extend({method:X.literal("notifications/message"),params:F1.extend({level:b1,logger:X.optional(X.string()),data:X.unknown()})}),HJ=X.object({name:X.string().optional()}).passthrough(),KJ=X.object({hints:X.optional(X.array(HJ)),costPriority:X.optional(X.number().min(0).max(1)),speedPriority:X.optional(X.number().min(0).max(1)),intelligencePriority:X.optional(X.number().min(0).max(1))}).passthrough(),$J=X.object({role:X.enum(["user","assistant"]),content:X.union([m0,n0,c0])}).passthrough(),EJ=Iv.extend({method:X.literal("sampling/createMessage"),params:cv.extend({messages:X.array($J),systemPrompt:X.optional(X.string()),includeContext:X.optional(X.enum(["none","thisServer","allServers"])),temperature:X.optional(X.number()),maxTokens:X.number().int(),stopSequences:X.optional(X.array(X.string())),metadata:X.optional(X.object({}).passthrough()),modelPreferences:X.optional(KJ)})}),i0=pv.extend({model:X.string(),stopReason:X.optional(X.enum(["endTurn","stopSequence","maxTokens"]).or(X.string())),role:X.enum(["user","assistant"]),content:X.discriminatedUnion("type",[m0,n0,c0])}),MJ=X.object({type:X.literal("boolean"),title:X.optional(X.string()),description:X.optional(X.string()),default:X.optional(X.boolean())}).passthrough(),OJ=X.object({type:X.literal("string"),title:X.optional(X.string()),description:X.optional(X.string()),minLength:X.optional(X.number()),maxLength:X.optional(X.number()),format:X.optional(X.enum(["email","uri","date","date-time"]))}).passthrough(),LJ=X.object({type:X.enum(["number","integer"]),title:X.optional(X.string()),description:X.optional(X.string()),minimum:X.optional(X.number()),maximum:X.optional(X.number())}).passthrough(),VJ=X.object({type:X.literal("string"),title:X.optional(X.string()),description:X.optional(X.string()),enum:X.array(X.string()),enumNames:X.optional(X.array(X.string()))}).passthrough(),NJ=X.union([MJ,OJ,LJ,VJ]),UJ=Iv.extend({method:X.literal("elicitation/create"),params:cv.extend({message:X.string(),requestedSchema:X.object({type:X.literal("object"),properties:X.record(X.string(),NJ),required:X.optional(X.array(X.string()))}).passthrough()})}),d0=pv.extend({action:X.enum(["accept","decline","cancel"]),content:X.optional(X.record(X.string(),X.unknown()))}),FJ=X.object({type:X.literal("ref/resource"),uri:X.string()}).passthrough();var AJ=X.object({type:X.literal("ref/prompt"),name:X.string()}).passthrough(),h0=Iv.extend({method:X.literal("completion/complete"),params:cv.extend({ref:X.union([AJ,FJ]),argument:X.object({name:X.string(),value:X.string()}).passthrough(),context:X.optional(X.object({arguments:X.optional(X.record(X.string(),X.string()))}))})}),jJ=pv.extend({completion:X.object({values:X.array(X.string()).max(100),total:X.optional(X.number().int()),hasMore:X.optional(X.boolean())}).passthrough()}),bJ=X.object({uri:X.string().startsWith("file://"),name:X.optional(X.string()),_meta:X.optional(X.object({}).passthrough())}).passthrough(),SJ=Iv.extend({method:X.literal("roots/list")}),o0=pv.extend({roots:X.array(bJ)}),RJ=Xf.extend({method:X.literal("notifications/roots/list_changed")}),SX=X.union([c1,x0,h0,p0,v0,e1,o1,s1,t1,vJ,fJ,Q0,f0]),RX=X.union([n1,p1,u0,RJ]),_X=X.union([m1,i0,d0,o0]),gX=X.union([c1,EJ,UJ,SJ]),yX=X.union([n1,p1,DJ,QJ,e8,zJ,lJ]),kX=X.union([m1,p8,jJ,YJ,WJ,o8,s8,t8,Oh,qJ]);class Gv extends Error{constructor(f,v,h){super(`MCP error ${f}: ${v}`);this.code=f,this.data=h,this.name="McpError"}}var _J=60000;class s0{constructor(f){this._options=f,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(n1,(v)=>{let h=this._requestHandlerAbortControllers.get(v.params.requestId);h===null||h===void 0||h.abort(v.params.reason)}),this.setNotificationHandler(p1,(v)=>{this._onprogress(v)}),this.setRequestHandler(c1,(v)=>({}))}_setupTimeout(f,v,h,P,Q=!1){this._timeoutInfo.set(f,{timeoutId:setTimeout(P,v),startTime:Date.now(),timeout:v,maxTotalTimeout:h,resetTimeoutOnProgress:Q,onTimeout:P})}_resetTimeout(f){let v=this._timeoutInfo.get(f);if(!v)return!1;let h=Date.now()-v.startTime;if(v.maxTotalTimeout&&h>=v.maxTotalTimeout)throw this._timeoutInfo.delete(f),new Gv(Bv.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:v.maxTotalTimeout,totalElapsed:h});return clearTimeout(v.timeoutId),v.timeoutId=setTimeout(v.onTimeout,v.timeout),!0}_cleanupTimeout(f){let v=this._timeoutInfo.get(f);if(v)clearTimeout(v.timeoutId),this._timeoutInfo.delete(f)}async connect(f){var v,h,P;this._transport=f;let Q=(v=this.transport)===null||v===void 0?void 0:v.onclose;this._transport.onclose=()=>{Q===null||Q===void 0||Q(),this._onclose()};let W=(h=this.transport)===null||h===void 0?void 0:h.onerror;this._transport.onerror=(w)=>{W===null||W===void 0||W(w),this._onerror(w)};let J=(P=this._transport)===null||P===void 0?void 0:P.onmessage;this._transport.onmessage=(w,Y)=>{if(J===null||J===void 0||J(w,Y),T0(w)||qh(w))this._onresponse(w);else if(Xh(w))this._onrequest(w,Y);else if(lh(w))this._onnotification(w);else this._onerror(Error(`Unknown message type: ${JSON.stringify(w)}`))},await this._transport.start()}_onclose(){var f;let v=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(f=this.onclose)===null||f===void 0||f.call(this);let h=new Gv(Bv.ConnectionClosed,"Connection closed");for(let P of v.values())P(h)}_onerror(f){var v;(v=this.onerror)===null||v===void 0||v.call(this,f)}_onnotification(f){var v;let h=(v=this._notificationHandlers.get(f.method))!==null&&v!==void 0?v:this.fallbackNotificationHandler;if(h===void 0)return;Promise.resolve().then(()=>h(f)).catch((P)=>this._onerror(Error(`Uncaught error in notification handler: ${P}`)))}_onrequest(f,v){var h,P;let Q=(h=this._requestHandlers.get(f.method))!==null&&h!==void 0?h:this.fallbackRequestHandler,W=this._transport;if(Q===void 0){W===null||W===void 0||W.send({jsonrpc:"2.0",id:f.id,error:{code:Bv.MethodNotFound,message:"Method not found"}}).catch((Y)=>this._onerror(Error(`Failed to send an error response: ${Y}`)));return}let J=new AbortController;this._requestHandlerAbortControllers.set(f.id,J);let w={signal:J.signal,sessionId:W===null||W===void 0?void 0:W.sessionId,_meta:(P=f.params)===null||P===void 0?void 0:P._meta,sendNotification:(Y)=>this.notification(Y,{relatedRequestId:f.id}),sendRequest:(Y,G,z)=>this.request(Y,G,{...z,relatedRequestId:f.id}),authInfo:v===null||v===void 0?void 0:v.authInfo,requestId:f.id,requestInfo:v===null||v===void 0?void 0:v.requestInfo};Promise.resolve().then(()=>Q(f,w)).then((Y)=>{if(J.signal.aborted)return;return W===null||W===void 0?void 0:W.send({result:Y,jsonrpc:"2.0",id:f.id})},(Y)=>{var G;if(J.signal.aborted)return;return W===null||W===void 0?void 0:W.send({jsonrpc:"2.0",id:f.id,error:{code:Number.isSafeInteger(Y.code)?Y.code:Bv.InternalError,message:(G=Y.message)!==null&&G!==void 0?G:"Internal error"}})}).catch((Y)=>this._onerror(Error(`Failed to send response: ${Y}`))).finally(()=>{this._requestHandlerAbortControllers.delete(f.id)})}_onprogress(f){let{progressToken:v,...h}=f.params,P=Number(v),Q=this._progressHandlers.get(P);if(!Q){this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(f)}`));return}let W=this._responseHandlers.get(P),J=this._timeoutInfo.get(P);if(J&&W&&J.resetTimeoutOnProgress)try{this._resetTimeout(P)}catch(w){W(w);return}Q(h)}_onresponse(f){let v=Number(f.id),h=this._responseHandlers.get(v);if(h===void 0){this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(f)}`));return}if(this._responseHandlers.delete(v),this._progressHandlers.delete(v),this._cleanupTimeout(v),T0(f))h(f);else{let P=new Gv(f.error.code,f.error.message,f.error.data);h(P)}}get transport(){return this._transport}async close(){var f;await((f=this._transport)===null||f===void 0?void 0:f.close())}request(f,v,h){let{relatedRequestId:P,resumptionToken:Q,onresumptiontoken:W}=h!==null&&h!==void 0?h:{};return new Promise((J,w)=>{var Y,G,z,$,E,l;if(!this._transport){w(Error("Not connected"));return}if(((Y=this._options)===null||Y===void 0?void 0:Y.enforceStrictCapabilities)===!0)this.assertCapabilityForMethod(f.method);(G=h===null||h===void 0?void 0:h.signal)===null||G===void 0||G.throwIfAborted();let D=this._requestMessageId++,M={...f,jsonrpc:"2.0",id:D};if(h===null||h===void 0?void 0:h.onprogress)this._progressHandlers.set(D,h.onprogress),M.params={...f.params,_meta:{...((z=f.params)===null||z===void 0?void 0:z._meta)||{},progressToken:D}};let H=(N)=>{var b;this._responseHandlers.delete(D),this._progressHandlers.delete(D),this._cleanupTimeout(D),(b=this._transport)===null||b===void 0||b.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:D,reason:String(N)}},{relatedRequestId:P,resumptionToken:Q,onresumptiontoken:W}).catch((S)=>this._onerror(Error(`Failed to send cancellation: ${S}`))),w(N)};this._responseHandlers.set(D,(N)=>{var b;if((b=h===null||h===void 0?void 0:h.signal)===null||b===void 0?void 0:b.aborted)return;if(N instanceof Error)return w(N);try{let S=v.parse(N.result);J(S)}catch(S){w(S)}}),($=h===null||h===void 0?void 0:h.signal)===null||$===void 0||$.addEventListener("abort",()=>{var N;H((N=h===null||h===void 0?void 0:h.signal)===null||N===void 0?void 0:N.reason)});let L=(E=h===null||h===void 0?void 0:h.timeout)!==null&&E!==void 0?E:_J,U=()=>H(new Gv(Bv.RequestTimeout,"Request timed out",{timeout:L}));this._setupTimeout(D,L,h===null||h===void 0?void 0:h.maxTotalTimeout,U,(l=h===null||h===void 0?void 0:h.resetTimeoutOnProgress)!==null&&l!==void 0?l:!1),this._transport.send(M,{relatedRequestId:P,resumptionToken:Q,onresumptiontoken:W}).catch((N)=>{this._cleanupTimeout(D),w(N)})})}async notification(f,v){var h,P;if(!this._transport)throw Error("Not connected");if(this.assertNotificationCapability(f.method),((P=(h=this._options)===null||h===void 0?void 0:h.debouncedNotificationMethods)!==null&&P!==void 0?P:[]).includes(f.method)&&!f.params&&!(v===null||v===void 0?void 0:v.relatedRequestId)){if(this._pendingDebouncedNotifications.has(f.method))return;this._pendingDebouncedNotifications.add(f.method),Promise.resolve().then(()=>{var w;if(this._pendingDebouncedNotifications.delete(f.method),!this._transport)return;let Y={...f,jsonrpc:"2.0"};(w=this._transport)===null||w===void 0||w.send(Y,v).catch((G)=>this._onerror(G))});return}let J={...f,jsonrpc:"2.0"};await this._transport.send(J,v)}setRequestHandler(f,v){let h=f.shape.method.value;this.assertRequestHandlerCapability(h),this._requestHandlers.set(h,(P,Q)=>{return Promise.resolve(v(f.parse(P),Q))})}removeRequestHandler(f){this._requestHandlers.delete(f)}assertCanSetRequestHandler(f){if(this._requestHandlers.has(f))throw Error(`A request handler for ${f} already exists, which would be overridden`)}setNotificationHandler(f,v){this._notificationHandlers.set(f.shape.method.value,(h)=>Promise.resolve(v(f.parse(h))))}removeNotificationHandler(f){this._notificationHandlers.delete(f)}}function Lh(f,v){return Object.entries(v).reduce((h,[P,Q])=>{if(Q&&typeof Q==="object")h[P]=h[P]?{...h[P],...Q}:Q;else h[P]=Q;return h},{...f})}var NW=Bw(VW(),1);class LQ extends s0{constructor(f,v){var h;super(v);if(this._serverInfo=f,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(b1.options.map((P,Q)=>[P,Q])),this.isMessageIgnored=(P,Q)=>{let W=this._loggingLevels.get(Q);return W?this.LOG_LEVEL_SEVERITY.get(P)<this.LOG_LEVEL_SEVERITY.get(W):!1},this._capabilities=(h=v===null||v===void 0?void 0:v.capabilities)!==null&&h!==void 0?h:{},this._instructions=v===null||v===void 0?void 0:v.instructions,this.setRequestHandler(x0,(P)=>this._oninitialize(P)),this.setNotificationHandler(u0,()=>{var P;return(P=this.oninitialized)===null||P===void 0?void 0:P.call(this)}),this._capabilities.logging)this.setRequestHandler(p0,async(P,Q)=>{var W;let J=Q.sessionId||((W=Q.requestInfo)===null||W===void 0?void 0:W.headers["mcp-session-id"])||void 0,{level:w}=P.params,Y=b1.safeParse(w);if(Y.success)this._loggingLevels.set(J,Y.data);return{}})}registerCapabilities(f){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=Lh(this._capabilities,f)}assertCapabilityForMethod(f){var v,h,P;switch(f){case"sampling/createMessage":if(!((v=this._clientCapabilities)===null||v===void 0?void 0:v.sampling))throw Error(`Client does not support sampling (required for ${f})`);break;case"elicitation/create":if(!((h=this._clientCapabilities)===null||h===void 0?void 0:h.elicitation))throw Error(`Client does not support elicitation (required for ${f})`);break;case"roots/list":if(!((P=this._clientCapabilities)===null||P===void 0?void 0:P.roots))throw Error(`Client does not support listing roots (required for ${f})`);break;case"ping":break}}assertNotificationCapability(f){switch(f){case"notifications/message":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${f})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw Error(`Server does not support notifying about resources (required for ${f})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw Error(`Server does not support notifying of tool list changes (required for ${f})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw Error(`Server does not support notifying of prompt list changes (required for ${f})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(f){switch(f){case"sampling/createMessage":if(!this._capabilities.sampling)throw Error(`Server does not support sampling (required for ${f})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${f})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw Error(`Server does not support prompts (required for ${f})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw Error(`Server does not support resources (required for ${f})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw Error(`Server does not support tools (required for ${f})`);break;case"ping":case"initialize":break}}async _oninitialize(f){let v=f.params.protocolVersion;return this._clientCapabilities=f.params.capabilities,this._clientVersion=f.params.clientInfo,{protocolVersion:Ph.includes(v)?v:Z0,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},m1)}async createMessage(f,v){return this.request({method:"sampling/createMessage",params:f},i0,v)}async elicitInput(f,v){let h=await this.request({method:"elicitation/create",params:f},d0,v);if(h.action==="accept"&&h.content)try{let P=new NW.default,Q=P.compile(f.requestedSchema);if(!Q(h.content))throw new Gv(Bv.InvalidParams,`Elicitation response content does not match requested schema: ${P.errorsText(Q.errors)}`)}catch(P){if(P instanceof Gv)throw P;throw new Gv(Bv.InternalError,`Error validating elicitation response: ${P}`)}return h}async listRoots(f,v){return this.request({method:"roots/list",params:f},o0,v)}async sendLoggingMessage(f,v){if(this._capabilities.logging){if(!this.isMessageIgnored(f.level,v))return this.notification({method:"notifications/message",params:f})}}async sendResourceUpdated(f){return this.notification({method:"notifications/resources/updated",params:f})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}var FW=Symbol("Let zodToJsonSchema decide on which parser to use");var UW={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},AW=(f)=>typeof f==="string"?{...UW,name:f}:{...UW,...f};var jW=(f)=>{let v=AW(f),h=v.name!==void 0?[...v.basePath,v.definitionPath,v.name]:v.basePath;return{...v,flags:{hasReferencedOpenAiAnyType:!1},currentPath:h,propertyPath:void 0,seen:new Map(Object.entries(v.definitions).map(([P,Q])=>[Q._def,{def:Q._def,path:[...v.basePath,v.definitionPath,P],jsonSchema:void 0}]))}};function VQ(f,v,h,P){if(!P?.errorMessages)return;if(h)f.errorMessage={...f.errorMessage,[v]:h}}function vv(f,v,h,P,Q){f[v]=h,VQ(f,v,P,Q)}var L0=(f,v)=>{let h=0;for(;h<f.length&&h<v.length;h++)if(f[h]!==v[h])break;return[(f.length-h).toString(),...v.slice(h)].join("/")};function zv(f){if(f.target!=="openAi")return{};let v=[...f.basePath,f.definitionPath,f.openAiAnyTypeName];return f.flags.hasReferencedOpenAiAnyType=!0,{$ref:f.$refStrategy==="relative"?L0(v,f.currentPath):v.join("/")}}function bW(f,v){let h={type:"array"};if(f.type?._def&&f.type?._def?.typeName!==A.ZodAny)h.items=c(f.type._def,{...v,currentPath:[...v.currentPath,"items"]});if(f.minLength)vv(h,"minItems",f.minLength.value,f.minLength.message,v);if(f.maxLength)vv(h,"maxItems",f.maxLength.value,f.maxLength.message,v);if(f.exactLength)vv(h,"minItems",f.exactLength.value,f.exactLength.message,v),vv(h,"maxItems",f.exactLength.value,f.exactLength.message,v);return h}function SW(f,v){let h={type:"integer",format:"int64"};if(!f.checks)return h;for(let P of f.checks)switch(P.kind){case"min":if(v.target==="jsonSchema7")if(P.inclusive)vv(h,"minimum",P.value,P.message,v);else vv(h,"exclusiveMinimum",P.value,P.message,v);else{if(!P.inclusive)h.exclusiveMinimum=!0;vv(h,"minimum",P.value,P.message,v)}break;case"max":if(v.target==="jsonSchema7")if(P.inclusive)vv(h,"maximum",P.value,P.message,v);else vv(h,"exclusiveMaximum",P.value,P.message,v);else{if(!P.inclusive)h.exclusiveMaximum=!0;vv(h,"maximum",P.value,P.message,v)}break;case"multipleOf":vv(h,"multipleOf",P.value,P.message,v);break}return h}function RW(){return{type:"boolean"}}function V0(f,v){return c(f.type._def,v)}var _W=(f,v)=>{return c(f.innerType._def,v)};function NQ(f,v,h){let P=h??v.dateStrategy;if(Array.isArray(P))return{anyOf:P.map((Q,W)=>NQ(f,v,Q))};switch(P){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Gw(f,v)}}var Gw=(f,v)=>{let h={type:"integer",format:"unix-time"};if(v.target==="openApi3")return h;for(let P of f.checks)switch(P.kind){case"min":vv(h,"minimum",P.value,P.message,v);break;case"max":vv(h,"maximum",P.value,P.message,v);break}return h};function gW(f,v){return{...c(f.innerType._def,v),default:f.defaultValue()}}function yW(f,v){return v.effectStrategy==="input"?c(f.schema._def,v):zv(v)}function kW(f){return{type:"string",enum:Array.from(f.values)}}var qw=(f)=>{if("type"in f&&f.type==="string")return!1;return"allOf"in f};function rW(f,v){let h=[c(f.left._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),c(f.right._def,{...v,currentPath:[...v.currentPath,"allOf","1"]})].filter((W)=>!!W),P=v.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,Q=[];return h.forEach((W)=>{if(qw(W)){if(Q.push(...W.allOf),W.unevaluatedProperties===void 0)P=void 0}else{let J=W;if("additionalProperties"in W&&W.additionalProperties===!1){let{additionalProperties:w,...Y}=W;J=Y}else P=void 0;Q.push(J)}}),Q.length?{allOf:Q,...P}:void 0}function IW(f,v){let h=typeof f.value;if(h!=="bigint"&&h!=="number"&&h!=="boolean"&&h!=="string")return{type:Array.isArray(f.value)?"array":"object"};if(v.target==="openApi3")return{type:h==="bigint"?"integer":h,enum:[f.value]};return{type:h==="bigint"?"integer":h,const:f.value}}var UQ=void 0,vf={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(UQ===void 0)UQ=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");return UQ},uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function N0(f,v){let h={type:"string"};if(f.checks)for(let P of f.checks)switch(P.kind){case"min":vv(h,"minLength",typeof h.minLength==="number"?Math.max(h.minLength,P.value):P.value,P.message,v);break;case"max":vv(h,"maxLength",typeof h.maxLength==="number"?Math.min(h.maxLength,P.value):P.value,P.message,v);break;case"email":switch(v.emailStrategy){case"format:email":ff(h,"email",P.message,v);break;case"format:idn-email":ff(h,"idn-email",P.message,v);break;case"pattern:zod":yv(h,vf.email,P.message,v);break}break;case"url":ff(h,"uri",P.message,v);break;case"uuid":ff(h,"uuid",P.message,v);break;case"regex":yv(h,P.regex,P.message,v);break;case"cuid":yv(h,vf.cuid,P.message,v);break;case"cuid2":yv(h,vf.cuid2,P.message,v);break;case"startsWith":yv(h,RegExp(`^${FQ(P.value,v)}`),P.message,v);break;case"endsWith":yv(h,RegExp(`${FQ(P.value,v)}$`),P.message,v);break;case"datetime":ff(h,"date-time",P.message,v);break;case"date":ff(h,"date",P.message,v);break;case"time":ff(h,"time",P.message,v);break;case"duration":ff(h,"duration",P.message,v);break;case"length":vv(h,"minLength",typeof h.minLength==="number"?Math.max(h.minLength,P.value):P.value,P.message,v),vv(h,"maxLength",typeof h.maxLength==="number"?Math.min(h.maxLength,P.value):P.value,P.message,v);break;case"includes":{yv(h,RegExp(FQ(P.value,v)),P.message,v);break}case"ip":{if(P.version!=="v6")ff(h,"ipv4",P.message,v);if(P.version!=="v4")ff(h,"ipv6",P.message,v);break}case"base64url":yv(h,vf.base64url,P.message,v);break;case"jwt":yv(h,vf.jwt,P.message,v);break;case"cidr":{if(P.version!=="v6")yv(h,vf.ipv4Cidr,P.message,v);if(P.version!=="v4")yv(h,vf.ipv6Cidr,P.message,v);break}case"emoji":yv(h,vf.emoji(),P.message,v);break;case"ulid":{yv(h,vf.ulid,P.message,v);break}case"base64":{switch(v.base64Strategy){case"format:binary":{ff(h,"binary",P.message,v);break}case"contentEncoding:base64":{vv(h,"contentEncoding","base64",P.message,v);break}case"pattern:zod":{yv(h,vf.base64,P.message,v);break}}break}case"nanoid":yv(h,vf.nanoid,P.message,v);case"toLowerCase":case"toUpperCase":case"trim":break;default:((Q)=>{})(P)}return h}function FQ(f,v){return v.patternStrategy==="escape"?Dw(f):f}var zw=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Dw(f){let v="";for(let h=0;h<f.length;h++){if(!zw.has(f[h]))v+="\\";v+=f[h]}return v}function ff(f,v,h,P){if(f.format||f.anyOf?.some((Q)=>Q.format)){if(!f.anyOf)f.anyOf=[];if(f.format){if(f.anyOf.push({format:f.format,...f.errorMessage&&P.errorMessages&&{errorMessage:{format:f.errorMessage.format}}}),delete f.format,f.errorMessage){if(delete f.errorMessage.format,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.anyOf.push({format:v,...h&&P.errorMessages&&{errorMessage:{format:h}}})}else vv(f,"format",v,h,P)}function yv(f,v,h,P){if(f.pattern||f.allOf?.some((Q)=>Q.pattern)){if(!f.allOf)f.allOf=[];if(f.pattern){if(f.allOf.push({pattern:f.pattern,...f.errorMessage&&P.errorMessages&&{errorMessage:{pattern:f.errorMessage.pattern}}}),delete f.pattern,f.errorMessage){if(delete f.errorMessage.pattern,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.allOf.push({pattern:CW(v,P),...h&&P.errorMessages&&{errorMessage:{pattern:h}}})}else vv(f,"pattern",CW(v,P),h,P)}function CW(f,v){if(!v.applyRegexFlags||!f.flags)return f.source;let h={i:f.flags.includes("i"),m:f.flags.includes("m"),s:f.flags.includes("s")},P=h.i?f.source.toLowerCase():f.source,Q="",W=!1,J=!1,w=!1;for(let Y=0;Y<P.length;Y++){if(W){Q+=P[Y],W=!1;continue}if(h.i){if(J){if(P[Y].match(/[a-z]/)){if(w)Q+=P[Y],Q+=`${P[Y-2]}-${P[Y]}`.toUpperCase(),w=!1;else if(P[Y+1]==="-"&&P[Y+2]?.match(/[a-z]/))Q+=P[Y],w=!0;else Q+=`${P[Y]}${P[Y].toUpperCase()}`;continue}}else if(P[Y].match(/[a-z]/)){Q+=`[${P[Y]}${P[Y].toUpperCase()}]`;continue}}if(h.m){if(P[Y]==="^"){Q+=`(^|(?<=[\r
]))`;continue}else if(P[Y]==="$"){Q+=`($|(?=[\r
]))`;continue}}if(h.s&&P[Y]==="."){Q+=J?`${P[Y]}\r
`:`[${P[Y]}\r
]`;continue}if(Q+=P[Y],P[Y]==="\\")W=!0;else if(J&&P[Y]==="]")J=!1;else if(!J&&P[Y]==="[")J=!0}try{new RegExp(Q)}catch{return console.warn(`Could not convert regex pattern at ${v.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),f.source}return Q}function U0(f,v){if(v.target==="openAi")console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.");if(v.target==="openApi3"&&f.keyType?._def.typeName===A.ZodEnum)return{type:"object",required:f.keyType._def.values,properties:f.keyType._def.values.reduce((P,Q)=>({...P,[Q]:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"properties",Q]})??zv(v)}),{}),additionalProperties:v.rejectedAdditionalProperties};let h={type:"object",additionalProperties:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]})??v.allowedAdditionalProperties};if(v.target==="openApi3")return h;if(f.keyType?._def.typeName===A.ZodString&&f.keyType._def.checks?.length){let{type:P,...Q}=N0(f.keyType._def,v);return{...h,propertyNames:Q}}else if(f.keyType?._def.typeName===A.ZodEnum)return{...h,propertyNames:{enum:f.keyType._def.values}};else if(f.keyType?._def.typeName===A.ZodBranded&&f.keyType._def.type._def.typeName===A.ZodString&&f.keyType._def.type._def.checks?.length){let{type:P,...Q}=V0(f.keyType._def,v);return{...h,propertyNames:Q}}return h}function ZW(f,v){if(v.mapStrategy==="record")return U0(f,v);let h=c(f.keyType._def,{...v,currentPath:[...v.currentPath,"items","items","0"]})||zv(v),P=c(f.valueType._def,{...v,currentPath:[...v.currentPath,"items","items","1"]})||zv(v);return{type:"array",maxItems:125,items:{type:"array",items:[h,P],minItems:2,maxItems:2}}}function TW(f){let v=f.values,P=Object.keys(f.values).filter((W)=>{return typeof v[v[W]]!=="number"}).map((W)=>v[W]),Q=Array.from(new Set(P.map((W)=>typeof W)));return{type:Q.length===1?Q[0]==="string"?"string":"number":["string","number"],enum:P}}function xW(f){return f.target==="openAi"?void 0:{not:zv({...f,currentPath:[...f.currentPath,"not"]})}}function uW(f){return f.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var R1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function mW(f,v){if(v.target==="openApi3")return aW(f,v);let h=f.options instanceof Map?Array.from(f.options.values()):f.options;if(h.every((P)=>(P._def.typeName in R1)&&(!P._def.checks||!P._def.checks.length))){let P=h.reduce((Q,W)=>{let J=R1[W._def.typeName];return J&&!Q.includes(J)?[...Q,J]:Q},[]);return{type:P.length>1?P:P[0]}}else if(h.every((P)=>P._def.typeName==="ZodLiteral"&&!P.description)){let P=h.reduce((Q,W)=>{let J=typeof W._def.value;switch(J){case"string":case"number":case"boolean":return[...Q,J];case"bigint":return[...Q,"integer"];case"object":if(W._def.value===null)return[...Q,"null"];case"symbol":case"undefined":case"function":default:return Q}},[]);if(P.length===h.length){let Q=P.filter((W,J,w)=>w.indexOf(W)===J);return{type:Q.length>1?Q:Q[0],enum:h.reduce((W,J)=>{return W.includes(J._def.value)?W:[...W,J._def.value]},[])}}}else if(h.every((P)=>P._def.typeName==="ZodEnum"))return{type:"string",enum:h.reduce((P,Q)=>[...P,...Q._def.values.filter((W)=>!P.includes(W))],[])};return aW(f,v)}var aW=(f,v)=>{let h=(f.options instanceof Map?Array.from(f.options.values()):f.options).map((P,Q)=>c(P._def,{...v,currentPath:[...v.currentPath,"anyOf",`${Q}`]})).filter((P)=>!!P&&(!v.strictUnions||typeof P==="object"&&Object.keys(P).length>0));return h.length?{anyOf:h}:void 0};function nW(f,v){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(f.innerType._def.typeName)&&(!f.innerType._def.checks||!f.innerType._def.checks.length)){if(v.target==="openApi3")return{type:R1[f.innerType._def.typeName],nullable:!0};return{type:[R1[f.innerType._def.typeName],"null"]}}if(v.target==="openApi3"){let P=c(f.innerType._def,{...v,currentPath:[...v.currentPath]});if(P&&"$ref"in P)return{allOf:[P],nullable:!0};return P&&{...P,nullable:!0}}let h=c(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","0"]});return h&&{anyOf:[h,{type:"null"}]}}function cW(f,v){let h={type:"number"};if(!f.checks)return h;for(let P of f.checks)switch(P.kind){case"int":h.type="integer",VQ(h,"type",P.message,v);break;case"min":if(v.target==="jsonSchema7")if(P.inclusive)vv(h,"minimum",P.value,P.message,v);else vv(h,"exclusiveMinimum",P.value,P.message,v);else{if(!P.inclusive)h.exclusiveMinimum=!0;vv(h,"minimum",P.value,P.message,v)}break;case"max":if(v.target==="jsonSchema7")if(P.inclusive)vv(h,"maximum",P.value,P.message,v);else vv(h,"exclusiveMaximum",P.value,P.message,v);else{if(!P.inclusive)h.exclusiveMaximum=!0;vv(h,"maximum",P.value,P.message,v)}break;case"multipleOf":vv(h,"multipleOf",P.value,P.message,v);break}return h}function pW(f,v){let h=v.target==="openAi",P={type:"object",properties:{}},Q=[],W=f.shape();for(let w in W){let Y=W[w];if(Y===void 0||Y._def===void 0)continue;let G=Kw(Y);if(G&&h){if(Y._def.typeName==="ZodOptional")Y=Y._def.innerType;if(!Y.isNullable())Y=Y.nullable();G=!1}let z=c(Y._def,{...v,currentPath:[...v.currentPath,"properties",w],propertyPath:[...v.currentPath,"properties",w]});if(z===void 0)continue;if(P.properties[w]=z,!G)Q.push(w)}if(Q.length)P.required=Q;let J=Hw(f,v);if(J!==void 0)P.additionalProperties=J;return P}function Hw(f,v){if(f.catchall._def.typeName!=="ZodNever")return c(f.catchall._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]});switch(f.unknownKeys){case"passthrough":return v.allowedAdditionalProperties;case"strict":return v.rejectedAdditionalProperties;case"strip":return v.removeAdditionalStrategy==="strict"?v.allowedAdditionalProperties:v.rejectedAdditionalProperties}}function Kw(f){try{return f.isOptional()}catch{return!0}}var iW=(f,v)=>{if(v.currentPath.toString()===v.propertyPath?.toString())return c(f.innerType._def,v);let h=c(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","1"]});return h?{anyOf:[{not:zv(v)},h]}:zv(v)};var dW=(f,v)=>{if(v.pipeStrategy==="input")return c(f.in._def,v);else if(v.pipeStrategy==="output")return c(f.out._def,v);let h=c(f.in._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),P=c(f.out._def,{...v,currentPath:[...v.currentPath,"allOf",h?"1":"0"]});return{allOf:[h,P].filter((Q)=>Q!==void 0)}};function oW(f,v){return c(f.type._def,v)}function sW(f,v){let P={type:"array",uniqueItems:!0,items:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"items"]})};if(f.minSize)vv(P,"minItems",f.minSize.value,f.minSize.message,v);if(f.maxSize)vv(P,"maxItems",f.maxSize.value,f.maxSize.message,v);return P}function tW(f,v){if(f.rest)return{type:"array",minItems:f.items.length,items:f.items.map((h,P)=>c(h._def,{...v,currentPath:[...v.currentPath,"items",`${P}`]})).reduce((h,P)=>P===void 0?h:[...h,P],[]),additionalItems:c(f.rest._def,{...v,currentPath:[...v.currentPath,"additionalItems"]})};else return{type:"array",minItems:f.items.length,maxItems:f.items.length,items:f.items.map((h,P)=>c(h._def,{...v,currentPath:[...v.currentPath,"items",`${P}`]})).reduce((h,P)=>P===void 0?h:[...h,P],[])}}function eW(f){return{not:zv(f)}}function v9(f){return zv(f)}var f9=(f,v)=>{return c(f.innerType._def,v)};var Q9=(f,v,h)=>{switch(v){case A.ZodString:return N0(f,h);case A.ZodNumber:return cW(f,h);case A.ZodObject:return pW(f,h);case A.ZodBigInt:return SW(f,h);case A.ZodBoolean:return RW();case A.ZodDate:return NQ(f,h);case A.ZodUndefined:return eW(h);case A.ZodNull:return uW(h);case A.ZodArray:return bW(f,h);case A.ZodUnion:case A.ZodDiscriminatedUnion:return mW(f,h);case A.ZodIntersection:return rW(f,h);case A.ZodTuple:return tW(f,h);case A.ZodRecord:return U0(f,h);case A.ZodLiteral:return IW(f,h);case A.ZodEnum:return kW(f);case A.ZodNativeEnum:return TW(f);case A.ZodNullable:return nW(f,h);case A.ZodOptional:return iW(f,h);case A.ZodMap:return ZW(f,h);case A.ZodSet:return sW(f,h);case A.ZodLazy:return()=>f.getter()._def;case A.ZodPromise:return oW(f,h);case A.ZodNaN:case A.ZodNever:return xW(h);case A.ZodEffects:return yW(f,h);case A.ZodAny:return zv(h);case A.ZodUnknown:return v9(h);case A.ZodDefault:return gW(f,h);case A.ZodBranded:return V0(f,h);case A.ZodReadonly:return f9(f,h);case A.ZodCatch:return _W(f,h);case A.ZodPipeline:return dW(f,h);case A.ZodFunction:case A.ZodVoid:case A.ZodSymbol:return;default:return((P)=>{return})(v)}};function c(f,v,h=!1){let P=v.seen.get(f);if(v.override){let w=v.override?.(f,v,P,h);if(w!==FW)return w}if(P&&!h){let w=$w(P,v);if(w!==void 0)return w}let Q={def:f,path:v.currentPath,jsonSchema:void 0};v.seen.set(f,Q);let W=Q9(f,f.typeName,v),J=typeof W==="function"?c(W(),v):W;if(J)Ew(f,v,J);if(v.postProcess){let w=v.postProcess(J,f,v);return Q.jsonSchema=J,w}return Q.jsonSchema=J,J}var $w=(f,v)=>{switch(v.$refStrategy){case"root":return{$ref:f.path.join("/")};case"relative":return{$ref:L0(v.currentPath,f.path)};case"none":case"seen":{if(f.path.length<v.currentPath.length&&f.path.every((h,P)=>v.currentPath[P]===h))return console.warn(`Recursive reference detected at ${v.currentPath.join("/")}! Defaulting to any`),zv(v);return v.$refStrategy==="seen"?zv(v):void 0}}},Ew=(f,v,h)=>{if(f.description){if(h.description=f.description,v.markdownDescription)h.markdownDescription=f.description}return h};var F0=(f,v)=>{let h=jW(v),P=typeof v==="object"&&v.definitions?Object.entries(v.definitions).reduce((Y,[G,z])=>({...Y,[G]:c(z._def,{...h,currentPath:[...h.basePath,h.definitionPath,G]},!0)??zv(h)}),{}):void 0,Q=typeof v==="string"?v:v?.nameStrategy==="title"?void 0:v?.name,W=c(f._def,Q===void 0?h:{...h,currentPath:[...h.basePath,h.definitionPath,Q]},!1)??zv(h),J=typeof v==="object"&&v.name!==void 0&&v.nameStrategy==="title"?v.name:void 0;if(J!==void 0)W.title=J;if(h.flags.hasReferencedOpenAiAnyType){if(!P)P={};if(!P[h.openAiAnyTypeName])P[h.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:h.$refStrategy==="relative"?"1":[...h.basePath,h.definitionPath,h.openAiAnyTypeName].join("/")}}}let w=Q===void 0?P?{...W,[h.definitionPath]:P}:W:{$ref:[...h.$refStrategy==="relative"?[]:h.basePath,h.definitionPath,Q].join("/"),[h.definitionPath]:{...P,[Q]:W}};if(h.target==="jsonSchema7")w.$schema="http://json-schema.org/draft-07/schema#";else if(h.target==="jsonSchema2019-09"||h.target==="openAi")w.$schema="https://json-schema.org/draft/2019-09/schema#";if(h.target==="openAi"&&(("anyOf"in w)||("oneOf"in w)||("allOf"in w)||("type"in w)&&Array.isArray(w.type)))console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.");return w};var AQ;(function(f){f.Completable="McpCompletable"})(AQ||(AQ={}));class _1 extends o{_parse(f){let{ctx:v}=this._processInputParams(f),h=v.data;return this._def.type._parse({data:h,path:v.path,parent:v})}unwrap(){return this._def.type}}_1.create=(f,v)=>{return new _1({type:f,typeName:AQ.Completable,complete:v.complete,...Mw(v)})};function Mw(f){if(!f)return{};let{errorMap:v,invalid_type_error:h,required_error:P,description:Q}=f;if(v&&(h||P))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:Q};return{errorMap:(J,w)=>{var Y,G;let{message:z}=f;if(J.code==="invalid_enum_value")return{message:z!==null&&z!==void 0?z:w.defaultError};if(typeof w.data>"u")return{message:(Y=z!==null&&z!==void 0?z:P)!==null&&Y!==void 0?Y:w.defaultError};if(J.code!=="invalid_type")return{message:w.defaultError};return{message:(G=z!==null&&z!==void 0?z:h)!==null&&G!==void 0?G:w.defaultError}},description:Q}}class jQ{constructor(f,v){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new LQ(f,v)}async connect(f){return await this.server.connect(f)}async close(){await this.server.close()}setToolRequestHandlers(){if(this._toolHandlersInitialized)return;this.server.assertCanSetRequestHandler(f0.shape.method.value),this.server.assertCanSetRequestHandler(Q0.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(f0,()=>({tools:Object.entries(this._registeredTools).filter(([,f])=>f.enabled).map(([f,v])=>{let h={name:f,title:v.title,description:v.description,inputSchema:v.inputSchema?F0(v.inputSchema,{strictUnions:!0}):Ow,annotations:v.annotations,_meta:v._meta};if(v.outputSchema)h.outputSchema=F0(v.outputSchema,{strictUnions:!0});return h})})),this.server.setRequestHandler(Q0,async(f,v)=>{let h=this._registeredTools[f.params.name];if(!h)throw new Gv(Bv.InvalidParams,`Tool ${f.params.name} not found`);if(!h.enabled)throw new Gv(Bv.InvalidParams,`Tool ${f.params.name} disabled`);let P;if(h.inputSchema){let Q=await h.inputSchema.safeParseAsync(f.params.arguments);if(!Q.success)throw new Gv(Bv.InvalidParams,`Invalid arguments for tool ${f.params.name}: ${Q.error.message}`);let W=Q.data,J=h.callback;try{P=await Promise.resolve(J(W,v))}catch(w){P={content:[{type:"text",text:w instanceof Error?w.message:String(w)}],isError:!0}}}else{let Q=h.callback;try{P=await Promise.resolve(Q(v))}catch(W){P={content:[{type:"text",text:W instanceof Error?W.message:String(W)}],isError:!0}}}if(h.outputSchema&&!P.isError){if(!P.structuredContent)throw new Gv(Bv.InvalidParams,`Tool ${f.params.name} has an output schema but no structured content was provided`);let Q=await h.outputSchema.safeParseAsync(P.structuredContent);if(!Q.success)throw new Gv(Bv.InvalidParams,`Invalid structured content for tool ${f.params.name}: ${Q.error.message}`)}return P}),this._toolHandlersInitialized=!0}setCompletionRequestHandler(){if(this._completionHandlerInitialized)return;this.server.assertCanSetRequestHandler(h0.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(h0,async(f)=>{switch(f.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(f,f.params.ref);case"ref/resource":return this.handleResourceCompletion(f,f.params.ref);default:throw new Gv(Bv.InvalidParams,`Invalid completion reference: ${f.params.ref}`)}}),this._completionHandlerInitialized=!0}async handlePromptCompletion(f,v){let h=this._registeredPrompts[v.name];if(!h)throw new Gv(Bv.InvalidParams,`Prompt ${v.name} not found`);if(!h.enabled)throw new Gv(Bv.InvalidParams,`Prompt ${v.name} disabled`);if(!h.argsSchema)return A0;let P=h.argsSchema.shape[f.params.argument.name];if(!(P instanceof _1))return A0;let W=await P._def.complete(f.params.argument.value,f.params.context);return P9(W)}async handleResourceCompletion(f,v){let h=Object.values(this._registeredResourceTemplates).find((W)=>W.resourceTemplate.uriTemplate.toString()===v.uri);if(!h){if(this._registeredResources[v.uri])return A0;throw new Gv(Bv.InvalidParams,`Resource template ${f.params.ref.uri} not found`)}let P=h.resourceTemplate.completeCallback(f.params.argument.name);if(!P)return A0;let Q=await P(f.params.argument.value,f.params.context);return P9(Q)}setResourceRequestHandlers(){if(this._resourceHandlersInitialized)return;this.server.assertCanSetRequestHandler(o1.shape.method.value),this.server.assertCanSetRequestHandler(s1.shape.method.value),this.server.assertCanSetRequestHandler(t1.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(o1,async(f,v)=>{let h=Object.entries(this._registeredResources).filter(([Q,W])=>W.enabled).map(([Q,W])=>({uri:Q,name:W.name,...W.metadata})),P=[];for(let Q of Object.values(this._registeredResourceTemplates)){if(!Q.resourceTemplate.listCallback)continue;let W=await Q.resourceTemplate.listCallback(v);for(let J of W.resources)P.push({...Q.metadata,...J})}return{resources:[...h,...P]}}),this.server.setRequestHandler(s1,async()=>{return{resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([v,h])=>({name:v,uriTemplate:h.resourceTemplate.uriTemplate.toString(),...h.metadata}))}}),this.server.setRequestHandler(t1,async(f,v)=>{let h=new URL(f.params.uri),P=this._registeredResources[h.toString()];if(P){if(!P.enabled)throw new Gv(Bv.InvalidParams,`Resource ${h} disabled`);return P.readCallback(h,v)}for(let Q of Object.values(this._registeredResourceTemplates)){let W=Q.resourceTemplate.uriTemplate.match(h.toString());if(W)return Q.readCallback(h,W,v)}throw new Gv(Bv.InvalidParams,`Resource ${h} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0}setPromptRequestHandlers(){if(this._promptHandlersInitialized)return;this.server.assertCanSetRequestHandler(e1.shape.method.value),this.server.assertCanSetRequestHandler(v0.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(e1,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,f])=>f.enabled).map(([f,v])=>{return{name:f,title:v.title,description:v.description,arguments:v.argsSchema?Vw(v.argsSchema):void 0}})})),this.server.setRequestHandler(v0,async(f,v)=>{let h=this._registeredPrompts[f.params.name];if(!h)throw new Gv(Bv.InvalidParams,`Prompt ${f.params.name} not found`);if(!h.enabled)throw new Gv(Bv.InvalidParams,`Prompt ${f.params.name} disabled`);if(h.argsSchema){let P=await h.argsSchema.safeParseAsync(f.params.arguments);if(!P.success)throw new Gv(Bv.InvalidParams,`Invalid arguments for prompt ${f.params.name}: ${P.error.message}`);let Q=P.data,W=h.callback;return await Promise.resolve(W(Q,v))}else{let P=h.callback;return await Promise.resolve(P(v))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0}resource(f,v,...h){let P;if(typeof h[0]==="object")P=h.shift();let Q=h[0];if(typeof v==="string"){if(this._registeredResources[v])throw Error(`Resource ${v} is already registered`);let W=this._createRegisteredResource(f,void 0,v,P,Q);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),W}else{if(this._registeredResourceTemplates[f])throw Error(`Resource template ${f} is already registered`);let W=this._createRegisteredResourceTemplate(f,void 0,v,P,Q);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),W}}registerResource(f,v,h,P){if(typeof v==="string"){if(this._registeredResources[v])throw Error(`Resource ${v} is already registered`);let Q=this._createRegisteredResource(f,h.title,v,h,P);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Q}else{if(this._registeredResourceTemplates[f])throw Error(`Resource template ${f} is already registered`);let Q=this._createRegisteredResourceTemplate(f,h.title,v,h,P);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Q}}_createRegisteredResource(f,v,h,P,Q){let W={name:f,title:v,metadata:P,readCallback:Q,enabled:!0,disable:()=>W.update({enabled:!1}),enable:()=>W.update({enabled:!0}),remove:()=>W.update({uri:null}),update:(J)=>{if(typeof J.uri<"u"&&J.uri!==h){if(delete this._registeredResources[h],J.uri)this._registeredResources[J.uri]=W}if(typeof J.name<"u")W.name=J.name;if(typeof J.title<"u")W.title=J.title;if(typeof J.metadata<"u")W.metadata=J.metadata;if(typeof J.callback<"u")W.readCallback=J.callback;if(typeof J.enabled<"u")W.enabled=J.enabled;this.sendResourceListChanged()}};return this._registeredResources[h]=W,W}_createRegisteredResourceTemplate(f,v,h,P,Q){let W={resourceTemplate:h,title:v,metadata:P,readCallback:Q,enabled:!0,disable:()=>W.update({enabled:!1}),enable:()=>W.update({enabled:!0}),remove:()=>W.update({name:null}),update:(J)=>{if(typeof J.name<"u"&&J.name!==f){if(delete this._registeredResourceTemplates[f],J.name)this._registeredResourceTemplates[J.name]=W}if(typeof J.title<"u")W.title=J.title;if(typeof J.template<"u")W.resourceTemplate=J.template;if(typeof J.metadata<"u")W.metadata=J.metadata;if(typeof J.callback<"u")W.readCallback=J.callback;if(typeof J.enabled<"u")W.enabled=J.enabled;this.sendResourceListChanged()}};return this._registeredResourceTemplates[f]=W,W}_createRegisteredPrompt(f,v,h,P,Q){let W={title:v,description:h,argsSchema:P===void 0?void 0:X.object(P),callback:Q,enabled:!0,disable:()=>W.update({enabled:!1}),enable:()=>W.update({enabled:!0}),remove:()=>W.update({name:null}),update:(J)=>{if(typeof J.name<"u"&&J.name!==f){if(delete this._registeredPrompts[f],J.name)this._registeredPrompts[J.name]=W}if(typeof J.title<"u")W.title=J.title;if(typeof J.description<"u")W.description=J.description;if(typeof J.argsSchema<"u")W.argsSchema=X.object(J.argsSchema);if(typeof J.callback<"u")W.callback=J.callback;if(typeof J.enabled<"u")W.enabled=J.enabled;this.sendPromptListChanged()}};return this._registeredPrompts[f]=W,W}_createRegisteredTool(f,v,h,P,Q,W,J,w){let Y={title:v,description:h,inputSchema:P===void 0?void 0:X.object(P),outputSchema:Q===void 0?void 0:X.object(Q),annotations:W,_meta:J,callback:w,enabled:!0,disable:()=>Y.update({enabled:!1}),enable:()=>Y.update({enabled:!0}),remove:()=>Y.update({name:null}),update:(G)=>{if(typeof G.name<"u"&&G.name!==f){if(delete this._registeredTools[f],G.name)this._registeredTools[G.name]=Y}if(typeof G.title<"u")Y.title=G.title;if(typeof G.description<"u")Y.description=G.description;if(typeof G.paramsSchema<"u")Y.inputSchema=X.object(G.paramsSchema);if(typeof G.callback<"u")Y.callback=G.callback;if(typeof G.annotations<"u")Y.annotations=G.annotations;if(typeof G._meta<"u")Y._meta=G._meta;if(typeof G.enabled<"u")Y.enabled=G.enabled;this.sendToolListChanged()}};return this._registeredTools[f]=Y,this.setToolRequestHandlers(),this.sendToolListChanged(),Y}tool(f,...v){if(this._registeredTools[f])throw Error(`Tool ${f} is already registered`);let h,P,Q,W;if(typeof v[0]==="string")h=v.shift();if(v.length>1){let w=v[0];if(h9(w)){if(P=v.shift(),v.length>1&&typeof v[0]==="object"&&v[0]!==null&&!h9(v[0]))W=v.shift()}else if(typeof w==="object"&&w!==null)W=v.shift()}let J=v[0];return this._createRegisteredTool(f,void 0,h,P,Q,W,void 0,J)}registerTool(f,v,h){if(this._registeredTools[f])throw Error(`Tool ${f} is already registered`);let{title:P,description:Q,inputSchema:W,outputSchema:J,annotations:w,_meta:Y}=v;return this._createRegisteredTool(f,P,Q,W,J,w,Y,h)}prompt(f,...v){if(this._registeredPrompts[f])throw Error(`Prompt ${f} is already registered`);let h;if(typeof v[0]==="string")h=v.shift();let P;if(v.length>1)P=v.shift();let Q=v[0],W=this._createRegisteredPrompt(f,void 0,h,P,Q);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),W}registerPrompt(f,v,h){if(this._registeredPrompts[f])throw Error(`Prompt ${f} is already registered`);let{title:P,description:Q,argsSchema:W}=v,J=this._createRegisteredPrompt(f,P,Q,W,h);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),J}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(f,v){return this.server.sendLoggingMessage(f,v)}sendResourceListChanged(){if(this.isConnected())this.server.sendResourceListChanged()}sendToolListChanged(){if(this.isConnected())this.server.sendToolListChanged()}sendPromptListChanged(){if(this.isConnected())this.server.sendPromptListChanged()}}var Ow={type:"object",properties:{}};function h9(f){if(typeof f!=="object"||f===null)return!1;return Object.keys(f).length===0||Object.values(f).some(Lw)}function Lw(f){return f!==null&&typeof f==="object"&&"parse"in f&&typeof f.parse==="function"&&"safeParse"in f&&typeof f.safeParse==="function"}function Vw(f){return Object.entries(f.shape).map(([v,h])=>({name:v,description:h.description,required:!h.isOptional()}))}function P9(f){return{completion:{values:f.slice(0,100),total:f.length,hasMore:f.length>100}}}var A0={completion:{values:[],hasMore:!1}};import J9 from"node:process";class bQ{append(f){this._buffer=this._buffer?Buffer.concat([this._buffer,f]):f}readMessage(){if(!this._buffer)return null;let f=this._buffer.indexOf(`
`);if(f===-1)return null;let v=this._buffer.toString("utf8",0,f).replace(/\r$/,"");return this._buffer=this._buffer.subarray(f+1),Nw(v)}clear(){this._buffer=void 0}}function Nw(f){return zh.parse(JSON.parse(f))}function W9(f){return JSON.stringify(f)+`
`}class SQ{constructor(f=J9.stdin,v=J9.stdout){this._stdin=f,this._stdout=v,this._readBuffer=new bQ,this._started=!1,this._ondata=(h)=>{this._readBuffer.append(h),this.processReadBuffer()},this._onerror=(h)=>{var P;(P=this.onerror)===null||P===void 0||P.call(this,h)}}async start(){if(this._started)throw Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){var f,v;while(!0)try{let h=this._readBuffer.readMessage();if(h===null)break;(f=this.onmessage)===null||f===void 0||f.call(this,h)}catch(h){(v=this.onerror)===null||v===void 0||v.call(this,h)}}async close(){var f;if(this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0)this._stdin.pause();this._readBuffer.clear(),(f=this.onclose)===null||f===void 0||f.call(this)}send(f){return new Promise((v)=>{let h=W9(f);if(this._stdout.write(h))v();else this._stdout.once("drain",v)})}}var xf=new w9,Cv={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};async function Uw(f){try{let{key:v,value:h,namespace:P="default"}=f,Q=JSON.parse(h);return await xf.set(v,Q,P),Cv.info(`Stored memory: ${P}:${v}`),{content:[{type:"text",text:` Stored memory: ${P}:${v}`}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Cv.error("Error storing memory",v),{content:[{type:"text",text:` Error storing memory: ${h}`}],isError:!0}}}async function Fw(f){try{let{key:v,namespace:h="default"}=f,P=await xf.get(v,h);if(!P)return{content:[{type:"text",text:` Memory not found: ${h}:${v}`}],isError:!0};let Q=Date.now()-P.timestamp;return Cv.info(`Retrieved memory: ${h}:${v}`),{content:[{type:"text",text:JSON.stringify({key:`${h}:${v}`,value:P.value,namespace:P.namespace,timestamp:P.timestamp,created_at:P.created_at,updated_at:P.updated_at,age_seconds:Math.floor(Q/1000)},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Cv.error("Error retrieving memory",v),{content:[{type:"text",text:` Error retrieving memory: ${h}`}],isError:!0}}}async function Aw(f){try{let{pattern:v,namespace:h}=f,Q=(await xf.getAll()).filter((W)=>{let J=W.key.toLowerCase().includes(v.toLowerCase())||W.namespace.toLowerCase().includes(v.toLowerCase())||JSON.stringify(W.value).toLowerCase().includes(v.toLowerCase()),w=!h||W.namespace===h;return J&&w});return Cv.info(`Searched memory: "${v}" (${Q.length} results)`),{content:[{type:"text",text:JSON.stringify({pattern:v,namespace:h||"all",count:Q.length,results:Q.map((W)=>({key:W.key,namespace:W.namespace,value:W.value,timestamp:W.timestamp,updated_at:W.updated_at}))},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Cv.error("Error searching memory",v),{content:[{type:"text",text:` Error searching memory: ${h}`}],isError:!0}}}async function jw(f){try{let{namespace:v}=f,h=await xf.getAll();return Cv.info(`Listed memory: ${h.length} entries`),{content:[{type:"text",text:JSON.stringify({namespace:v||"all",count:h.length,entries:h.map((P)=>({key:P.key,namespace:P.namespace,value:P.value,timestamp:P.timestamp,updated_at:P.updated_at}))},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Cv.error("Error listing memory",v),{content:[{type:"text",text:` Error listing memory: ${h}`}],isError:!0}}}async function bw(f){try{let{key:v,namespace:h="default"}=f;if(!await xf.delete(v,h))return{content:[{type:"text",text:` Memory not found: ${h}:${v}`}],isError:!0};return Cv.info(`Deleted memory: ${h}:${v}`),{content:[{type:"text",text:` Deleted memory: ${h}:${v}`}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Cv.error("Error deleting memory",v),{content:[{type:"text",text:` Error deleting memory: ${h}`}],isError:!0}}}async function Sw(f){try{let{namespace:v}=f;return await xf.clear(v),Cv.info(`Cleared memory: ${v||"all"}`),{content:[{type:"text",text:` Cleared memory: ${v||"all namespaces"}`}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Cv.error("Error clearing memory",v),{content:[{type:"text",text:` Error clearing memory: ${h}`}],isError:!0}}}async function Rw(){try{let f=await xf.getStats();return Cv.info("Retrieved memory stats"),{content:[{type:"text",text:JSON.stringify({total_entries:f.totalEntries,namespaces:f.namespaces,oldest_entry:f.oldestEntry,newest_entry:f.newestEntry,database_path:".sylphx-flow/memory.db"},null,2)}]}}catch(f){let v=f instanceof Error?f.message:String(f);return Cv.error("Error getting memory stats",f),{content:[{type:"text",text:` Error getting memory stats: ${v}`}],isError:!0}}}var uv=(f)=>({_type:"string",describe:(v)=>uv(v),optional:()=>({_type:"optional_string",describe:(v)=>uv(v)}),description:f});function X9(f){f.registerTool("memory_set",{description:"Store a value in persistent memory for agent coordination",inputSchema:{key:uv("Memory key (e.g., 'swarm/coder/status')"),value:uv("Value to store (will be JSON stringified)"),namespace:uv("Optional namespace for organization").optional()}},(v)=>{if(!v||typeof v!=="object")return{content:[{type:"text",text:" Invalid arguments: object expected"}],isError:!0};let h=v;return Uw({key:h.key,value:h.value,namespace:h.namespace})}),f.registerTool("memory_get",{description:"Retrieve a value from persistent memory",inputSchema:{key:uv("Memory key to retrieve"),namespace:uv("Optional namespace").optional()}},(v)=>{if(!v||typeof v!=="object")return{content:[{type:"text",text:" Invalid arguments: object expected"}],isError:!0};let h=v;return Fw({key:h.key,namespace:h.namespace})}),f.registerTool("memory_search",{description:"Search memory entries by pattern",inputSchema:{pattern:uv("Search pattern (matches keys, namespaces, and values)"),namespace:uv("Optional namespace to limit search").optional()}},(v)=>{if(!v||typeof v!=="object")return{content:[{type:"text",text:" Invalid arguments: object expected"}],isError:!0};let h=v;return Aw({pattern:h.pattern,namespace:h.namespace})}),f.registerTool("memory_list",{description:"List all memory entries",inputSchema:{namespace:uv("Optional namespace to filter by").optional()}},(v)=>{return jw({namespace:(v&&typeof v==="object"?v:{}).namespace})}),f.registerTool("memory_delete",{description:"Delete a memory entry",inputSchema:{key:uv("Memory key to delete"),namespace:uv("Optional namespace").optional()}},(v)=>{if(!v||typeof v!=="object")return{content:[{type:"text",text:" Invalid arguments: object expected"}],isError:!0};let h=v;return bw({key:h.key,namespace:h.namespace})}),f.registerTool("memory_clear",{description:"Clear memory entries",inputSchema:{namespace:uv("Optional namespace to clear (omits to clear all)").optional()}},(v)=>{return Sw({namespace:(v&&typeof v==="object"?v:{}).namespace})}),f.registerTool("memory_stats",{description:"Get memory storage statistics",inputSchema:{}},Rw)}import{execSync as kw}from"node:child_process";import{existsSync as rw,mkdirSync as Iw,writeFileSync as Cw}from"node:fs";import{join as Y9}from"node:path";import{readFileSync as _w,writeFileSync as gw}from"node:fs";import{join as yw}from"node:path";class RQ{templatesDir;constructor(f="src/templates"){this.templatesDir=f}loadTemplate(f){let v=yw(this.templatesDir,`${f}-template.md`);return _w(v,"utf8")}replaceVariables(f,v){let h=f;for(let[P,Q]of Object.entries(v)){let W=new RegExp(`{{${P}}}`,"g");h=h.replace(W,String(Q))}return h=h.replace(/{{#if (\w+)}}([\s\S]*?){{\/if}}/g,(P,Q,W)=>{let J=v[Q];return J&&J!=="false"&&J!=="0"&&J!==""?W:""}),h=h.replace(/{{#each (\w+)}}([\s\S]*?){{\/each}}/g,(P,Q,W)=>{let J=v[Q];if(!Array.isArray(J))return"";return J.map((w,Y)=>{let G=W;return G=G.replace(/{{this}}/g,String(w)),G=G.replace(/{{@index}}/g,String(Y)),G}).join(`
`)}),h}generateTemplate(f,v){let h=this.loadTemplate(f);return this.replaceVariables(h,v)}createFile(f,v,h){let P=this.generateTemplate(f,v);gw(h,P,"utf8")}generateAllProjectTemplates(f){let v={},h=["spec","progress","plan","tasks","validation","reviews"];for(let P of h)v[P]=this.generateTemplate(P,f);return v}}var Af={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};function Zw(f,v){let h={feature:`New feature implementation for ${v}`,bugfix:`Bug fix for ${v} issue`,hotfix:`Critical hotfix for ${v}`,refactor:`Code refactoring for ${v}`,migration:`Migration project for ${v}`},P={feature:["Define feature specifications","Implement core functionality","Write comprehensive tests","Update documentation","Code review and validation"],bugfix:["Identify root cause","Implement fix","Add regression tests","Verify fix resolves issue","Update documentation if needed"],hotfix:["Implement immediate fix","Test critical path","Deploy hotfix","Schedule proper fix follow-up"],refactor:["Analyze current code structure","Plan refactoring approach","Implement refactored code","Ensure all tests pass","Update documentation"],migration:["Analyze current system","Plan migration strategy","Implement migration code","Test migration process","Deploy and verify"]},Q={feature:`Successfully implement the ${v} feature with full functionality and testing`,bugfix:`Resolve the ${v} issue completely and prevent recurrence`,hotfix:`Quickly address critical ${v} issue to restore system stability`,refactor:`Improve code quality and maintainability for ${v}`,migration:`Successfully migrate ${v} to new system with minimal disruption`},W={feature:"Implementation of new feature including frontend, backend, tests, and documentation",bugfix:"Fix for specific issue including root cause analysis and prevention measures",hotfix:"Minimal change to address critical issue with immediate deployment",refactor:"Code structure improvements without changing external behavior",migration:"Complete migration of existing functionality to new system or platform"};return{description:h[f]||`Project for ${v}`,requirements:P[f]||["Define requirements","Implement solution","Test and validate"],objective:Q[f]||`Complete ${v} project successfully`,scope:W[f]||"Project scope to be defined"}}function j0(f){try{return{success:!0,output:kw(f,{encoding:"utf8",cwd:process.cwd()}).trim(),error:""}}catch(v){return{success:!1,output:"",error:v instanceof Error?v.message:"Unknown error"}}}function Tw(f){if(!rw(f))Iw(f,{recursive:!0}),Af.info(`Created directory: ${f}`)}function xw(f,v){Cw(f,v,"utf8"),Af.info(`Created file: ${f}`)}var uw=(f)=>{if(!f||typeof f!=="object")return{success:!1,error:"Invalid arguments: object expected"};let v=f,h=["feature","bugfix","hotfix","refactor","migration"];if(!v.project_type||!h.includes(v.project_type))return{success:!1,error:`Invalid project_type: must be one of ${h.join(", ")}`};if(!v.project_name||typeof v.project_name!=="string")return{success:!1,error:"Invalid project_name: string required"};if(v.create_branch!==void 0&&typeof v.create_branch!=="boolean")return{success:!1,error:"Invalid create_branch: boolean expected"};return{success:!0,data:{project_type:v.project_type,project_name:v.project_name,create_branch:v.create_branch}}},_Q=(f)=>({_type:"string",describe:(v)=>_Q(v),optional:()=>({_type:"optional_string",describe:(v)=>_Q(v)}),description:f}),l9=(f,v)=>({_type:"enum",enum:f,describe:(h)=>l9(f,h),description:v}),gQ=(f)=>({_type:"boolean",describe:(v)=>gQ(v),optional:()=>({_type:"optional_boolean",describe:(v)=>gQ(v)}),description:f});function B9(f){f.registerTool("project_startup",{description:"Initialize a new project with comprehensive templates and workspace structure",inputSchema:{project_type:l9(["feature","bugfix","hotfix","refactor","migration"],"Type of project"),project_name:_Q("Name of the project (use letters, numbers, hyphens, underscores only)"),create_branch:gQ("Whether to create a git branch (default: true)").optional()}},(v)=>{let h=uw(v);if(!h.success)return{content:[{type:"text",text:` ${h.error}`}],isError:!0};return aw(h.data)})}function aw(f){try{let{project_type:v,project_name:h,create_branch:P=!0}=f,Q=Zw(v,h),{description:W,requirements:J,objective:w,scope:Y}=Q;if(!/^[a-zA-Z0-9-_]+$/.test(h))return{content:[{type:"text",text:` Invalid project name: "${h}". Use only letters, numbers, hyphens, and underscores.`}],isError:!0};let G=`${v}/${h}`,z=Y9("specs",v,h),$=new Date().toISOString().split("T")[0];Af.info(`\uD83D\uDE80 Starting project initialization: ${G}`);let E={success:!0,output:"",error:""};if(P){let L=j0("git rev-parse --abbrev-ref HEAD");if(L.success&&L.output!=="main")return{content:[{type:"text",text:` Not on main branch. Current branch: ${L.output}. Please switch to main first.`}],isError:!0};if(E=j0(`git checkout -b ${G}`),!E.success)return{content:[{type:"text",text:` Failed to create branch "${G}": ${E.error}`}],isError:!0};Af.success(` Created and checked out branch: ${G}`)}Tw(z);let l={PROJECT_NAME:h,PROJECT_TYPE:v,DESCRIPTION:W,REQUIREMENTS:J,TIMESTAMP:$,BRANCH_NAME:G,CURRENT_PHASE:"Phase 1: Requirements Analysis",LAST_UPDATED:new Date().toISOString(),NEXT_ACTION:"Complete requirements specification and proceed to Phase 2",STATUS:"Not Started",PHASE_1_STATUS:"In Progress",PHASE_1_COMPLETE:"0",PHASE_1_UPDATED:new Date().toISOString(),PHASE_1_NOTES:"Starting requirements analysis (0% complete)",PHASE_2_STATUS:"Not Started",PHASE_2_COMPLETE:"0",PHASE_2_UPDATED:new Date().toISOString(),PHASE_2_NOTES:"Awaiting research and clarification",PHASE_3_STATUS:"Not Started",PHASE_3_COMPLETE:"0",PHASE_3_UPDATED:new Date().toISOString(),PHASE_3_NOTES:"Awaiting design phase",PHASE_4_STATUS:"Not Started",PHASE_4_COMPLETE:"0",PHASE_4_UPDATED:new Date().toISOString(),PHASE_4_NOTES:"Awaiting task breakdown",PHASE_5_STATUS:"Not Started",PHASE_5_COMPLETE:"0",PHASE_5_UPDATED:new Date().toISOString(),PHASE_5_NOTES:"Awaiting validation",PHASE_6_STATUS:"Not Started",PHASE_6_COMPLETE:"0",PHASE_6_UPDATED:new Date().toISOString(),PHASE_6_NOTES:"Awaiting implementation",PHASE_7_STATUS:"Not Started",PHASE_7_COMPLETE:"0",PHASE_7_UPDATED:new Date().toISOString(),PHASE_7_NOTES:"Awaiting testing and review",PHASE_8_STATUS:"Not Started",PHASE_8_COMPLETE:"0",PHASE_8_UPDATED:new Date().toISOString(),PHASE_8_NOTES:"Awaiting final merge",OBJECTIVE:w||`Implement ${h}`,SCOPE:Y||"To be defined",CRITICAL_PATH:"To be defined during task breakdown",PARALLEL_OPPORTUNITIES:"To be identified during planning",RESOURCE_CONFLICTS:"To be resolved during planning",INTEGRATION_POINTS:"To be identified during design",VALIDATED_BY:"To be assigned",VALIDATION_DATE:$,OVERALL_STATUS:"Pending",REVIEW_PERIOD:`${$} onwards`,TOTAL_REVIEWS:"0",QUALITY_SCORE:"0",REVIEW_DATE:$,REVIEWER:"To be assigned",REVIEW_SCOPE:"Full implementation review",IMPLEMENTATION_STATUS:"Not Started",VALIDATOR:"To be assigned",VALIDATION_SCOPE:"Full project validation",REQUIREMENTS_COVERAGE_STATUS:"Pending",ACCEPTANCE_CRITERIA_MAPPED:"Pending",SUCCESS_CRITERIA_MEASURABLE:"Pending",SCOPE_CREEP_PREVENTION:"Pending",ARCHITECTURE_ALIGNMENT:"Pending",INTEGRATION_POINTS_VERIFIED:"Pending",DESIGN_CONFLICTS_RESOLVED:"Pending",TECHNICAL_FEASIBILITY:"Pending",TASK_COMPLETENESS:"Pending",DEPENDENCY_MAPPING_ACCURACY:"Pending",RESOURCE_ALLOCATION_ADEQUATE:"Pending",CRITICAL_PATH_IDENTIFIED:"Pending",TDD_STRATEGY_DEFINED:"Pending",TASK_1_ID:"TASK-001",TASK_1_DESC:"To be defined",TASK_1_STATUS:"Not Started",TASK_1_COMPLETION:"0",TASK_1_DELIVERABLE:"To be defined",TASK_1_QUALITY:"Pending",TASK_2_ID:"TASK-002",TASK_2_DESC:"To be defined",TASK_2_STATUS:"Not Started",TASK_2_COMPLETION:"0",TASK_2_DELIVERABLE:"To be defined",TASK_2_QUALITY:"Pending",TASK_3_ID:"TASK-003",TASK_3_DESC:"To be defined",TASK_3_STATUS:"Not Started",TASK_3_COMPLETION:"0",TASK_3_DELIVERABLE:"To be defined",TASK_3_QUALITY:"Pending",OVERALL_TASK_COMPLETION:"0",ALL_TASKS_COMPLETED:"No",TOTAL_COMMITS:"0",COMMITS_PER_TASK:"0",COMMIT_QUALITY:"Pending",BRANCH_STRATEGY_COMPLIANCE:"Pending"},M=new RQ().generateAllProjectTemplates(l),H=[];for(let[L,U]of Object.entries(M)){let N=Y9(z,`${L}.md`);xw(N,U),H.push(`${L}.md`)}if(P){let L=j0("git add ."),U=j0(`git commit -m "feat(${h}): initialize project workspace and comprehensive templates"`);if(!L.success||!U.success)Af.error("Warning: Failed to create initial commit");else Af.success(" Created initial commit with project templates")}return Af.success(` Project "${h}" initialized successfully!`),{content:[{type:"text",text:JSON.stringify({success:!0,project:{type:v,name:h,branch:G,workspace:z,description:W,requirements:J,objective:w,scope:Y},setup:{branch_created:P&&E.success,workspace_created:!0,templates_created:H,initial_commit:P},next_steps:[`1. Review and update specs/${v}/${h}/spec.md with detailed requirements`,"2. Fill in project-specific data in all template files","3. Proceed with Phase 1: SPECIFY & CLARIFY","4. Follow the workflow in progress.md"]},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Af.error("Error in project startup",v),{content:[{type:"text",text:` Error initializing project: ${h}`}],isError:!0}}}var b0={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};function yQ(f){try{return Intl.DateTimeFormat(void 0,{timeZone:f}),!0}catch{return!1}}function mw(f){return/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(f)}function nw(f){try{let{timezone:v}=f;if(!v||typeof v!=="string")return{content:[{type:"text",text:" Invalid timezone: timezone parameter is required and must be a string. Please use a valid IANA timezone name (e.g., 'America/New_York', 'Europe/London', 'Asia/Tokyo')."}],isError:!0};if(!yQ(v))return{content:[{type:"text",text:` Invalid timezone: ${v}. Please use a valid IANA timezone name (e.g., 'America/New_York', 'Europe/London', 'Asia/Tokyo').`}],isError:!0};let h=new Date,P=new Intl.DateTimeFormat("en-US",{timeZone:v,year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"long",hour12:!1}),Q=P.formatToParts(h),W={};for(let Y of Q)W[Y.type]=Y.value;let J=new Intl.DateTimeFormat("en-US",{timeZone:v,hour:"2-digit",minute:"2-digit",hour12:!1}).format(h),w=h.toLocaleString("sv-SE",{timeZone:v});return b0.info(`Retrieved current time for timezone: ${v}`),{content:[{type:"text",text:JSON.stringify({timezone:v,current_time:{date:`${W.month} ${W.day}, ${W.year}`,time_24h:J,time_with_seconds:P.format(h),timezone_name:W.timeZoneName,iso_format:`${w.replace(" ","T")}Z`,unix_timestamp:Math.floor(h.getTime()/1000)}},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return b0.error("Error getting current time",v),{content:[{type:"text",text:` Error getting current time: ${h}`}],isError:!0}}}function cw(f){try{let{source_timezone:v,time:h,target_timezone:P}=f;if(!v||typeof v!=="string")return{content:[{type:"text",text:" Invalid source timezone: source_timezone parameter is required and must be a string. Please use a valid IANA timezone name."}],isError:!0};if(!P||typeof P!=="string")return{content:[{type:"text",text:" Invalid target timezone: target_timezone parameter is required and must be a string. Please use a valid IANA timezone name."}],isError:!0};if(!h||typeof h!=="string")return{content:[{type:"text",text:" Invalid time: time parameter is required and must be a string. Please use 24-hour format (HH:MM)."}],isError:!0};if(!yQ(v))return{content:[{type:"text",text:` Invalid source timezone: ${v}. Please use a valid IANA timezone name.`}],isError:!0};if(!yQ(P))return{content:[{type:"text",text:` Invalid target timezone: ${P}. Please use a valid IANA timezone name.`}],isError:!0};if(!mw(h))return{content:[{type:"text",text:` Invalid time format: ${h}. Please use 24-hour format (HH:MM).`}],isError:!0};let[Q,W]=h.split(":").map(Number),J=new Date,w=new Date(J.getFullYear(),J.getMonth(),J.getDate(),Q,W),Y=new Intl.DateTimeFormat("en-US",{timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),G=Y.formatToParts(w),z={};for(let U of G)z[U.type]=U.value;let $=new Intl.DateTimeFormat("en-US",{timeZone:P,year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"long",hour12:!1}),E=new Intl.DateTimeFormat("en-US",{timeZone:P,hour:"2-digit",minute:"2-digit",hour12:!1}).format(w),l=$.formatToParts(w),D={};for(let U of l)D[U.type]=U.value;let H=new Date(w.toLocaleString("en-US",{timeZone:P})).getTime()-w.getTime(),L=Math.round(H/3600000);return b0.info(`Converted time from ${v} to ${P}`),{content:[{type:"text",text:JSON.stringify({conversion:{source:{timezone:v,time:h,formatted:Y.format(w)},target:{timezone:P,time_24h:E,formatted:$.format(w),date:`${D.month} ${D.day}, ${D.year}`,timezone_name:D.timeZoneName},time_difference_hours:L}},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return b0.error("Error converting time",v),{content:[{type:"text",text:` Error converting time: ${h}`}],isError:!0}}}var g1=(f)=>({_type:"string",describe:(v)=>g1(v),description:f});function G9(f){f.registerTool("get_current_time",{description:"Get current time in a specific timezone or system timezone",inputSchema:{timezone:g1("IANA timezone name (e.g., 'America/New_York', 'Europe/London')")}},nw),f.registerTool("convert_time",{description:"Convert time between timezones",inputSchema:{source_timezone:g1("Source IANA timezone name"),time:g1("Time in 24-hour format (HH:MM)"),target_timezone:g1("Target IANA timezone name")}},cw)}var S0={name:"sylphx_flow",version:"1.0.0",description:"Sylphx Flow MCP server providing coordination tools for AI agents. Persistent SQLite-based storage with namespace support for agent coordination and state management."},uf={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};uf.info("\uD83D\uDE80 Starting Sylphx Flow MCP Server...");uf.info(`\uD83D\uDCCB Description: ${S0.description.substring(0,100)}...`);var R0=new jQ({name:S0.name,version:S0.version,description:S0.description});X9(R0);G9(R0);B9(R0);async function pw(){try{let f=new SQ;await R0.connect(f),uf.success(" MCP Server connected and ready")}catch(f){uf.error("Failed to start MCP server",f),process.exit(1)}}process.on("SIGINT",()=>{uf.info("\uD83D\uDED1 Shutting down MCP server..."),process.exit(0)});process.on("SIGTERM",()=>{uf.info("\uD83D\uDED1 Shutting down MCP server..."),process.exit(0)});pw().catch((f)=>{uf.error("Fatal error starting server",f),process.exit(1)});
