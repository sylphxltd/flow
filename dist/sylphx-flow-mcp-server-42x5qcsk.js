#!/usr/bin/env node
import{k as PP}from"./index-5vwfyh2y.js";import{l as YP,m as bh}from"./paths-33dtv23z.js";import"./index-zz7xr4qk.js";import{q as qJ,r as i,s as nW}from"./index-2mkpa5vm.js";var Ol=i((l1,Ll)=>{(function(f,v){typeof l1==="object"&&typeof Ll<"u"?v(l1):typeof define==="function"&&define.amd?define(["exports"],v):v(f.URI=f.URI||{})})(l1,function(f){function v(){for(var G=arguments.length,Y=Array(G),M=0;M<G;M++)Y[M]=arguments[M];if(Y.length>1){Y[0]=Y[0].slice(0,-1);var K=Y.length-1;for(var L=1;L<K;++L)Y[L]=Y[L].slice(1,-1);return Y[K]=Y[K].slice(1),Y.join("")}else return Y[0]}function h(G){return"(?:"+G+")"}function l(G){return G===void 0?"undefined":G===null?"null":Object.prototype.toString.call(G).split(" ").pop().split("]").shift().toLowerCase()}function r(G){return G.toUpperCase()}function Q(G){return G!==void 0&&G!==null?G instanceof Array?G:typeof G.length!=="number"||G.split||G.setInterval||G.call?[G]:Array.prototype.slice.call(G):[]}function P(G,Y){var M=G;if(Y)for(var K in Y)M[K]=Y[K];return M}function W(G){var Y="[A-Za-z]",M="[\\x0D]",K="[0-9]",L="[\\x22]",k=v(K,"[A-Fa-f]"),d="[\\x0A]",hv="[\\x20]",Wv=h(h("%[EFef]"+k+"%"+k+k+"%"+k+k)+"|"+h("%[89A-Fa-f]"+k+"%"+k+k)+"|"+h("%"+k+k)),Ov="[\\:\\/\\?\\#\\[\\]\\@]",rv="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",zv=v(Ov,rv),Nv=G?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Gv=G?"[\\uE000-\\uF8FF]":"[]",Qv=v(Y,K,"[\\-\\.\\_\\~]",Nv),Ev=h(Y+v(Y,K,"[\\+\\-\\.]")+"*"),wv=h(h(Wv+"|"+v(Qv,rv,"[\\:]"))+"*"),jf=h(h("25[0-5]")+"|"+h("2[0-4]"+K)+"|"+h("1"+K+K)+"|"+h("[1-9]"+K)+"|"+K),Zv=h(h("25[0-5]")+"|"+h("2[0-4]"+K)+"|"+h("1"+K+K)+"|"+h("0?[1-9]"+K)+"|0?0?"+K),xv=h(Zv+"\\."+Zv+"\\."+Zv+"\\."+Zv),Xv=h(k+"{1,4}"),Tv=h(h(Xv+"\\:"+Xv)+"|"+xv),mv=h(h(Xv+"\\:")+"{6}"+Tv),hf=h("\\:\\:"+h(Xv+"\\:")+"{5}"+Tv),yf=h(h(Xv)+"?\\:\\:"+h(Xv+"\\:")+"{4}"+Tv),Xf=h(h(h(Xv+"\\:")+"{0,1}"+Xv)+"?\\:\\:"+h(Xv+"\\:")+"{3}"+Tv),Gr=h(h(h(Xv+"\\:")+"{0,2}"+Xv)+"?\\:\\:"+h(Xv+"\\:")+"{2}"+Tv),_r=h(h(h(Xv+"\\:")+"{0,3}"+Xv)+"?\\:\\:"+Xv+"\\:"+Tv),kr=h(h(h(Xv+"\\:")+"{0,4}"+Xv)+"?\\:\\:"+Tv),xf=h(h(h(Xv+"\\:")+"{0,5}"+Xv)+"?\\:\\:"+Xv),mf=h(h(h(Xv+"\\:")+"{0,6}"+Xv)+"?\\:\\:"),Yf=h([mv,hf,yf,Xf,Gr,_r,kr,xf,mf].join("|")),nf=h(h(Qv+"|"+Wv)+"+"),b1=h(Yf+"\\%25"+nf),Sf=h(Yf+h("\\%25|\\%(?!"+k+"{2})")+nf),AP=h("[vV]"+k+"+\\."+v(Qv,rv,"[\\:]")+"+"),FP=h("\\["+h(Sf+"|"+Yf+"|"+AP)+"\\]"),uh=h(h(Wv+"|"+v(Qv,rv))+"*"),qr=h(FP+"|"+xv+"(?!"+uh+")|"+uh),zr=h(K+"*"),xh=h(h(wv+"@")+"?"+qr+h("\\:"+zr)+"?"),Er=h(Wv+"|"+v(Qv,rv,"[\\:\\@]")),jP=h(Er+"*"),mh=h(Er+"+"),yP=h(h(Wv+"|"+v(Qv,rv,"[\\@]"))+"+"),Bf=h(h("\\/"+jP)+"*"),cf=h("\\/"+h(mh+Bf)+"?"),R1=h(yP+Bf),ar=h(mh+Bf),pf="(?!"+Er+")",eJ=h(Bf+"|"+cf+"|"+R1+"|"+ar+"|"+pf),df=h(h(Er+"|"+v("[\\/\\?]",Gv))+"*"),$r=h(h(Er+"|[\\/\\?]")+"*"),nh=h(h("\\/\\/"+xh+Bf)+"|"+cf+"|"+ar+"|"+pf),SP=h(Ev+"\\:"+nh+h("\\?"+df)+"?"+h("\\#"+$r)+"?"),bP=h(h("\\/\\/"+xh+Bf)+"|"+cf+"|"+R1+"|"+pf),RP=h(bP+h("\\?"+df)+"?"+h("\\#"+$r)+"?"),vw=h(SP+"|"+RP),fw=h(Ev+"\\:"+nh+h("\\?"+df)+"?"),rw="^("+Ev+")\\:"+h(h("\\/\\/("+h("("+wv+")@")+"?("+qr+")"+h("\\:("+zr+")")+"?)")+"?("+Bf+"|"+cf+"|"+ar+"|"+pf+")")+h("\\?("+df+")")+"?"+h("\\#("+$r+")")+"?$",hw="^(){0}"+h(h("\\/\\/("+h("("+wv+")@")+"?("+qr+")"+h("\\:("+zr+")")+"?)")+"?("+Bf+"|"+cf+"|"+R1+"|"+pf+")")+h("\\?("+df+")")+"?"+h("\\#("+$r+")")+"?$",lw="^("+Ev+")\\:"+h(h("\\/\\/("+h("("+wv+")@")+"?("+qr+")"+h("\\:("+zr+")")+"?)")+"?("+Bf+"|"+cf+"|"+ar+"|"+pf+")")+h("\\?("+df+")")+"?$",Qw="^"+h("\\#("+$r+")")+"?$",Pw="^"+h("("+wv+")@")+"?("+qr+")"+h("\\:("+zr+")")+"?$";return{NOT_SCHEME:new RegExp(v("[^]",Y,K,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(v("[^\\%\\:]",Qv,rv),"g"),NOT_HOST:new RegExp(v("[^\\%\\[\\]\\:]",Qv,rv),"g"),NOT_PATH:new RegExp(v("[^\\%\\/\\:\\@]",Qv,rv),"g"),NOT_PATH_NOSCHEME:new RegExp(v("[^\\%\\/\\@]",Qv,rv),"g"),NOT_QUERY:new RegExp(v("[^\\%]",Qv,rv,"[\\:\\@\\/\\?]",Gv),"g"),NOT_FRAGMENT:new RegExp(v("[^\\%]",Qv,rv,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(v("[^]",Qv,rv),"g"),UNRESERVED:new RegExp(Qv,"g"),OTHER_CHARS:new RegExp(v("[^\\%]",Qv,zv),"g"),PCT_ENCODED:new RegExp(Wv,"g"),IPV4ADDRESS:new RegExp("^("+xv+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Yf+")"+h(h("\\%25|\\%(?!"+k+"{2})")+"("+nf+")")+"?\\]?$")}}var w=W(!1),B=W(!0),q=function(){function G(Y,M){var K=[],L=!0,k=!1,d=void 0;try{for(var hv=Y[Symbol.iterator](),Wv;!(L=(Wv=hv.next()).done);L=!0)if(K.push(Wv.value),M&&K.length===M)break}catch(Ov){k=!0,d=Ov}finally{try{if(!L&&hv.return)hv.return()}finally{if(k)throw d}}return K}return function(Y,M){if(Array.isArray(Y))return Y;else if(Symbol.iterator in Object(Y))return G(Y,M);else throw TypeError("Invalid attempt to destructure non-iterable instance")}}(),$=function(G){if(Array.isArray(G)){for(var Y=0,M=Array(G.length);Y<G.length;Y++)M[Y]=G[Y];return M}else return Array.from(G)},D=2147483647,X=36,z=1,H=26,E=38,O=700,U=72,N=128,V="-",j=/^xn--/,R=/[^\0-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,Z={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=X-z,T=Math.floor,C=String.fromCharCode;function a(G){throw RangeError(Z[G])}function F(G,Y){var M=[],K=G.length;while(K--)M[K]=Y(G[K]);return M}function S(G,Y){var M=G.split("@"),K="";if(M.length>1)K=M[0]+"@",G=M[1];G=G.replace(x,".");var L=G.split("."),k=F(L,Y).join(".");return K+k}function I(G){var Y=[],M=0,K=G.length;while(M<K){var L=G.charCodeAt(M++);if(L>=55296&&L<=56319&&M<K){var k=G.charCodeAt(M++);if((k&64512)==56320)Y.push(((L&1023)<<10)+(k&1023)+65536);else Y.push(L),M--}else Y.push(L)}return Y}var Jv=function(Y){return String.fromCodePoint.apply(String,$(Y))},s=function(Y){if(Y-48<10)return Y-22;if(Y-65<26)return Y-65;if(Y-97<26)return Y-97;return X},fv=function(Y,M){return Y+22+75*(Y<26)-((M!=0)<<5)},t=function(Y,M,K){var L=0;Y=K?T(Y/O):Y>>1,Y+=T(Y/M);for(;Y>y*H>>1;L+=X)Y=T(Y/y);return T(L+(y+1)*Y/(Y+E))},m=function(Y){var M=[],K=Y.length,L=0,k=N,d=U,hv=Y.lastIndexOf(V);if(hv<0)hv=0;for(var Wv=0;Wv<hv;++Wv){if(Y.charCodeAt(Wv)>=128)a("not-basic");M.push(Y.charCodeAt(Wv))}for(var Ov=hv>0?hv+1:0;Ov<K;){var rv=L;for(var zv=1,Nv=X;;Nv+=X){if(Ov>=K)a("invalid-input");var Gv=s(Y.charCodeAt(Ov++));if(Gv>=X||Gv>T((D-L)/zv))a("overflow");L+=Gv*zv;var Qv=Nv<=d?z:Nv>=d+H?H:Nv-d;if(Gv<Qv)break;var Ev=X-Qv;if(zv>T(D/Ev))a("overflow");zv*=Ev}var wv=M.length+1;if(d=t(L-rv,wv,rv==0),T(L/wv)>D-k)a("overflow");k+=T(L/wv),L%=wv,M.splice(L++,0,k)}return String.fromCodePoint.apply(String,M)},Mv=function(Y){var M=[];Y=I(Y);var K=Y.length,L=N,k=0,d=U,hv=!0,Wv=!1,Ov=void 0;try{for(var rv=Y[Symbol.iterator](),zv;!(hv=(zv=rv.next()).done);hv=!0){var Nv=zv.value;if(Nv<128)M.push(C(Nv))}}catch(Sf){Wv=!0,Ov=Sf}finally{try{if(!hv&&rv.return)rv.return()}finally{if(Wv)throw Ov}}var Gv=M.length,Qv=Gv;if(Gv)M.push(V);while(Qv<K){var Ev=D,wv=!0,jf=!1,Zv=void 0;try{for(var xv=Y[Symbol.iterator](),Xv;!(wv=(Xv=xv.next()).done);wv=!0){var Tv=Xv.value;if(Tv>=L&&Tv<Ev)Ev=Tv}}catch(Sf){jf=!0,Zv=Sf}finally{try{if(!wv&&xv.return)xv.return()}finally{if(jf)throw Zv}}var mv=Qv+1;if(Ev-L>T((D-k)/mv))a("overflow");k+=(Ev-L)*mv,L=Ev;var hf=!0,yf=!1,Xf=void 0;try{for(var Gr=Y[Symbol.iterator](),_r;!(hf=(_r=Gr.next()).done);hf=!0){var kr=_r.value;if(kr<L&&++k>D)a("overflow");if(kr==L){var xf=k;for(var mf=X;;mf+=X){var Yf=mf<=d?z:mf>=d+H?H:mf-d;if(xf<Yf)break;var nf=xf-Yf,b1=X-Yf;M.push(C(fv(Yf+nf%b1,0))),xf=T(nf/b1)}M.push(C(fv(xf,0))),d=t(k,mv,Qv==Gv),k=0,++Qv}}}catch(Sf){yf=!0,Xf=Sf}finally{try{if(!hf&&Gr.return)Gr.return()}finally{if(yf)throw Xf}}++k,++L}return M.join("")},Av=function(Y){return S(Y,function(M){return j.test(M)?m(M.slice(4).toLowerCase()):M})},yv=function(Y){return S(Y,function(M){return R.test(M)?"xn--"+Mv(M):M})},lv={version:"2.1.0",ucs2:{decode:I,encode:Jv},decode:m,encode:Mv,toASCII:yv,toUnicode:Av},Kv={};function Vv(G){var Y=G.charCodeAt(0),M=void 0;if(Y<16)M="%0"+Y.toString(16).toUpperCase();else if(Y<128)M="%"+Y.toString(16).toUpperCase();else if(Y<2048)M="%"+(Y>>6|192).toString(16).toUpperCase()+"%"+(Y&63|128).toString(16).toUpperCase();else M="%"+(Y>>12|224).toString(16).toUpperCase()+"%"+(Y>>6&63|128).toString(16).toUpperCase()+"%"+(Y&63|128).toString(16).toUpperCase();return M}function Sv(G){var Y="",M=0,K=G.length;while(M<K){var L=parseInt(G.substr(M+1,2),16);if(L<128)Y+=String.fromCharCode(L),M+=3;else if(L>=194&&L<224){if(K-M>=6){var k=parseInt(G.substr(M+4,2),16);Y+=String.fromCharCode((L&31)<<6|k&63)}else Y+=G.substr(M,6);M+=6}else if(L>=224){if(K-M>=9){var d=parseInt(G.substr(M+4,2),16),hv=parseInt(G.substr(M+7,2),16);Y+=String.fromCharCode((L&15)<<12|(d&63)<<6|hv&63)}else Y+=G.substr(M,9);M+=9}else Y+=G.substr(M,3),M+=3}return Y}function Ef(G,Y){function M(K){var L=Sv(K);return!L.match(Y.UNRESERVED)?K:L}if(G.scheme)G.scheme=String(G.scheme).replace(Y.PCT_ENCODED,M).toLowerCase().replace(Y.NOT_SCHEME,"");if(G.userinfo!==void 0)G.userinfo=String(G.userinfo).replace(Y.PCT_ENCODED,M).replace(Y.NOT_USERINFO,Vv).replace(Y.PCT_ENCODED,r);if(G.host!==void 0)G.host=String(G.host).replace(Y.PCT_ENCODED,M).toLowerCase().replace(Y.NOT_HOST,Vv).replace(Y.PCT_ENCODED,r);if(G.path!==void 0)G.path=String(G.path).replace(Y.PCT_ENCODED,M).replace(G.scheme?Y.NOT_PATH:Y.NOT_PATH_NOSCHEME,Vv).replace(Y.PCT_ENCODED,r);if(G.query!==void 0)G.query=String(G.query).replace(Y.PCT_ENCODED,M).replace(Y.NOT_QUERY,Vv).replace(Y.PCT_ENCODED,r);if(G.fragment!==void 0)G.fragment=String(G.fragment).replace(Y.PCT_ENCODED,M).replace(Y.NOT_FRAGMENT,Vv).replace(Y.PCT_ENCODED,r);return G}function Jf(G){return G.replace(/^0*(.*)/,"$1")||"0"}function Lv(G,Y){var M=G.match(Y.IPV4ADDRESS)||[],K=q(M,2),L=K[1];if(L)return L.split(".").map(Jf).join(".");else return G}function Dv(G,Y){var M=G.match(Y.IPV6ADDRESS)||[],K=q(M,3),L=K[1],k=K[2];if(L){var d=L.toLowerCase().split("::").reverse(),hv=q(d,2),Wv=hv[0],Ov=hv[1],rv=Ov?Ov.split(":").map(Jf):[],zv=Wv.split(":").map(Jf),Nv=Y.IPV4ADDRESS.test(zv[zv.length-1]),Gv=Nv?7:8,Qv=zv.length-Gv,Ev=Array(Gv);for(var wv=0;wv<Gv;++wv)Ev[wv]=rv[wv]||zv[Qv+wv]||"";if(Nv)Ev[Gv-1]=Lv(Ev[Gv-1],Y);var jf=Ev.reduce(function(mv,hf,yf){if(!hf||hf==="0"){var Xf=mv[mv.length-1];if(Xf&&Xf.index+Xf.length===yf)Xf.length++;else mv.push({index:yf,length:1})}return mv},[]),Zv=jf.sort(function(mv,hf){return hf.length-mv.length})[0],xv=void 0;if(Zv&&Zv.length>1){var Xv=Ev.slice(0,Zv.index),Tv=Ev.slice(Zv.index+Zv.length);xv=Xv.join(":")+"::"+Tv.join(":")}else xv=Ev.join(":");if(k)xv+="%"+k;return xv}else return G}var gf=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Fv="".match(/(){0}/)[1]===void 0;function Pv(G){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M={},K=Y.iri!==!1?B:w;if(Y.reference==="suffix")G=(Y.scheme?Y.scheme+":":"")+"//"+G;var L=G.match(gf);if(L){if(Fv){if(M.scheme=L[1],M.userinfo=L[3],M.host=L[4],M.port=parseInt(L[5],10),M.path=L[6]||"",M.query=L[7],M.fragment=L[8],isNaN(M.port))M.port=L[5]}else if(M.scheme=L[1]||void 0,M.userinfo=G.indexOf("@")!==-1?L[3]:void 0,M.host=G.indexOf("//")!==-1?L[4]:void 0,M.port=parseInt(L[5],10),M.path=L[6]||"",M.query=G.indexOf("?")!==-1?L[7]:void 0,M.fragment=G.indexOf("#")!==-1?L[8]:void 0,isNaN(M.port))M.port=G.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?L[4]:void 0;if(M.host)M.host=Dv(Lv(M.host,K),K);if(M.scheme===void 0&&M.userinfo===void 0&&M.host===void 0&&M.port===void 0&&!M.path&&M.query===void 0)M.reference="same-document";else if(M.scheme===void 0)M.reference="relative";else if(M.fragment===void 0)M.reference="absolute";else M.reference="uri";if(Y.reference&&Y.reference!=="suffix"&&Y.reference!==M.reference)M.error=M.error||"URI is not a "+Y.reference+" reference.";var k=Kv[(Y.scheme||M.scheme||"").toLowerCase()];if(!Y.unicodeSupport&&(!k||!k.unicodeSupport)){if(M.host&&(Y.domainHost||k&&k.domainHost))try{M.host=lv.toASCII(M.host.replace(K.PCT_ENCODED,Sv).toLowerCase())}catch(d){M.error=M.error||"Host's domain name can not be converted to ASCII via punycode: "+d}Ef(M,w)}else Ef(M,K);if(k&&k.parse)k.parse(M,Y)}else M.error=M.error||"URI can not be parsed.";return M}function $f(G,Y){var M=Y.iri!==!1?B:w,K=[];if(G.userinfo!==void 0)K.push(G.userinfo),K.push("@");if(G.host!==void 0)K.push(Dv(Lv(String(G.host),M),M).replace(M.IPV6ADDRESS,function(L,k,d){return"["+k+(d?"%25"+d:"")+"]"}));if(typeof G.port==="number"||typeof G.port==="string")K.push(":"),K.push(String(G.port));return K.length?K.join(""):void 0}var wf=/^\.\.?\//,Af=/^\/\.(\/|$)/,Ff=/^\/\.\.(\/|$)/,Uv=/^\/?(?:.|\n)*?(?=\/|$)/;function uv(G){var Y=[];while(G.length)if(G.match(wf))G=G.replace(wf,"");else if(G.match(Af))G=G.replace(Af,"/");else if(G.match(Ff))G=G.replace(Ff,"/"),Y.pop();else if(G==="."||G==="..")G="";else{var M=G.match(Uv);if(M){var K=M[0];G=G.slice(K.length),Y.push(K)}else throw Error("Unexpected dot segment condition")}return Y.join("")}function _v(G){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=Y.iri?B:w,K=[],L=Kv[(Y.scheme||G.scheme||"").toLowerCase()];if(L&&L.serialize)L.serialize(G,Y);if(G.host){if(M.IPV6ADDRESS.test(G.host));else if(Y.domainHost||L&&L.domainHost)try{G.host=!Y.iri?lv.toASCII(G.host.replace(M.PCT_ENCODED,Sv).toLowerCase()):lv.toUnicode(G.host)}catch(hv){G.error=G.error||"Host's domain name can not be converted to "+(!Y.iri?"ASCII":"Unicode")+" via punycode: "+hv}}if(Ef(G,M),Y.reference!=="suffix"&&G.scheme)K.push(G.scheme),K.push(":");var k=$f(G,Y);if(k!==void 0){if(Y.reference!=="suffix")K.push("//");if(K.push(k),G.path&&G.path.charAt(0)!=="/")K.push("/")}if(G.path!==void 0){var d=G.path;if(!Y.absolutePath&&(!L||!L.absolutePath))d=uv(d);if(k===void 0)d=d.replace(/^\/\//,"/%2F");K.push(d)}if(G.query!==void 0)K.push("?"),K.push(G.query);if(G.fragment!==void 0)K.push("#"),K.push(G.fragment);return K.join("")}function bv(G,Y){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},K=arguments[3],L={};if(!K)G=Pv(_v(G,M),M),Y=Pv(_v(Y,M),M);if(M=M||{},!M.tolerant&&Y.scheme)L.scheme=Y.scheme,L.userinfo=Y.userinfo,L.host=Y.host,L.port=Y.port,L.path=uv(Y.path||""),L.query=Y.query;else{if(Y.userinfo!==void 0||Y.host!==void 0||Y.port!==void 0)L.userinfo=Y.userinfo,L.host=Y.host,L.port=Y.port,L.path=uv(Y.path||""),L.query=Y.query;else{if(!Y.path)if(L.path=G.path,Y.query!==void 0)L.query=Y.query;else L.query=G.query;else{if(Y.path.charAt(0)==="/")L.path=uv(Y.path);else{if((G.userinfo!==void 0||G.host!==void 0||G.port!==void 0)&&!G.path)L.path="/"+Y.path;else if(!G.path)L.path=Y.path;else L.path=G.path.slice(0,G.path.lastIndexOf("/")+1)+Y.path;L.path=uv(L.path)}L.query=Y.query}L.userinfo=G.userinfo,L.host=G.host,L.port=G.port}L.scheme=G.scheme}return L.fragment=Y.fragment,L}function ff(G,Y,M){var K=P({scheme:"null"},M);return _v(bv(Pv(G,K),Pv(Y,K),K,!0),K)}function Cv(G,Y){if(typeof G==="string")G=_v(Pv(G,Y),Y);else if(l(G)==="object")G=Pv(_v(G,Y),Y);return G}function Rr(G,Y,M){if(typeof G==="string")G=_v(Pv(G,M),M);else if(l(G)==="object")G=_v(G,M);if(typeof Y==="string")Y=_v(Pv(Y,M),M);else if(l(Y)==="object")Y=_v(Y,M);return G===Y}function y1(G,Y){return G&&G.toString().replace(!Y||!Y.iri?w.ESCAPE:B.ESCAPE,Vv)}function iv(G,Y){return G&&G.toString().replace(!Y||!Y.iri?w.PCT_ENCODED:B.PCT_ENCODED,Sv)}var Yr={scheme:"http",domainHost:!0,parse:function(Y,M){if(!Y.host)Y.error=Y.error||"HTTP URIs must have a host.";return Y},serialize:function(Y,M){var K=String(Y.scheme).toLowerCase()==="https";if(Y.port===(K?443:80)||Y.port==="")Y.port=void 0;if(!Y.path)Y.path="/";return Y}},Rh={scheme:"https",domainHost:Yr.domainHost,parse:Yr.parse,serialize:Yr.serialize};function _h(G){return typeof G.secure==="boolean"?G.secure:String(G.scheme).toLowerCase()==="wss"}var Br={scheme:"ws",domainHost:!0,parse:function(Y,M){var K=Y;return K.secure=_h(K),K.resourceName=(K.path||"/")+(K.query?"?"+K.query:""),K.path=void 0,K.query=void 0,K},serialize:function(Y,M){if(Y.port===(_h(Y)?443:80)||Y.port==="")Y.port=void 0;if(typeof Y.secure==="boolean")Y.scheme=Y.secure?"wss":"ws",Y.secure=void 0;if(Y.resourceName){var K=Y.resourceName.split("?"),L=q(K,2),k=L[0],d=L[1];Y.path=k&&k!=="/"?k:void 0,Y.query=d,Y.resourceName=void 0}return Y.fragment=void 0,Y}},kh={scheme:"wss",domainHost:Br.domainHost,parse:Br.parse,serialize:Br.serialize},EP={},$P=!0,ah="[A-Za-z0-9\\-\\.\\_\\~"+($P?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",rf="[0-9A-Fa-f]",MP=h(h("%[EFef]"+rf+"%"+rf+rf+"%"+rf+rf)+"|"+h("%[89A-Fa-f]"+rf+"%"+rf+rf)+"|"+h("%"+rf+rf)),DP="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",HP="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",KP=v(HP,"[\\\"\\\\]"),LP="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",OP=new RegExp(ah,"g"),uf=new RegExp(MP,"g"),NP=new RegExp(v("[^]",DP,"[\\.]","[\\\"]",KP),"g"),Ih=new RegExp(v("[^]",ah,LP),"g"),VP=Ih;function S1(G){var Y=Sv(G);return!Y.match(OP)?G:Y}var Ch={scheme:"mailto",parse:function(Y,M){var K=Y,L=K.to=K.path?K.path.split(","):[];if(K.path=void 0,K.query){var k=!1,d={},hv=K.query.split("&");for(var Wv=0,Ov=hv.length;Wv<Ov;++Wv){var rv=hv[Wv].split("=");switch(rv[0]){case"to":var zv=rv[1].split(",");for(var Nv=0,Gv=zv.length;Nv<Gv;++Nv)L.push(zv[Nv]);break;case"subject":K.subject=iv(rv[1],M);break;case"body":K.body=iv(rv[1],M);break;default:k=!0,d[iv(rv[0],M)]=iv(rv[1],M);break}}if(k)K.headers=d}K.query=void 0;for(var Qv=0,Ev=L.length;Qv<Ev;++Qv){var wv=L[Qv].split("@");if(wv[0]=iv(wv[0]),!M.unicodeSupport)try{wv[1]=lv.toASCII(iv(wv[1],M).toLowerCase())}catch(jf){K.error=K.error||"Email address's domain name can not be converted to ASCII via punycode: "+jf}else wv[1]=iv(wv[1],M).toLowerCase();L[Qv]=wv.join("@")}return K},serialize:function(Y,M){var K=Y,L=Q(Y.to);if(L){for(var k=0,d=L.length;k<d;++k){var hv=String(L[k]),Wv=hv.lastIndexOf("@"),Ov=hv.slice(0,Wv).replace(uf,S1).replace(uf,r).replace(NP,Vv),rv=hv.slice(Wv+1);try{rv=!M.iri?lv.toASCII(iv(rv,M).toLowerCase()):lv.toUnicode(rv)}catch(Qv){K.error=K.error||"Email address's domain name can not be converted to "+(!M.iri?"ASCII":"Unicode")+" via punycode: "+Qv}L[k]=Ov+"@"+rv}K.path=L.join(",")}var zv=Y.headers=Y.headers||{};if(Y.subject)zv.subject=Y.subject;if(Y.body)zv.body=Y.body;var Nv=[];for(var Gv in zv)if(zv[Gv]!==EP[Gv])Nv.push(Gv.replace(uf,S1).replace(uf,r).replace(Ih,Vv)+"="+zv[Gv].replace(uf,S1).replace(uf,r).replace(VP,Vv));if(Nv.length)K.query=Nv.join("&");return K}},UP=/^([^\:]+)\:(.*)/,Zh={scheme:"urn",parse:function(Y,M){var K=Y.path&&Y.path.match(UP),L=Y;if(K){var k=M.scheme||L.scheme||"urn",d=K[1].toLowerCase(),hv=K[2],Wv=k+":"+(M.nid||d),Ov=Kv[Wv];if(L.nid=d,L.nss=hv,L.path=void 0,Ov)L=Ov.parse(L,M)}else L.error=L.error||"URN can not be parsed.";return L},serialize:function(Y,M){var K=M.scheme||Y.scheme||"urn",L=Y.nid,k=K+":"+(M.nid||L),d=Kv[k];if(d)Y=d.serialize(Y,M);var hv=Y,Wv=Y.nss;return hv.path=(L||M.nid)+":"+Wv,hv}},gP=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Th={scheme:"urn:uuid",parse:function(Y,M){var K=Y;if(K.uuid=K.nss,K.nss=void 0,!M.tolerant&&(!K.uuid||!K.uuid.match(gP)))K.error=K.error||"UUID is not valid.";return K},serialize:function(Y,M){var K=Y;return K.nss=(Y.uuid||"").toLowerCase(),K}};Kv[Yr.scheme]=Yr,Kv[Rh.scheme]=Rh,Kv[Br.scheme]=Br,Kv[kh.scheme]=kh,Kv[Ch.scheme]=Ch,Kv[Zh.scheme]=Zh,Kv[Th.scheme]=Th,f.SCHEMES=Kv,f.pctEncChar=Vv,f.pctDecChars=Sv,f.parse=Pv,f.removeDotSegments=uv,f.serialize=_v,f.resolveComponents=bv,f.resolve=ff,f.normalize=Cv,f.equal=Rr,f.escapeComponent=y1,f.unescapeComponent=iv,Object.defineProperty(f,"__esModule",{value:!0})})});var Q1=i((mw,Nl)=>{Nl.exports=function f(v,h){if(v===h)return!0;if(v&&h&&typeof v=="object"&&typeof h=="object"){if(v.constructor!==h.constructor)return!1;var l,r,Q;if(Array.isArray(v)){if(l=v.length,l!=h.length)return!1;for(r=l;r--!==0;)if(!f(v[r],h[r]))return!1;return!0}if(v.constructor===RegExp)return v.source===h.source&&v.flags===h.flags;if(v.valueOf!==Object.prototype.valueOf)return v.valueOf()===h.valueOf();if(v.toString!==Object.prototype.toString)return v.toString()===h.toString();if(Q=Object.keys(v),l=Q.length,l!==Object.keys(h).length)return!1;for(r=l;r--!==0;)if(!Object.prototype.hasOwnProperty.call(h,Q[r]))return!1;for(r=l;r--!==0;){var P=Q[r];if(!f(v[P],h[P]))return!1}return!0}return v!==v&&h!==h}});var Ul=i((nw,Vl)=>{Vl.exports=function(v){var h=0,l=v.length,r=0,Q;while(r<l)if(h++,Q=v.charCodeAt(r++),Q>=55296&&Q<=56319&&r<l){if(Q=v.charCodeAt(r),(Q&64512)==56320)r++}return h}});var If=i((cw,Fl)=>{Fl.exports={copy:k9,checkDataType:t1,checkDataTypes:a9,coerceToTypes:I9,toHash:e1,getProperty:vh,escapeQuotes:fh,equal:Q1(),ucs2length:Ul(),varOccurences:T9,varReplace:u9,schemaHasRules:x9,schemaHasRulesExcept:m9,schemaUnknownRules:n9,toQuotedString:s1,getPathExpr:c9,getPath:i9,getData:o9,unescapeFragment:t9,unescapeJsonPointer:hh,escapeFragment:s9,escapeJsonPointer:rh};function k9(f,v){v=v||{};for(var h in f)v[h]=f[h];return v}function t1(f,v,h,l){var r=l?" !== ":" === ",Q=l?" || ":" && ",P=l?"!":"",W=l?"":"!";switch(f){case"null":return v+r+"null";case"array":return P+"Array.isArray("+v+")";case"object":return"("+P+v+Q+"typeof "+v+r+'"object"'+Q+W+"Array.isArray("+v+"))";case"integer":return"(typeof "+v+r+'"number"'+Q+W+"("+v+" % 1)"+Q+v+r+v+(h?Q+P+"isFinite("+v+")":"")+")";case"number":return"(typeof "+v+r+'"'+f+'"'+(h?Q+P+"isFinite("+v+")":"")+")";default:return"typeof "+v+r+'"'+f+'"'}}function a9(f,v,h){switch(f.length){case 1:return t1(f[0],v,h,!0);default:var l="",r=e1(f);if(r.array&&r.object)l=r.null?"(":"(!"+v+" || ",l+="typeof "+v+' !== "object")',delete r.null,delete r.array,delete r.object;if(r.number)delete r.integer;for(var Q in r)l+=(l?" && ":"")+t1(Q,v,h,!0);return l}}var gl=e1(["string","number","integer","boolean","null"]);function I9(f,v){if(Array.isArray(v)){var h=[];for(var l=0;l<v.length;l++){var r=v[l];if(gl[r])h[h.length]=r;else if(f==="array"&&r==="array")h[h.length]=r}if(h.length)return h}else if(gl[v])return[v];else if(f==="array"&&v==="array")return["array"]}function e1(f){var v={};for(var h=0;h<f.length;h++)v[f[h]]=!0;return v}var C9=/^[a-z$_][a-z$_0-9]*$/i,Z9=/'|\\/g;function vh(f){return typeof f=="number"?"["+f+"]":C9.test(f)?"."+f:"['"+fh(f)+"']"}function fh(f){return f.replace(Z9,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function T9(f,v){v+="[^0-9]";var h=f.match(new RegExp(v,"g"));return h?h.length:0}function u9(f,v,h){return v+="([^0-9])",h=h.replace(/\$/g,"$$$$"),f.replace(new RegExp(v,"g"),h+"$1")}function x9(f,v){if(typeof f=="boolean")return!f;for(var h in f)if(v[h])return!0}function m9(f,v,h){if(typeof f=="boolean")return!f&&h!="not";for(var l in f)if(l!=h&&v[l])return!0}function n9(f,v){if(typeof f=="boolean")return;for(var h in f)if(!v[h])return h}function s1(f){return"'"+fh(f)+"'"}function c9(f,v,h,l){var r=h?"'/' + "+v+(l?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):l?"'[' + "+v+" + ']'":"'[\\'' + "+v+" + '\\']'";return Al(f,r)}function i9(f,v,h){var l=h?s1("/"+rh(v)):s1(vh(v));return Al(f,l)}var p9=/^\/(?:[^~]|~0|~1)*$/,d9=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function o9(f,v,h){var l,r,Q,P;if(f==="")return"rootData";if(f[0]=="/"){if(!p9.test(f))throw Error("Invalid JSON-pointer: "+f);r=f,Q="rootData"}else{if(P=f.match(d9),!P)throw Error("Invalid JSON-pointer: "+f);if(l=+P[1],r=P[2],r=="#"){if(l>=v)throw Error("Cannot access property/index "+l+" levels up, current level is "+v);return h[v-l]}if(l>v)throw Error("Cannot access data "+l+" levels up, current level is "+v);if(Q="data"+(v-l||""),!r)return Q}var W=Q,w=r.split("/");for(var B=0;B<w.length;B++){var q=w[B];if(q)Q+=vh(hh(q)),W+=" && "+Q}return W}function Al(f,v){if(f=='""')return v;return(f+" + "+v).replace(/([^\\])' \+ '/g,"$1")}function t9(f){return hh(decodeURIComponent(f))}function s9(f){return encodeURIComponent(rh(f))}function rh(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}function hh(f){return f.replace(/~1/g,"/").replace(/~0/g,"~")}});var lh=i((iw,jl)=>{var e9=If();jl.exports=v8;function v8(f){e9.copy(f,this)}});var Sl=i((pw,yl)=>{var Of=yl.exports=function(f,v,h){if(typeof v=="function")h=v,v={};h=v.cb||h;var l=typeof h=="function"?h:h.pre||function(){},r=h.post||function(){};P1(v,l,r,f,"",f)};Of.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Of.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Of.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Of.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function P1(f,v,h,l,r,Q,P,W,w,B){if(l&&typeof l=="object"&&!Array.isArray(l)){v(l,r,Q,P,W,w,B);for(var q in l){var $=l[q];if(Array.isArray($)){if(q in Of.arrayKeywords)for(var D=0;D<$.length;D++)P1(f,v,h,$[D],r+"/"+q+"/"+D,Q,r,q,l,D)}else if(q in Of.propsKeywords){if($&&typeof $=="object")for(var X in $)P1(f,v,h,$[X],r+"/"+q+"/"+f8(X),Q,r,q,l,X)}else if(q in Of.keywords||f.allKeys&&!(q in Of.skipKeywords))P1(f,v,h,$,r+"/"+q,Q,r,q,l)}h(l,r,Q,P,W,w,B)}}function f8(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}});var B1=i((dw,kl)=>{var Fr=Ol(),bl=Q1(),X1=If(),W1=lh(),r8=Sl();kl.exports=Vf;Vf.normalizeId=Nf;Vf.fullPath=J1;Vf.url=w1;Vf.ids=W8;Vf.inlineRef=Qh;Vf.schema=Y1;function Vf(f,v,h){var l=this._refs[h];if(typeof l=="string")if(this._refs[l])l=this._refs[l];else return Vf.call(this,f,v,l);if(l=l||this._schemas[h],l instanceof W1)return Qh(l.schema,this._opts.inlineRefs)?l.schema:l.validate||this._compile(l);var r=Y1.call(this,v,h),Q,P,W;if(r)Q=r.schema,v=r.root,W=r.baseId;if(Q instanceof W1)P=Q.validate||f.call(this,Q.schema,v,void 0,W);else if(Q!==void 0)P=Qh(Q,this._opts.inlineRefs)?Q:f.call(this,Q,v,void 0,W);return P}function Y1(f,v){var h=Fr.parse(v),l=_l(h),r=J1(this._getId(f.schema));if(Object.keys(f.schema).length===0||l!==r){var Q=Nf(l),P=this._refs[Q];if(typeof P=="string")return h8.call(this,f,P,h);else if(P instanceof W1){if(!P.validate)this._compile(P);f=P}else if(P=this._schemas[Q],P instanceof W1){if(!P.validate)this._compile(P);if(Q==Nf(v))return{schema:P,root:f,baseId:r};f=P}else return;if(!f.schema)return;r=J1(this._getId(f.schema))}return Rl.call(this,h,r,f.schema,f)}function h8(f,v,h){var l=Y1.call(this,f,v);if(l){var{schema:r,baseId:Q}=l;f=l.root;var P=this._getId(r);if(P)Q=w1(Q,P);return Rl.call(this,h,Q,r,f)}}var l8=X1.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Rl(f,v,h,l){if(f.fragment=f.fragment||"",f.fragment.slice(0,1)!="/")return;var r=f.fragment.split("/");for(var Q=1;Q<r.length;Q++){var P=r[Q];if(P){if(P=X1.unescapeFragment(P),h=h[P],h===void 0)break;var W;if(!l8[P]){if(W=this._getId(h),W)v=w1(v,W);if(h.$ref){var w=w1(v,h.$ref),B=Y1.call(this,l,w);if(B)h=B.schema,l=B.root,v=B.baseId}}}}if(h!==void 0&&h!==l.schema)return{schema:h,root:l,baseId:v}}var Q8=X1.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function Qh(f,v){if(v===!1)return!1;if(v===void 0||v===!0)return Ph(f);else if(v)return Wh(f)<=v}function Ph(f){var v;if(Array.isArray(f)){for(var h=0;h<f.length;h++)if(v=f[h],typeof v=="object"&&!Ph(v))return!1}else for(var l in f){if(l=="$ref")return!1;if(v=f[l],typeof v=="object"&&!Ph(v))return!1}return!0}function Wh(f){var v=0,h;if(Array.isArray(f))for(var l=0;l<f.length;l++){if(h=f[l],typeof h=="object")v+=Wh(h);if(v==1/0)return 1/0}else for(var r in f){if(r=="$ref")return 1/0;if(Q8[r])v++;else{if(h=f[r],typeof h=="object")v+=Wh(h)+1;if(v==1/0)return 1/0}}return v}function J1(f,v){if(v!==!1)f=Nf(f);var h=Fr.parse(f);return _l(h)}function _l(f){return Fr.serialize(f).split("#")[0]+"#"}var P8=/#\/?$/;function Nf(f){return f?f.replace(P8,""):""}function w1(f,v){return v=Nf(v),Fr.resolve(f,v)}function W8(f){var v=Nf(this._getId(f)),h={"":v},l={"":J1(v,!1)},r={},Q=this;return r8(f,{allKeys:!0},function(P,W,w,B,q,$,D){if(W==="")return;var X=Q._getId(P),z=h[B],H=l[B]+"/"+q;if(D!==void 0)H+="/"+(typeof D=="number"?D:X1.escapeFragment(D));if(typeof X=="string"){X=z=Nf(z?Fr.resolve(z,X):X);var E=Q._refs[X];if(typeof E=="string")E=Q._refs[E];if(E&&E.schema){if(!bl(P,E.schema))throw Error('id "'+X+'" resolves to more than one schema')}else if(X!=Nf(H))if(X[0]=="#"){if(r[X]&&!bl(P,r[X]))throw Error('id "'+X+'" resolves to more than one schema');r[X]=P}else Q._refs[X]=H}h[W]=z,l[W]=H}),r}});var G1=i((ow,Il)=>{var Jh=B1();Il.exports={Validation:al(J8),MissingRef:al(wh)};function J8(f){this.message="validation failed",this.errors=f,this.ajv=this.validation=!0}wh.message=function(f,v){return"can't resolve reference "+v+" from id "+f};function wh(f,v,h){this.message=h||wh.message(f,v),this.missingRef=Jh.url(f,v),this.missingSchema=Jh.normalizeId(Jh.fullPath(this.missingRef))}function al(f){return f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f}});var Xh=i((tw,Cl)=>{Cl.exports=function(f,v){if(!v)v={};if(typeof v==="function")v={cmp:v};var h=typeof v.cycles==="boolean"?v.cycles:!1,l=v.cmp&&function(Q){return function(P){return function(W,w){var B={key:W,value:P[W]},q={key:w,value:P[w]};return Q(B,q)}}}(v.cmp),r=[];return function Q(P){if(P&&P.toJSON&&typeof P.toJSON==="function")P=P.toJSON();if(P===void 0)return;if(typeof P=="number")return isFinite(P)?""+P:"null";if(typeof P!=="object")return JSON.stringify(P);var W,w;if(Array.isArray(P)){w="[";for(W=0;W<P.length;W++){if(W)w+=",";w+=Q(P[W])||"null"}return w+"]"}if(P===null)return"null";if(r.indexOf(P)!==-1){if(h)return JSON.stringify("__cycle__");throw TypeError("Converting circular structure to JSON")}var B=r.push(P)-1,q=Object.keys(P).sort(l&&l(P));w="";for(W=0;W<q.length;W++){var $=q[W],D=Q(P[$]);if(!D)continue;if(w)w+=",";w+=JSON.stringify($)+":"+D}return r.splice(B,1),"{"+w+"}"}(f)}});var Yh=i((sw,Zl)=>{Zl.exports=function(v,h,l){var r="",Q=v.schema.$async===!0,P=v.util.schemaHasRulesExcept(v.schema,v.RULES.all,"$ref"),W=v.self._getId(v.schema);if(v.opts.strictKeywords){var w=v.util.schemaUnknownRules(v.schema,v.RULES.keywords);if(w){var B="unknown keyword: "+w;if(v.opts.strictKeywords==="log")v.logger.warn(B);else throw Error(B)}}if(v.isTop){if(r+=" var validate = ",Q)v.async=!0,r+="async ";if(r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",W&&(v.opts.sourceCode||v.opts.processCode))r+=" "+("/*# sourceURL="+W+" */")+" "}if(typeof v.schema=="boolean"||!(P||v.schema.$ref)){var h="false schema",q=v.level,$=v.dataLevel,D=v.schema[h],X=v.schemaPath+v.util.getProperty(h),z=v.errSchemaPath+"/"+h,j=!v.opts.allErrors,Z,H="data"+($||""),V="valid"+q;if(v.schema===!1){if(v.isTop)j=!0;else r+=" var "+V+" = false; ";var E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(Z||"false schema")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(z)+" , params: {} ",v.opts.messages!==!1)r+=" , message: 'boolean schema is false' ";if(v.opts.verbose)r+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+H+" ";r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&j)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else if(v.isTop)if(Q)r+=" return data; ";else r+=" validate.errors = null; return true; ";else r+=" var "+V+" = true; ";if(v.isTop)r+=" }; return validate; ";return r}if(v.isTop){var U=v.isTop,q=v.level=0,$=v.dataLevel=0,H="data";if(v.rootId=v.resolve.fullPath(v.self._getId(v.root.schema)),v.baseId=v.baseId||v.rootId,delete v.isTop,v.dataPathArr=[""],v.schema.default!==void 0&&v.opts.useDefaults&&v.opts.strictDefaults){var N="default is ignored in the schema root";if(v.opts.strictDefaults==="log")v.logger.warn(N);else throw Error(N)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var{level:q,dataLevel:$}=v,H="data"+($||"");if(W)v.baseId=v.resolve.url(v.baseId,W);if(Q&&!v.async)throw Error("async schema in sync schema");r+=" var errs_"+q+" = errors;"}var V="valid"+q,j=!v.opts.allErrors,R="",x="",Z,y=v.schema.type,T=Array.isArray(y);if(y&&v.opts.nullable&&v.schema.nullable===!0){if(T){if(y.indexOf("null")==-1)y=y.concat("null")}else if(y!="null")y=[y,"null"],T=!0}if(T&&y.length==1)y=y[0],T=!1;if(v.schema.$ref&&P){if(v.opts.extendRefs=="fail")throw Error('$ref: validation keywords used in schema at path "'+v.errSchemaPath+'" (see option extendRefs)');else if(v.opts.extendRefs!==!0)P=!1,v.logger.warn('$ref: keywords ignored in schema at path "'+v.errSchemaPath+'"')}if(v.schema.$comment&&v.opts.$comment)r+=" "+v.RULES.all.$comment.code(v,"$comment");if(y){if(v.opts.coerceTypes)var C=v.util.coerceToTypes(v.opts.coerceTypes,y);var a=v.RULES.types[y];if(C||T||a===!0||a&&!Uv(a)){var X=v.schemaPath+".type",z=v.errSchemaPath+"/type",X=v.schemaPath+".type",z=v.errSchemaPath+"/type",F=T?"checkDataTypes":"checkDataType";if(r+=" if ("+v.util[F](y,H,v.opts.strictNumbers,!0)+") { ",C){var S="dataType"+q,I="coerced"+q;if(r+=" var "+S+" = typeof "+H+"; var "+I+" = undefined; ",v.opts.coerceTypes=="array")r+=" if ("+S+" == 'object' && Array.isArray("+H+") && "+H+".length == 1) { "+H+" = "+H+"[0]; "+S+" = typeof "+H+"; if ("+v.util.checkDataType(v.schema.type,H,v.opts.strictNumbers)+") "+I+" = "+H+"; } ";r+=" if ("+I+" !== undefined) ; ";var Jv=C;if(Jv){var s,fv=-1,t=Jv.length-1;while(fv<t)if(s=Jv[fv+=1],s=="string")r+=" else if ("+S+" == 'number' || "+S+" == 'boolean') "+I+" = '' + "+H+"; else if ("+H+" === null) "+I+" = ''; ";else if(s=="number"||s=="integer"){if(r+=" else if ("+S+" == 'boolean' || "+H+" === null || ("+S+" == 'string' && "+H+" && "+H+" == +"+H+" ",s=="integer")r+=" && !("+H+" % 1)";r+=")) "+I+" = +"+H+"; "}else if(s=="boolean")r+=" else if ("+H+" === 'false' || "+H+" === 0 || "+H+" === null) "+I+" = false; else if ("+H+" === 'true' || "+H+" === 1) "+I+" = true; ";else if(s=="null")r+=" else if ("+H+" === '' || "+H+" === 0 || "+H+" === false) "+I+" = null; ";else if(v.opts.coerceTypes=="array"&&s=="array")r+=" else if ("+S+" == 'string' || "+S+" == 'number' || "+S+" == 'boolean' || "+H+" == null) "+I+" = ["+H+"]; "}r+=" else {   ";var E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(Z||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(z)+" , params: { type: '",T)r+=""+y.join(",");else r+=""+y;if(r+="' } ",v.opts.messages!==!1){if(r+=" , message: 'should be ",T)r+=""+y.join(",");else r+=""+y;r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+X+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+H+" ";r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&j)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";r+=" } if ("+I+" !== undefined) {  ";var m=$?"data"+($-1||""):"parentData",Mv=$?v.dataPathArr[$]:"parentDataProperty";if(r+=" "+H+" = "+I+"; ",!$)r+="if ("+m+" !== undefined)";r+=" "+m+"["+Mv+"] = "+I+"; } "}else{var E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(Z||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(z)+" , params: { type: '",T)r+=""+y.join(",");else r+=""+y;if(r+="' } ",v.opts.messages!==!1){if(r+=" , message: 'should be ",T)r+=""+y.join(",");else r+=""+y;r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+X+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+H+" ";r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&j)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(v.schema.$ref&&!P){if(r+=" "+v.RULES.all.$ref.code(v,"$ref")+" ",j){if(r+=" } if (errors === ",U)r+="0";else r+="errs_"+q;r+=") { ",x+="}"}}else{var Av=v.RULES;if(Av){var a,yv=-1,lv=Av.length-1;while(yv<lv)if(a=Av[yv+=1],Uv(a)){if(a.type)r+=" if ("+v.util.checkDataType(a.type,H,v.opts.strictNumbers)+") { ";if(v.opts.useDefaults){if(a.type=="object"&&v.schema.properties){var D=v.schema.properties,Kv=Object.keys(D),Vv=Kv;if(Vv){var Sv,Ef=-1,Jf=Vv.length-1;while(Ef<Jf){Sv=Vv[Ef+=1];var Lv=D[Sv];if(Lv.default!==void 0){var Dv=H+v.util.getProperty(Sv);if(v.compositeRule){if(v.opts.strictDefaults){var N="default is ignored for: "+Dv;if(v.opts.strictDefaults==="log")v.logger.warn(N);else throw Error(N)}}else{if(r+=" if ("+Dv+" === undefined ",v.opts.useDefaults=="empty")r+=" || "+Dv+" === null || "+Dv+" === '' ";if(r+=" ) "+Dv+" = ",v.opts.useDefaults=="shared")r+=" "+v.useDefault(Lv.default)+" ";else r+=" "+JSON.stringify(Lv.default)+" ";r+="; "}}}}}else if(a.type=="array"&&Array.isArray(v.schema.items)){var gf=v.schema.items;if(gf){var Lv,fv=-1,Fv=gf.length-1;while(fv<Fv)if(Lv=gf[fv+=1],Lv.default!==void 0){var Dv=H+"["+fv+"]";if(v.compositeRule){if(v.opts.strictDefaults){var N="default is ignored for: "+Dv;if(v.opts.strictDefaults==="log")v.logger.warn(N);else throw Error(N)}}else{if(r+=" if ("+Dv+" === undefined ",v.opts.useDefaults=="empty")r+=" || "+Dv+" === null || "+Dv+" === '' ";if(r+=" ) "+Dv+" = ",v.opts.useDefaults=="shared")r+=" "+v.useDefault(Lv.default)+" ";else r+=" "+JSON.stringify(Lv.default)+" ";r+="; "}}}}}var Pv=a.rules;if(Pv){var $f,wf=-1,Af=Pv.length-1;while(wf<Af)if($f=Pv[wf+=1],uv($f)){var Ff=$f.code(v,$f.keyword,a.type);if(Ff){if(r+=" "+Ff+" ",j)R+="}"}}}if(j)r+=" "+R+" ",R="";if(a.type){if(r+=" } ",y&&y===a.type&&!C){r+=" else { ";var X=v.schemaPath+".type",z=v.errSchemaPath+"/type",E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(Z||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(z)+" , params: { type: '",T)r+=""+y.join(",");else r+=""+y;if(r+="' } ",v.opts.messages!==!1){if(r+=" , message: 'should be ",T)r+=""+y.join(",");else r+=""+y;r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+X+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+H+" ";r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&j)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";r+=" } "}}if(j){if(r+=" if (errors === ",U)r+="0";else r+="errs_"+q;r+=") { ",x+="}"}}}}if(j)r+=" "+x+" ";if(U){if(Q)r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; ",r+=" return errors === 0;       ";r+=" }; return validate;"}else r+=" var "+V+" = errors === errs_"+q+";";function Uv(bv){var ff=bv.rules;for(var Cv=0;Cv<ff.length;Cv++)if(uv(ff[Cv]))return!0}function uv(bv){return v.schema[bv.keyword]!==void 0||bv.implements&&_v(bv)}function _v(bv){var ff=bv.implements;for(var Cv=0;Cv<ff.length;Cv++)if(v.schema[ff[Cv]]!==void 0)return!0}return r}});var nl=i((ew,ml)=>{var q1=B1(),E1=If(),ul=G1(),w8=Xh(),Tl=Yh(),X8=E1.ucs2length,Y8=Q1(),B8=ul.Validation;ml.exports=Bh;function Bh(f,v,h,l){var r=this,Q=this._opts,P=[void 0],W={},w=[],B={},q=[],$={},D=[];v=v||{schema:f,refVal:P,refs:W};var X=G8.call(this,f,v,l),z=this._compilations[X.index];if(X.compiling)return z.callValidate=N;var H=this._formats,E=this.RULES;try{var O=V(f,v,h,l);z.validate=O;var U=z.callValidate;if(U){if(U.schema=O.schema,U.errors=null,U.refs=O.refs,U.refVal=O.refVal,U.root=O.root,U.$async=O.$async,Q.sourceCode)U.source=O.source}return O}finally{q8.call(this,f,v,l)}function N(){var F=z.validate,S=F.apply(this,arguments);return N.errors=F.errors,S}function V(F,S,I,Jv){var s=!S||S&&S.schema==F;if(S.schema!=v.schema)return Bh.call(r,F,S,I,Jv);var fv=F.$async===!0,t=Tl({isTop:!0,schema:F,isRoot:s,baseId:Jv,root:S,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:ul.MissingRef,RULES:E,validate:Tl,util:E1,resolve:q1,resolveRef:j,usePattern:T,useDefault:C,useCustomRule:a,opts:Q,formats:H,logger:r.logger,self:r});if(t=z1(P,$8)+z1(w,z8)+z1(q,E8)+z1(D,M8)+t,Q.processCode)t=Q.processCode(t,F);var m;try{var Mv=Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",t);m=Mv(r,E,H,v,P,q,D,Y8,X8,B8),P[0]=m}catch(Av){throw r.logger.error("Error compiling schema, function code:",t),Av}if(m.schema=F,m.errors=null,m.refs=W,m.refVal=P,m.root=s?m:S,fv)m.$async=!0;if(Q.sourceCode===!0)m.source={code:t,patterns:w,defaults:q};return m}function j(F,S,I){S=q1.url(F,S);var Jv=W[S],s,fv;if(Jv!==void 0)return s=P[Jv],fv="refVal["+Jv+"]",y(s,fv);if(!I&&v.refs){var t=v.refs[S];if(t!==void 0)return s=v.refVal[t],fv=R(S,s),y(s,fv)}fv=R(S);var m=q1.call(r,V,v,S);if(m===void 0){var Mv=h&&h[S];if(Mv)m=q1.inlineRef(Mv,Q.inlineRefs)?Mv:Bh.call(r,Mv,v,h,F)}if(m===void 0)x(S);else return Z(S,m),y(m,fv)}function R(F,S){var I=P.length;return P[I]=S,W[F]=I,"refVal"+I}function x(F){delete W[F]}function Z(F,S){var I=W[F];P[I]=S}function y(F,S){return typeof F=="object"||typeof F=="boolean"?{code:S,schema:F,inline:!0}:{code:S,$async:F&&!!F.$async}}function T(F){var S=B[F];if(S===void 0)S=B[F]=w.length,w[S]=F;return"pattern"+S}function C(F){switch(typeof F){case"boolean":case"number":return""+F;case"string":return E1.toQuotedString(F);case"object":if(F===null)return"null";var S=w8(F),I=$[S];if(I===void 0)I=$[S]=q.length,q[I]=F;return"default"+I}}function a(F,S,I,Jv){if(r._opts.validateSchema!==!1){var s=F.definition.dependencies;if(s&&!s.every(function(Vv){return Object.prototype.hasOwnProperty.call(I,Vv)}))throw Error("parent schema must have all required keywords: "+s.join(","));var fv=F.definition.validateSchema;if(fv){var t=fv(S);if(!t){var m="keyword schema is invalid: "+r.errorsText(fv.errors);if(r._opts.validateSchema=="log")r.logger.error(m);else throw Error(m)}}}var Mv=F.definition.compile,Av=F.definition.inline,yv=F.definition.macro,lv;if(Mv)lv=Mv.call(r,S,I,Jv);else if(yv){if(lv=yv.call(r,S,I,Jv),Q.validateSchema!==!1)r.validateSchema(lv,!0)}else if(Av)lv=Av.call(r,Jv,F.keyword,S,I);else if(lv=F.definition.validate,!lv)return;if(lv===void 0)throw Error('custom keyword "'+F.keyword+'"failed to compile');var Kv=D.length;return D[Kv]=lv,{code:"customRule"+Kv,validate:lv}}}function G8(f,v,h){var l=xl.call(this,f,v,h);if(l>=0)return{index:l,compiling:!0};return l=this._compilations.length,this._compilations[l]={schema:f,root:v,baseId:h},{index:l,compiling:!1}}function q8(f,v,h){var l=xl.call(this,f,v,h);if(l>=0)this._compilations.splice(l,1)}function xl(f,v,h){for(var l=0;l<this._compilations.length;l++){var r=this._compilations[l];if(r.schema==f&&r.root==v&&r.baseId==h)return l}return-1}function z8(f,v){return"var pattern"+f+" = new RegExp("+E1.toQuotedString(v[f])+");"}function E8(f){return"var default"+f+" = defaults["+f+"];"}function $8(f,v){return v[f]===void 0?"":"var refVal"+f+" = refVal["+f+"];"}function M8(f){return"var customRule"+f+" = customRules["+f+"];"}function z1(f,v){if(!f.length)return"";var h="";for(var l=0;l<f.length;l++)h+=v(l,f);return h}});var il=i((v6,cl)=>{var $1=cl.exports=function(){this._cache={}};$1.prototype.put=function(v,h){this._cache[v]=h};$1.prototype.get=function(v){return this._cache[v]};$1.prototype.del=function(v){delete this._cache[v]};$1.prototype.clear=function(){this._cache={}}});var Q0=i((f6,l0)=>{var D8=If(),H8=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,K8=[0,31,28,31,30,31,30,31,31,30,31,30,31],L8=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,pl=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,O8=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,N8=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,dl=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,ol=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,tl=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,sl=/^(?:\/(?:[^~/]|~0|~1)*)*$/,el=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,v0=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;l0.exports=M1;function M1(f){return f=f=="full"?"full":"fast",D8.copy(M1[f])}M1.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":dl,url:ol,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:pl,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:h0,uuid:tl,"json-pointer":sl,"json-pointer-uri-fragment":el,"relative-json-pointer":v0};M1.full={date:f0,time:r0,"date-time":g8,uri:F8,"uri-reference":N8,"uri-template":dl,url:ol,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:pl,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:h0,uuid:tl,"json-pointer":sl,"json-pointer-uri-fragment":el,"relative-json-pointer":v0};function V8(f){return f%4===0&&(f%100!==0||f%400===0)}function f0(f){var v=f.match(H8);if(!v)return!1;var h=+v[1],l=+v[2],r=+v[3];return l>=1&&l<=12&&r>=1&&r<=(l==2&&V8(h)?29:K8[l])}function r0(f,v){var h=f.match(L8);if(!h)return!1;var l=h[1],r=h[2],Q=h[3],P=h[5];return(l<=23&&r<=59&&Q<=59||l==23&&r==59&&Q==60)&&(!v||P)}var U8=/t|\s/i;function g8(f){var v=f.split(U8);return v.length==2&&f0(v[0])&&r0(v[1],!0)}var A8=/\/|:/;function F8(f){return A8.test(f)&&O8.test(f)}var j8=/[^\\]\\Z/;function h0(f){if(j8.test(f))return!1;try{return new RegExp(f),!0}catch(v){return!1}}});var W0=i((r6,P0)=>{P0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.errSchemaPath+"/"+h,B=!v.opts.allErrors,q="data"+(P||""),$="valid"+Q,D,X;if(W=="#"||W=="#/")if(v.isRoot)D=v.async,X="validate";else D=v.root.schema.$async===!0,X="root.refVal[0]";else{var z=v.resolveRef(v.baseId,W,v.isRoot);if(z===void 0){var H=v.MissingRefError.message(v.baseId,W);if(v.opts.missingRefs=="fail"){v.logger.error(H);var E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(w)+" , params: { ref: '"+v.util.escapeQuotes(W)+"' } ",v.opts.messages!==!1)r+=" , message: 'can\\'t resolve reference "+v.util.escapeQuotes(W)+"' ";if(v.opts.verbose)r+=" , schema: "+v.util.toQuotedString(W)+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+q+" ";r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&B)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(B)r+=" if (false) { "}else if(v.opts.missingRefs=="ignore"){if(v.logger.warn(H),B)r+=" if (true) { "}else throw new v.MissingRefError(v.baseId,W,H)}else if(z.inline){var U=v.util.copy(v);U.level++;var N="valid"+U.level;U.schema=z.schema,U.schemaPath="",U.errSchemaPath=W;var V=v.validate(U).replace(/validate\.schema/g,z.code);if(r+=" "+V+" ",B)r+=" if ("+N+") { "}else D=z.$async===!0||v.async&&z.$async!==!1,X=z.code}if(X){var E=E||[];if(E.push(r),r="",v.opts.passContext)r+=" "+X+".call(this, ";else r+=" "+X+"( ";if(r+=" "+q+", (dataPath || '')",v.errorPath!='""')r+=" + "+v.errorPath;var j=P?"data"+(P-1||""):"parentData",R=P?v.dataPathArr[P]:"parentDataProperty";r+=" , "+j+" , "+R+", rootData)  ";var x=r;if(r=E.pop(),D){if(!v.async)throw Error("async schema referenced by sync schema");if(B)r+=" var "+$+"; ";if(r+=" try { await "+x+"; ",B)r+=" "+$+" = true; ";if(r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",B)r+=" "+$+" = false; ";if(r+=" } ",B)r+=" if ("+$+") { "}else if(r+=" if (!"+x+") { if (vErrors === null) vErrors = "+X+".errors; else vErrors = vErrors.concat("+X+".errors); errors = vErrors.length; } ",B)r+=" else { "}return r}});var w0=i((h6,J0)=>{J0.exports=function(v,h,l){var r=" ",Q=v.schema[h],P=v.schemaPath+v.util.getProperty(h),W=v.errSchemaPath+"/"+h,w=!v.opts.allErrors,B=v.util.copy(v),q="";B.level++;var $="valid"+B.level,D=B.baseId,X=!0,z=Q;if(z){var H,E=-1,O=z.length-1;while(E<O)if(H=z[E+=1],v.opts.strictKeywords?typeof H=="object"&&Object.keys(H).length>0||H===!1:v.util.schemaHasRules(H,v.RULES.all)){if(X=!1,B.schema=H,B.schemaPath=P+"["+E+"]",B.errSchemaPath=W+"/"+E,r+="  "+v.validate(B)+" ",B.baseId=D,w)r+=" if ("+$+") { ",q+="}"}}if(w)if(X)r+=" if (true) { ";else r+=" "+q.slice(0,-1)+" ";return r}});var Y0=i((l6,X0)=>{X0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="valid"+Q,X="errs__"+Q,z=v.util.copy(v),H="";z.level++;var E="valid"+z.level,O=W.every(function(Z){return v.opts.strictKeywords?typeof Z=="object"&&Object.keys(Z).length>0||Z===!1:v.util.schemaHasRules(Z,v.RULES.all)});if(O){var U=z.baseId;r+=" var "+X+" = errors; var "+D+" = false;  ";var N=v.compositeRule;v.compositeRule=z.compositeRule=!0;var V=W;if(V){var j,R=-1,x=V.length-1;while(R<x)j=V[R+=1],z.schema=j,z.schemaPath=w+"["+R+"]",z.errSchemaPath=B+"/"+R,r+="  "+v.validate(z)+" ",z.baseId=U,r+=" "+D+" = "+D+" || "+E+"; if (!"+D+") { ",H+="}"}if(v.compositeRule=z.compositeRule=N,r+=" "+H+" if (!"+D+") {   var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: {} ",v.opts.messages!==!1)r+=" , message: 'should match some schema in anyOf' ";if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; return false; ";if(r+=" } else {  errors = "+X+"; if (vErrors !== null) { if ("+X+") vErrors.length = "+X+"; else vErrors = null; } ",v.opts.allErrors)r+=" } "}else if(q)r+=" if (true) { ";return r}});var G0=i((Q6,B0)=>{B0.exports=function(v,h,l){var r=" ",Q=v.schema[h],P=v.errSchemaPath+"/"+h,W=!v.opts.allErrors,w=v.util.toQuotedString(Q);if(v.opts.$comment===!0)r+=" console.log("+w+");";else if(typeof v.opts.$comment=="function")r+=" self._opts.$comment("+w+", "+v.util.toQuotedString(P)+", validate.root.schema);";return r}});var z0=i((P6,q0)=>{q0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="valid"+Q,X=v.opts.$data&&W&&W.$data,z;if(X)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",z="schema"+Q;else z=W;if(!X)r+=" var schema"+Q+" = validate.schema"+w+";";r+="var "+D+" = equal("+$+", schema"+Q+"); if (!"+D+") {   ";var H=H||[];if(H.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { allowedValue: schema"+Q+" } ",v.opts.messages!==!1)r+=" , message: 'should be equal to constant' ";if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var E=r;if(r=H.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+E+"]); ";else r+=" validate.errors = ["+E+"]; return false; ";else r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" }",q)r+=" else { ";return r}});var $0=i((W6,E0)=>{E0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="valid"+Q,X="errs__"+Q,z=v.util.copy(v),H="";z.level++;var E="valid"+z.level,O="i"+Q,U=z.dataLevel=v.dataLevel+1,N="data"+U,V=v.baseId,j=v.opts.strictKeywords?typeof W=="object"&&Object.keys(W).length>0||W===!1:v.util.schemaHasRules(W,v.RULES.all);if(r+="var "+X+" = errors;var "+D+";",j){var R=v.compositeRule;v.compositeRule=z.compositeRule=!0,z.schema=W,z.schemaPath=w,z.errSchemaPath=B,r+=" var "+E+" = false; for (var "+O+" = 0; "+O+" < "+$+".length; "+O+"++) { ",z.errorPath=v.util.getPathExpr(v.errorPath,O,v.opts.jsonPointers,!0);var x=$+"["+O+"]";z.dataPathArr[U]=O;var Z=v.validate(z);if(z.baseId=V,v.util.varOccurences(Z,N)<2)r+=" "+v.util.varReplace(Z,N,x)+" ";else r+=" var "+N+" = "+x+"; "+Z+" ";r+=" if ("+E+") break; }  ",v.compositeRule=z.compositeRule=R,r+=" "+H+" if (!"+E+") {"}else r+=" if ("+$+".length == 0) {";var y=y||[];if(y.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: {} ",v.opts.messages!==!1)r+=" , message: 'should contain a valid item' ";if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var T=r;if(r=y.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+T+"]); ";else r+=" validate.errors = ["+T+"]; return false; ";else r+=" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } else { ",j)r+="  errors = "+X+"; if (vErrors !== null) { if ("+X+") vErrors.length = "+X+"; else vErrors = null; } ";if(v.opts.allErrors)r+=" } ";return r}});var D0=i((J6,M0)=>{M0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="errs__"+Q,X=v.util.copy(v),z="";X.level++;var H="valid"+X.level,E={},O={},U=v.opts.ownProperties;for(R in W){if(R=="__proto__")continue;var N=W[R],V=Array.isArray(N)?O:E;V[R]=N}r+="var "+D+" = errors;";var j=v.errorPath;r+="var missing"+Q+";";for(var R in O)if(V=O[R],V.length){if(r+=" if ( "+$+v.util.getProperty(R)+" !== undefined ",U)r+=" && Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(R)+"') ";if(q){r+=" && ( ";var x=V;if(x){var Z,y=-1,T=x.length-1;while(y<T){if(Z=x[y+=1],y)r+=" || ";var C=v.util.getProperty(Z),a=$+C;if(r+=" ( ( "+a+" === undefined ",U)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(Z)+"') ";r+=") && (missing"+Q+" = "+v.util.toQuotedString(v.opts.jsonPointers?Z:C)+") ) "}}r+=")) {  ";var F="missing"+Q,S="' + "+F+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(j,F,!0):j+" + "+F;var I=I||[];if(I.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { property: '"+v.util.escapeQuotes(R)+"', missingProperty: '"+S+"', depsCount: "+V.length+", deps: '"+v.util.escapeQuotes(V.length==1?V[0]:V.join(", "))+"' } ",v.opts.messages!==!1){if(r+=" , message: 'should have ",V.length==1)r+="property "+v.util.escapeQuotes(V[0]);else r+="properties "+v.util.escapeQuotes(V.join(", "));r+=" when property "+v.util.escapeQuotes(R)+" is present' "}if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var Jv=r;if(r=I.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+Jv+"]); ";else r+=" validate.errors = ["+Jv+"]; return false; ";else r+=" var err = "+Jv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var s=V;if(s){var Z,fv=-1,t=s.length-1;while(fv<t){Z=s[fv+=1];var C=v.util.getProperty(Z),S=v.util.escapeQuotes(Z),a=$+C;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(j,Z,v.opts.jsonPointers);if(r+=" if ( "+a+" === undefined ",U)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(Z)+"') ";if(r+=") {  var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { property: '"+v.util.escapeQuotes(R)+"', missingProperty: '"+S+"', depsCount: "+V.length+", deps: '"+v.util.escapeQuotes(V.length==1?V[0]:V.join(", "))+"' } ",v.opts.messages!==!1){if(r+=" , message: 'should have ",V.length==1)r+="property "+v.util.escapeQuotes(V[0]);else r+="properties "+v.util.escapeQuotes(V.join(", "));r+=" when property "+v.util.escapeQuotes(R)+" is present' "}if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}if(r+=" }   ",q)z+="}",r+=" else { "}v.errorPath=j;var m=X.baseId;for(var R in E){var N=E[R];if(v.opts.strictKeywords?typeof N=="object"&&Object.keys(N).length>0||N===!1:v.util.schemaHasRules(N,v.RULES.all)){if(r+=" "+H+" = true; if ( "+$+v.util.getProperty(R)+" !== undefined ",U)r+=" && Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(R)+"') ";if(r+=") { ",X.schema=N,X.schemaPath=w+v.util.getProperty(R),X.errSchemaPath=B+"/"+v.util.escapeFragment(R),r+="  "+v.validate(X)+" ",X.baseId=m,r+=" }  ",q)r+=" if ("+H+") { ",z+="}"}}if(q)r+="   "+z+" if ("+D+" == errors) {";return r}});var K0=i((w6,H0)=>{H0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="valid"+Q,X=v.opts.$data&&W&&W.$data,z;if(X)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",z="schema"+Q;else z=W;var H="i"+Q,E="schema"+Q;if(!X)r+=" var "+E+" = validate.schema"+w+";";if(r+="var "+D+";",X)r+=" if (schema"+Q+" === undefined) "+D+" = true; else if (!Array.isArray(schema"+Q+")) "+D+" = false; else {";if(r+=""+D+" = false;for (var "+H+"=0; "+H+"<"+E+".length; "+H+"++) if (equal("+$+", "+E+"["+H+"])) { "+D+" = true; break; }",X)r+="  }  ";r+=" if (!"+D+") {   ";var O=O||[];if(O.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { allowedValues: schema"+Q+" } ",v.opts.messages!==!1)r+=" , message: 'should be equal to one of the allowed values' ";if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var U=r;if(r=O.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+U+"]); ";else r+=" validate.errors = ["+U+"]; return false; ";else r+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" }",q)r+=" else { ";return r}});var O0=i((X6,L0)=>{L0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||"");if(v.opts.format===!1){if(q)r+=" if (true) { ";return r}var D=v.opts.$data&&W&&W.$data,X;if(D)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=W;var z=v.opts.unknownFormats,H=Array.isArray(z);if(D){var E="format"+Q,O="isObject"+Q,U="formatType"+Q;if(r+=" var "+E+" = formats["+X+"]; var "+O+" = typeof "+E+" == 'object' && !("+E+" instanceof RegExp) && "+E+".validate; var "+U+" = "+O+" && "+E+".type || 'string'; if ("+O+") { ",v.async)r+=" var async"+Q+" = "+E+".async; ";if(r+=" "+E+" = "+E+".validate; } if (  ",D)r+=" ("+X+" !== undefined && typeof "+X+" != 'string') || ";if(r+=" (",z!="ignore"){if(r+=" ("+X+" && !"+E+" ",H)r+=" && self._opts.unknownFormats.indexOf("+X+") == -1 ";r+=") || "}if(r+=" ("+E+" && "+U+" == '"+l+"' && !(typeof "+E+" == 'function' ? ",v.async)r+=" (async"+Q+" ? await "+E+"("+$+") : "+E+"("+$+")) ";else r+=" "+E+"("+$+") ";r+=" : "+E+".test("+$+"))))) {"}else{var E=v.formats[W];if(!E)if(z=="ignore"){if(v.logger.warn('unknown format "'+W+'" ignored in schema at path "'+v.errSchemaPath+'"'),q)r+=" if (true) { ";return r}else if(H&&z.indexOf(W)>=0){if(q)r+=" if (true) { ";return r}else throw Error('unknown format "'+W+'" is used in schema at path "'+v.errSchemaPath+'"');var O=typeof E=="object"&&!(E instanceof RegExp)&&E.validate,U=O&&E.type||"string";if(O){var N=E.async===!0;E=E.validate}if(U!=l){if(q)r+=" if (true) { ";return r}if(N){if(!v.async)throw Error("async format in sync schema");var V="formats"+v.util.getProperty(W)+".validate";r+=" if (!(await "+V+"("+$+"))) { "}else{r+=" if (! ";var V="formats"+v.util.getProperty(W);if(O)V+=".validate";if(typeof E=="function")r+=" "+V+"("+$+") ";else r+=" "+V+".test("+$+") ";r+=") { "}}var j=j||[];if(j.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { format:  ",D)r+=""+X;else r+=""+v.util.toQuotedString(W);if(r+="  } ",v.opts.messages!==!1){if(r+=` , message: 'should match format "`,D)r+="' + "+X+" + '";else r+=""+v.util.escapeQuotes(W);r+=`"' `}if(v.opts.verbose){if(r+=" , schema:  ",D)r+="validate.schema"+w;else r+=""+v.util.toQuotedString(W);r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var R=r;if(r=j.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+R+"]); ";else r+=" validate.errors = ["+R+"]; return false; ";else r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } ",q)r+=" else { ";return r}});var V0=i((Y6,N0)=>{N0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="valid"+Q,X="errs__"+Q,z=v.util.copy(v);z.level++;var H="valid"+z.level,E=v.schema.then,O=v.schema.else,U=E!==void 0&&(v.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:v.util.schemaHasRules(E,v.RULES.all)),N=O!==void 0&&(v.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:v.util.schemaHasRules(O,v.RULES.all)),V=z.baseId;if(U||N){var j;z.createErrors=!1,z.schema=W,z.schemaPath=w,z.errSchemaPath=B,r+=" var "+X+" = errors; var "+D+" = true;  ";var R=v.compositeRule;if(v.compositeRule=z.compositeRule=!0,r+="  "+v.validate(z)+" ",z.baseId=V,z.createErrors=!0,r+="  errors = "+X+"; if (vErrors !== null) { if ("+X+") vErrors.length = "+X+"; else vErrors = null; }  ",v.compositeRule=z.compositeRule=R,U){if(r+=" if ("+H+") {  ",z.schema=v.schema.then,z.schemaPath=v.schemaPath+".then",z.errSchemaPath=v.errSchemaPath+"/then",r+="  "+v.validate(z)+" ",z.baseId=V,r+=" "+D+" = "+H+"; ",U&&N)j="ifClause"+Q,r+=" var "+j+" = 'then'; ";else j="'then'";if(r+=" } ",N)r+=" else { "}else r+=" if (!"+H+") { ";if(N){if(z.schema=v.schema.else,z.schemaPath=v.schemaPath+".else",z.errSchemaPath=v.errSchemaPath+"/else",r+="  "+v.validate(z)+" ",z.baseId=V,r+=" "+D+" = "+H+"; ",U&&N)j="ifClause"+Q,r+=" var "+j+" = 'else'; ";else j="'else'";r+=" } "}if(r+=" if (!"+D+") {   var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { failingKeyword: "+j+" } ",v.opts.messages!==!1)r+=` , message: 'should match "' + `+j+` + '" schema' `;if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; return false; ";if(r+=" }   ",q)r+=" else { "}else if(q)r+=" if (true) { ";return r}});var g0=i((B6,U0)=>{U0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="valid"+Q,X="errs__"+Q,z=v.util.copy(v),H="";z.level++;var E="valid"+z.level,O="i"+Q,U=z.dataLevel=v.dataLevel+1,N="data"+U,V=v.baseId;if(r+="var "+X+" = errors;var "+D+";",Array.isArray(W)){var j=v.schema.additionalItems;if(j===!1){r+=" "+D+" = "+$+".length <= "+W.length+"; ";var R=B;B=v.errSchemaPath+"/additionalItems",r+="  if (!"+D+") {   ";var x=x||[];if(x.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { limit: "+W.length+" } ",v.opts.messages!==!1)r+=" , message: 'should NOT have more than "+W.length+" items' ";if(v.opts.verbose)r+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var Z=r;if(r=x.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+Z+"]); ";else r+=" validate.errors = ["+Z+"]; return false; ";else r+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } ",B=R,q)H+="}",r+=" else { "}var y=W;if(y){var T,C=-1,a=y.length-1;while(C<a)if(T=y[C+=1],v.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:v.util.schemaHasRules(T,v.RULES.all)){r+=" "+E+" = true; if ("+$+".length > "+C+") { ";var F=$+"["+C+"]";z.schema=T,z.schemaPath=w+"["+C+"]",z.errSchemaPath=B+"/"+C,z.errorPath=v.util.getPathExpr(v.errorPath,C,v.opts.jsonPointers,!0),z.dataPathArr[U]=C;var S=v.validate(z);if(z.baseId=V,v.util.varOccurences(S,N)<2)r+=" "+v.util.varReplace(S,N,F)+" ";else r+=" var "+N+" = "+F+"; "+S+" ";if(r+=" }  ",q)r+=" if ("+E+") { ",H+="}"}}if(typeof j=="object"&&(v.opts.strictKeywords?typeof j=="object"&&Object.keys(j).length>0||j===!1:v.util.schemaHasRules(j,v.RULES.all))){z.schema=j,z.schemaPath=v.schemaPath+".additionalItems",z.errSchemaPath=v.errSchemaPath+"/additionalItems",r+=" "+E+" = true; if ("+$+".length > "+W.length+") {  for (var "+O+" = "+W.length+"; "+O+" < "+$+".length; "+O+"++) { ",z.errorPath=v.util.getPathExpr(v.errorPath,O,v.opts.jsonPointers,!0);var F=$+"["+O+"]";z.dataPathArr[U]=O;var S=v.validate(z);if(z.baseId=V,v.util.varOccurences(S,N)<2)r+=" "+v.util.varReplace(S,N,F)+" ";else r+=" var "+N+" = "+F+"; "+S+" ";if(q)r+=" if (!"+E+") break; ";if(r+=" } }  ",q)r+=" if ("+E+") { ",H+="}"}}else if(v.opts.strictKeywords?typeof W=="object"&&Object.keys(W).length>0||W===!1:v.util.schemaHasRules(W,v.RULES.all)){z.schema=W,z.schemaPath=w,z.errSchemaPath=B,r+="  for (var "+O+" = 0; "+O+" < "+$+".length; "+O+"++) { ",z.errorPath=v.util.getPathExpr(v.errorPath,O,v.opts.jsonPointers,!0);var F=$+"["+O+"]";z.dataPathArr[U]=O;var S=v.validate(z);if(z.baseId=V,v.util.varOccurences(S,N)<2)r+=" "+v.util.varReplace(S,N,F)+" ";else r+=" var "+N+" = "+F+"; "+S+" ";if(q)r+=" if (!"+E+") break; ";r+=" }"}if(q)r+=" "+H+" if ("+X+" == errors) {";return r}});var Gh=i((G6,A0)=>{A0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,V,$="data"+(P||""),D=v.opts.$data&&W&&W.$data,X;if(D)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=W;var z=h=="maximum",H=z?"exclusiveMaximum":"exclusiveMinimum",E=v.schema[H],O=v.opts.$data&&E&&E.$data,U=z?"<":">",N=z?">":"<",V=void 0;if(!(D||typeof W=="number"||W===void 0))throw Error(h+" must be number");if(!(O||E===void 0||typeof E=="number"||typeof E=="boolean"))throw Error(H+" must be number or boolean");if(O){var j=v.util.getData(E.$data,P,v.dataPathArr),R="exclusive"+Q,x="exclType"+Q,Z="exclIsNumber"+Q,y="op"+Q,T="' + "+y+" + '";r+=" var schemaExcl"+Q+" = "+j+"; ",j="schemaExcl"+Q,r+=" var "+R+"; var "+x+" = typeof "+j+"; if ("+x+" != 'boolean' && "+x+" != 'undefined' && "+x+" != 'number') { ";var V=H,C=C||[];if(C.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(V||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: {} ",v.opts.messages!==!1)r+=" , message: '"+H+" should be boolean' ";if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var a=r;if(r=C.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+a+"]); ";else r+=" validate.errors = ["+a+"]; return false; ";else r+=" var err = "+a+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } else if ( ",D)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";if(r+=" "+x+" == 'number' ? ( ("+R+" = "+X+" === undefined || "+j+" "+U+"= "+X+") ? "+$+" "+N+"= "+j+" : "+$+" "+N+" "+X+" ) : ( ("+R+" = "+j+" === true) ? "+$+" "+N+"= "+X+" : "+$+" "+N+" "+X+" ) || "+$+" !== "+$+") { var op"+Q+" = "+R+" ? '"+U+"' : '"+U+"='; ",W===void 0)V=H,B=v.errSchemaPath+"/"+H,X=j,D=O}else{var Z=typeof E=="number",T=U;if(Z&&D){var y="'"+T+"'";if(r+=" if ( ",D)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";r+=" ( "+X+" === undefined || "+E+" "+U+"= "+X+" ? "+$+" "+N+"= "+E+" : "+$+" "+N+" "+X+" ) || "+$+" !== "+$+") { "}else{if(Z&&W===void 0)R=!0,V=H,B=v.errSchemaPath+"/"+H,X=E,N+="=";else{if(Z)X=Math[z?"min":"max"](E,W);if(E===(Z?X:!0))R=!0,V=H,B=v.errSchemaPath+"/"+H,N+="=";else R=!1,T+="="}var y="'"+T+"'";if(r+=" if ( ",D)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";r+=" "+$+" "+N+" "+X+" || "+$+" !== "+$+") { "}}V=V||h;var C=C||[];if(C.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(V||"_limit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { comparison: "+y+", limit: "+X+", exclusive: "+R+" } ",v.opts.messages!==!1)if(r+=" , message: 'should be "+T+" ",D)r+="' + "+X;else r+=""+X+"'";if(v.opts.verbose){if(r+=" , schema:  ",D)r+="validate.schema"+w;else r+=""+W;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var a=r;if(r=C.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+a+"]); ";else r+=" validate.errors = ["+a+"]; return false; ";else r+=" var err = "+a+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } ",q)r+=" else { ";return r}});var qh=i((q6,F0)=>{F0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,H,$="data"+(P||""),D=v.opts.$data&&W&&W.$data,X;if(D)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=W;if(!(D||typeof W=="number"))throw Error(h+" must be number");var z=h=="maxItems"?">":"<";if(r+="if ( ",D)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";r+=" "+$+".length "+z+" "+X+") { ";var H=h,E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(H||"_limitItems")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { limit: "+X+" } ",v.opts.messages!==!1){if(r+=" , message: 'should NOT have ",h=="maxItems")r+="more";else r+="fewer";if(r+=" than ",D)r+="' + "+X+" + '";else r+=""+W;r+=" items' "}if(v.opts.verbose){if(r+=" , schema:  ",D)r+="validate.schema"+w;else r+=""+W;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+="} ",q)r+=" else { ";return r}});var zh=i((z6,j0)=>{j0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,H,$="data"+(P||""),D=v.opts.$data&&W&&W.$data,X;if(D)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=W;if(!(D||typeof W=="number"))throw Error(h+" must be number");var z=h=="maxLength"?">":"<";if(r+="if ( ",D)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";if(v.opts.unicode===!1)r+=" "+$+".length ";else r+=" ucs2length("+$+") ";r+=" "+z+" "+X+") { ";var H=h,E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(H||"_limitLength")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { limit: "+X+" } ",v.opts.messages!==!1){if(r+=" , message: 'should NOT be ",h=="maxLength")r+="longer";else r+="shorter";if(r+=" than ",D)r+="' + "+X+" + '";else r+=""+W;r+=" characters' "}if(v.opts.verbose){if(r+=" , schema:  ",D)r+="validate.schema"+w;else r+=""+W;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+="} ",q)r+=" else { ";return r}});var Eh=i((E6,y0)=>{y0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,H,$="data"+(P||""),D=v.opts.$data&&W&&W.$data,X;if(D)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=W;if(!(D||typeof W=="number"))throw Error(h+" must be number");var z=h=="maxProperties"?">":"<";if(r+="if ( ",D)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";r+=" Object.keys("+$+").length "+z+" "+X+") { ";var H=h,E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(H||"_limitProperties")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { limit: "+X+" } ",v.opts.messages!==!1){if(r+=" , message: 'should NOT have ",h=="maxProperties")r+="more";else r+="fewer";if(r+=" than ",D)r+="' + "+X+" + '";else r+=""+W;r+=" properties' "}if(v.opts.verbose){if(r+=" , schema:  ",D)r+="validate.schema"+w;else r+=""+W;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+="} ",q)r+=" else { ";return r}});var b0=i(($6,S0)=>{S0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D=v.opts.$data&&W&&W.$data,X;if(D)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=W;if(!(D||typeof W=="number"))throw Error(h+" must be number");if(r+="var division"+Q+";if (",D)r+=" "+X+" !== undefined && ( typeof "+X+" != 'number' || ";if(r+=" (division"+Q+" = "+$+" / "+X+", ",v.opts.multipleOfPrecision)r+=" Math.abs(Math.round(division"+Q+") - division"+Q+") > 1e-"+v.opts.multipleOfPrecision+" ";else r+=" division"+Q+" !== parseInt(division"+Q+") ";if(r+=" ) ",D)r+="  )  ";r+=" ) {   ";var z=z||[];if(z.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { multipleOf: "+X+" } ",v.opts.messages!==!1)if(r+=" , message: 'should be multiple of ",D)r+="' + "+X;else r+=""+X+"'";if(v.opts.verbose){if(r+=" , schema:  ",D)r+="validate.schema"+w;else r+=""+W;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var H=r;if(r=z.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+H+"]); ";else r+=" validate.errors = ["+H+"]; return false; ";else r+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+="} ",q)r+=" else { ";return r}});var _0=i((M6,R0)=>{R0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="errs__"+Q,X=v.util.copy(v);X.level++;var z="valid"+X.level;if(v.opts.strictKeywords?typeof W=="object"&&Object.keys(W).length>0||W===!1:v.util.schemaHasRules(W,v.RULES.all)){X.schema=W,X.schemaPath=w,X.errSchemaPath=B,r+=" var "+D+" = errors;  ";var H=v.compositeRule;v.compositeRule=X.compositeRule=!0,X.createErrors=!1;var E;if(X.opts.allErrors)E=X.opts.allErrors,X.opts.allErrors=!1;if(r+=" "+v.validate(X)+" ",X.createErrors=!0,E)X.opts.allErrors=E;v.compositeRule=X.compositeRule=H,r+=" if ("+z+") {   ";var O=O||[];if(O.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: {} ",v.opts.messages!==!1)r+=" , message: 'should NOT be valid' ";if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var U=r;if(r=O.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+U+"]); ";else r+=" validate.errors = ["+U+"]; return false; ";else r+=" var err = "+U+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } else {  errors = "+D+"; if (vErrors !== null) { if ("+D+") vErrors.length = "+D+"; else vErrors = null; } ",v.opts.allErrors)r+=" } "}else{if(r+="  var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: {} ",v.opts.messages!==!1)r+=" , message: 'should NOT be valid' ";if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",q)r+=" if (false) { "}return r}});var a0=i((D6,k0)=>{k0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="valid"+Q,X="errs__"+Q,z=v.util.copy(v),H="";z.level++;var E="valid"+z.level,O=z.baseId,U="prevValid"+Q,N="passingSchemas"+Q;r+="var "+X+" = errors , "+U+" = false , "+D+" = false , "+N+" = null; ";var V=v.compositeRule;v.compositeRule=z.compositeRule=!0;var j=W;if(j){var R,x=-1,Z=j.length-1;while(x<Z){if(R=j[x+=1],v.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:v.util.schemaHasRules(R,v.RULES.all))z.schema=R,z.schemaPath=w+"["+x+"]",z.errSchemaPath=B+"/"+x,r+="  "+v.validate(z)+" ",z.baseId=O;else r+=" var "+E+" = true; ";if(x)r+=" if ("+E+" && "+U+") { "+D+" = false; "+N+" = ["+N+", "+x+"]; } else { ",H+="}";r+=" if ("+E+") { "+D+" = "+U+" = true; "+N+" = "+x+"; }"}}if(v.compositeRule=z.compositeRule=V,r+=""+H+"if (!"+D+") {   var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { passingSchemas: "+N+" } ",v.opts.messages!==!1)r+=" , message: 'should match exactly one schema in oneOf' ";if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; return false; ";if(r+="} else {  errors = "+X+"; if (vErrors !== null) { if ("+X+") vErrors.length = "+X+"; else vErrors = null; }",v.opts.allErrors)r+=" } ";return r}});var C0=i((H6,I0)=>{I0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D=v.opts.$data&&W&&W.$data,X;if(D)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=W;var z=D?"(new RegExp("+X+"))":v.usePattern(W);if(r+="if ( ",D)r+=" ("+X+" !== undefined && typeof "+X+" != 'string') || ";r+=" !"+z+".test("+$+") ) {   ";var H=H||[];if(H.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { pattern:  ",D)r+=""+X;else r+=""+v.util.toQuotedString(W);if(r+="  } ",v.opts.messages!==!1){if(r+=` , message: 'should match pattern "`,D)r+="' + "+X+" + '";else r+=""+v.util.escapeQuotes(W);r+=`"' `}if(v.opts.verbose){if(r+=" , schema:  ",D)r+="validate.schema"+w;else r+=""+v.util.toQuotedString(W);r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var E=r;if(r=H.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+E+"]); ";else r+=" validate.errors = ["+E+"]; return false; ";else r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+="} ",q)r+=" else { ";return r}});var T0=i((K6,Z0)=>{Z0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="errs__"+Q,X=v.util.copy(v),z="";X.level++;var H="valid"+X.level,E="key"+Q,O="idx"+Q,U=X.dataLevel=v.dataLevel+1,N="data"+U,V="dataProperties"+Q,j=Object.keys(W||{}).filter(fv),R=v.schema.patternProperties||{},x=Object.keys(R).filter(fv),Z=v.schema.additionalProperties,y=j.length||x.length,T=Z===!1,C=typeof Z=="object"&&Object.keys(Z).length,a=v.opts.removeAdditional,F=T||C||a,S=v.opts.ownProperties,I=v.baseId,Jv=v.schema.required;if(Jv&&!(v.opts.$data&&Jv.$data)&&Jv.length<v.opts.loopRequired)var s=v.util.toHash(Jv);function fv(iv){return iv!=="__proto__"}if(r+="var "+D+" = errors;var "+H+" = true;",S)r+=" var "+V+" = undefined;";if(F){if(S)r+=" "+V+" = "+V+" || Object.keys("+$+"); for (var "+O+"=0; "+O+"<"+V+".length; "+O+"++) { var "+E+" = "+V+"["+O+"]; ";else r+=" for (var "+E+" in "+$+") { ";if(y){if(r+=" var isAdditional"+Q+" = !(false ",j.length)if(j.length>8)r+=" || validate.schema"+w+".hasOwnProperty("+E+") ";else{var t=j;if(t){var m,Mv=-1,Av=t.length-1;while(Mv<Av)m=t[Mv+=1],r+=" || "+E+" == "+v.util.toQuotedString(m)+" "}}if(x.length){var yv=x;if(yv){var lv,Kv=-1,Vv=yv.length-1;while(Kv<Vv)lv=yv[Kv+=1],r+=" || "+v.usePattern(lv)+".test("+E+") "}}r+=" ); if (isAdditional"+Q+") { "}if(a=="all")r+=" delete "+$+"["+E+"]; ";else{var Sv=v.errorPath,Ef="' + "+E+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(v.errorPath,E,v.opts.jsonPointers);if(T)if(a)r+=" delete "+$+"["+E+"]; ";else{r+=" "+H+" = false; ";var Jf=B;B=v.errSchemaPath+"/additionalProperties";var Lv=Lv||[];if(Lv.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { additionalProperty: '"+Ef+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is an invalid additional property";else r+="should NOT have additional properties";r+="' "}if(v.opts.verbose)r+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var Dv=r;if(r=Lv.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+Dv+"]); ";else r+=" validate.errors = ["+Dv+"]; return false; ";else r+=" var err = "+Dv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(B=Jf,q)r+=" break; "}else if(C)if(a=="failing"){r+=" var "+D+" = errors;  ";var gf=v.compositeRule;v.compositeRule=X.compositeRule=!0,X.schema=Z,X.schemaPath=v.schemaPath+".additionalProperties",X.errSchemaPath=v.errSchemaPath+"/additionalProperties",X.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,E,v.opts.jsonPointers);var Fv=$+"["+E+"]";X.dataPathArr[U]=E;var Pv=v.validate(X);if(X.baseId=I,v.util.varOccurences(Pv,N)<2)r+=" "+v.util.varReplace(Pv,N,Fv)+" ";else r+=" var "+N+" = "+Fv+"; "+Pv+" ";r+=" if (!"+H+") { errors = "+D+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+$+"["+E+"]; }  ",v.compositeRule=X.compositeRule=gf}else{X.schema=Z,X.schemaPath=v.schemaPath+".additionalProperties",X.errSchemaPath=v.errSchemaPath+"/additionalProperties",X.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,E,v.opts.jsonPointers);var Fv=$+"["+E+"]";X.dataPathArr[U]=E;var Pv=v.validate(X);if(X.baseId=I,v.util.varOccurences(Pv,N)<2)r+=" "+v.util.varReplace(Pv,N,Fv)+" ";else r+=" var "+N+" = "+Fv+"; "+Pv+" ";if(q)r+=" if (!"+H+") break; "}v.errorPath=Sv}if(y)r+=" } ";if(r+=" }  ",q)r+=" if ("+H+") { ",z+="}"}var $f=v.opts.useDefaults&&!v.compositeRule;if(j.length){var wf=j;if(wf){var m,Af=-1,Ff=wf.length-1;while(Af<Ff){m=wf[Af+=1];var Uv=W[m];if(v.opts.strictKeywords?typeof Uv=="object"&&Object.keys(Uv).length>0||Uv===!1:v.util.schemaHasRules(Uv,v.RULES.all)){var uv=v.util.getProperty(m),Fv=$+uv,_v=$f&&Uv.default!==void 0;X.schema=Uv,X.schemaPath=w+uv,X.errSchemaPath=B+"/"+v.util.escapeFragment(m),X.errorPath=v.util.getPath(v.errorPath,m,v.opts.jsonPointers),X.dataPathArr[U]=v.util.toQuotedString(m);var Pv=v.validate(X);if(X.baseId=I,v.util.varOccurences(Pv,N)<2){Pv=v.util.varReplace(Pv,N,Fv);var bv=Fv}else{var bv=N;r+=" var "+N+" = "+Fv+"; "}if(_v)r+=" "+Pv+" ";else{if(s&&s[m]){if(r+=" if ( "+bv+" === undefined ",S)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(m)+"') ";r+=") { "+H+" = false; ";var Sv=v.errorPath,Jf=B,ff=v.util.escapeQuotes(m);if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(Sv,m,v.opts.jsonPointers);B=v.errSchemaPath+"/required";var Lv=Lv||[];if(Lv.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+ff+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+ff+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var Dv=r;if(r=Lv.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+Dv+"]); ";else r+=" validate.errors = ["+Dv+"]; return false; ";else r+=" var err = "+Dv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";B=Jf,v.errorPath=Sv,r+=" } else { "}else if(q){if(r+=" if ( "+bv+" === undefined ",S)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(m)+"') ";r+=") { "+H+" = true; } else { "}else{if(r+=" if ("+bv+" !== undefined ",S)r+=" &&   Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(m)+"') ";r+=" ) { "}r+=" "+Pv+" } "}}if(q)r+=" if ("+H+") { ",z+="}"}}}if(x.length){var Cv=x;if(Cv){var lv,Rr=-1,y1=Cv.length-1;while(Rr<y1){lv=Cv[Rr+=1];var Uv=R[lv];if(v.opts.strictKeywords?typeof Uv=="object"&&Object.keys(Uv).length>0||Uv===!1:v.util.schemaHasRules(Uv,v.RULES.all)){if(X.schema=Uv,X.schemaPath=v.schemaPath+".patternProperties"+v.util.getProperty(lv),X.errSchemaPath=v.errSchemaPath+"/patternProperties/"+v.util.escapeFragment(lv),S)r+=" "+V+" = "+V+" || Object.keys("+$+"); for (var "+O+"=0; "+O+"<"+V+".length; "+O+"++) { var "+E+" = "+V+"["+O+"]; ";else r+=" for (var "+E+" in "+$+") { ";r+=" if ("+v.usePattern(lv)+".test("+E+")) { ",X.errorPath=v.util.getPathExpr(v.errorPath,E,v.opts.jsonPointers);var Fv=$+"["+E+"]";X.dataPathArr[U]=E;var Pv=v.validate(X);if(X.baseId=I,v.util.varOccurences(Pv,N)<2)r+=" "+v.util.varReplace(Pv,N,Fv)+" ";else r+=" var "+N+" = "+Fv+"; "+Pv+" ";if(q)r+=" if (!"+H+") break; ";if(r+=" } ",q)r+=" else "+H+" = true; ";if(r+=" }  ",q)r+=" if ("+H+") { ",z+="}"}}}}if(q)r+=" "+z+" if ("+D+" == errors) {";return r}});var x0=i((L6,u0)=>{u0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="errs__"+Q,X=v.util.copy(v),z="";X.level++;var H="valid"+X.level;if(r+="var "+D+" = errors;",v.opts.strictKeywords?typeof W=="object"&&Object.keys(W).length>0||W===!1:v.util.schemaHasRules(W,v.RULES.all)){X.schema=W,X.schemaPath=w,X.errSchemaPath=B;var E="key"+Q,O="idx"+Q,U="i"+Q,N="' + "+E+" + '",V=X.dataLevel=v.dataLevel+1,j="data"+V,R="dataProperties"+Q,x=v.opts.ownProperties,Z=v.baseId;if(x)r+=" var "+R+" = undefined; ";if(x)r+=" "+R+" = "+R+" || Object.keys("+$+"); for (var "+O+"=0; "+O+"<"+R+".length; "+O+"++) { var "+E+" = "+R+"["+O+"]; ";else r+=" for (var "+E+" in "+$+") { ";r+=" var startErrs"+Q+" = errors; ";var y=E,T=v.compositeRule;v.compositeRule=X.compositeRule=!0;var C=v.validate(X);if(X.baseId=Z,v.util.varOccurences(C,j)<2)r+=" "+v.util.varReplace(C,j,y)+" ";else r+=" var "+j+" = "+y+"; "+C+" ";if(v.compositeRule=X.compositeRule=T,r+=" if (!"+H+") { for (var "+U+"=startErrs"+Q+"; "+U+"<errors; "+U+"++) { vErrors["+U+"].propertyName = "+E+"; }   var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { propertyName: '"+N+"' } ",v.opts.messages!==!1)r+=" , message: 'property name \\'"+N+"\\' is invalid' ";if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; return false; ";if(q)r+=" break; ";r+=" } }"}if(q)r+=" "+z+" if ("+D+" == errors) {";return r}});var n0=i((O6,m0)=>{m0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="valid"+Q,X=v.opts.$data&&W&&W.$data,z;if(X)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",z="schema"+Q;else z=W;var H="schema"+Q;if(!X)if(W.length<v.opts.loopRequired&&v.schema.properties&&Object.keys(v.schema.properties).length){var E=[],O=W;if(O){var U,N=-1,V=O.length-1;while(N<V){U=O[N+=1];var j=v.schema.properties[U];if(!(j&&(v.opts.strictKeywords?typeof j=="object"&&Object.keys(j).length>0||j===!1:v.util.schemaHasRules(j,v.RULES.all))))E[E.length]=U}}}else var E=W;if(X||E.length){var R=v.errorPath,x=X||E.length>=v.opts.loopRequired,Z=v.opts.ownProperties;if(q)if(r+=" var missing"+Q+"; ",x){if(!X)r+=" var "+H+" = validate.schema"+w+"; ";var y="i"+Q,T="schema"+Q+"["+y+"]",C="' + "+T+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(R,T,v.opts.jsonPointers);if(r+=" var "+D+" = true; ",X)r+=" if (schema"+Q+" === undefined) "+D+" = true; else if (!Array.isArray(schema"+Q+")) "+D+" = false; else {";if(r+=" for (var "+y+" = 0; "+y+" < "+H+".length; "+y+"++) { "+D+" = "+$+"["+H+"["+y+"]] !== undefined ",Z)r+=" &&   Object.prototype.hasOwnProperty.call("+$+", "+H+"["+y+"]) ";if(r+="; if (!"+D+") break; } ",X)r+="  }  ";r+="  if (!"+D+") {   ";var a=a||[];if(a.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+C+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+C+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var F=r;if(r=a.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+F+"]); ";else r+=" validate.errors = ["+F+"]; return false; ";else r+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";r+=" } else { "}else{r+=" if ( ";var S=E;if(S){var I,y=-1,Jv=S.length-1;while(y<Jv){if(I=S[y+=1],y)r+=" || ";var s=v.util.getProperty(I),fv=$+s;if(r+=" ( ( "+fv+" === undefined ",Z)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(I)+"') ";r+=") && (missing"+Q+" = "+v.util.toQuotedString(v.opts.jsonPointers?I:s)+") ) "}}r+=") {  ";var T="missing"+Q,C="' + "+T+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(R,T,!0):R+" + "+T;var a=a||[];if(a.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+C+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+C+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var F=r;if(r=a.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+F+"]); ";else r+=" validate.errors = ["+F+"]; return false; ";else r+=" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";r+=" } else { "}else if(x){if(!X)r+=" var "+H+" = validate.schema"+w+"; ";var y="i"+Q,T="schema"+Q+"["+y+"]",C="' + "+T+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(R,T,v.opts.jsonPointers);if(X){if(r+=" if ("+H+" && !Array.isArray("+H+")) {  var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+C+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+C+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+H+" !== undefined) { "}if(r+=" for (var "+y+" = 0; "+y+" < "+H+".length; "+y+"++) { if ("+$+"["+H+"["+y+"]] === undefined ",Z)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", "+H+"["+y+"]) ";if(r+=") {  var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+C+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+C+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",X)r+="  }  "}else{var t=E;if(t){var I,m=-1,Mv=t.length-1;while(m<Mv){I=t[m+=1];var s=v.util.getProperty(I),C=v.util.escapeQuotes(I),fv=$+s;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(R,I,v.opts.jsonPointers);if(r+=" if ( "+fv+" === undefined ",Z)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(I)+"') ";if(r+=") {  var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+C+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+C+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}v.errorPath=R}else if(q)r+=" if (true) {";return r}});var i0=i((N6,c0)=>{c0.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$="data"+(P||""),D="valid"+Q,X=v.opts.$data&&W&&W.$data,z;if(X)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",z="schema"+Q;else z=W;if((W||X)&&v.opts.uniqueItems!==!1){if(X)r+=" var "+D+"; if ("+z+" === false || "+z+" === undefined) "+D+" = true; else if (typeof "+z+" != 'boolean') "+D+" = false; else { ";r+=" var i = "+$+".length , "+D+" = true , j; if (i > 1) { ";var H=v.schema.items&&v.schema.items.type,E=Array.isArray(H);if(!H||H=="object"||H=="array"||E&&(H.indexOf("object")>=0||H.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+$+"[i], "+$+"[j])) { "+D+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+$+"[i]; ";var O="checkDataType"+(E?"s":"");if(r+=" if ("+v.util[O](H,"item",v.opts.strictNumbers,!0)+") continue; ",E)r+=` if (typeof item == 'string') item = '"' + item; `;r+=" if (typeof itemIndices[item] == 'number') { "+D+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}if(r+=" } ",X)r+="  }  ";r+=" if (!"+D+") {   ";var U=U||[];if(U.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { i: i, j: j } ",v.opts.messages!==!1)r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' ";if(v.opts.verbose){if(r+=" , schema:  ",X)r+="validate.schema"+w;else r+=""+W;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var N=r;if(r=U.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+N+"]); ";else r+=" validate.errors = ["+N+"]; return false; ";else r+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } ",q)r+=" else { "}else if(q)r+=" if (true) { ";return r}});var d0=i((V6,p0)=>{p0.exports={$ref:W0(),allOf:w0(),anyOf:Y0(),$comment:G0(),const:z0(),contains:$0(),dependencies:D0(),enum:K0(),format:O0(),if:V0(),items:g0(),maximum:Gh(),minimum:Gh(),maxItems:qh(),minItems:qh(),maxLength:zh(),minLength:zh(),maxProperties:Eh(),minProperties:Eh(),multipleOf:b0(),not:_0(),oneOf:a0(),pattern:C0(),properties:T0(),propertyNames:x0(),required:n0(),uniqueItems:i0(),validate:Yh()}});var s0=i((U6,t0)=>{var o0=d0(),$h=If().toHash;t0.exports=function(){var v=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],h=["type","$comment"],l=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return v.all=$h(h),v.types=$h(r),v.forEach(function(Q){if(Q.rules=Q.rules.map(function(P){var W;if(typeof P=="object"){var w=Object.keys(P)[0];W=P[w],P=w,W.forEach(function(q){h.push(q),v.all[q]=!0})}h.push(P);var B=v.all[P]={keyword:P,code:o0[P],implements:W};return B}),v.all.$comment={keyword:"$comment",code:o0.$comment},Q.type)v.types[Q.type]=Q}),v.keywords=$h(h.concat(l)),v.custom={},v}});var fQ=i((g6,vQ)=>{var e0=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];vQ.exports=function(f,v){for(var h=0;h<v.length;h++){f=JSON.parse(JSON.stringify(f));var l=v[h].split("/"),r=f,Q;for(Q=1;Q<l.length;Q++)r=r[l[Q]];for(Q=0;Q<e0.length;Q++){var P=e0[Q],W=r[P];if(W)r[P]={anyOf:[W,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}}return f}});var lQ=i((A6,hQ)=>{var y8=G1().MissingRef;hQ.exports=rQ;function rQ(f,v,h){var l=this;if(typeof this._opts.loadSchema!="function")throw Error("options.loadSchema should be a function");if(typeof v=="function")h=v,v=void 0;var r=Q(f).then(function(){var W=l._addSchema(f,void 0,v);return W.validate||P(W)});if(h)r.then(function(W){h(null,W)},h);return r;function Q(W){var w=W.$schema;return w&&!l.getSchema(w)?rQ.call(l,{$ref:w},!0):Promise.resolve()}function P(W){try{return l._compile(W)}catch(B){if(B instanceof y8)return w(B);throw B}function w(B){var q=B.missingSchema;if(X(q))throw Error("Schema "+q+" is loaded but "+B.missingRef+" cannot be resolved");var $=l._loadingSchemas[q];if(!$)$=l._loadingSchemas[q]=l._opts.loadSchema(q),$.then(D,D);return $.then(function(z){if(!X(q))return Q(z).then(function(){if(!X(q))l.addSchema(z,q,void 0,v)})}).then(function(){return P(W)});function D(){delete l._loadingSchemas[q]}function X(z){return l._refs[z]||l._schemas[z]}}}}});var PQ=i((F6,QQ)=>{QQ.exports=function(v,h,l){var r=" ",Q=v.level,P=v.dataLevel,W=v.schema[h],w=v.schemaPath+v.util.getProperty(h),B=v.errSchemaPath+"/"+h,q=!v.opts.allErrors,$,D="data"+(P||""),X="valid"+Q,z="errs__"+Q,H=v.opts.$data&&W&&W.$data,E;if(H)r+=" var schema"+Q+" = "+v.util.getData(W.$data,P,v.dataPathArr)+"; ",E="schema"+Q;else E=W;var O=this,U="definition"+Q,N=O.definition,V="",j,R,x,Z,y;if(H&&N.$data){y="keywordValidate"+Q;var T=N.validateSchema;r+=" var "+U+" = RULES.custom['"+h+"'].definition; var "+y+" = "+U+".validate;"}else{if(Z=v.useCustomRule(O,W,v.schema,v),!Z)return;E="validate.schema"+w,y=Z.code,j=N.compile,R=N.inline,x=N.macro}var C=y+".errors",a="i"+Q,F="ruleErr"+Q,S=N.async;if(S&&!v.async)throw Error("async keyword in sync schema");if(!(R||x))r+=""+C+" = null;";if(r+="var "+z+" = errors;var "+X+";",H&&N.$data){if(V+="}",r+=" if ("+E+" === undefined) { "+X+" = true; } else { ",T)V+="}",r+=" "+X+" = "+U+".validateSchema("+E+"); if ("+X+") { "}if(R)if(N.statements)r+=" "+Z.validate+" ";else r+=" "+X+" = "+Z.validate+"; ";else if(x){var I=v.util.copy(v),V="";I.level++;var Jv="valid"+I.level;I.schema=Z.validate,I.schemaPath="";var s=v.compositeRule;v.compositeRule=I.compositeRule=!0;var fv=v.validate(I).replace(/validate\.schema/g,y);v.compositeRule=I.compositeRule=s,r+=" "+fv}else{var t=t||[];if(t.push(r),r="",r+="  "+y+".call( ",v.opts.passContext)r+="this";else r+="self";if(j||N.schema===!1)r+=" , "+D+" ";else r+=" , "+E+" , "+D+" , validate.schema"+v.schemaPath+" ";if(r+=" , (dataPath || '')",v.errorPath!='""')r+=" + "+v.errorPath;var m=P?"data"+(P-1||""):"parentData",Mv=P?v.dataPathArr[P]:"parentDataProperty";r+=" , "+m+" , "+Mv+" , rootData )  ";var Av=r;if(r=t.pop(),N.errors===!1){if(r+=" "+X+" = ",S)r+="await ";r+=""+Av+"; "}else if(S)C="customErrors"+Q,r+=" var "+C+" = null; try { "+X+" = await "+Av+"; } catch (e) { "+X+" = false; if (e instanceof ValidationError) "+C+" = e.errors; else throw e; } ";else r+=" "+C+" = null; "+X+" = "+Av+"; "}if(N.modifying)r+=" if ("+m+") "+D+" = "+m+"["+Mv+"];";if(r+=""+V,N.valid){if(q)r+=" if (true) { "}else{if(r+=" if ( ",N.valid===void 0)if(r+=" !",x)r+=""+Jv;else r+=""+X;else r+=" "+!N.valid+" ";r+=") { ",$=O.keyword;var t=t||[];t.push(r),r="";var t=t||[];if(t.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+($||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { keyword: '"+O.keyword+"' } ",v.opts.messages!==!1)r+=` , message: 'should pass "`+O.keyword+`" keyword validation' `;if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+D+" ";r+=" } "}else r+=" {} ";var yv=r;if(r=t.pop(),!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(["+yv+"]); ";else r+=" validate.errors = ["+yv+"]; return false; ";else r+=" var err = "+yv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var lv=r;if(r=t.pop(),R)if(N.errors){if(N.errors!="full"){if(r+="  for (var "+a+"="+z+"; "+a+"<errors; "+a+"++) { var "+F+" = vErrors["+a+"]; if ("+F+".dataPath === undefined) "+F+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+F+".schemaPath === undefined) { "+F+'.schemaPath = "'+B+'"; } ',v.opts.verbose)r+=" "+F+".schema = "+E+"; "+F+".data = "+D+"; ";r+=" } "}}else if(N.errors===!1)r+=" "+lv+" ";else{if(r+=" if ("+z+" == errors) { "+lv+" } else {  for (var "+a+"="+z+"; "+a+"<errors; "+a+"++) { var "+F+" = vErrors["+a+"]; if ("+F+".dataPath === undefined) "+F+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+F+".schemaPath === undefined) { "+F+'.schemaPath = "'+B+'"; } ',v.opts.verbose)r+=" "+F+".schema = "+E+"; "+F+".data = "+D+"; ";r+=" } } "}else if(x){if(r+="   var err =   ",v.createErrors!==!1){if(r+=" { keyword: '"+($||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { keyword: '"+O.keyword+"' } ",v.opts.messages!==!1)r+=` , message: 'should pass "`+O.keyword+`" keyword validation' `;if(v.opts.verbose)r+=" , schema: validate.schema"+w+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+D+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&q)if(v.async)r+=" throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; return false; "}else if(N.errors===!1)r+=" "+lv+" ";else{if(r+=" if (Array.isArray("+C+")) { if (vErrors === null) vErrors = "+C+"; else vErrors = vErrors.concat("+C+"); errors = vErrors.length;  for (var "+a+"="+z+"; "+a+"<errors; "+a+"++) { var "+F+" = vErrors["+a+"]; if ("+F+".dataPath === undefined) "+F+".dataPath = (dataPath || '') + "+v.errorPath+";  "+F+'.schemaPath = "'+B+'";  ',v.opts.verbose)r+=" "+F+".schema = "+E+"; "+F+".data = "+D+"; ";r+=" } } else { "+lv+" } "}if(r+=" } ",q)r+=" else { "}return r}});var Mh=i((j6,S8)=>{S8.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var wQ=i((y6,JQ)=>{var WQ=Mh();JQ.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:WQ.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:WQ.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var YQ=i((S6,XQ)=>{var b8=/^[a-z_$][a-z0-9_$-]*$/i,R8=PQ(),_8=wQ();XQ.exports={add:k8,get:a8,remove:I8,validate:Dh};function k8(f,v){var h=this.RULES;if(h.keywords[f])throw Error("Keyword "+f+" is already defined");if(!b8.test(f))throw Error("Keyword "+f+" is not a valid identifier");if(v){this.validateKeyword(v,!0);var l=v.type;if(Array.isArray(l))for(var r=0;r<l.length;r++)P(f,l[r],v);else P(f,l,v);var Q=v.metaSchema;if(Q){if(v.$data&&this._opts.$data)Q={anyOf:[Q,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]};v.validateSchema=this.compile(Q,!0)}}h.keywords[f]=h.all[f]=!0;function P(W,w,B){var q;for(var $=0;$<h.length;$++){var D=h[$];if(D.type==w){q=D;break}}if(!q)q={type:w,rules:[]},h.push(q);var X={keyword:W,definition:B,custom:!0,code:R8,implements:B.implements};q.rules.push(X),h.custom[W]=X}return this}function a8(f){var v=this.RULES.custom[f];return v?v.definition:this.RULES.keywords[f]||!1}function I8(f){var v=this.RULES;delete v.keywords[f],delete v.all[f],delete v.custom[f];for(var h=0;h<v.length;h++){var l=v[h].rules;for(var r=0;r<l.length;r++)if(l[r].keyword==f){l.splice(r,1);break}}return this}function Dh(f,v){Dh.errors=null;var h=this._validateKeyword=this._validateKeyword||this.compile(_8,!0);if(h(f))return!0;if(Dh.errors=h.errors,v)throw Error("custom keyword definition is invalid: "+this.errorsText(h.errors));else return!1}});var BQ=i((b6,C8)=>{C8.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var LQ=i((R6,KQ)=>{var qQ=nl(),Cf=B1(),Z8=il(),zQ=lh(),T8=Xh(),u8=Q0(),x8=s0(),EQ=fQ(),$Q=If();KQ.exports=Hv;Hv.prototype.validate=n8;Hv.prototype.compile=c8;Hv.prototype.addSchema=i8;Hv.prototype.addMetaSchema=p8;Hv.prototype.validateSchema=d8;Hv.prototype.getSchema=t8;Hv.prototype.removeSchema=e8;Hv.prototype.addFormat=WJ;Hv.prototype.errorsText=PJ;Hv.prototype._addSchema=vJ;Hv.prototype._compile=fJ;Hv.prototype.compileAsync=lQ();var K1=YQ();Hv.prototype.addKeyword=K1.add;Hv.prototype.getKeyword=K1.get;Hv.prototype.removeKeyword=K1.remove;Hv.prototype.validateKeyword=K1.validate;var MQ=G1();Hv.ValidationError=MQ.Validation;Hv.MissingRefError=MQ.MissingRef;Hv.$dataMetaSchema=EQ;var H1="http://json-schema.org/draft-07/schema",GQ=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],m8=["/properties"];function Hv(f){if(!(this instanceof Hv))return new Hv(f);if(f=this._opts=$Q.copy(f)||{},GJ(this),this._schemas={},this._refs={},this._fragments={},this._formats=u8(f.format),this._cache=f.cache||new Z8,this._loadingSchemas={},this._compilations=[],this.RULES=x8(),this._getId=rJ(f),f.loopRequired=f.loopRequired||1/0,f.errorDataPath=="property")f._errorDataPathProperty=!0;if(f.serialize===void 0)f.serialize=T8;if(this._metaOpts=BJ(this),f.formats)XJ(this);if(f.keywords)YJ(this);if(JJ(this),typeof f.meta=="object")this.addMetaSchema(f.meta);if(f.nullable)this.addKeyword("nullable",{metaSchema:{type:"boolean"}});wJ(this)}function n8(f,v){var h;if(typeof f=="string"){if(h=this.getSchema(f),!h)throw Error('no schema with key or ref "'+f+'"')}else{var l=this._addSchema(f);h=l.validate||this._compile(l)}var r=h(v);if(h.$async!==!0)this.errors=h.errors;return r}function c8(f,v){var h=this._addSchema(f,void 0,v);return h.validate||this._compile(h)}function i8(f,v,h,l){if(Array.isArray(f)){for(var r=0;r<f.length;r++)this.addSchema(f[r],void 0,h,l);return this}var Q=this._getId(f);if(Q!==void 0&&typeof Q!="string")throw Error("schema id must be string");return v=Cf.normalizeId(v||Q),HQ(this,v),this._schemas[v]=this._addSchema(f,h,l,!0),this}function p8(f,v,h){return this.addSchema(f,v,h,!0),this}function d8(f,v){var h=f.$schema;if(h!==void 0&&typeof h!="string")throw Error("$schema must be a string");if(h=h||this._opts.defaultMeta||o8(this),!h)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var l=this.validate(h,f);if(!l&&v){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw Error(r)}return l}function o8(f){var v=f._opts.meta;return f._opts.defaultMeta=typeof v=="object"?f._getId(v)||v:f.getSchema(H1)?H1:void 0,f._opts.defaultMeta}function t8(f){var v=DQ(this,f);switch(typeof v){case"object":return v.validate||this._compile(v);case"string":return this.getSchema(v);case"undefined":return s8(this,f)}}function s8(f,v){var h=Cf.schema.call(f,{schema:{}},v);if(h){var{schema:l,root:r,baseId:Q}=h,P=qQ.call(f,l,r,void 0,Q);return f._fragments[v]=new zQ({ref:v,fragment:!0,schema:l,root:r,baseId:Q,validate:P}),P}}function DQ(f,v){return v=Cf.normalizeId(v),f._schemas[v]||f._refs[v]||f._fragments[v]}function e8(f){if(f instanceof RegExp)return D1(this,this._schemas,f),D1(this,this._refs,f),this;switch(typeof f){case"undefined":return D1(this,this._schemas),D1(this,this._refs),this._cache.clear(),this;case"string":var v=DQ(this,f);if(v)this._cache.del(v.cacheKey);return delete this._schemas[f],delete this._refs[f],this;case"object":var h=this._opts.serialize,l=h?h(f):f;this._cache.del(l);var r=this._getId(f);if(r)r=Cf.normalizeId(r),delete this._schemas[r],delete this._refs[r]}return this}function D1(f,v,h){for(var l in v){var r=v[l];if(!r.meta&&(!h||h.test(l)))f._cache.del(r.cacheKey),delete v[l]}}function vJ(f,v,h,l){if(typeof f!="object"&&typeof f!="boolean")throw Error("schema should be object or boolean");var r=this._opts.serialize,Q=r?r(f):f,P=this._cache.get(Q);if(P)return P;l=l||this._opts.addUsedSchema!==!1;var W=Cf.normalizeId(this._getId(f));if(W&&l)HQ(this,W);var w=this._opts.validateSchema!==!1&&!v,B;if(w&&!(B=W&&W==Cf.normalizeId(f.$schema)))this.validateSchema(f,!0);var q=Cf.ids.call(this,f),$=new zQ({id:W,schema:f,localRefs:q,cacheKey:Q,meta:h});if(W[0]!="#"&&l)this._refs[W]=$;if(this._cache.put(Q,$),w&&B)this.validateSchema(f,!0);return $}function fJ(f,v){if(f.compiling){if(f.validate=r,r.schema=f.schema,r.errors=null,r.root=v?v:r,f.schema.$async===!0)r.$async=!0;return r}f.compiling=!0;var h;if(f.meta)h=this._opts,this._opts=this._metaOpts;var l;try{l=qQ.call(this,f.schema,v,f.localRefs)}catch(Q){throw delete f.validate,Q}finally{if(f.compiling=!1,f.meta)this._opts=h}return f.validate=l,f.refs=l.refs,f.refVal=l.refVal,f.root=l.root,l;function r(){var Q=f.validate,P=Q.apply(this,arguments);return r.errors=Q.errors,P}}function rJ(f){switch(f.schemaId){case"auto":return QJ;case"id":return hJ;default:return lJ}}function hJ(f){if(f.$id)this.logger.warn("schema $id ignored",f.$id);return f.id}function lJ(f){if(f.id)this.logger.warn("schema id ignored",f.id);return f.$id}function QJ(f){if(f.$id&&f.id&&f.$id!=f.id)throw Error("schema $id is different from id");return f.$id||f.id}function PJ(f,v){if(f=f||this.errors,!f)return"No errors";v=v||{};var h=v.separator===void 0?", ":v.separator,l=v.dataVar===void 0?"data":v.dataVar,r="";for(var Q=0;Q<f.length;Q++){var P=f[Q];if(P)r+=l+P.dataPath+" "+P.message+h}return r.slice(0,-h.length)}function WJ(f,v){if(typeof v=="string")v=new RegExp(v);return this._formats[f]=v,this}function JJ(f){var v;if(f._opts.$data)v=BQ(),f.addMetaSchema(v,v.$id,!0);if(f._opts.meta===!1)return;var h=Mh();if(f._opts.$data)h=EQ(h,m8);f.addMetaSchema(h,H1,!0),f._refs["http://json-schema.org/schema"]=H1}function wJ(f){var v=f._opts.schemas;if(!v)return;if(Array.isArray(v))f.addSchema(v);else for(var h in v)f.addSchema(v[h],h)}function XJ(f){for(var v in f._opts.formats){var h=f._opts.formats[v];f.addFormat(v,h)}}function YJ(f){for(var v in f._opts.keywords){var h=f._opts.keywords[v];f.addKeyword(v,h)}}function HQ(f,v){if(f._schemas[v]||f._refs[v])throw Error('schema with key or id "'+v+'" already exists')}function BJ(f){var v=$Q.copy(f._opts);for(var h=0;h<GQ.length;h++)delete v[GQ[h]];return v}function GJ(f){var v=f._opts.logger;if(v===!1)f.logger={log:Hh,warn:Hh,error:Hh};else{if(v===void 0)v=console;if(!(typeof v=="object"&&v.log&&v.warn&&v.error))throw Error("logger must implement log, warn and error methods");f.logger=v}}function Hh(){}});var J={};nW(J,{void:()=>MW,util:()=>e,unknown:()=>EW,union:()=>LW,undefined:()=>GW,tuple:()=>VW,transformer:()=>_W,symbol:()=>BW,string:()=>vl,strictObject:()=>KW,setErrorMap:()=>aP,set:()=>AW,record:()=>UW,quotelessJson:()=>_P,promise:()=>RW,preprocess:()=>IW,pipeline:()=>CW,ostring:()=>ZW,optional:()=>kW,onumber:()=>TW,oboolean:()=>uW,objectUtil:()=>_1,object:()=>HW,number:()=>fl,nullable:()=>aW,null:()=>qW,never:()=>$W,nativeEnum:()=>bW,nan:()=>wW,map:()=>gW,makeIssue:()=>Mr,literal:()=>yW,lazy:()=>jW,late:()=>WW,isValid:()=>Mf,isDirty:()=>Cr,isAsync:()=>tf,isAborted:()=>Ir,intersection:()=>NW,instanceof:()=>JW,getParsedType:()=>lf,getErrorMap:()=>of,function:()=>FW,enum:()=>SW,effect:()=>_W,discriminatedUnion:()=>OW,defaultErrorMap:()=>Gf,datetimeRegex:()=>th,date:()=>YW,custom:()=>eh,coerce:()=>xW,boolean:()=>rl,bigint:()=>XW,array:()=>DW,any:()=>zW,addIssueToContext:()=>_,ZodVoid:()=>Hr,ZodUnknown:()=>Df,ZodUnion:()=>hr,ZodUndefined:()=>fr,ZodType:()=>o,ZodTuple:()=>Pf,ZodTransformer:()=>sv,ZodSymbol:()=>Dr,ZodString:()=>pv,ZodSet:()=>kf,ZodSchema:()=>o,ZodRecord:()=>Kr,ZodReadonly:()=>Xr,ZodPromise:()=>af,ZodPipeline:()=>Nr,ZodParsedType:()=>b,ZodOptional:()=>ov,ZodObject:()=>$v,ZodNumber:()=>Hf,ZodNullable:()=>zf,ZodNull:()=>rr,ZodNever:()=>Qf,ZodNativeEnum:()=>Wr,ZodNaN:()=>Or,ZodMap:()=>Lr,ZodLiteral:()=>Pr,ZodLazy:()=>Qr,ZodIssueCode:()=>g,ZodIntersection:()=>lr,ZodFunction:()=>ef,ZodFirstPartyTypeKind:()=>A,ZodError:()=>kv,ZodEnum:()=>Lf,ZodEffects:()=>sv,ZodDiscriminatedUnion:()=>Zr,ZodDefault:()=>Jr,ZodDate:()=>Rf,ZodCatch:()=>wr,ZodBranded:()=>Tr,ZodBoolean:()=>vr,ZodBigInt:()=>Kf,ZodArray:()=>dv,ZodAny:()=>_f,Schema:()=>o,ParseStatus:()=>gv,OK:()=>jv,NEVER:()=>mW,INVALID:()=>n,EMPTY_PATH:()=>IP,DIRTY:()=>bf,BRAND:()=>PW});var e;(function(f){f.assertEqual=(r)=>{};function v(r){}f.assertIs=v;function h(r){throw Error()}f.assertNever=h,f.arrayToEnum=(r)=>{let Q={};for(let P of r)Q[P]=P;return Q},f.getValidEnumValues=(r)=>{let Q=f.objectKeys(r).filter((W)=>typeof r[r[W]]!=="number"),P={};for(let W of Q)P[W]=r[W];return f.objectValues(P)},f.objectValues=(r)=>{return f.objectKeys(r).map(function(Q){return r[Q]})},f.objectKeys=typeof Object.keys==="function"?(r)=>Object.keys(r):(r)=>{let Q=[];for(let P in r)if(Object.prototype.hasOwnProperty.call(r,P))Q.push(P);return Q},f.find=(r,Q)=>{for(let P of r)if(Q(P))return P;return},f.isInteger=typeof Number.isInteger==="function"?(r)=>Number.isInteger(r):(r)=>typeof r==="number"&&Number.isFinite(r)&&Math.floor(r)===r;function l(r,Q=" | "){return r.map((P)=>typeof P==="string"?`'${P}'`:P).join(Q)}f.joinValues=l,f.jsonStringifyReplacer=(r,Q)=>{if(typeof Q==="bigint")return Q.toString();return Q}})(e||(e={}));var _1;(function(f){f.mergeShapes=(v,h)=>{return{...v,...h}}})(_1||(_1={}));var b=e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lf=(f)=>{switch(typeof f){case"undefined":return b.undefined;case"string":return b.string;case"number":return Number.isNaN(f)?b.nan:b.number;case"boolean":return b.boolean;case"function":return b.function;case"bigint":return b.bigint;case"symbol":return b.symbol;case"object":if(Array.isArray(f))return b.array;if(f===null)return b.null;if(f.then&&typeof f.then==="function"&&f.catch&&typeof f.catch==="function")return b.promise;if(typeof Map<"u"&&f instanceof Map)return b.map;if(typeof Set<"u"&&f instanceof Set)return b.set;if(typeof Date<"u"&&f instanceof Date)return b.date;return b.object;default:return b.unknown}};var g=e.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_P=(f)=>{return JSON.stringify(f,null,2).replace(/"([^"]+)":/g,"$1:")};class kv extends Error{get errors(){return this.issues}constructor(f){super();this.issues=[],this.addIssue=(h)=>{this.issues=[...this.issues,h]},this.addIssues=(h=[])=>{this.issues=[...this.issues,...h]};let v=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,v);else this.__proto__=v;this.name="ZodError",this.issues=f}format(f){let v=f||function(r){return r.message},h={_errors:[]},l=(r)=>{for(let Q of r.issues)if(Q.code==="invalid_union")Q.unionErrors.map(l);else if(Q.code==="invalid_return_type")l(Q.returnTypeError);else if(Q.code==="invalid_arguments")l(Q.argumentsError);else if(Q.path.length===0)h._errors.push(v(Q));else{let P=h,W=0;while(W<Q.path.length){let w=Q.path[W];if(W!==Q.path.length-1)P[w]=P[w]||{_errors:[]};else P[w]=P[w]||{_errors:[]},P[w]._errors.push(v(Q));P=P[w],W++}}};return l(this),h}static assert(f){if(!(f instanceof kv))throw Error(`Not a ZodError: ${f}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,e.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(f=(v)=>v.message){let v={},h=[];for(let l of this.issues)if(l.path.length>0){let r=l.path[0];v[r]=v[r]||[],v[r].push(f(l))}else h.push(f(l));return{formErrors:h,fieldErrors:v}}get formErrors(){return this.flatten()}}kv.create=(f)=>{return new kv(f)};var kP=(f,v)=>{let h;switch(f.code){case g.invalid_type:if(f.received===b.undefined)h="Required";else h=`Expected ${f.expected}, received ${f.received}`;break;case g.invalid_literal:h=`Invalid literal value, expected ${JSON.stringify(f.expected,e.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:h=`Unrecognized key(s) in object: ${e.joinValues(f.keys,", ")}`;break;case g.invalid_union:h="Invalid input";break;case g.invalid_union_discriminator:h=`Invalid discriminator value. Expected ${e.joinValues(f.options)}`;break;case g.invalid_enum_value:h=`Invalid enum value. Expected ${e.joinValues(f.options)}, received '${f.received}'`;break;case g.invalid_arguments:h="Invalid function arguments";break;case g.invalid_return_type:h="Invalid function return type";break;case g.invalid_date:h="Invalid date";break;case g.invalid_string:if(typeof f.validation==="object")if("includes"in f.validation){if(h=`Invalid input: must include "${f.validation.includes}"`,typeof f.validation.position==="number")h=`${h} at one or more positions greater than or equal to ${f.validation.position}`}else if("startsWith"in f.validation)h=`Invalid input: must start with "${f.validation.startsWith}"`;else if("endsWith"in f.validation)h=`Invalid input: must end with "${f.validation.endsWith}"`;else e.assertNever(f.validation);else if(f.validation!=="regex")h=`Invalid ${f.validation}`;else h="Invalid";break;case g.too_small:if(f.type==="array")h=`Array must contain ${f.exact?"exactly":f.inclusive?"at least":"more than"} ${f.minimum} element(s)`;else if(f.type==="string")h=`String must contain ${f.exact?"exactly":f.inclusive?"at least":"over"} ${f.minimum} character(s)`;else if(f.type==="number")h=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="bigint")h=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="date")h=`Date must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(f.minimum))}`;else h="Invalid input";break;case g.too_big:if(f.type==="array")h=`Array must contain ${f.exact?"exactly":f.inclusive?"at most":"less than"} ${f.maximum} element(s)`;else if(f.type==="string")h=`String must contain ${f.exact?"exactly":f.inclusive?"at most":"under"} ${f.maximum} character(s)`;else if(f.type==="number")h=`Number must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="bigint")h=`BigInt must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="date")h=`Date must be ${f.exact?"exactly":f.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(f.maximum))}`;else h="Invalid input";break;case g.custom:h="Invalid input";break;case g.invalid_intersection_types:h="Intersection results could not be merged";break;case g.not_multiple_of:h=`Number must be a multiple of ${f.multipleOf}`;break;case g.not_finite:h="Number must be finite";break;default:h=v.defaultError,e.assertNever(f)}return{message:h}},Gf=kP;var ch=Gf;function aP(f){ch=f}function of(){return ch}var Mr=(f)=>{let{data:v,path:h,errorMaps:l,issueData:r}=f,Q=[...h,...r.path||[]],P={...r,path:Q};if(r.message!==void 0)return{...r,path:Q,message:r.message};let W="",w=l.filter((B)=>!!B).slice().reverse();for(let B of w)W=B(P,{data:v,defaultError:W}).message;return{...r,path:Q,message:W}},IP=[];function _(f,v){let h=of(),l=Mr({issueData:v,data:f.data,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,h,h===Gf?void 0:Gf].filter((r)=>!!r)});f.common.issues.push(l)}class gv{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(f,v){let h=[];for(let l of v){if(l.status==="aborted")return n;if(l.status==="dirty")f.dirty();h.push(l.value)}return{status:f.value,value:h}}static async mergeObjectAsync(f,v){let h=[];for(let l of v){let r=await l.key,Q=await l.value;h.push({key:r,value:Q})}return gv.mergeObjectSync(f,h)}static mergeObjectSync(f,v){let h={};for(let l of v){let{key:r,value:Q}=l;if(r.status==="aborted")return n;if(Q.status==="aborted")return n;if(r.status==="dirty")f.dirty();if(Q.status==="dirty")f.dirty();if(r.value!=="__proto__"&&(typeof Q.value<"u"||l.alwaysSet))h[r.value]=Q.value}return{status:f.value,value:h}}}var n=Object.freeze({status:"aborted"}),bf=(f)=>({status:"dirty",value:f}),jv=(f)=>({status:"valid",value:f}),Ir=(f)=>f.status==="aborted",Cr=(f)=>f.status==="dirty",Mf=(f)=>f.status==="valid",tf=(f)=>typeof Promise<"u"&&f instanceof Promise;var u;(function(f){f.errToObj=(v)=>typeof v==="string"?{message:v}:v||{},f.toString=(v)=>typeof v==="string"?v:v?.message})(u||(u={}));class tv{constructor(f,v,h,l){this._cachedPath=[],this.parent=f,this.data=v,this._path=h,this._key=l}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var ih=(f,v)=>{if(Mf(v))return{success:!0,data:v.value};else{if(!f.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let h=new kv(f.common.issues);return this._error=h,this._error}}}};function p(f){if(!f)return{};let{errorMap:v,invalid_type_error:h,required_error:l,description:r}=f;if(v&&(h||l))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:r};return{errorMap:(P,W)=>{let{message:w}=f;if(P.code==="invalid_enum_value")return{message:w??W.defaultError};if(typeof W.data>"u")return{message:w??l??W.defaultError};if(P.code!=="invalid_type")return{message:W.defaultError};return{message:w??h??W.defaultError}},description:r}}class o{get description(){return this._def.description}_getType(f){return lf(f.data)}_getOrReturnCtx(f,v){return v||{common:f.parent.common,data:f.data,parsedType:lf(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}_processInputParams(f){return{status:new gv,ctx:{common:f.parent.common,data:f.data,parsedType:lf(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}}_parseSync(f){let v=this._parse(f);if(tf(v))throw Error("Synchronous parse encountered promise.");return v}_parseAsync(f){let v=this._parse(f);return Promise.resolve(v)}parse(f,v){let h=this.safeParse(f,v);if(h.success)return h.data;throw h.error}safeParse(f,v){let h={common:{issues:[],async:v?.async??!1,contextualErrorMap:v?.errorMap},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:lf(f)},l=this._parseSync({data:f,path:h.path,parent:h});return ih(h,l)}"~validate"(f){let v={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:lf(f)};if(!this["~standard"].async)try{let h=this._parseSync({data:f,path:[],parent:v});return Mf(h)?{value:h.value}:{issues:v.common.issues}}catch(h){if(h?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;v.common={issues:[],async:!0}}return this._parseAsync({data:f,path:[],parent:v}).then((h)=>Mf(h)?{value:h.value}:{issues:v.common.issues})}async parseAsync(f,v){let h=await this.safeParseAsync(f,v);if(h.success)return h.data;throw h.error}async safeParseAsync(f,v){let h={common:{issues:[],contextualErrorMap:v?.errorMap,async:!0},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:lf(f)},l=this._parse({data:f,path:h.path,parent:h}),r=await(tf(l)?l:Promise.resolve(l));return ih(h,r)}refine(f,v){let h=(l)=>{if(typeof v==="string"||typeof v>"u")return{message:v};else if(typeof v==="function")return v(l);else return v};return this._refinement((l,r)=>{let Q=f(l),P=()=>r.addIssue({code:g.custom,...h(l)});if(typeof Promise<"u"&&Q instanceof Promise)return Q.then((W)=>{if(!W)return P(),!1;else return!0});if(!Q)return P(),!1;else return!0})}refinement(f,v){return this._refinement((h,l)=>{if(!f(h))return l.addIssue(typeof v==="function"?v(h,l):v),!1;else return!0})}_refinement(f){return new sv({schema:this,typeName:A.ZodEffects,effect:{type:"refinement",refinement:f}})}superRefine(f){return this._refinement(f)}constructor(f){this.spa=this.safeParseAsync,this._def=f,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(v)=>this["~validate"](v)}}optional(){return ov.create(this,this._def)}nullable(){return zf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return dv.create(this)}promise(){return af.create(this,this._def)}or(f){return hr.create([this,f],this._def)}and(f){return lr.create(this,f,this._def)}transform(f){return new sv({...p(this._def),schema:this,typeName:A.ZodEffects,effect:{type:"transform",transform:f}})}default(f){let v=typeof f==="function"?f:()=>f;return new Jr({...p(this._def),innerType:this,defaultValue:v,typeName:A.ZodDefault})}brand(){return new Tr({typeName:A.ZodBranded,type:this,...p(this._def)})}catch(f){let v=typeof f==="function"?f:()=>f;return new wr({...p(this._def),innerType:this,catchValue:v,typeName:A.ZodCatch})}describe(f){return new this.constructor({...this._def,description:f})}pipe(f){return Nr.create(this,f)}readonly(){return Xr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var CP=/^c[^\s-]{8,}$/i,ZP=/^[0-9a-z]+$/,TP=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uP=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,xP=/^[a-z0-9_-]{21}$/i,mP=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,nP=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,cP=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,iP="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",k1,pP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,dP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,oP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,tP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sP=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,eP=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dh="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vW=new RegExp(`^${dh}$`);function oh(f){let v="[0-5]\\d";if(f.precision)v=`${v}\\.\\d{${f.precision}}`;else if(f.precision==null)v=`${v}(\\.\\d+)?`;let h=f.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${v})${h}`}function fW(f){return new RegExp(`^${oh(f)}$`)}function th(f){let v=`${dh}T${oh(f)}`,h=[];if(h.push(f.local?"Z?":"Z"),f.offset)h.push("([+-]\\d{2}:?\\d{2})");return v=`${v}(${h.join("|")})`,new RegExp(`^${v}$`)}function rW(f,v){if((v==="v4"||!v)&&pP.test(f))return!0;if((v==="v6"||!v)&&oP.test(f))return!0;return!1}function hW(f,v){if(!mP.test(f))return!1;try{let[h]=f.split(".");if(!h)return!1;let l=h.replace(/-/g,"+").replace(/_/g,"/").padEnd(h.length+(4-h.length%4)%4,"="),r=JSON.parse(atob(l));if(typeof r!=="object"||r===null)return!1;if("typ"in r&&r?.typ!=="JWT")return!1;if(!r.alg)return!1;if(v&&r.alg!==v)return!1;return!0}catch{return!1}}function lW(f,v){if((v==="v4"||!v)&&dP.test(f))return!0;if((v==="v6"||!v)&&tP.test(f))return!0;return!1}class pv extends o{_parse(f){if(this._def.coerce)f.data=String(f.data);if(this._getType(f)!==b.string){let r=this._getOrReturnCtx(f);return _(r,{code:g.invalid_type,expected:b.string,received:r.parsedType}),n}let h=new gv,l=void 0;for(let r of this._def.checks)if(r.kind==="min"){if(f.data.length<r.value)l=this._getOrReturnCtx(f,l),_(l,{code:g.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),h.dirty()}else if(r.kind==="max"){if(f.data.length>r.value)l=this._getOrReturnCtx(f,l),_(l,{code:g.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),h.dirty()}else if(r.kind==="length"){let Q=f.data.length>r.value,P=f.data.length<r.value;if(Q||P){if(l=this._getOrReturnCtx(f,l),Q)_(l,{code:g.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message});else if(P)_(l,{code:g.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message});h.dirty()}}else if(r.kind==="email"){if(!cP.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{validation:"email",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="emoji"){if(!k1)k1=new RegExp(iP,"u");if(!k1.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{validation:"emoji",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="uuid"){if(!uP.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{validation:"uuid",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="nanoid"){if(!xP.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{validation:"nanoid",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="cuid"){if(!CP.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{validation:"cuid",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="cuid2"){if(!ZP.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{validation:"cuid2",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="ulid"){if(!TP.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{validation:"ulid",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="url")try{new URL(f.data)}catch{l=this._getOrReturnCtx(f,l),_(l,{validation:"url",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="regex"){if(r.regex.lastIndex=0,!r.regex.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{validation:"regex",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="trim")f.data=f.data.trim();else if(r.kind==="includes"){if(!f.data.includes(r.value,r.position))l=this._getOrReturnCtx(f,l),_(l,{code:g.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),h.dirty()}else if(r.kind==="toLowerCase")f.data=f.data.toLowerCase();else if(r.kind==="toUpperCase")f.data=f.data.toUpperCase();else if(r.kind==="startsWith"){if(!f.data.startsWith(r.value))l=this._getOrReturnCtx(f,l),_(l,{code:g.invalid_string,validation:{startsWith:r.value},message:r.message}),h.dirty()}else if(r.kind==="endsWith"){if(!f.data.endsWith(r.value))l=this._getOrReturnCtx(f,l),_(l,{code:g.invalid_string,validation:{endsWith:r.value},message:r.message}),h.dirty()}else if(r.kind==="datetime"){if(!th(r).test(f.data))l=this._getOrReturnCtx(f,l),_(l,{code:g.invalid_string,validation:"datetime",message:r.message}),h.dirty()}else if(r.kind==="date"){if(!vW.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{code:g.invalid_string,validation:"date",message:r.message}),h.dirty()}else if(r.kind==="time"){if(!fW(r).test(f.data))l=this._getOrReturnCtx(f,l),_(l,{code:g.invalid_string,validation:"time",message:r.message}),h.dirty()}else if(r.kind==="duration"){if(!nP.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{validation:"duration",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="ip"){if(!rW(f.data,r.version))l=this._getOrReturnCtx(f,l),_(l,{validation:"ip",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="jwt"){if(!hW(f.data,r.alg))l=this._getOrReturnCtx(f,l),_(l,{validation:"jwt",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="cidr"){if(!lW(f.data,r.version))l=this._getOrReturnCtx(f,l),_(l,{validation:"cidr",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="base64"){if(!sP.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{validation:"base64",code:g.invalid_string,message:r.message}),h.dirty()}else if(r.kind==="base64url"){if(!eP.test(f.data))l=this._getOrReturnCtx(f,l),_(l,{validation:"base64url",code:g.invalid_string,message:r.message}),h.dirty()}else e.assertNever(r);return{status:h.value,value:f.data}}_regex(f,v,h){return this.refinement((l)=>f.test(l),{validation:v,code:g.invalid_string,...u.errToObj(h)})}_addCheck(f){return new pv({...this._def,checks:[...this._def.checks,f]})}email(f){return this._addCheck({kind:"email",...u.errToObj(f)})}url(f){return this._addCheck({kind:"url",...u.errToObj(f)})}emoji(f){return this._addCheck({kind:"emoji",...u.errToObj(f)})}uuid(f){return this._addCheck({kind:"uuid",...u.errToObj(f)})}nanoid(f){return this._addCheck({kind:"nanoid",...u.errToObj(f)})}cuid(f){return this._addCheck({kind:"cuid",...u.errToObj(f)})}cuid2(f){return this._addCheck({kind:"cuid2",...u.errToObj(f)})}ulid(f){return this._addCheck({kind:"ulid",...u.errToObj(f)})}base64(f){return this._addCheck({kind:"base64",...u.errToObj(f)})}base64url(f){return this._addCheck({kind:"base64url",...u.errToObj(f)})}jwt(f){return this._addCheck({kind:"jwt",...u.errToObj(f)})}ip(f){return this._addCheck({kind:"ip",...u.errToObj(f)})}cidr(f){return this._addCheck({kind:"cidr",...u.errToObj(f)})}datetime(f){if(typeof f==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:f});return this._addCheck({kind:"datetime",precision:typeof f?.precision>"u"?null:f?.precision,offset:f?.offset??!1,local:f?.local??!1,...u.errToObj(f?.message)})}date(f){return this._addCheck({kind:"date",message:f})}time(f){if(typeof f==="string")return this._addCheck({kind:"time",precision:null,message:f});return this._addCheck({kind:"time",precision:typeof f?.precision>"u"?null:f?.precision,...u.errToObj(f?.message)})}duration(f){return this._addCheck({kind:"duration",...u.errToObj(f)})}regex(f,v){return this._addCheck({kind:"regex",regex:f,...u.errToObj(v)})}includes(f,v){return this._addCheck({kind:"includes",value:f,position:v?.position,...u.errToObj(v?.message)})}startsWith(f,v){return this._addCheck({kind:"startsWith",value:f,...u.errToObj(v)})}endsWith(f,v){return this._addCheck({kind:"endsWith",value:f,...u.errToObj(v)})}min(f,v){return this._addCheck({kind:"min",value:f,...u.errToObj(v)})}max(f,v){return this._addCheck({kind:"max",value:f,...u.errToObj(v)})}length(f,v){return this._addCheck({kind:"length",value:f,...u.errToObj(v)})}nonempty(f){return this.min(1,u.errToObj(f))}trim(){return new pv({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new pv({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new pv({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((f)=>f.kind==="datetime")}get isDate(){return!!this._def.checks.find((f)=>f.kind==="date")}get isTime(){return!!this._def.checks.find((f)=>f.kind==="time")}get isDuration(){return!!this._def.checks.find((f)=>f.kind==="duration")}get isEmail(){return!!this._def.checks.find((f)=>f.kind==="email")}get isURL(){return!!this._def.checks.find((f)=>f.kind==="url")}get isEmoji(){return!!this._def.checks.find((f)=>f.kind==="emoji")}get isUUID(){return!!this._def.checks.find((f)=>f.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((f)=>f.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((f)=>f.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((f)=>f.kind==="cuid2")}get isULID(){return!!this._def.checks.find((f)=>f.kind==="ulid")}get isIP(){return!!this._def.checks.find((f)=>f.kind==="ip")}get isCIDR(){return!!this._def.checks.find((f)=>f.kind==="cidr")}get isBase64(){return!!this._def.checks.find((f)=>f.kind==="base64")}get isBase64url(){return!!this._def.checks.find((f)=>f.kind==="base64url")}get minLength(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxLength(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}pv.create=(f)=>{return new pv({checks:[],typeName:A.ZodString,coerce:f?.coerce??!1,...p(f)})};function QW(f,v){let h=(f.toString().split(".")[1]||"").length,l=(v.toString().split(".")[1]||"").length,r=h>l?h:l,Q=Number.parseInt(f.toFixed(r).replace(".","")),P=Number.parseInt(v.toFixed(r).replace(".",""));return Q%P/10**r}class Hf extends o{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(f){if(this._def.coerce)f.data=Number(f.data);if(this._getType(f)!==b.number){let r=this._getOrReturnCtx(f);return _(r,{code:g.invalid_type,expected:b.number,received:r.parsedType}),n}let h=void 0,l=new gv;for(let r of this._def.checks)if(r.kind==="int"){if(!e.isInteger(f.data))h=this._getOrReturnCtx(f,h),_(h,{code:g.invalid_type,expected:"integer",received:"float",message:r.message}),l.dirty()}else if(r.kind==="min"){if(r.inclusive?f.data<r.value:f.data<=r.value)h=this._getOrReturnCtx(f,h),_(h,{code:g.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),l.dirty()}else if(r.kind==="max"){if(r.inclusive?f.data>r.value:f.data>=r.value)h=this._getOrReturnCtx(f,h),_(h,{code:g.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),l.dirty()}else if(r.kind==="multipleOf"){if(QW(f.data,r.value)!==0)h=this._getOrReturnCtx(f,h),_(h,{code:g.not_multiple_of,multipleOf:r.value,message:r.message}),l.dirty()}else if(r.kind==="finite"){if(!Number.isFinite(f.data))h=this._getOrReturnCtx(f,h),_(h,{code:g.not_finite,message:r.message}),l.dirty()}else e.assertNever(r);return{status:l.value,value:f.data}}gte(f,v){return this.setLimit("min",f,!0,u.toString(v))}gt(f,v){return this.setLimit("min",f,!1,u.toString(v))}lte(f,v){return this.setLimit("max",f,!0,u.toString(v))}lt(f,v){return this.setLimit("max",f,!1,u.toString(v))}setLimit(f,v,h,l){return new Hf({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:h,message:u.toString(l)}]})}_addCheck(f){return new Hf({...this._def,checks:[...this._def.checks,f]})}int(f){return this._addCheck({kind:"int",message:u.toString(f)})}positive(f){return this._addCheck({kind:"min",value:0,inclusive:!1,message:u.toString(f)})}negative(f){return this._addCheck({kind:"max",value:0,inclusive:!1,message:u.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:0,inclusive:!0,message:u.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:0,inclusive:!0,message:u.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:u.toString(v)})}finite(f){return this._addCheck({kind:"finite",message:u.toString(f)})}safe(f){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:u.toString(f)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:u.toString(f)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}get isInt(){return!!this._def.checks.find((f)=>f.kind==="int"||f.kind==="multipleOf"&&e.isInteger(f.value))}get isFinite(){let f=null,v=null;for(let h of this._def.checks)if(h.kind==="finite"||h.kind==="int"||h.kind==="multipleOf")return!0;else if(h.kind==="min"){if(v===null||h.value>v)v=h.value}else if(h.kind==="max"){if(f===null||h.value<f)f=h.value}return Number.isFinite(v)&&Number.isFinite(f)}}Hf.create=(f)=>{return new Hf({checks:[],typeName:A.ZodNumber,coerce:f?.coerce||!1,...p(f)})};class Kf extends o{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(f){if(this._def.coerce)try{f.data=BigInt(f.data)}catch{return this._getInvalidInput(f)}if(this._getType(f)!==b.bigint)return this._getInvalidInput(f);let h=void 0,l=new gv;for(let r of this._def.checks)if(r.kind==="min"){if(r.inclusive?f.data<r.value:f.data<=r.value)h=this._getOrReturnCtx(f,h),_(h,{code:g.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),l.dirty()}else if(r.kind==="max"){if(r.inclusive?f.data>r.value:f.data>=r.value)h=this._getOrReturnCtx(f,h),_(h,{code:g.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),l.dirty()}else if(r.kind==="multipleOf"){if(f.data%r.value!==BigInt(0))h=this._getOrReturnCtx(f,h),_(h,{code:g.not_multiple_of,multipleOf:r.value,message:r.message}),l.dirty()}else e.assertNever(r);return{status:l.value,value:f.data}}_getInvalidInput(f){let v=this._getOrReturnCtx(f);return _(v,{code:g.invalid_type,expected:b.bigint,received:v.parsedType}),n}gte(f,v){return this.setLimit("min",f,!0,u.toString(v))}gt(f,v){return this.setLimit("min",f,!1,u.toString(v))}lte(f,v){return this.setLimit("max",f,!0,u.toString(v))}lt(f,v){return this.setLimit("max",f,!1,u.toString(v))}setLimit(f,v,h,l){return new Kf({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:h,message:u.toString(l)}]})}_addCheck(f){return new Kf({...this._def,checks:[...this._def.checks,f]})}positive(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:u.toString(f)})}negative(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:u.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:u.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:u.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:u.toString(v)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}Kf.create=(f)=>{return new Kf({checks:[],typeName:A.ZodBigInt,coerce:f?.coerce??!1,...p(f)})};class vr extends o{_parse(f){if(this._def.coerce)f.data=Boolean(f.data);if(this._getType(f)!==b.boolean){let h=this._getOrReturnCtx(f);return _(h,{code:g.invalid_type,expected:b.boolean,received:h.parsedType}),n}return jv(f.data)}}vr.create=(f)=>{return new vr({typeName:A.ZodBoolean,coerce:f?.coerce||!1,...p(f)})};class Rf extends o{_parse(f){if(this._def.coerce)f.data=new Date(f.data);if(this._getType(f)!==b.date){let r=this._getOrReturnCtx(f);return _(r,{code:g.invalid_type,expected:b.date,received:r.parsedType}),n}if(Number.isNaN(f.data.getTime())){let r=this._getOrReturnCtx(f);return _(r,{code:g.invalid_date}),n}let h=new gv,l=void 0;for(let r of this._def.checks)if(r.kind==="min"){if(f.data.getTime()<r.value)l=this._getOrReturnCtx(f,l),_(l,{code:g.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),h.dirty()}else if(r.kind==="max"){if(f.data.getTime()>r.value)l=this._getOrReturnCtx(f,l),_(l,{code:g.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),h.dirty()}else e.assertNever(r);return{status:h.value,value:new Date(f.data.getTime())}}_addCheck(f){return new Rf({...this._def,checks:[...this._def.checks,f]})}min(f,v){return this._addCheck({kind:"min",value:f.getTime(),message:u.toString(v)})}max(f,v){return this._addCheck({kind:"max",value:f.getTime(),message:u.toString(v)})}get minDate(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f!=null?new Date(f):null}get maxDate(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f!=null?new Date(f):null}}Rf.create=(f)=>{return new Rf({checks:[],coerce:f?.coerce||!1,typeName:A.ZodDate,...p(f)})};class Dr extends o{_parse(f){if(this._getType(f)!==b.symbol){let h=this._getOrReturnCtx(f);return _(h,{code:g.invalid_type,expected:b.symbol,received:h.parsedType}),n}return jv(f.data)}}Dr.create=(f)=>{return new Dr({typeName:A.ZodSymbol,...p(f)})};class fr extends o{_parse(f){if(this._getType(f)!==b.undefined){let h=this._getOrReturnCtx(f);return _(h,{code:g.invalid_type,expected:b.undefined,received:h.parsedType}),n}return jv(f.data)}}fr.create=(f)=>{return new fr({typeName:A.ZodUndefined,...p(f)})};class rr extends o{_parse(f){if(this._getType(f)!==b.null){let h=this._getOrReturnCtx(f);return _(h,{code:g.invalid_type,expected:b.null,received:h.parsedType}),n}return jv(f.data)}}rr.create=(f)=>{return new rr({typeName:A.ZodNull,...p(f)})};class _f extends o{constructor(){super(...arguments);this._any=!0}_parse(f){return jv(f.data)}}_f.create=(f)=>{return new _f({typeName:A.ZodAny,...p(f)})};class Df extends o{constructor(){super(...arguments);this._unknown=!0}_parse(f){return jv(f.data)}}Df.create=(f)=>{return new Df({typeName:A.ZodUnknown,...p(f)})};class Qf extends o{_parse(f){let v=this._getOrReturnCtx(f);return _(v,{code:g.invalid_type,expected:b.never,received:v.parsedType}),n}}Qf.create=(f)=>{return new Qf({typeName:A.ZodNever,...p(f)})};class Hr extends o{_parse(f){if(this._getType(f)!==b.undefined){let h=this._getOrReturnCtx(f);return _(h,{code:g.invalid_type,expected:b.void,received:h.parsedType}),n}return jv(f.data)}}Hr.create=(f)=>{return new Hr({typeName:A.ZodVoid,...p(f)})};class dv extends o{_parse(f){let{ctx:v,status:h}=this._processInputParams(f),l=this._def;if(v.parsedType!==b.array)return _(v,{code:g.invalid_type,expected:b.array,received:v.parsedType}),n;if(l.exactLength!==null){let Q=v.data.length>l.exactLength.value,P=v.data.length<l.exactLength.value;if(Q||P)_(v,{code:Q?g.too_big:g.too_small,minimum:P?l.exactLength.value:void 0,maximum:Q?l.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:l.exactLength.message}),h.dirty()}if(l.minLength!==null){if(v.data.length<l.minLength.value)_(v,{code:g.too_small,minimum:l.minLength.value,type:"array",inclusive:!0,exact:!1,message:l.minLength.message}),h.dirty()}if(l.maxLength!==null){if(v.data.length>l.maxLength.value)_(v,{code:g.too_big,maximum:l.maxLength.value,type:"array",inclusive:!0,exact:!1,message:l.maxLength.message}),h.dirty()}if(v.common.async)return Promise.all([...v.data].map((Q,P)=>{return l.type._parseAsync(new tv(v,Q,v.path,P))})).then((Q)=>{return gv.mergeArray(h,Q)});let r=[...v.data].map((Q,P)=>{return l.type._parseSync(new tv(v,Q,v.path,P))});return gv.mergeArray(h,r)}get element(){return this._def.type}min(f,v){return new dv({...this._def,minLength:{value:f,message:u.toString(v)}})}max(f,v){return new dv({...this._def,maxLength:{value:f,message:u.toString(v)}})}length(f,v){return new dv({...this._def,exactLength:{value:f,message:u.toString(v)}})}nonempty(f){return this.min(1,f)}}dv.create=(f,v)=>{return new dv({type:f,minLength:null,maxLength:null,exactLength:null,typeName:A.ZodArray,...p(v)})};function sf(f){if(f instanceof $v){let v={};for(let h in f.shape){let l=f.shape[h];v[h]=ov.create(sf(l))}return new $v({...f._def,shape:()=>v})}else if(f instanceof dv)return new dv({...f._def,type:sf(f.element)});else if(f instanceof ov)return ov.create(sf(f.unwrap()));else if(f instanceof zf)return zf.create(sf(f.unwrap()));else if(f instanceof Pf)return Pf.create(f.items.map((v)=>sf(v)));else return f}class $v extends o{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let f=this._def.shape(),v=e.objectKeys(f);return this._cached={shape:f,keys:v},this._cached}_parse(f){if(this._getType(f)!==b.object){let w=this._getOrReturnCtx(f);return _(w,{code:g.invalid_type,expected:b.object,received:w.parsedType}),n}let{status:h,ctx:l}=this._processInputParams(f),{shape:r,keys:Q}=this._getCached(),P=[];if(!(this._def.catchall instanceof Qf&&this._def.unknownKeys==="strip")){for(let w in l.data)if(!Q.includes(w))P.push(w)}let W=[];for(let w of Q){let B=r[w],q=l.data[w];W.push({key:{status:"valid",value:w},value:B._parse(new tv(l,q,l.path,w)),alwaysSet:w in l.data})}if(this._def.catchall instanceof Qf){let w=this._def.unknownKeys;if(w==="passthrough")for(let B of P)W.push({key:{status:"valid",value:B},value:{status:"valid",value:l.data[B]}});else if(w==="strict"){if(P.length>0)_(l,{code:g.unrecognized_keys,keys:P}),h.dirty()}else if(w==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let w=this._def.catchall;for(let B of P){let q=l.data[B];W.push({key:{status:"valid",value:B},value:w._parse(new tv(l,q,l.path,B)),alwaysSet:B in l.data})}}if(l.common.async)return Promise.resolve().then(async()=>{let w=[];for(let B of W){let q=await B.key,$=await B.value;w.push({key:q,value:$,alwaysSet:B.alwaysSet})}return w}).then((w)=>{return gv.mergeObjectSync(h,w)});else return gv.mergeObjectSync(h,W)}get shape(){return this._def.shape()}strict(f){return u.errToObj,new $v({...this._def,unknownKeys:"strict",...f!==void 0?{errorMap:(v,h)=>{let l=this._def.errorMap?.(v,h).message??h.defaultError;if(v.code==="unrecognized_keys")return{message:u.errToObj(f).message??l};return{message:l}}}:{}})}strip(){return new $v({...this._def,unknownKeys:"strip"})}passthrough(){return new $v({...this._def,unknownKeys:"passthrough"})}extend(f){return new $v({...this._def,shape:()=>({...this._def.shape(),...f})})}merge(f){return new $v({unknownKeys:f._def.unknownKeys,catchall:f._def.catchall,shape:()=>({...this._def.shape(),...f._def.shape()}),typeName:A.ZodObject})}setKey(f,v){return this.augment({[f]:v})}catchall(f){return new $v({...this._def,catchall:f})}pick(f){let v={};for(let h of e.objectKeys(f))if(f[h]&&this.shape[h])v[h]=this.shape[h];return new $v({...this._def,shape:()=>v})}omit(f){let v={};for(let h of e.objectKeys(this.shape))if(!f[h])v[h]=this.shape[h];return new $v({...this._def,shape:()=>v})}deepPartial(){return sf(this)}partial(f){let v={};for(let h of e.objectKeys(this.shape)){let l=this.shape[h];if(f&&!f[h])v[h]=l;else v[h]=l.optional()}return new $v({...this._def,shape:()=>v})}required(f){let v={};for(let h of e.objectKeys(this.shape))if(f&&!f[h])v[h]=this.shape[h];else{let r=this.shape[h];while(r instanceof ov)r=r._def.innerType;v[h]=r}return new $v({...this._def,shape:()=>v})}keyof(){return sh(e.objectKeys(this.shape))}}$v.create=(f,v)=>{return new $v({shape:()=>f,unknownKeys:"strip",catchall:Qf.create(),typeName:A.ZodObject,...p(v)})};$v.strictCreate=(f,v)=>{return new $v({shape:()=>f,unknownKeys:"strict",catchall:Qf.create(),typeName:A.ZodObject,...p(v)})};$v.lazycreate=(f,v)=>{return new $v({shape:f,unknownKeys:"strip",catchall:Qf.create(),typeName:A.ZodObject,...p(v)})};class hr extends o{_parse(f){let{ctx:v}=this._processInputParams(f),h=this._def.options;function l(r){for(let P of r)if(P.result.status==="valid")return P.result;for(let P of r)if(P.result.status==="dirty")return v.common.issues.push(...P.ctx.common.issues),P.result;let Q=r.map((P)=>new kv(P.ctx.common.issues));return _(v,{code:g.invalid_union,unionErrors:Q}),n}if(v.common.async)return Promise.all(h.map(async(r)=>{let Q={...v,common:{...v.common,issues:[]},parent:null};return{result:await r._parseAsync({data:v.data,path:v.path,parent:Q}),ctx:Q}})).then(l);else{let r=void 0,Q=[];for(let W of h){let w={...v,common:{...v.common,issues:[]},parent:null},B=W._parseSync({data:v.data,path:v.path,parent:w});if(B.status==="valid")return B;else if(B.status==="dirty"&&!r)r={result:B,ctx:w};if(w.common.issues.length)Q.push(w.common.issues)}if(r)return v.common.issues.push(...r.ctx.common.issues),r.result;let P=Q.map((W)=>new kv(W));return _(v,{code:g.invalid_union,unionErrors:P}),n}}get options(){return this._def.options}}hr.create=(f,v)=>{return new hr({options:f,typeName:A.ZodUnion,...p(v)})};var qf=(f)=>{if(f instanceof Qr)return qf(f.schema);else if(f instanceof sv)return qf(f.innerType());else if(f instanceof Pr)return[f.value];else if(f instanceof Lf)return f.options;else if(f instanceof Wr)return e.objectValues(f.enum);else if(f instanceof Jr)return qf(f._def.innerType);else if(f instanceof fr)return[void 0];else if(f instanceof rr)return[null];else if(f instanceof ov)return[void 0,...qf(f.unwrap())];else if(f instanceof zf)return[null,...qf(f.unwrap())];else if(f instanceof Tr)return qf(f.unwrap());else if(f instanceof Xr)return qf(f.unwrap());else if(f instanceof wr)return qf(f._def.innerType);else return[]};class Zr extends o{_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==b.object)return _(v,{code:g.invalid_type,expected:b.object,received:v.parsedType}),n;let h=this.discriminator,l=v.data[h],r=this.optionsMap.get(l);if(!r)return _(v,{code:g.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[h]}),n;if(v.common.async)return r._parseAsync({data:v.data,path:v.path,parent:v});else return r._parseSync({data:v.data,path:v.path,parent:v})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(f,v,h){let l=new Map;for(let r of v){let Q=qf(r.shape[f]);if(!Q.length)throw Error(`A discriminator value for key \`${f}\` could not be extracted from all schema options`);for(let P of Q){if(l.has(P))throw Error(`Discriminator property ${String(f)} has duplicate value ${String(P)}`);l.set(P,r)}}return new Zr({typeName:A.ZodDiscriminatedUnion,discriminator:f,options:v,optionsMap:l,...p(h)})}}function a1(f,v){let h=lf(f),l=lf(v);if(f===v)return{valid:!0,data:f};else if(h===b.object&&l===b.object){let r=e.objectKeys(v),Q=e.objectKeys(f).filter((W)=>r.indexOf(W)!==-1),P={...f,...v};for(let W of Q){let w=a1(f[W],v[W]);if(!w.valid)return{valid:!1};P[W]=w.data}return{valid:!0,data:P}}else if(h===b.array&&l===b.array){if(f.length!==v.length)return{valid:!1};let r=[];for(let Q=0;Q<f.length;Q++){let P=f[Q],W=v[Q],w=a1(P,W);if(!w.valid)return{valid:!1};r.push(w.data)}return{valid:!0,data:r}}else if(h===b.date&&l===b.date&&+f===+v)return{valid:!0,data:f};else return{valid:!1}}class lr extends o{_parse(f){let{status:v,ctx:h}=this._processInputParams(f),l=(r,Q)=>{if(Ir(r)||Ir(Q))return n;let P=a1(r.value,Q.value);if(!P.valid)return _(h,{code:g.invalid_intersection_types}),n;if(Cr(r)||Cr(Q))v.dirty();return{status:v.value,value:P.data}};if(h.common.async)return Promise.all([this._def.left._parseAsync({data:h.data,path:h.path,parent:h}),this._def.right._parseAsync({data:h.data,path:h.path,parent:h})]).then(([r,Q])=>l(r,Q));else return l(this._def.left._parseSync({data:h.data,path:h.path,parent:h}),this._def.right._parseSync({data:h.data,path:h.path,parent:h}))}}lr.create=(f,v,h)=>{return new lr({left:f,right:v,typeName:A.ZodIntersection,...p(h)})};class Pf extends o{_parse(f){let{status:v,ctx:h}=this._processInputParams(f);if(h.parsedType!==b.array)return _(h,{code:g.invalid_type,expected:b.array,received:h.parsedType}),n;if(h.data.length<this._def.items.length)return _(h,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n;if(!this._def.rest&&h.data.length>this._def.items.length)_(h,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),v.dirty();let r=[...h.data].map((Q,P)=>{let W=this._def.items[P]||this._def.rest;if(!W)return null;return W._parse(new tv(h,Q,h.path,P))}).filter((Q)=>!!Q);if(h.common.async)return Promise.all(r).then((Q)=>{return gv.mergeArray(v,Q)});else return gv.mergeArray(v,r)}get items(){return this._def.items}rest(f){return new Pf({...this._def,rest:f})}}Pf.create=(f,v)=>{if(!Array.isArray(f))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new Pf({items:f,typeName:A.ZodTuple,rest:null,...p(v)})};class Kr extends o{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:h}=this._processInputParams(f);if(h.parsedType!==b.object)return _(h,{code:g.invalid_type,expected:b.object,received:h.parsedType}),n;let l=[],r=this._def.keyType,Q=this._def.valueType;for(let P in h.data)l.push({key:r._parse(new tv(h,P,h.path,P)),value:Q._parse(new tv(h,h.data[P],h.path,P)),alwaysSet:P in h.data});if(h.common.async)return gv.mergeObjectAsync(v,l);else return gv.mergeObjectSync(v,l)}get element(){return this._def.valueType}static create(f,v,h){if(v instanceof o)return new Kr({keyType:f,valueType:v,typeName:A.ZodRecord,...p(h)});return new Kr({keyType:pv.create(),valueType:f,typeName:A.ZodRecord,...p(v)})}}class Lr extends o{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:h}=this._processInputParams(f);if(h.parsedType!==b.map)return _(h,{code:g.invalid_type,expected:b.map,received:h.parsedType}),n;let l=this._def.keyType,r=this._def.valueType,Q=[...h.data.entries()].map(([P,W],w)=>{return{key:l._parse(new tv(h,P,h.path,[w,"key"])),value:r._parse(new tv(h,W,h.path,[w,"value"]))}});if(h.common.async){let P=new Map;return Promise.resolve().then(async()=>{for(let W of Q){let w=await W.key,B=await W.value;if(w.status==="aborted"||B.status==="aborted")return n;if(w.status==="dirty"||B.status==="dirty")v.dirty();P.set(w.value,B.value)}return{status:v.value,value:P}})}else{let P=new Map;for(let W of Q){let{key:w,value:B}=W;if(w.status==="aborted"||B.status==="aborted")return n;if(w.status==="dirty"||B.status==="dirty")v.dirty();P.set(w.value,B.value)}return{status:v.value,value:P}}}}Lr.create=(f,v,h)=>{return new Lr({valueType:v,keyType:f,typeName:A.ZodMap,...p(h)})};class kf extends o{_parse(f){let{status:v,ctx:h}=this._processInputParams(f);if(h.parsedType!==b.set)return _(h,{code:g.invalid_type,expected:b.set,received:h.parsedType}),n;let l=this._def;if(l.minSize!==null){if(h.data.size<l.minSize.value)_(h,{code:g.too_small,minimum:l.minSize.value,type:"set",inclusive:!0,exact:!1,message:l.minSize.message}),v.dirty()}if(l.maxSize!==null){if(h.data.size>l.maxSize.value)_(h,{code:g.too_big,maximum:l.maxSize.value,type:"set",inclusive:!0,exact:!1,message:l.maxSize.message}),v.dirty()}let r=this._def.valueType;function Q(W){let w=new Set;for(let B of W){if(B.status==="aborted")return n;if(B.status==="dirty")v.dirty();w.add(B.value)}return{status:v.value,value:w}}let P=[...h.data.values()].map((W,w)=>r._parse(new tv(h,W,h.path,w)));if(h.common.async)return Promise.all(P).then((W)=>Q(W));else return Q(P)}min(f,v){return new kf({...this._def,minSize:{value:f,message:u.toString(v)}})}max(f,v){return new kf({...this._def,maxSize:{value:f,message:u.toString(v)}})}size(f,v){return this.min(f,v).max(f,v)}nonempty(f){return this.min(1,f)}}kf.create=(f,v)=>{return new kf({valueType:f,minSize:null,maxSize:null,typeName:A.ZodSet,...p(v)})};class ef extends o{constructor(){super(...arguments);this.validate=this.implement}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==b.function)return _(v,{code:g.invalid_type,expected:b.function,received:v.parsedType}),n;function h(P,W){return Mr({data:P,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,of(),Gf].filter((w)=>!!w),issueData:{code:g.invalid_arguments,argumentsError:W}})}function l(P,W){return Mr({data:P,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,of(),Gf].filter((w)=>!!w),issueData:{code:g.invalid_return_type,returnTypeError:W}})}let r={errorMap:v.common.contextualErrorMap},Q=v.data;if(this._def.returns instanceof af){let P=this;return jv(async function(...W){let w=new kv([]),B=await P._def.args.parseAsync(W,r).catch((D)=>{throw w.addIssue(h(W,D)),w}),q=await Reflect.apply(Q,this,B);return await P._def.returns._def.type.parseAsync(q,r).catch((D)=>{throw w.addIssue(l(q,D)),w})})}else{let P=this;return jv(function(...W){let w=P._def.args.safeParse(W,r);if(!w.success)throw new kv([h(W,w.error)]);let B=Reflect.apply(Q,this,w.data),q=P._def.returns.safeParse(B,r);if(!q.success)throw new kv([l(B,q.error)]);return q.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...f){return new ef({...this._def,args:Pf.create(f).rest(Df.create())})}returns(f){return new ef({...this._def,returns:f})}implement(f){return this.parse(f)}strictImplement(f){return this.parse(f)}static create(f,v,h){return new ef({args:f?f:Pf.create([]).rest(Df.create()),returns:v||Df.create(),typeName:A.ZodFunction,...p(h)})}}class Qr extends o{get schema(){return this._def.getter()}_parse(f){let{ctx:v}=this._processInputParams(f);return this._def.getter()._parse({data:v.data,path:v.path,parent:v})}}Qr.create=(f,v)=>{return new Qr({getter:f,typeName:A.ZodLazy,...p(v)})};class Pr extends o{_parse(f){if(f.data!==this._def.value){let v=this._getOrReturnCtx(f);return _(v,{received:v.data,code:g.invalid_literal,expected:this._def.value}),n}return{status:"valid",value:f.data}}get value(){return this._def.value}}Pr.create=(f,v)=>{return new Pr({value:f,typeName:A.ZodLiteral,...p(v)})};function sh(f,v){return new Lf({values:f,typeName:A.ZodEnum,...p(v)})}class Lf extends o{_parse(f){if(typeof f.data!=="string"){let v=this._getOrReturnCtx(f),h=this._def.values;return _(v,{expected:e.joinValues(h),received:v.parsedType,code:g.invalid_type}),n}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(f.data)){let v=this._getOrReturnCtx(f),h=this._def.values;return _(v,{received:v.data,code:g.invalid_enum_value,options:h}),n}return jv(f.data)}get options(){return this._def.values}get enum(){let f={};for(let v of this._def.values)f[v]=v;return f}get Values(){let f={};for(let v of this._def.values)f[v]=v;return f}get Enum(){let f={};for(let v of this._def.values)f[v]=v;return f}extract(f,v=this._def){return Lf.create(f,{...this._def,...v})}exclude(f,v=this._def){return Lf.create(this.options.filter((h)=>!f.includes(h)),{...this._def,...v})}}Lf.create=sh;class Wr extends o{_parse(f){let v=e.getValidEnumValues(this._def.values),h=this._getOrReturnCtx(f);if(h.parsedType!==b.string&&h.parsedType!==b.number){let l=e.objectValues(v);return _(h,{expected:e.joinValues(l),received:h.parsedType,code:g.invalid_type}),n}if(!this._cache)this._cache=new Set(e.getValidEnumValues(this._def.values));if(!this._cache.has(f.data)){let l=e.objectValues(v);return _(h,{received:h.data,code:g.invalid_enum_value,options:l}),n}return jv(f.data)}get enum(){return this._def.values}}Wr.create=(f,v)=>{return new Wr({values:f,typeName:A.ZodNativeEnum,...p(v)})};class af extends o{unwrap(){return this._def.type}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==b.promise&&v.common.async===!1)return _(v,{code:g.invalid_type,expected:b.promise,received:v.parsedType}),n;let h=v.parsedType===b.promise?v.data:Promise.resolve(v.data);return jv(h.then((l)=>{return this._def.type.parseAsync(l,{path:v.path,errorMap:v.common.contextualErrorMap})}))}}af.create=(f,v)=>{return new af({type:f,typeName:A.ZodPromise,...p(v)})};class sv extends o{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===A.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(f){let{status:v,ctx:h}=this._processInputParams(f),l=this._def.effect||null,r={addIssue:(Q)=>{if(_(h,Q),Q.fatal)v.abort();else v.dirty()},get path(){return h.path}};if(r.addIssue=r.addIssue.bind(r),l.type==="preprocess"){let Q=l.transform(h.data,r);if(h.common.async)return Promise.resolve(Q).then(async(P)=>{if(v.value==="aborted")return n;let W=await this._def.schema._parseAsync({data:P,path:h.path,parent:h});if(W.status==="aborted")return n;if(W.status==="dirty")return bf(W.value);if(v.value==="dirty")return bf(W.value);return W});else{if(v.value==="aborted")return n;let P=this._def.schema._parseSync({data:Q,path:h.path,parent:h});if(P.status==="aborted")return n;if(P.status==="dirty")return bf(P.value);if(v.value==="dirty")return bf(P.value);return P}}if(l.type==="refinement"){let Q=(P)=>{let W=l.refinement(P,r);if(h.common.async)return Promise.resolve(W);if(W instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return P};if(h.common.async===!1){let P=this._def.schema._parseSync({data:h.data,path:h.path,parent:h});if(P.status==="aborted")return n;if(P.status==="dirty")v.dirty();return Q(P.value),{status:v.value,value:P.value}}else return this._def.schema._parseAsync({data:h.data,path:h.path,parent:h}).then((P)=>{if(P.status==="aborted")return n;if(P.status==="dirty")v.dirty();return Q(P.value).then(()=>{return{status:v.value,value:P.value}})})}if(l.type==="transform")if(h.common.async===!1){let Q=this._def.schema._parseSync({data:h.data,path:h.path,parent:h});if(!Mf(Q))return n;let P=l.transform(Q.value,r);if(P instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:v.value,value:P}}else return this._def.schema._parseAsync({data:h.data,path:h.path,parent:h}).then((Q)=>{if(!Mf(Q))return n;return Promise.resolve(l.transform(Q.value,r)).then((P)=>({status:v.value,value:P}))});e.assertNever(l)}}sv.create=(f,v,h)=>{return new sv({schema:f,typeName:A.ZodEffects,effect:v,...p(h)})};sv.createWithPreprocess=(f,v,h)=>{return new sv({schema:v,effect:{type:"preprocess",transform:f},typeName:A.ZodEffects,...p(h)})};class ov extends o{_parse(f){if(this._getType(f)===b.undefined)return jv(void 0);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}ov.create=(f,v)=>{return new ov({innerType:f,typeName:A.ZodOptional,...p(v)})};class zf extends o{_parse(f){if(this._getType(f)===b.null)return jv(null);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}zf.create=(f,v)=>{return new zf({innerType:f,typeName:A.ZodNullable,...p(v)})};class Jr extends o{_parse(f){let{ctx:v}=this._processInputParams(f),h=v.data;if(v.parsedType===b.undefined)h=this._def.defaultValue();return this._def.innerType._parse({data:h,path:v.path,parent:v})}removeDefault(){return this._def.innerType}}Jr.create=(f,v)=>{return new Jr({innerType:f,typeName:A.ZodDefault,defaultValue:typeof v.default==="function"?v.default:()=>v.default,...p(v)})};class wr extends o{_parse(f){let{ctx:v}=this._processInputParams(f),h={...v,common:{...v.common,issues:[]}},l=this._def.innerType._parse({data:h.data,path:h.path,parent:{...h}});if(tf(l))return l.then((r)=>{return{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new kv(h.common.issues)},input:h.data})}});else return{status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new kv(h.common.issues)},input:h.data})}}removeCatch(){return this._def.innerType}}wr.create=(f,v)=>{return new wr({innerType:f,typeName:A.ZodCatch,catchValue:typeof v.catch==="function"?v.catch:()=>v.catch,...p(v)})};class Or extends o{_parse(f){if(this._getType(f)!==b.nan){let h=this._getOrReturnCtx(f);return _(h,{code:g.invalid_type,expected:b.nan,received:h.parsedType}),n}return{status:"valid",value:f.data}}}Or.create=(f)=>{return new Or({typeName:A.ZodNaN,...p(f)})};var PW=Symbol("zod_brand");class Tr extends o{_parse(f){let{ctx:v}=this._processInputParams(f),h=v.data;return this._def.type._parse({data:h,path:v.path,parent:v})}unwrap(){return this._def.type}}class Nr extends o{_parse(f){let{status:v,ctx:h}=this._processInputParams(f);if(h.common.async)return(async()=>{let r=await this._def.in._parseAsync({data:h.data,path:h.path,parent:h});if(r.status==="aborted")return n;if(r.status==="dirty")return v.dirty(),bf(r.value);else return this._def.out._parseAsync({data:r.value,path:h.path,parent:h})})();else{let l=this._def.in._parseSync({data:h.data,path:h.path,parent:h});if(l.status==="aborted")return n;if(l.status==="dirty")return v.dirty(),{status:"dirty",value:l.value};else return this._def.out._parseSync({data:l.value,path:h.path,parent:h})}}static create(f,v){return new Nr({in:f,out:v,typeName:A.ZodPipeline})}}class Xr extends o{_parse(f){let v=this._def.innerType._parse(f),h=(l)=>{if(Mf(l))l.value=Object.freeze(l.value);return l};return tf(v)?v.then((l)=>h(l)):h(v)}unwrap(){return this._def.innerType}}Xr.create=(f,v)=>{return new Xr({innerType:f,typeName:A.ZodReadonly,...p(v)})};function ph(f,v){let h=typeof f==="function"?f(v):typeof f==="string"?{message:f}:f;return typeof h==="string"?{message:h}:h}function eh(f,v={},h){if(f)return _f.create().superRefine((l,r)=>{let Q=f(l);if(Q instanceof Promise)return Q.then((P)=>{if(!P){let W=ph(v,l),w=W.fatal??h??!0;r.addIssue({code:"custom",...W,fatal:w})}});if(!Q){let P=ph(v,l),W=P.fatal??h??!0;r.addIssue({code:"custom",...P,fatal:W})}return});return _f.create()}var WW={object:$v.lazycreate},A;(function(f){f.ZodString="ZodString",f.ZodNumber="ZodNumber",f.ZodNaN="ZodNaN",f.ZodBigInt="ZodBigInt",f.ZodBoolean="ZodBoolean",f.ZodDate="ZodDate",f.ZodSymbol="ZodSymbol",f.ZodUndefined="ZodUndefined",f.ZodNull="ZodNull",f.ZodAny="ZodAny",f.ZodUnknown="ZodUnknown",f.ZodNever="ZodNever",f.ZodVoid="ZodVoid",f.ZodArray="ZodArray",f.ZodObject="ZodObject",f.ZodUnion="ZodUnion",f.ZodDiscriminatedUnion="ZodDiscriminatedUnion",f.ZodIntersection="ZodIntersection",f.ZodTuple="ZodTuple",f.ZodRecord="ZodRecord",f.ZodMap="ZodMap",f.ZodSet="ZodSet",f.ZodFunction="ZodFunction",f.ZodLazy="ZodLazy",f.ZodLiteral="ZodLiteral",f.ZodEnum="ZodEnum",f.ZodEffects="ZodEffects",f.ZodNativeEnum="ZodNativeEnum",f.ZodOptional="ZodOptional",f.ZodNullable="ZodNullable",f.ZodDefault="ZodDefault",f.ZodCatch="ZodCatch",f.ZodPromise="ZodPromise",f.ZodBranded="ZodBranded",f.ZodPipeline="ZodPipeline",f.ZodReadonly="ZodReadonly"})(A||(A={}));var JW=(f,v={message:`Input not instance of ${f.name}`})=>eh((h)=>h instanceof f,v),vl=pv.create,fl=Hf.create,wW=Or.create,XW=Kf.create,rl=vr.create,YW=Rf.create,BW=Dr.create,GW=fr.create,qW=rr.create,zW=_f.create,EW=Df.create,$W=Qf.create,MW=Hr.create,DW=dv.create,HW=$v.create,KW=$v.strictCreate,LW=hr.create,OW=Zr.create,NW=lr.create,VW=Pf.create,UW=Kr.create,gW=Lr.create,AW=kf.create,FW=ef.create,jW=Qr.create,yW=Pr.create,SW=Lf.create,bW=Wr.create,RW=af.create,_W=sv.create,kW=ov.create,aW=zf.create,IW=sv.createWithPreprocess,CW=Nr.create,ZW=()=>vl().optional(),TW=()=>fl().optional(),uW=()=>rl().optional(),xW={string:(f)=>pv.create({...f,coerce:!0}),number:(f)=>Hf.create({...f,coerce:!0}),boolean:(f)=>vr.create({...f,coerce:!0}),bigint:(f)=>Kf.create({...f,coerce:!0}),date:(f)=>Rf.create({...f,coerce:!0})};var mW=n;var I1="2025-06-18";var hl=[I1,"2025-03-26","2024-11-05","2024-10-07"],ur="2.0",ll=J.union([J.string(),J.number().int()]),Ql=J.string(),cW=J.object({progressToken:J.optional(ll)}).passthrough(),nv=J.object({_meta:J.optional(cW)}).passthrough(),av=J.object({method:J.string(),params:J.optional(nv)}),Vr=J.object({_meta:J.optional(J.object({}).passthrough())}).passthrough(),Wf=J.object({method:J.string(),params:J.optional(Vr)}),cv=J.object({_meta:J.optional(J.object({}).passthrough())}).passthrough(),xr=J.union([J.string(),J.number().int()]),Pl=J.object({jsonrpc:J.literal(ur),id:xr}).merge(av).strict(),Wl=(f)=>Pl.safeParse(f).success,Jl=J.object({jsonrpc:J.literal(ur)}).merge(Wf).strict(),wl=(f)=>Jl.safeParse(f).success,Xl=J.object({jsonrpc:J.literal(ur),id:xr,result:cv}).strict(),C1=(f)=>Xl.safeParse(f).success,Yv;(function(f){f[f.ConnectionClosed=-32000]="ConnectionClosed",f[f.RequestTimeout=-32001]="RequestTimeout",f[f.ParseError=-32700]="ParseError",f[f.InvalidRequest=-32600]="InvalidRequest",f[f.MethodNotFound=-32601]="MethodNotFound",f[f.InvalidParams=-32602]="InvalidParams",f[f.InternalError=-32603]="InternalError"})(Yv||(Yv={}));var Yl=J.object({jsonrpc:J.literal(ur),id:xr,error:J.object({code:J.number().int(),message:J.string(),data:J.optional(J.unknown())})}).strict(),Bl=(f)=>Yl.safeParse(f).success,Gl=J.union([Pl,Jl,Xl,Yl]),mr=cv.strict(),nr=Wf.extend({method:J.literal("notifications/cancelled"),params:Vr.extend({requestId:xr,reason:J.string().optional()})}),iW=J.object({src:J.string(),mimeType:J.optional(J.string()),sizes:J.optional(J.array(J.string()))}).passthrough(),Ur=J.object({icons:J.array(iW).optional()}).passthrough(),gr=J.object({name:J.string(),title:J.optional(J.string())}).passthrough(),ql=gr.extend({version:J.string(),websiteUrl:J.optional(J.string())}).merge(Ur),pW=J.object({experimental:J.optional(J.object({}).passthrough()),sampling:J.optional(J.object({}).passthrough()),elicitation:J.optional(J.object({}).passthrough()),roots:J.optional(J.object({listChanged:J.optional(J.boolean())}).passthrough())}).passthrough(),Z1=av.extend({method:J.literal("initialize"),params:nv.extend({protocolVersion:J.string(),capabilities:pW,clientInfo:ql})});var dW=J.object({experimental:J.optional(J.object({}).passthrough()),logging:J.optional(J.object({}).passthrough()),completions:J.optional(J.object({}).passthrough()),prompts:J.optional(J.object({listChanged:J.optional(J.boolean())}).passthrough()),resources:J.optional(J.object({subscribe:J.optional(J.boolean()),listChanged:J.optional(J.boolean())}).passthrough()),tools:J.optional(J.object({listChanged:J.optional(J.boolean())}).passthrough())}).passthrough(),oW=cv.extend({protocolVersion:J.string(),capabilities:dW,serverInfo:ql,instructions:J.optional(J.string())}),T1=Wf.extend({method:J.literal("notifications/initialized")});var cr=av.extend({method:J.literal("ping")}),tW=J.object({progress:J.number(),total:J.optional(J.number()),message:J.optional(J.string())}).passthrough(),ir=Wf.extend({method:J.literal("notifications/progress"),params:Vr.merge(tW).extend({progressToken:ll})}),pr=av.extend({params:nv.extend({cursor:J.optional(Ql)}).optional()}),dr=cv.extend({nextCursor:J.optional(Ql)}),zl=J.object({uri:J.string(),mimeType:J.optional(J.string()),_meta:J.optional(J.object({}).passthrough())}).passthrough(),El=zl.extend({text:J.string()}),u1=J.string().refine((f)=>{try{return atob(f),!0}catch(v){return!1}},{message:"Invalid Base64 string"}),$l=zl.extend({blob:u1}),Ml=gr.extend({uri:J.string(),description:J.optional(J.string()),mimeType:J.optional(J.string()),_meta:J.optional(J.object({}).passthrough())}).merge(Ur),sW=gr.extend({uriTemplate:J.string(),description:J.optional(J.string()),mimeType:J.optional(J.string()),_meta:J.optional(J.object({}).passthrough())}).merge(Ur),or=pr.extend({method:J.literal("resources/list")}),eW=dr.extend({resources:J.array(Ml)}),tr=pr.extend({method:J.literal("resources/templates/list")}),v9=dr.extend({resourceTemplates:J.array(sW)}),sr=av.extend({method:J.literal("resources/read"),params:nv.extend({uri:J.string()})}),f9=cv.extend({contents:J.array(J.union([El,$l]))}),r9=Wf.extend({method:J.literal("notifications/resources/list_changed")}),h9=av.extend({method:J.literal("resources/subscribe"),params:nv.extend({uri:J.string()})}),l9=av.extend({method:J.literal("resources/unsubscribe"),params:nv.extend({uri:J.string()})}),Q9=Wf.extend({method:J.literal("notifications/resources/updated"),params:Vr.extend({uri:J.string()})}),P9=J.object({name:J.string(),description:J.optional(J.string()),required:J.optional(J.boolean())}).passthrough(),W9=gr.extend({description:J.optional(J.string()),arguments:J.optional(J.array(P9)),_meta:J.optional(J.object({}).passthrough())}).merge(Ur),er=pr.extend({method:J.literal("prompts/list")}),J9=dr.extend({prompts:J.array(W9)}),v1=av.extend({method:J.literal("prompts/get"),params:nv.extend({name:J.string(),arguments:J.optional(J.record(J.string()))})}),x1=J.object({type:J.literal("text"),text:J.string(),_meta:J.optional(J.object({}).passthrough())}).passthrough(),m1=J.object({type:J.literal("image"),data:u1,mimeType:J.string(),_meta:J.optional(J.object({}).passthrough())}).passthrough(),n1=J.object({type:J.literal("audio"),data:u1,mimeType:J.string(),_meta:J.optional(J.object({}).passthrough())}).passthrough(),w9=J.object({type:J.literal("resource"),resource:J.union([El,$l]),_meta:J.optional(J.object({}).passthrough())}).passthrough(),X9=Ml.extend({type:J.literal("resource_link")}),Dl=J.union([x1,m1,n1,X9,w9]),Y9=J.object({role:J.enum(["user","assistant"]),content:Dl}).passthrough(),B9=cv.extend({description:J.optional(J.string()),messages:J.array(Y9)}),G9=Wf.extend({method:J.literal("notifications/prompts/list_changed")}),q9=J.object({title:J.optional(J.string()),readOnlyHint:J.optional(J.boolean()),destructiveHint:J.optional(J.boolean()),idempotentHint:J.optional(J.boolean()),openWorldHint:J.optional(J.boolean())}).passthrough(),z9=gr.extend({description:J.optional(J.string()),inputSchema:J.object({type:J.literal("object"),properties:J.optional(J.object({}).passthrough()),required:J.optional(J.array(J.string()))}).passthrough(),outputSchema:J.optional(J.object({type:J.literal("object"),properties:J.optional(J.object({}).passthrough()),required:J.optional(J.array(J.string()))}).passthrough()),annotations:J.optional(q9),_meta:J.optional(J.object({}).passthrough())}).merge(Ur),f1=pr.extend({method:J.literal("tools/list")}),E9=dr.extend({tools:J.array(z9)}),Hl=cv.extend({content:J.array(Dl).default([]),structuredContent:J.object({}).passthrough().optional(),isError:J.optional(J.boolean())}),Rw=Hl.or(cv.extend({toolResult:J.unknown()})),r1=av.extend({method:J.literal("tools/call"),params:nv.extend({name:J.string(),arguments:J.optional(J.record(J.unknown()))})}),$9=Wf.extend({method:J.literal("notifications/tools/list_changed")}),Ar=J.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),c1=av.extend({method:J.literal("logging/setLevel"),params:nv.extend({level:Ar})}),M9=Wf.extend({method:J.literal("notifications/message"),params:Vr.extend({level:Ar,logger:J.optional(J.string()),data:J.unknown()})}),D9=J.object({name:J.string().optional()}).passthrough(),H9=J.object({hints:J.optional(J.array(D9)),costPriority:J.optional(J.number().min(0).max(1)),speedPriority:J.optional(J.number().min(0).max(1)),intelligencePriority:J.optional(J.number().min(0).max(1))}).passthrough(),K9=J.object({role:J.enum(["user","assistant"]),content:J.union([x1,m1,n1])}).passthrough(),L9=av.extend({method:J.literal("sampling/createMessage"),params:nv.extend({messages:J.array(K9),systemPrompt:J.optional(J.string()),includeContext:J.optional(J.enum(["none","thisServer","allServers"])),temperature:J.optional(J.number()),maxTokens:J.number().int(),stopSequences:J.optional(J.array(J.string())),metadata:J.optional(J.object({}).passthrough()),modelPreferences:J.optional(H9)})}),i1=cv.extend({model:J.string(),stopReason:J.optional(J.enum(["endTurn","stopSequence","maxTokens"]).or(J.string())),role:J.enum(["user","assistant"]),content:J.discriminatedUnion("type",[x1,m1,n1])}),O9=J.object({type:J.literal("boolean"),title:J.optional(J.string()),description:J.optional(J.string()),default:J.optional(J.boolean())}).passthrough(),N9=J.object({type:J.literal("string"),title:J.optional(J.string()),description:J.optional(J.string()),minLength:J.optional(J.number()),maxLength:J.optional(J.number()),format:J.optional(J.enum(["email","uri","date","date-time"]))}).passthrough(),V9=J.object({type:J.enum(["number","integer"]),title:J.optional(J.string()),description:J.optional(J.string()),minimum:J.optional(J.number()),maximum:J.optional(J.number())}).passthrough(),U9=J.object({type:J.literal("string"),title:J.optional(J.string()),description:J.optional(J.string()),enum:J.array(J.string()),enumNames:J.optional(J.array(J.string()))}).passthrough(),g9=J.union([O9,N9,V9,U9]),A9=av.extend({method:J.literal("elicitation/create"),params:nv.extend({message:J.string(),requestedSchema:J.object({type:J.literal("object"),properties:J.record(J.string(),g9),required:J.optional(J.array(J.string()))}).passthrough()})}),p1=cv.extend({action:J.enum(["accept","decline","cancel"]),content:J.optional(J.record(J.string(),J.unknown()))}),F9=J.object({type:J.literal("ref/resource"),uri:J.string()}).passthrough();var j9=J.object({type:J.literal("ref/prompt"),name:J.string()}).passthrough(),h1=av.extend({method:J.literal("completion/complete"),params:nv.extend({ref:J.union([j9,F9]),argument:J.object({name:J.string(),value:J.string()}).passthrough(),context:J.optional(J.object({arguments:J.optional(J.record(J.string(),J.string()))}))})}),y9=cv.extend({completion:J.object({values:J.array(J.string()).max(100),total:J.optional(J.number().int()),hasMore:J.optional(J.boolean())}).passthrough()}),S9=J.object({uri:J.string().startsWith("file://"),name:J.optional(J.string()),_meta:J.optional(J.object({}).passthrough())}).passthrough(),b9=av.extend({method:J.literal("roots/list")}),d1=cv.extend({roots:J.array(S9)}),R9=Wf.extend({method:J.literal("notifications/roots/list_changed")}),_w=J.union([cr,Z1,h1,c1,v1,er,or,tr,sr,h9,l9,r1,f1]),kw=J.union([nr,ir,T1,R9]),aw=J.union([mr,i1,p1,d1]),Iw=J.union([cr,L9,A9,b9]),Cw=J.union([nr,ir,M9,Q9,r9,$9,G9]),Zw=J.union([mr,oW,y9,B9,J9,eW,v9,f9,Hl,E9]);class Bv extends Error{constructor(f,v,h){super(`MCP error ${f}: ${v}`);this.code=f,this.data=h,this.name="McpError"}}var _9=60000;class o1{constructor(f){this._options=f,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(nr,(v)=>{let h=this._requestHandlerAbortControllers.get(v.params.requestId);h===null||h===void 0||h.abort(v.params.reason)}),this.setNotificationHandler(ir,(v)=>{this._onprogress(v)}),this.setRequestHandler(cr,(v)=>({}))}_setupTimeout(f,v,h,l,r=!1){this._timeoutInfo.set(f,{timeoutId:setTimeout(l,v),startTime:Date.now(),timeout:v,maxTotalTimeout:h,resetTimeoutOnProgress:r,onTimeout:l})}_resetTimeout(f){let v=this._timeoutInfo.get(f);if(!v)return!1;let h=Date.now()-v.startTime;if(v.maxTotalTimeout&&h>=v.maxTotalTimeout)throw this._timeoutInfo.delete(f),new Bv(Yv.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:v.maxTotalTimeout,totalElapsed:h});return clearTimeout(v.timeoutId),v.timeoutId=setTimeout(v.onTimeout,v.timeout),!0}_cleanupTimeout(f){let v=this._timeoutInfo.get(f);if(v)clearTimeout(v.timeoutId),this._timeoutInfo.delete(f)}async connect(f){var v,h,l;this._transport=f;let r=(v=this.transport)===null||v===void 0?void 0:v.onclose;this._transport.onclose=()=>{r===null||r===void 0||r(),this._onclose()};let Q=(h=this.transport)===null||h===void 0?void 0:h.onerror;this._transport.onerror=(W)=>{Q===null||Q===void 0||Q(W),this._onerror(W)};let P=(l=this._transport)===null||l===void 0?void 0:l.onmessage;this._transport.onmessage=(W,w)=>{if(P===null||P===void 0||P(W,w),C1(W)||Bl(W))this._onresponse(W);else if(Wl(W))this._onrequest(W,w);else if(wl(W))this._onnotification(W);else this._onerror(Error(`Unknown message type: ${JSON.stringify(W)}`))},await this._transport.start()}_onclose(){var f;let v=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(f=this.onclose)===null||f===void 0||f.call(this);let h=new Bv(Yv.ConnectionClosed,"Connection closed");for(let l of v.values())l(h)}_onerror(f){var v;(v=this.onerror)===null||v===void 0||v.call(this,f)}_onnotification(f){var v;let h=(v=this._notificationHandlers.get(f.method))!==null&&v!==void 0?v:this.fallbackNotificationHandler;if(h===void 0)return;Promise.resolve().then(()=>h(f)).catch((l)=>this._onerror(Error(`Uncaught error in notification handler: ${l}`)))}_onrequest(f,v){var h,l;let r=(h=this._requestHandlers.get(f.method))!==null&&h!==void 0?h:this.fallbackRequestHandler,Q=this._transport;if(r===void 0){Q===null||Q===void 0||Q.send({jsonrpc:"2.0",id:f.id,error:{code:Yv.MethodNotFound,message:"Method not found"}}).catch((w)=>this._onerror(Error(`Failed to send an error response: ${w}`)));return}let P=new AbortController;this._requestHandlerAbortControllers.set(f.id,P);let W={signal:P.signal,sessionId:Q===null||Q===void 0?void 0:Q.sessionId,_meta:(l=f.params)===null||l===void 0?void 0:l._meta,sendNotification:(w)=>this.notification(w,{relatedRequestId:f.id}),sendRequest:(w,B,q)=>this.request(w,B,{...q,relatedRequestId:f.id}),authInfo:v===null||v===void 0?void 0:v.authInfo,requestId:f.id,requestInfo:v===null||v===void 0?void 0:v.requestInfo};Promise.resolve().then(()=>r(f,W)).then((w)=>{if(P.signal.aborted)return;return Q===null||Q===void 0?void 0:Q.send({result:w,jsonrpc:"2.0",id:f.id})},(w)=>{var B;if(P.signal.aborted)return;return Q===null||Q===void 0?void 0:Q.send({jsonrpc:"2.0",id:f.id,error:{code:Number.isSafeInteger(w.code)?w.code:Yv.InternalError,message:(B=w.message)!==null&&B!==void 0?B:"Internal error"}})}).catch((w)=>this._onerror(Error(`Failed to send response: ${w}`))).finally(()=>{this._requestHandlerAbortControllers.delete(f.id)})}_onprogress(f){let{progressToken:v,...h}=f.params,l=Number(v),r=this._progressHandlers.get(l);if(!r){this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(f)}`));return}let Q=this._responseHandlers.get(l),P=this._timeoutInfo.get(l);if(P&&Q&&P.resetTimeoutOnProgress)try{this._resetTimeout(l)}catch(W){Q(W);return}r(h)}_onresponse(f){let v=Number(f.id),h=this._responseHandlers.get(v);if(h===void 0){this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(f)}`));return}if(this._responseHandlers.delete(v),this._progressHandlers.delete(v),this._cleanupTimeout(v),C1(f))h(f);else{let l=new Bv(f.error.code,f.error.message,f.error.data);h(l)}}get transport(){return this._transport}async close(){var f;await((f=this._transport)===null||f===void 0?void 0:f.close())}request(f,v,h){let{relatedRequestId:l,resumptionToken:r,onresumptiontoken:Q}=h!==null&&h!==void 0?h:{};return new Promise((P,W)=>{var w,B,q,$,D,X;if(!this._transport){W(Error("Not connected"));return}if(((w=this._options)===null||w===void 0?void 0:w.enforceStrictCapabilities)===!0)this.assertCapabilityForMethod(f.method);(B=h===null||h===void 0?void 0:h.signal)===null||B===void 0||B.throwIfAborted();let z=this._requestMessageId++,H={...f,jsonrpc:"2.0",id:z};if(h===null||h===void 0?void 0:h.onprogress)this._progressHandlers.set(z,h.onprogress),H.params={...f.params,_meta:{...((q=f.params)===null||q===void 0?void 0:q._meta)||{},progressToken:z}};let E=(N)=>{var V;this._responseHandlers.delete(z),this._progressHandlers.delete(z),this._cleanupTimeout(z),(V=this._transport)===null||V===void 0||V.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:z,reason:String(N)}},{relatedRequestId:l,resumptionToken:r,onresumptiontoken:Q}).catch((j)=>this._onerror(Error(`Failed to send cancellation: ${j}`))),W(N)};this._responseHandlers.set(z,(N)=>{var V;if((V=h===null||h===void 0?void 0:h.signal)===null||V===void 0?void 0:V.aborted)return;if(N instanceof Error)return W(N);try{let j=v.parse(N.result);P(j)}catch(j){W(j)}}),($=h===null||h===void 0?void 0:h.signal)===null||$===void 0||$.addEventListener("abort",()=>{var N;E((N=h===null||h===void 0?void 0:h.signal)===null||N===void 0?void 0:N.reason)});let O=(D=h===null||h===void 0?void 0:h.timeout)!==null&&D!==void 0?D:_9,U=()=>E(new Bv(Yv.RequestTimeout,"Request timed out",{timeout:O}));this._setupTimeout(z,O,h===null||h===void 0?void 0:h.maxTotalTimeout,U,(X=h===null||h===void 0?void 0:h.resetTimeoutOnProgress)!==null&&X!==void 0?X:!1),this._transport.send(H,{relatedRequestId:l,resumptionToken:r,onresumptiontoken:Q}).catch((N)=>{this._cleanupTimeout(z),W(N)})})}async notification(f,v){var h,l;if(!this._transport)throw Error("Not connected");if(this.assertNotificationCapability(f.method),((l=(h=this._options)===null||h===void 0?void 0:h.debouncedNotificationMethods)!==null&&l!==void 0?l:[]).includes(f.method)&&!f.params&&!(v===null||v===void 0?void 0:v.relatedRequestId)){if(this._pendingDebouncedNotifications.has(f.method))return;this._pendingDebouncedNotifications.add(f.method),Promise.resolve().then(()=>{var W;if(this._pendingDebouncedNotifications.delete(f.method),!this._transport)return;let w={...f,jsonrpc:"2.0"};(W=this._transport)===null||W===void 0||W.send(w,v).catch((B)=>this._onerror(B))});return}let P={...f,jsonrpc:"2.0"};await this._transport.send(P,v)}setRequestHandler(f,v){let h=f.shape.method.value;this.assertRequestHandlerCapability(h),this._requestHandlers.set(h,(l,r)=>{return Promise.resolve(v(f.parse(l),r))})}removeRequestHandler(f){this._requestHandlers.delete(f)}assertCanSetRequestHandler(f){if(this._requestHandlers.has(f))throw Error(`A request handler for ${f} already exists, which would be overridden`)}setNotificationHandler(f,v){this._notificationHandlers.set(f.shape.method.value,(h)=>Promise.resolve(v(f.parse(h))))}removeNotificationHandler(f){this._notificationHandlers.delete(f)}}function Kl(f,v){return Object.entries(v).reduce((h,[l,r])=>{if(r&&typeof r==="object")h[l]=h[l]?{...h[l],...r}:r;else h[l]=r;return h},{...f})}var OQ=qJ(LQ(),1);class Kh extends o1{constructor(f,v){var h;super(v);if(this._serverInfo=f,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(Ar.options.map((l,r)=>[l,r])),this.isMessageIgnored=(l,r)=>{let Q=this._loggingLevels.get(r);return Q?this.LOG_LEVEL_SEVERITY.get(l)<this.LOG_LEVEL_SEVERITY.get(Q):!1},this._capabilities=(h=v===null||v===void 0?void 0:v.capabilities)!==null&&h!==void 0?h:{},this._instructions=v===null||v===void 0?void 0:v.instructions,this.setRequestHandler(Z1,(l)=>this._oninitialize(l)),this.setNotificationHandler(T1,()=>{var l;return(l=this.oninitialized)===null||l===void 0?void 0:l.call(this)}),this._capabilities.logging)this.setRequestHandler(c1,async(l,r)=>{var Q;let P=r.sessionId||((Q=r.requestInfo)===null||Q===void 0?void 0:Q.headers["mcp-session-id"])||void 0,{level:W}=l.params,w=Ar.safeParse(W);if(w.success)this._loggingLevels.set(P,w.data);return{}})}registerCapabilities(f){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=Kl(this._capabilities,f)}assertCapabilityForMethod(f){var v,h,l;switch(f){case"sampling/createMessage":if(!((v=this._clientCapabilities)===null||v===void 0?void 0:v.sampling))throw Error(`Client does not support sampling (required for ${f})`);break;case"elicitation/create":if(!((h=this._clientCapabilities)===null||h===void 0?void 0:h.elicitation))throw Error(`Client does not support elicitation (required for ${f})`);break;case"roots/list":if(!((l=this._clientCapabilities)===null||l===void 0?void 0:l.roots))throw Error(`Client does not support listing roots (required for ${f})`);break;case"ping":break}}assertNotificationCapability(f){switch(f){case"notifications/message":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${f})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw Error(`Server does not support notifying about resources (required for ${f})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw Error(`Server does not support notifying of tool list changes (required for ${f})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw Error(`Server does not support notifying of prompt list changes (required for ${f})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(f){switch(f){case"sampling/createMessage":if(!this._capabilities.sampling)throw Error(`Server does not support sampling (required for ${f})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${f})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw Error(`Server does not support prompts (required for ${f})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw Error(`Server does not support resources (required for ${f})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw Error(`Server does not support tools (required for ${f})`);break;case"ping":case"initialize":break}}async _oninitialize(f){let v=f.params.protocolVersion;return this._clientCapabilities=f.params.capabilities,this._clientVersion=f.params.clientInfo,{protocolVersion:hl.includes(v)?v:I1,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},mr)}async createMessage(f,v){return this.request({method:"sampling/createMessage",params:f},i1,v)}async elicitInput(f,v){let h=await this.request({method:"elicitation/create",params:f},p1,v);if(h.action==="accept"&&h.content)try{let l=new OQ.default,r=l.compile(f.requestedSchema);if(!r(h.content))throw new Bv(Yv.InvalidParams,`Elicitation response content does not match requested schema: ${l.errorsText(r.errors)}`)}catch(l){if(l instanceof Bv)throw l;throw new Bv(Yv.InternalError,`Error validating elicitation response: ${l}`)}return h}async listRoots(f,v){return this.request({method:"roots/list",params:f},d1,v)}async sendLoggingMessage(f,v){if(this._capabilities.logging){if(!this.isMessageIgnored(f.level,v))return this.notification({method:"notifications/message",params:f})}}async sendResourceUpdated(f){return this.notification({method:"notifications/resources/updated",params:f})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}var VQ=Symbol("Let zodToJsonSchema decide on which parser to use");var NQ={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},UQ=(f)=>typeof f==="string"?{...NQ,name:f}:{...NQ,...f};var gQ=(f)=>{let v=UQ(f),h=v.name!==void 0?[...v.basePath,v.definitionPath,v.name]:v.basePath;return{...v,flags:{hasReferencedOpenAiAnyType:!1},currentPath:h,propertyPath:void 0,seen:new Map(Object.entries(v.definitions).map(([l,r])=>[r._def,{def:r._def,path:[...v.basePath,v.definitionPath,l],jsonSchema:void 0}]))}};function Lh(f,v,h,l){if(!l?.errorMessages)return;if(h)f.errorMessage={...f.errorMessage,[v]:h}}function vv(f,v,h,l,r){f[v]=h,Lh(f,v,l,r)}var L1=(f,v)=>{let h=0;for(;h<f.length&&h<v.length;h++)if(f[h]!==v[h])break;return[(f.length-h).toString(),...v.slice(h)].join("/")};function qv(f){if(f.target!=="openAi")return{};let v=[...f.basePath,f.definitionPath,f.openAiAnyTypeName];return f.flags.hasReferencedOpenAiAnyType=!0,{$ref:f.$refStrategy==="relative"?L1(v,f.currentPath):v.join("/")}}function AQ(f,v){let h={type:"array"};if(f.type?._def&&f.type?._def?.typeName!==A.ZodAny)h.items=c(f.type._def,{...v,currentPath:[...v.currentPath,"items"]});if(f.minLength)vv(h,"minItems",f.minLength.value,f.minLength.message,v);if(f.maxLength)vv(h,"maxItems",f.maxLength.value,f.maxLength.message,v);if(f.exactLength)vv(h,"minItems",f.exactLength.value,f.exactLength.message,v),vv(h,"maxItems",f.exactLength.value,f.exactLength.message,v);return h}function FQ(f,v){let h={type:"integer",format:"int64"};if(!f.checks)return h;for(let l of f.checks)switch(l.kind){case"min":if(v.target==="jsonSchema7")if(l.inclusive)vv(h,"minimum",l.value,l.message,v);else vv(h,"exclusiveMinimum",l.value,l.message,v);else{if(!l.inclusive)h.exclusiveMinimum=!0;vv(h,"minimum",l.value,l.message,v)}break;case"max":if(v.target==="jsonSchema7")if(l.inclusive)vv(h,"maximum",l.value,l.message,v);else vv(h,"exclusiveMaximum",l.value,l.message,v);else{if(!l.inclusive)h.exclusiveMaximum=!0;vv(h,"maximum",l.value,l.message,v)}break;case"multipleOf":vv(h,"multipleOf",l.value,l.message,v);break}return h}function jQ(){return{type:"boolean"}}function O1(f,v){return c(f.type._def,v)}var yQ=(f,v)=>{return c(f.innerType._def,v)};function Oh(f,v,h){let l=h??v.dateStrategy;if(Array.isArray(l))return{anyOf:l.map((r,Q)=>Oh(f,v,r))};switch(l){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return zJ(f,v)}}var zJ=(f,v)=>{let h={type:"integer",format:"unix-time"};if(v.target==="openApi3")return h;for(let l of f.checks)switch(l.kind){case"min":vv(h,"minimum",l.value,l.message,v);break;case"max":vv(h,"maximum",l.value,l.message,v);break}return h};function SQ(f,v){return{...c(f.innerType._def,v),default:f.defaultValue()}}function bQ(f,v){return v.effectStrategy==="input"?c(f.schema._def,v):qv(v)}function RQ(f){return{type:"string",enum:Array.from(f.values)}}var EJ=(f)=>{if("type"in f&&f.type==="string")return!1;return"allOf"in f};function _Q(f,v){let h=[c(f.left._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),c(f.right._def,{...v,currentPath:[...v.currentPath,"allOf","1"]})].filter((Q)=>!!Q),l=v.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,r=[];return h.forEach((Q)=>{if(EJ(Q)){if(r.push(...Q.allOf),Q.unevaluatedProperties===void 0)l=void 0}else{let P=Q;if("additionalProperties"in Q&&Q.additionalProperties===!1){let{additionalProperties:W,...w}=Q;P=w}else l=void 0;r.push(P)}}),r.length?{allOf:r,...l}:void 0}function kQ(f,v){let h=typeof f.value;if(h!=="bigint"&&h!=="number"&&h!=="boolean"&&h!=="string")return{type:Array.isArray(f.value)?"array":"object"};if(v.target==="openApi3")return{type:h==="bigint"?"integer":h,enum:[f.value]};return{type:h==="bigint"?"integer":h,const:f.value}}var Nh=void 0,ev={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(Nh===void 0)Nh=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");return Nh},uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function N1(f,v){let h={type:"string"};if(f.checks)for(let l of f.checks)switch(l.kind){case"min":vv(h,"minLength",typeof h.minLength==="number"?Math.max(h.minLength,l.value):l.value,l.message,v);break;case"max":vv(h,"maxLength",typeof h.maxLength==="number"?Math.min(h.maxLength,l.value):l.value,l.message,v);break;case"email":switch(v.emailStrategy){case"format:email":vf(h,"email",l.message,v);break;case"format:idn-email":vf(h,"idn-email",l.message,v);break;case"pattern:zod":Rv(h,ev.email,l.message,v);break}break;case"url":vf(h,"uri",l.message,v);break;case"uuid":vf(h,"uuid",l.message,v);break;case"regex":Rv(h,l.regex,l.message,v);break;case"cuid":Rv(h,ev.cuid,l.message,v);break;case"cuid2":Rv(h,ev.cuid2,l.message,v);break;case"startsWith":Rv(h,RegExp(`^${Vh(l.value,v)}`),l.message,v);break;case"endsWith":Rv(h,RegExp(`${Vh(l.value,v)}$`),l.message,v);break;case"datetime":vf(h,"date-time",l.message,v);break;case"date":vf(h,"date",l.message,v);break;case"time":vf(h,"time",l.message,v);break;case"duration":vf(h,"duration",l.message,v);break;case"length":vv(h,"minLength",typeof h.minLength==="number"?Math.max(h.minLength,l.value):l.value,l.message,v),vv(h,"maxLength",typeof h.maxLength==="number"?Math.min(h.maxLength,l.value):l.value,l.message,v);break;case"includes":{Rv(h,RegExp(Vh(l.value,v)),l.message,v);break}case"ip":{if(l.version!=="v6")vf(h,"ipv4",l.message,v);if(l.version!=="v4")vf(h,"ipv6",l.message,v);break}case"base64url":Rv(h,ev.base64url,l.message,v);break;case"jwt":Rv(h,ev.jwt,l.message,v);break;case"cidr":{if(l.version!=="v6")Rv(h,ev.ipv4Cidr,l.message,v);if(l.version!=="v4")Rv(h,ev.ipv6Cidr,l.message,v);break}case"emoji":Rv(h,ev.emoji(),l.message,v);break;case"ulid":{Rv(h,ev.ulid,l.message,v);break}case"base64":{switch(v.base64Strategy){case"format:binary":{vf(h,"binary",l.message,v);break}case"contentEncoding:base64":{vv(h,"contentEncoding","base64",l.message,v);break}case"pattern:zod":{Rv(h,ev.base64,l.message,v);break}}break}case"nanoid":Rv(h,ev.nanoid,l.message,v);case"toLowerCase":case"toUpperCase":case"trim":break;default:((r)=>{})(l)}return h}function Vh(f,v){return v.patternStrategy==="escape"?MJ(f):f}var $J=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function MJ(f){let v="";for(let h=0;h<f.length;h++){if(!$J.has(f[h]))v+="\\";v+=f[h]}return v}function vf(f,v,h,l){if(f.format||f.anyOf?.some((r)=>r.format)){if(!f.anyOf)f.anyOf=[];if(f.format){if(f.anyOf.push({format:f.format,...f.errorMessage&&l.errorMessages&&{errorMessage:{format:f.errorMessage.format}}}),delete f.format,f.errorMessage){if(delete f.errorMessage.format,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.anyOf.push({format:v,...h&&l.errorMessages&&{errorMessage:{format:h}}})}else vv(f,"format",v,h,l)}function Rv(f,v,h,l){if(f.pattern||f.allOf?.some((r)=>r.pattern)){if(!f.allOf)f.allOf=[];if(f.pattern){if(f.allOf.push({pattern:f.pattern,...f.errorMessage&&l.errorMessages&&{errorMessage:{pattern:f.errorMessage.pattern}}}),delete f.pattern,f.errorMessage){if(delete f.errorMessage.pattern,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.allOf.push({pattern:aQ(v,l),...h&&l.errorMessages&&{errorMessage:{pattern:h}}})}else vv(f,"pattern",aQ(v,l),h,l)}function aQ(f,v){if(!v.applyRegexFlags||!f.flags)return f.source;let h={i:f.flags.includes("i"),m:f.flags.includes("m"),s:f.flags.includes("s")},l=h.i?f.source.toLowerCase():f.source,r="",Q=!1,P=!1,W=!1;for(let w=0;w<l.length;w++){if(Q){r+=l[w],Q=!1;continue}if(h.i){if(P){if(l[w].match(/[a-z]/)){if(W)r+=l[w],r+=`${l[w-2]}-${l[w]}`.toUpperCase(),W=!1;else if(l[w+1]==="-"&&l[w+2]?.match(/[a-z]/))r+=l[w],W=!0;else r+=`${l[w]}${l[w].toUpperCase()}`;continue}}else if(l[w].match(/[a-z]/)){r+=`[${l[w]}${l[w].toUpperCase()}]`;continue}}if(h.m){if(l[w]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(l[w]==="$"){r+=`($|(?=[\r
]))`;continue}}if(h.s&&l[w]==="."){r+=P?`${l[w]}\r
`:`[${l[w]}\r
]`;continue}if(r+=l[w],l[w]==="\\")Q=!0;else if(P&&l[w]==="]")P=!1;else if(!P&&l[w]==="[")P=!0}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${v.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),f.source}return r}function V1(f,v){if(v.target==="openAi")console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.");if(v.target==="openApi3"&&f.keyType?._def.typeName===A.ZodEnum)return{type:"object",required:f.keyType._def.values,properties:f.keyType._def.values.reduce((l,r)=>({...l,[r]:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"properties",r]})??qv(v)}),{}),additionalProperties:v.rejectedAdditionalProperties};let h={type:"object",additionalProperties:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]})??v.allowedAdditionalProperties};if(v.target==="openApi3")return h;if(f.keyType?._def.typeName===A.ZodString&&f.keyType._def.checks?.length){let{type:l,...r}=N1(f.keyType._def,v);return{...h,propertyNames:r}}else if(f.keyType?._def.typeName===A.ZodEnum)return{...h,propertyNames:{enum:f.keyType._def.values}};else if(f.keyType?._def.typeName===A.ZodBranded&&f.keyType._def.type._def.typeName===A.ZodString&&f.keyType._def.type._def.checks?.length){let{type:l,...r}=O1(f.keyType._def,v);return{...h,propertyNames:r}}return h}function IQ(f,v){if(v.mapStrategy==="record")return V1(f,v);let h=c(f.keyType._def,{...v,currentPath:[...v.currentPath,"items","items","0"]})||qv(v),l=c(f.valueType._def,{...v,currentPath:[...v.currentPath,"items","items","1"]})||qv(v);return{type:"array",maxItems:125,items:{type:"array",items:[h,l],minItems:2,maxItems:2}}}function CQ(f){let v=f.values,l=Object.keys(f.values).filter((Q)=>{return typeof v[v[Q]]!=="number"}).map((Q)=>v[Q]),r=Array.from(new Set(l.map((Q)=>typeof Q)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:l}}function ZQ(f){return f.target==="openAi"?void 0:{not:qv({...f,currentPath:[...f.currentPath,"not"]})}}function TQ(f){return f.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var jr={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function xQ(f,v){if(v.target==="openApi3")return uQ(f,v);let h=f.options instanceof Map?Array.from(f.options.values()):f.options;if(h.every((l)=>(l._def.typeName in jr)&&(!l._def.checks||!l._def.checks.length))){let l=h.reduce((r,Q)=>{let P=jr[Q._def.typeName];return P&&!r.includes(P)?[...r,P]:r},[]);return{type:l.length>1?l:l[0]}}else if(h.every((l)=>l._def.typeName==="ZodLiteral"&&!l.description)){let l=h.reduce((r,Q)=>{let P=typeof Q._def.value;switch(P){case"string":case"number":case"boolean":return[...r,P];case"bigint":return[...r,"integer"];case"object":if(Q._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(l.length===h.length){let r=l.filter((Q,P,W)=>W.indexOf(Q)===P);return{type:r.length>1?r:r[0],enum:h.reduce((Q,P)=>{return Q.includes(P._def.value)?Q:[...Q,P._def.value]},[])}}}else if(h.every((l)=>l._def.typeName==="ZodEnum"))return{type:"string",enum:h.reduce((l,r)=>[...l,...r._def.values.filter((Q)=>!l.includes(Q))],[])};return uQ(f,v)}var uQ=(f,v)=>{let h=(f.options instanceof Map?Array.from(f.options.values()):f.options).map((l,r)=>c(l._def,{...v,currentPath:[...v.currentPath,"anyOf",`${r}`]})).filter((l)=>!!l&&(!v.strictUnions||typeof l==="object"&&Object.keys(l).length>0));return h.length?{anyOf:h}:void 0};function mQ(f,v){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(f.innerType._def.typeName)&&(!f.innerType._def.checks||!f.innerType._def.checks.length)){if(v.target==="openApi3")return{type:jr[f.innerType._def.typeName],nullable:!0};return{type:[jr[f.innerType._def.typeName],"null"]}}if(v.target==="openApi3"){let l=c(f.innerType._def,{...v,currentPath:[...v.currentPath]});if(l&&"$ref"in l)return{allOf:[l],nullable:!0};return l&&{...l,nullable:!0}}let h=c(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","0"]});return h&&{anyOf:[h,{type:"null"}]}}function nQ(f,v){let h={type:"number"};if(!f.checks)return h;for(let l of f.checks)switch(l.kind){case"int":h.type="integer",Lh(h,"type",l.message,v);break;case"min":if(v.target==="jsonSchema7")if(l.inclusive)vv(h,"minimum",l.value,l.message,v);else vv(h,"exclusiveMinimum",l.value,l.message,v);else{if(!l.inclusive)h.exclusiveMinimum=!0;vv(h,"minimum",l.value,l.message,v)}break;case"max":if(v.target==="jsonSchema7")if(l.inclusive)vv(h,"maximum",l.value,l.message,v);else vv(h,"exclusiveMaximum",l.value,l.message,v);else{if(!l.inclusive)h.exclusiveMaximum=!0;vv(h,"maximum",l.value,l.message,v)}break;case"multipleOf":vv(h,"multipleOf",l.value,l.message,v);break}return h}function cQ(f,v){let h=v.target==="openAi",l={type:"object",properties:{}},r=[],Q=f.shape();for(let W in Q){let w=Q[W];if(w===void 0||w._def===void 0)continue;let B=HJ(w);if(B&&h){if(w._def.typeName==="ZodOptional")w=w._def.innerType;if(!w.isNullable())w=w.nullable();B=!1}let q=c(w._def,{...v,currentPath:[...v.currentPath,"properties",W],propertyPath:[...v.currentPath,"properties",W]});if(q===void 0)continue;if(l.properties[W]=q,!B)r.push(W)}if(r.length)l.required=r;let P=DJ(f,v);if(P!==void 0)l.additionalProperties=P;return l}function DJ(f,v){if(f.catchall._def.typeName!=="ZodNever")return c(f.catchall._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]});switch(f.unknownKeys){case"passthrough":return v.allowedAdditionalProperties;case"strict":return v.rejectedAdditionalProperties;case"strip":return v.removeAdditionalStrategy==="strict"?v.allowedAdditionalProperties:v.rejectedAdditionalProperties}}function HJ(f){try{return f.isOptional()}catch{return!0}}var iQ=(f,v)=>{if(v.currentPath.toString()===v.propertyPath?.toString())return c(f.innerType._def,v);let h=c(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","1"]});return h?{anyOf:[{not:qv(v)},h]}:qv(v)};var pQ=(f,v)=>{if(v.pipeStrategy==="input")return c(f.in._def,v);else if(v.pipeStrategy==="output")return c(f.out._def,v);let h=c(f.in._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),l=c(f.out._def,{...v,currentPath:[...v.currentPath,"allOf",h?"1":"0"]});return{allOf:[h,l].filter((r)=>r!==void 0)}};function dQ(f,v){return c(f.type._def,v)}function oQ(f,v){let l={type:"array",uniqueItems:!0,items:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"items"]})};if(f.minSize)vv(l,"minItems",f.minSize.value,f.minSize.message,v);if(f.maxSize)vv(l,"maxItems",f.maxSize.value,f.maxSize.message,v);return l}function tQ(f,v){if(f.rest)return{type:"array",minItems:f.items.length,items:f.items.map((h,l)=>c(h._def,{...v,currentPath:[...v.currentPath,"items",`${l}`]})).reduce((h,l)=>l===void 0?h:[...h,l],[]),additionalItems:c(f.rest._def,{...v,currentPath:[...v.currentPath,"additionalItems"]})};else return{type:"array",minItems:f.items.length,maxItems:f.items.length,items:f.items.map((h,l)=>c(h._def,{...v,currentPath:[...v.currentPath,"items",`${l}`]})).reduce((h,l)=>l===void 0?h:[...h,l],[])}}function sQ(f){return{not:qv(f)}}function eQ(f){return qv(f)}var vP=(f,v)=>{return c(f.innerType._def,v)};var fP=(f,v,h)=>{switch(v){case A.ZodString:return N1(f,h);case A.ZodNumber:return nQ(f,h);case A.ZodObject:return cQ(f,h);case A.ZodBigInt:return FQ(f,h);case A.ZodBoolean:return jQ();case A.ZodDate:return Oh(f,h);case A.ZodUndefined:return sQ(h);case A.ZodNull:return TQ(h);case A.ZodArray:return AQ(f,h);case A.ZodUnion:case A.ZodDiscriminatedUnion:return xQ(f,h);case A.ZodIntersection:return _Q(f,h);case A.ZodTuple:return tQ(f,h);case A.ZodRecord:return V1(f,h);case A.ZodLiteral:return kQ(f,h);case A.ZodEnum:return RQ(f);case A.ZodNativeEnum:return CQ(f);case A.ZodNullable:return mQ(f,h);case A.ZodOptional:return iQ(f,h);case A.ZodMap:return IQ(f,h);case A.ZodSet:return oQ(f,h);case A.ZodLazy:return()=>f.getter()._def;case A.ZodPromise:return dQ(f,h);case A.ZodNaN:case A.ZodNever:return ZQ(h);case A.ZodEffects:return bQ(f,h);case A.ZodAny:return qv(h);case A.ZodUnknown:return eQ(h);case A.ZodDefault:return SQ(f,h);case A.ZodBranded:return O1(f,h);case A.ZodReadonly:return vP(f,h);case A.ZodCatch:return yQ(f,h);case A.ZodPipeline:return pQ(f,h);case A.ZodFunction:case A.ZodVoid:case A.ZodSymbol:return;default:return((l)=>{return})(v)}};function c(f,v,h=!1){let l=v.seen.get(f);if(v.override){let W=v.override?.(f,v,l,h);if(W!==VQ)return W}if(l&&!h){let W=KJ(l,v);if(W!==void 0)return W}let r={def:f,path:v.currentPath,jsonSchema:void 0};v.seen.set(f,r);let Q=fP(f,f.typeName,v),P=typeof Q==="function"?c(Q(),v):Q;if(P)LJ(f,v,P);if(v.postProcess){let W=v.postProcess(P,f,v);return r.jsonSchema=P,W}return r.jsonSchema=P,P}var KJ=(f,v)=>{switch(v.$refStrategy){case"root":return{$ref:f.path.join("/")};case"relative":return{$ref:L1(v.currentPath,f.path)};case"none":case"seen":{if(f.path.length<v.currentPath.length&&f.path.every((h,l)=>v.currentPath[l]===h))return console.warn(`Recursive reference detected at ${v.currentPath.join("/")}! Defaulting to any`),qv(v);return v.$refStrategy==="seen"?qv(v):void 0}}},LJ=(f,v,h)=>{if(f.description){if(h.description=f.description,v.markdownDescription)h.markdownDescription=f.description}return h};var U1=(f,v)=>{let h=gQ(v),l=typeof v==="object"&&v.definitions?Object.entries(v.definitions).reduce((w,[B,q])=>({...w,[B]:c(q._def,{...h,currentPath:[...h.basePath,h.definitionPath,B]},!0)??qv(h)}),{}):void 0,r=typeof v==="string"?v:v?.nameStrategy==="title"?void 0:v?.name,Q=c(f._def,r===void 0?h:{...h,currentPath:[...h.basePath,h.definitionPath,r]},!1)??qv(h),P=typeof v==="object"&&v.name!==void 0&&v.nameStrategy==="title"?v.name:void 0;if(P!==void 0)Q.title=P;if(h.flags.hasReferencedOpenAiAnyType){if(!l)l={};if(!l[h.openAiAnyTypeName])l[h.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:h.$refStrategy==="relative"?"1":[...h.basePath,h.definitionPath,h.openAiAnyTypeName].join("/")}}}let W=r===void 0?l?{...Q,[h.definitionPath]:l}:Q:{$ref:[...h.$refStrategy==="relative"?[]:h.basePath,h.definitionPath,r].join("/"),[h.definitionPath]:{...l,[r]:Q}};if(h.target==="jsonSchema7")W.$schema="http://json-schema.org/draft-07/schema#";else if(h.target==="jsonSchema2019-09"||h.target==="openAi")W.$schema="https://json-schema.org/draft/2019-09/schema#";if(h.target==="openAi"&&(("anyOf"in W)||("oneOf"in W)||("allOf"in W)||("type"in W)&&Array.isArray(W.type)))console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.");return W};var Uh;(function(f){f.Completable="McpCompletable"})(Uh||(Uh={}));class yr extends o{_parse(f){let{ctx:v}=this._processInputParams(f),h=v.data;return this._def.type._parse({data:h,path:v.path,parent:v})}unwrap(){return this._def.type}}yr.create=(f,v)=>{return new yr({type:f,typeName:Uh.Completable,complete:v.complete,...OJ(v)})};function OJ(f){if(!f)return{};let{errorMap:v,invalid_type_error:h,required_error:l,description:r}=f;if(v&&(h||l))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:r};return{errorMap:(P,W)=>{var w,B;let{message:q}=f;if(P.code==="invalid_enum_value")return{message:q!==null&&q!==void 0?q:W.defaultError};if(typeof W.data>"u")return{message:(w=q!==null&&q!==void 0?q:l)!==null&&w!==void 0?w:W.defaultError};if(P.code!=="invalid_type")return{message:W.defaultError};return{message:(B=q!==null&&q!==void 0?q:h)!==null&&B!==void 0?B:W.defaultError}},description:r}}class gh{constructor(f,v){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Kh(f,v)}async connect(f){return await this.server.connect(f)}async close(){await this.server.close()}setToolRequestHandlers(){if(this._toolHandlersInitialized)return;this.server.assertCanSetRequestHandler(f1.shape.method.value),this.server.assertCanSetRequestHandler(r1.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(f1,()=>({tools:Object.entries(this._registeredTools).filter(([,f])=>f.enabled).map(([f,v])=>{let h={name:f,title:v.title,description:v.description,inputSchema:v.inputSchema?U1(v.inputSchema,{strictUnions:!0}):NJ,annotations:v.annotations,_meta:v._meta};if(v.outputSchema)h.outputSchema=U1(v.outputSchema,{strictUnions:!0});return h})})),this.server.setRequestHandler(r1,async(f,v)=>{let h=this._registeredTools[f.params.name];if(!h)throw new Bv(Yv.InvalidParams,`Tool ${f.params.name} not found`);if(!h.enabled)throw new Bv(Yv.InvalidParams,`Tool ${f.params.name} disabled`);let l;if(h.inputSchema){let r=await h.inputSchema.safeParseAsync(f.params.arguments);if(!r.success)throw new Bv(Yv.InvalidParams,`Invalid arguments for tool ${f.params.name}: ${r.error.message}`);let Q=r.data,P=h.callback;try{l=await Promise.resolve(P(Q,v))}catch(W){l={content:[{type:"text",text:W instanceof Error?W.message:String(W)}],isError:!0}}}else{let r=h.callback;try{l=await Promise.resolve(r(v))}catch(Q){l={content:[{type:"text",text:Q instanceof Error?Q.message:String(Q)}],isError:!0}}}if(h.outputSchema&&!l.isError){if(!l.structuredContent)throw new Bv(Yv.InvalidParams,`Tool ${f.params.name} has an output schema but no structured content was provided`);let r=await h.outputSchema.safeParseAsync(l.structuredContent);if(!r.success)throw new Bv(Yv.InvalidParams,`Invalid structured content for tool ${f.params.name}: ${r.error.message}`)}return l}),this._toolHandlersInitialized=!0}setCompletionRequestHandler(){if(this._completionHandlerInitialized)return;this.server.assertCanSetRequestHandler(h1.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(h1,async(f)=>{switch(f.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(f,f.params.ref);case"ref/resource":return this.handleResourceCompletion(f,f.params.ref);default:throw new Bv(Yv.InvalidParams,`Invalid completion reference: ${f.params.ref}`)}}),this._completionHandlerInitialized=!0}async handlePromptCompletion(f,v){let h=this._registeredPrompts[v.name];if(!h)throw new Bv(Yv.InvalidParams,`Prompt ${v.name} not found`);if(!h.enabled)throw new Bv(Yv.InvalidParams,`Prompt ${v.name} disabled`);if(!h.argsSchema)return g1;let l=h.argsSchema.shape[f.params.argument.name];if(!(l instanceof yr))return g1;let Q=await l._def.complete(f.params.argument.value,f.params.context);return hP(Q)}async handleResourceCompletion(f,v){let h=Object.values(this._registeredResourceTemplates).find((Q)=>Q.resourceTemplate.uriTemplate.toString()===v.uri);if(!h){if(this._registeredResources[v.uri])return g1;throw new Bv(Yv.InvalidParams,`Resource template ${f.params.ref.uri} not found`)}let l=h.resourceTemplate.completeCallback(f.params.argument.name);if(!l)return g1;let r=await l(f.params.argument.value,f.params.context);return hP(r)}setResourceRequestHandlers(){if(this._resourceHandlersInitialized)return;this.server.assertCanSetRequestHandler(or.shape.method.value),this.server.assertCanSetRequestHandler(tr.shape.method.value),this.server.assertCanSetRequestHandler(sr.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(or,async(f,v)=>{let h=Object.entries(this._registeredResources).filter(([r,Q])=>Q.enabled).map(([r,Q])=>({uri:r,name:Q.name,...Q.metadata})),l=[];for(let r of Object.values(this._registeredResourceTemplates)){if(!r.resourceTemplate.listCallback)continue;let Q=await r.resourceTemplate.listCallback(v);for(let P of Q.resources)l.push({...r.metadata,...P})}return{resources:[...h,...l]}}),this.server.setRequestHandler(tr,async()=>{return{resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([v,h])=>({name:v,uriTemplate:h.resourceTemplate.uriTemplate.toString(),...h.metadata}))}}),this.server.setRequestHandler(sr,async(f,v)=>{let h=new URL(f.params.uri),l=this._registeredResources[h.toString()];if(l){if(!l.enabled)throw new Bv(Yv.InvalidParams,`Resource ${h} disabled`);return l.readCallback(h,v)}for(let r of Object.values(this._registeredResourceTemplates)){let Q=r.resourceTemplate.uriTemplate.match(h.toString());if(Q)return r.readCallback(h,Q,v)}throw new Bv(Yv.InvalidParams,`Resource ${h} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0}setPromptRequestHandlers(){if(this._promptHandlersInitialized)return;this.server.assertCanSetRequestHandler(er.shape.method.value),this.server.assertCanSetRequestHandler(v1.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(er,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,f])=>f.enabled).map(([f,v])=>{return{name:f,title:v.title,description:v.description,arguments:v.argsSchema?UJ(v.argsSchema):void 0}})})),this.server.setRequestHandler(v1,async(f,v)=>{let h=this._registeredPrompts[f.params.name];if(!h)throw new Bv(Yv.InvalidParams,`Prompt ${f.params.name} not found`);if(!h.enabled)throw new Bv(Yv.InvalidParams,`Prompt ${f.params.name} disabled`);if(h.argsSchema){let l=await h.argsSchema.safeParseAsync(f.params.arguments);if(!l.success)throw new Bv(Yv.InvalidParams,`Invalid arguments for prompt ${f.params.name}: ${l.error.message}`);let r=l.data,Q=h.callback;return await Promise.resolve(Q(r,v))}else{let l=h.callback;return await Promise.resolve(l(v))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0}resource(f,v,...h){let l;if(typeof h[0]==="object")l=h.shift();let r=h[0];if(typeof v==="string"){if(this._registeredResources[v])throw Error(`Resource ${v} is already registered`);let Q=this._createRegisteredResource(f,void 0,v,l,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Q}else{if(this._registeredResourceTemplates[f])throw Error(`Resource template ${f} is already registered`);let Q=this._createRegisteredResourceTemplate(f,void 0,v,l,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Q}}registerResource(f,v,h,l){if(typeof v==="string"){if(this._registeredResources[v])throw Error(`Resource ${v} is already registered`);let r=this._createRegisteredResource(f,h.title,v,h,l);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),r}else{if(this._registeredResourceTemplates[f])throw Error(`Resource template ${f} is already registered`);let r=this._createRegisteredResourceTemplate(f,h.title,v,h,l);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),r}}_createRegisteredResource(f,v,h,l,r){let Q={name:f,title:v,metadata:l,readCallback:r,enabled:!0,disable:()=>Q.update({enabled:!1}),enable:()=>Q.update({enabled:!0}),remove:()=>Q.update({uri:null}),update:(P)=>{if(typeof P.uri<"u"&&P.uri!==h){if(delete this._registeredResources[h],P.uri)this._registeredResources[P.uri]=Q}if(typeof P.name<"u")Q.name=P.name;if(typeof P.title<"u")Q.title=P.title;if(typeof P.metadata<"u")Q.metadata=P.metadata;if(typeof P.callback<"u")Q.readCallback=P.callback;if(typeof P.enabled<"u")Q.enabled=P.enabled;this.sendResourceListChanged()}};return this._registeredResources[h]=Q,Q}_createRegisteredResourceTemplate(f,v,h,l,r){let Q={resourceTemplate:h,title:v,metadata:l,readCallback:r,enabled:!0,disable:()=>Q.update({enabled:!1}),enable:()=>Q.update({enabled:!0}),remove:()=>Q.update({name:null}),update:(P)=>{if(typeof P.name<"u"&&P.name!==f){if(delete this._registeredResourceTemplates[f],P.name)this._registeredResourceTemplates[P.name]=Q}if(typeof P.title<"u")Q.title=P.title;if(typeof P.template<"u")Q.resourceTemplate=P.template;if(typeof P.metadata<"u")Q.metadata=P.metadata;if(typeof P.callback<"u")Q.readCallback=P.callback;if(typeof P.enabled<"u")Q.enabled=P.enabled;this.sendResourceListChanged()}};return this._registeredResourceTemplates[f]=Q,Q}_createRegisteredPrompt(f,v,h,l,r){let Q={title:v,description:h,argsSchema:l===void 0?void 0:J.object(l),callback:r,enabled:!0,disable:()=>Q.update({enabled:!1}),enable:()=>Q.update({enabled:!0}),remove:()=>Q.update({name:null}),update:(P)=>{if(typeof P.name<"u"&&P.name!==f){if(delete this._registeredPrompts[f],P.name)this._registeredPrompts[P.name]=Q}if(typeof P.title<"u")Q.title=P.title;if(typeof P.description<"u")Q.description=P.description;if(typeof P.argsSchema<"u")Q.argsSchema=J.object(P.argsSchema);if(typeof P.callback<"u")Q.callback=P.callback;if(typeof P.enabled<"u")Q.enabled=P.enabled;this.sendPromptListChanged()}};return this._registeredPrompts[f]=Q,Q}_createRegisteredTool(f,v,h,l,r,Q,P,W){let w={title:v,description:h,inputSchema:l===void 0?void 0:J.object(l),outputSchema:r===void 0?void 0:J.object(r),annotations:Q,_meta:P,callback:W,enabled:!0,disable:()=>w.update({enabled:!1}),enable:()=>w.update({enabled:!0}),remove:()=>w.update({name:null}),update:(B)=>{if(typeof B.name<"u"&&B.name!==f){if(delete this._registeredTools[f],B.name)this._registeredTools[B.name]=w}if(typeof B.title<"u")w.title=B.title;if(typeof B.description<"u")w.description=B.description;if(typeof B.paramsSchema<"u")w.inputSchema=J.object(B.paramsSchema);if(typeof B.callback<"u")w.callback=B.callback;if(typeof B.annotations<"u")w.annotations=B.annotations;if(typeof B._meta<"u")w._meta=B._meta;if(typeof B.enabled<"u")w.enabled=B.enabled;this.sendToolListChanged()}};return this._registeredTools[f]=w,this.setToolRequestHandlers(),this.sendToolListChanged(),w}tool(f,...v){if(this._registeredTools[f])throw Error(`Tool ${f} is already registered`);let h,l,r,Q;if(typeof v[0]==="string")h=v.shift();if(v.length>1){let W=v[0];if(rP(W)){if(l=v.shift(),v.length>1&&typeof v[0]==="object"&&v[0]!==null&&!rP(v[0]))Q=v.shift()}else if(typeof W==="object"&&W!==null)Q=v.shift()}let P=v[0];return this._createRegisteredTool(f,void 0,h,l,r,Q,void 0,P)}registerTool(f,v,h){if(this._registeredTools[f])throw Error(`Tool ${f} is already registered`);let{title:l,description:r,inputSchema:Q,outputSchema:P,annotations:W,_meta:w}=v;return this._createRegisteredTool(f,l,r,Q,P,W,w,h)}prompt(f,...v){if(this._registeredPrompts[f])throw Error(`Prompt ${f} is already registered`);let h;if(typeof v[0]==="string")h=v.shift();let l;if(v.length>1)l=v.shift();let r=v[0],Q=this._createRegisteredPrompt(f,void 0,h,l,r);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),Q}registerPrompt(f,v,h){if(this._registeredPrompts[f])throw Error(`Prompt ${f} is already registered`);let{title:l,description:r,argsSchema:Q}=v,P=this._createRegisteredPrompt(f,l,r,Q,h);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),P}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(f,v){return this.server.sendLoggingMessage(f,v)}sendResourceListChanged(){if(this.isConnected())this.server.sendResourceListChanged()}sendToolListChanged(){if(this.isConnected())this.server.sendToolListChanged()}sendPromptListChanged(){if(this.isConnected())this.server.sendPromptListChanged()}}var NJ={type:"object",properties:{}};function rP(f){if(typeof f!=="object"||f===null)return!1;return Object.keys(f).length===0||Object.values(f).some(VJ)}function VJ(f){return f!==null&&typeof f==="object"&&"parse"in f&&typeof f.parse==="function"&&"safeParse"in f&&typeof f.safeParse==="function"}function UJ(f){return Object.entries(f.shape).map(([v,h])=>({name:v,description:h.description,required:!h.isOptional()}))}function hP(f){return{completion:{values:f.slice(0,100),total:f.length,hasMore:f.length>100}}}var g1={completion:{values:[],hasMore:!1}};import QP from"node:process";class Ah{append(f){this._buffer=this._buffer?Buffer.concat([this._buffer,f]):f}readMessage(){if(!this._buffer)return null;let f=this._buffer.indexOf(`
`);if(f===-1)return null;let v=this._buffer.toString("utf8",0,f).replace(/\r$/,"");return this._buffer=this._buffer.subarray(f+1),gJ(v)}clear(){this._buffer=void 0}}function gJ(f){return Gl.parse(JSON.parse(f))}function lP(f){return JSON.stringify(f)+`
`}class Fh{constructor(f=QP.stdin,v=QP.stdout){this._stdin=f,this._stdout=v,this._readBuffer=new Ah,this._started=!1,this._ondata=(h)=>{this._readBuffer.append(h),this.processReadBuffer()},this._onerror=(h)=>{var l;(l=this.onerror)===null||l===void 0||l.call(this,h)}}async start(){if(this._started)throw Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){var f,v;while(!0)try{let h=this._readBuffer.readMessage();if(h===null)break;(f=this.onmessage)===null||f===void 0||f.call(this,h)}catch(h){(v=this.onerror)===null||v===void 0||v.call(this,h)}}async close(){var f;if(this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0)this._stdin.pause();this._readBuffer.clear(),(f=this.onclose)===null||f===void 0||f.call(this)}send(f){return new Promise((v)=>{let h=lP(f);if(this._stdout.write(h))v();else this._stdout.once("drain",v)})}}var Zf=new PP,Iv={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};async function AJ(f){try{let{key:v,value:h,namespace:l="default"}=f,r=JSON.parse(h);return await Zf.set(v,r,l),Iv.info(`Stored memory: ${l}:${v}`),{content:[{type:"text",text:`✅ Stored memory: ${l}:${v}`}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Iv.error("Error storing memory",v),{content:[{type:"text",text:`❌ Error storing memory: ${h}`}],isError:!0}}}async function FJ(f){try{let{key:v,namespace:h="default"}=f,l=await Zf.get(v,h);if(!l)return{content:[{type:"text",text:`❌ Memory not found: ${h}:${v}`}],isError:!0};let r=Date.now()-l.timestamp;return Iv.info(`Retrieved memory: ${h}:${v}`),{content:[{type:"text",text:JSON.stringify({key:`${h}:${v}`,value:l.value,namespace:l.namespace,timestamp:l.timestamp,created_at:l.created_at,updated_at:l.updated_at,age_seconds:Math.floor(r/1000)},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Iv.error("Error retrieving memory",v),{content:[{type:"text",text:`❌ Error retrieving memory: ${h}`}],isError:!0}}}async function jJ(f){try{let{pattern:v,namespace:h}=f,r=(await Zf.getAll()).filter((Q)=>{let P=Q.key.toLowerCase().includes(v.toLowerCase())||Q.namespace.toLowerCase().includes(v.toLowerCase())||JSON.stringify(Q.value).toLowerCase().includes(v.toLowerCase()),W=!h||Q.namespace===h;return P&&W});return Iv.info(`Searched memory: "${v}" (${r.length} results)`),{content:[{type:"text",text:JSON.stringify({pattern:v,namespace:h||"all",count:r.length,results:r.map((Q)=>({key:Q.key,namespace:Q.namespace,value:Q.value,timestamp:Q.timestamp,updated_at:Q.updated_at}))},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Iv.error("Error searching memory",v),{content:[{type:"text",text:`❌ Error searching memory: ${h}`}],isError:!0}}}async function yJ(f){try{let{namespace:v}=f,h=await Zf.getAll();return Iv.info(`Listed memory: ${h.length} entries`),{content:[{type:"text",text:JSON.stringify({namespace:v||"all",count:h.length,entries:h.map((l)=>({key:l.key,namespace:l.namespace,value:l.value,timestamp:l.timestamp,updated_at:l.updated_at}))},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Iv.error("Error listing memory",v),{content:[{type:"text",text:`❌ Error listing memory: ${h}`}],isError:!0}}}async function SJ(f){try{let{key:v,namespace:h="default"}=f;if(!await Zf.delete(v,h))return{content:[{type:"text",text:`❌ Memory not found: ${h}:${v}`}],isError:!0};return Iv.info(`Deleted memory: ${h}:${v}`),{content:[{type:"text",text:`✅ Deleted memory: ${h}:${v}`}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Iv.error("Error deleting memory",v),{content:[{type:"text",text:`❌ Error deleting memory: ${h}`}],isError:!0}}}async function bJ(f){try{let{namespace:v}=f;return await Zf.clear(v),Iv.info(`Cleared memory: ${v||"all"}`),{content:[{type:"text",text:`✅ Cleared memory: ${v||"all namespaces"}`}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Iv.error("Error clearing memory",v),{content:[{type:"text",text:`❌ Error clearing memory: ${h}`}],isError:!0}}}async function RJ(){try{let f=await Zf.getStats();return Iv.info("Retrieved memory stats"),{content:[{type:"text",text:JSON.stringify({total_entries:f.totalEntries,namespaces:f.namespaces,oldest_entry:f.oldestEntry,newest_entry:f.newestEntry,database_path:".sylphx-flow/memory.db"},null,2)}]}}catch(f){let v=f instanceof Error?f.message:String(f);return Iv.error("Error getting memory stats",f),{content:[{type:"text",text:`❌ Error getting memory stats: ${v}`}],isError:!0}}}function WP(f){f.registerTool("memory_set",{description:"Store a value in persistent memory for agent coordination",inputSchema:{key:J.string().describe("Memory key (e.g., 'swarm/coder/status')"),value:J.string().describe("Value to store (will be JSON stringified)"),namespace:J.string().optional().describe("Optional namespace for organization")}},AJ),f.registerTool("memory_get",{description:"Retrieve a value from persistent memory",inputSchema:{key:J.string().describe("Memory key to retrieve"),namespace:J.string().optional().describe("Optional namespace")}},FJ),f.registerTool("memory_search",{description:"Search memory entries by pattern",inputSchema:{pattern:J.string().describe("Search pattern (matches keys, namespaces, and values)"),namespace:J.string().optional().describe("Optional namespace to limit search")}},jJ),f.registerTool("memory_list",{description:"List all memory entries",inputSchema:{namespace:J.string().optional().describe("Optional namespace to filter by")}},yJ),f.registerTool("memory_delete",{description:"Delete a memory entry",inputSchema:{key:J.string().describe("Memory key to delete"),namespace:J.string().optional().describe("Optional namespace")}},SJ),f.registerTool("memory_clear",{description:"Clear memory entries",inputSchema:{namespace:J.string().optional().describe("Optional namespace to clear (omits to clear all)")}},bJ),f.registerTool("memory_stats",{description:"Get memory storage statistics",inputSchema:{}},RJ)}import{execSync as kJ}from"node:child_process";import{existsSync as aJ,mkdirSync as IJ,writeFileSync as CJ}from"node:fs";import{join as XP}from"node:path";import{readFileSync as JP,writeFileSync as _J}from"node:fs";import{join as wP}from"node:path";class jh{templatesDir;mode;constructor(f,v="coordinator"){this.templatesDir=f,this.mode=v}loadTemplate(f){if(["spec","plan","validation","reviews"].includes(f)){let l=wP(this.templatesDir,"shared",`${f}-template.md`);return JP(l,"utf8")}let h=wP(this.templatesDir,this.mode,`${f}-template.md`);return JP(h,"utf8")}replaceVariables(f,v){let h=f;for(let[l,r]of Object.entries(v)){let Q=new RegExp(`{{${l}}}`,"g");h=h.replace(Q,String(r))}return h=h.replace(/{{#if (\w+)}}([\s\S]*?){{\/if}}/g,(l,r,Q)=>{let P=v[r];return P&&P!=="false"&&P!=="0"&&P!==""?Q:""}),h=h.replace(/{{#each (\w+)}}([\s\S]*?){{\/each}}/g,(l,r,Q)=>{let P=v[r];if(!Array.isArray(P))return"";return P.map((W,w)=>{let B=Q;return B=B.replace(/{{this}}/g,String(W)),B=B.replace(/{{@index}}/g,String(w)),B}).join(`
`)}),h}generateTemplate(f,v){let h=this.loadTemplate(f);return this.replaceVariables(h,v)}createFile(f,v,h){let l=this.generateTemplate(f,v);_J(h,l,"utf8")}generateAllProjectTemplates(f){let v={},h=["spec","progress","plan","tasks","validation","reviews"];for(let l of h)v[l]=this.generateTemplate(l,f);return v}}var Uf={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};function ZJ(){let v="";for(let h=0;h<8;h++)v+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(Math.random()*36));return`-${v}`}function TJ(f,v){return`${{feature:"feat",bugfix:"fix",hotfix:"fix",refactor:"refactor",migration:"feat"}[f]||"feat"}(${f}): initialize ${v} workspace and comprehensive templates`}function uJ(f,v){let h={feature:`New feature implementation for ${v}`,bugfix:`Bug fix for ${v} issue`,hotfix:`Critical hotfix for ${v}`,refactor:`Code refactoring for ${v}`,migration:`Migration project for ${v}`},l={feature:["Define feature specifications","Implement core functionality","Write comprehensive tests","Update documentation","Code review and validation"],bugfix:["Identify root cause","Implement fix","Add regression tests","Verify fix resolves issue","Update documentation if needed"],hotfix:["Implement immediate fix","Test critical path","Deploy hotfix","Schedule proper fix follow-up"],refactor:["Analyze current code structure","Plan refactoring approach","Implement refactored code","Ensure all tests pass","Update documentation"],migration:["Analyze current system","Plan migration strategy","Implement migration code","Test migration process","Deploy and verify"]},r={feature:`Successfully implement the ${v} feature with full functionality and testing`,bugfix:`Resolve the ${v} issue completely and prevent recurrence`,hotfix:`Quickly address critical ${v} issue to restore system stability`,refactor:`Improve code quality and maintainability for ${v}`,migration:`Successfully migrate ${v} to new system with minimal disruption`},Q={feature:"Implementation of new feature including frontend, backend, tests, and documentation",bugfix:"Fix for specific issue including root cause analysis and prevention measures",hotfix:"Minimal change to address critical issue with immediate deployment",refactor:"Code structure improvements without changing external behavior",migration:"Complete migration of existing functionality to new system or platform"};return{description:h[f]||`Project for ${v}`,requirements:l[f]||["Define requirements","Implement solution","Test and validate"],objective:r[f]||`Complete ${v} project successfully`,scope:Q[f]||"Project scope to be defined"}}function A1(f){try{return{success:!0,output:kJ(f,{encoding:"utf8",cwd:process.cwd()}).trim(),error:""}}catch(v){return{success:!1,output:"",error:v instanceof Error?v.message:"Unknown error"}}}function xJ(f){if(!aJ(f))IJ(f,{recursive:!0}),Uf.info(`Created directory: ${f}`)}function mJ(f,v){CJ(f,v,"utf8"),Uf.info(`Created file: ${f}`)}function BP(f){f.registerTool("project_startup",{description:"Initialize a new project with comprehensive templates and workspace structure",inputSchema:{project_type:J.enum(["feature","bugfix","hotfix","refactor","migration"]).describe("Type of project"),project_name:J.string().describe("Name of the project (use letters, numbers, hyphens, underscores only)"),create_branch:J.boolean().optional().describe("Whether to create a git branch (default: true)"),mode:J.enum(["coordinator","implementer"]).optional().describe("Execution mode: coordinator (delegation-based) or implementer (direct execution). Default: coordinator")}},nJ)}function nJ(f){try{let{project_type:v,project_name:h,create_branch:l=!0,mode:r="coordinator"}=f,Q=uJ(v,h),{description:P,requirements:W,objective:w,scope:B}=Q;if(!/^[a-zA-Z0-9-_]+$/.test(h))return{content:[{type:"text",text:`❌ Invalid project name: "${h}". Use only letters, numbers, hyphens, and underscores.`}],isError:!0};let q=ZJ(),$=`${v}/${h}${q}`,D=XP("specs",v,`${h}${q}`),X=new Date().toISOString().split("T")[0];Uf.info(`\uD83D\uDE80 Starting project initialization: ${$}`);let z={success:!0,output:"",error:""};if(l){let V=A1("git rev-parse --abbrev-ref HEAD");if(V.success&&V.output!=="main")return{content:[{type:"text",text:`❌ Not on main branch. Current branch: ${V.output}. Please switch to main first.`}],isError:!0};if(z=A1(`git checkout -b ${$}`),!z.success)return{content:[{type:"text",text:`❌ Failed to create branch "${$}": ${z.error}`}],isError:!0};Uf.success(`✅ Created and checked out branch: ${$}`)}xJ(D);let H={PROJECT_NAME:h,PROJECT_TYPE:v,DESCRIPTION:P,REQUIREMENTS:W,TIMESTAMP:X,BRANCH_NAME:$,PROJECT_ID:`${h}${q}`,CURRENT_PHASE:"Phase 1: Requirements Analysis",LAST_UPDATED:new Date().toISOString(),NEXT_ACTION:"Complete requirements specification and proceed to Phase 2",STATUS:"Not Started",PHASE_1_STATUS:"In Progress",PHASE_1_COMPLETE:"0",PHASE_1_UPDATED:new Date().toISOString(),PHASE_1_NOTES:"Starting requirements analysis (0% complete)",PHASE_2_STATUS:"Not Started",PHASE_2_COMPLETE:"0",PHASE_2_UPDATED:new Date().toISOString(),PHASE_2_NOTES:"Awaiting research and clarification",PHASE_3_STATUS:"Not Started",PHASE_3_COMPLETE:"0",PHASE_3_UPDATED:new Date().toISOString(),PHASE_3_NOTES:"Awaiting design phase",PHASE_4_STATUS:"Not Started",PHASE_4_COMPLETE:"0",PHASE_4_UPDATED:new Date().toISOString(),PHASE_4_NOTES:"Awaiting task breakdown",PHASE_5_STATUS:"Not Started",PHASE_5_COMPLETE:"0",PHASE_5_UPDATED:new Date().toISOString(),PHASE_5_NOTES:"Awaiting validation",PHASE_6_STATUS:"Not Started",PHASE_6_COMPLETE:"0",PHASE_6_UPDATED:new Date().toISOString(),PHASE_6_NOTES:"Awaiting implementation",PHASE_7_STATUS:"Not Started",PHASE_7_COMPLETE:"0",PHASE_7_UPDATED:new Date().toISOString(),PHASE_7_NOTES:"Awaiting testing and review",PHASE_8_STATUS:"Not Started",PHASE_8_COMPLETE:"0",PHASE_8_UPDATED:new Date().toISOString(),PHASE_8_NOTES:"Awaiting final merge",OBJECTIVE:w||`Implement ${h}`,SCOPE:B||"To be defined",CRITICAL_PATH:"To be defined during task breakdown",PARALLEL_OPPORTUNITIES:"To be identified during planning",RESOURCE_CONFLICTS:"To be resolved during planning",INTEGRATION_POINTS:"To be identified during design",VALIDATED_BY:"To be assigned",VALIDATION_DATE:X,OVERALL_STATUS:"Pending",REVIEW_PERIOD:`${X} onwards`,TOTAL_REVIEWS:"0",QUALITY_SCORE:"0",REVIEW_DATE:X,REVIEWER:"To be assigned",REVIEW_SCOPE:"Full implementation review",IMPLEMENTATION_STATUS:"Not Started",VALIDATOR:"To be assigned",VALIDATION_SCOPE:"Full project validation",REQUIREMENTS_COVERAGE_STATUS:"Pending",ACCEPTANCE_CRITERIA_MAPPED:"Pending",SUCCESS_CRITERIA_MEASURABLE:"Pending",SCOPE_CREEP_PREVENTION:"Pending",ARCHITECTURE_ALIGNMENT:"Pending",INTEGRATION_POINTS_VERIFIED:"Pending",DESIGN_CONFLICTS_RESOLVED:"Pending",TECHNICAL_FEASIBILITY:"Pending",TASK_COMPLETENESS:"Pending",DEPENDENCY_MAPPING_ACCURACY:"Pending",RESOURCE_ALLOCATION_ADEQUATE:"Pending",CRITICAL_PATH_IDENTIFIED:"Pending",TDD_STRATEGY_DEFINED:"Pending",TASK_1_ID:"TASK-001",TASK_1_DESC:"To be defined",TASK_1_STATUS:"Not Started",TASK_1_COMPLETION:"0",TASK_1_DELIVERABLE:"To be defined",TASK_1_QUALITY:"Pending",TASK_2_ID:"TASK-002",TASK_2_DESC:"To be defined",TASK_2_STATUS:"Not Started",TASK_2_COMPLETION:"0",TASK_2_DELIVERABLE:"To be defined",TASK_2_QUALITY:"Pending",TASK_3_ID:"TASK-003",TASK_3_DESC:"To be defined",TASK_3_STATUS:"Not Started",TASK_3_COMPLETION:"0",TASK_3_DELIVERABLE:"To be defined",TASK_3_QUALITY:"Pending",OVERALL_TASK_COMPLETION:"0",ALL_TASKS_COMPLETED:"No",TOTAL_COMMITS:"0",COMMITS_PER_TASK:"0",COMMIT_QUALITY:"Pending",BRANCH_STRATEGY_COMPLIANCE:"Pending"},E=YP(),U=new jh(E,r).generateAllProjectTemplates(H),N=[];for(let[V,j]of Object.entries(U)){let R=XP(D,`${V}.md`);mJ(R,j),N.push(`${V}.md`)}if(l){let V=A1("git add ."),j=A1(`git commit -m "${TJ(v,h)}"`);if(!V.success||!j.success)Uf.error("Warning: Failed to create initial commit");else Uf.success("✅ Created initial commit with project templates")}return Uf.success(`✅ Project "${h}" initialized successfully!`),{content:[{type:"text",text:JSON.stringify({success:!0,project:{type:v,name:h,branch:$,workspace:D,description:P,requirements:W,objective:w,scope:B},setup:{branch_created:l&&z.success,workspace_created:!0,templates_created:N,initial_commit:l},next_steps:[`1. Review and update specs/${v}/${h}/spec.md with detailed requirements`,"2. Fill in project-specific data in all template files","3. Proceed with Phase 1: SPECIFY & CLARIFY","4. Follow the workflow in progress.md"]},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return Uf.error("Error in project startup",v),{content:[{type:"text",text:`❌ Error initializing project: ${h}`}],isError:!0}}}var F1={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};function yh(f){try{return Intl.DateTimeFormat(void 0,{timeZone:f}),!0}catch{return!1}}function cJ(f){return/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(f)}function iJ(f){try{let{timezone:v}=f;if(!yh(v))return{content:[{type:"text",text:`❌ Invalid timezone: ${v}. Please use a valid IANA timezone name (e.g., 'America/New_York', 'Europe/London', 'Asia/Tokyo').`}],isError:!0};let h=new Date,l=new Intl.DateTimeFormat("en-US",{timeZone:v,year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"long",hour12:!1}),r=l.formatToParts(h),Q={};for(let w of r)Q[w.type]=w.value;let P=new Intl.DateTimeFormat("en-US",{timeZone:v,hour:"2-digit",minute:"2-digit",hour12:!1}).format(h),W=h.toLocaleString("sv-SE",{timeZone:v});return F1.info(`Retrieved current time for timezone: ${v}`),{content:[{type:"text",text:JSON.stringify({timezone:v,current_time:{date:`${Q.month} ${Q.day}, ${Q.year}`,time_24h:P,time_with_seconds:l.format(h),timezone_name:Q.timeZoneName,iso_format:`${W.replace(" ","T")}Z`,unix_timestamp:Math.floor(h.getTime()/1000)}},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return F1.error("Error getting current time",v),{content:[{type:"text",text:`❌ Error getting current time: ${h}`}],isError:!0}}}function pJ(f){try{let{source_timezone:v,time:h,target_timezone:l}=f;if(!yh(v))return{content:[{type:"text",text:`❌ Invalid source timezone: ${v}. Please use a valid IANA timezone name.`}],isError:!0};if(!yh(l))return{content:[{type:"text",text:`❌ Invalid target timezone: ${l}. Please use a valid IANA timezone name.`}],isError:!0};if(!cJ(h))return{content:[{type:"text",text:`❌ Invalid time format: ${h}. Please use 24-hour format (HH:MM).`}],isError:!0};let[r,Q]=h.split(":").map(Number),P=new Date,W=new Date(P.getFullYear(),P.getMonth(),P.getDate(),r,Q),w=new Intl.DateTimeFormat("en-US",{timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),B=w.formatToParts(W),q={};for(let U of B)q[U.type]=U.value;let $=new Intl.DateTimeFormat("en-US",{timeZone:l,year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"long",hour12:!1}),D=new Intl.DateTimeFormat("en-US",{timeZone:l,hour:"2-digit",minute:"2-digit",hour12:!1}).format(W),X=$.formatToParts(W),z={};for(let U of X)z[U.type]=U.value;let E=new Date(W.toLocaleString("en-US",{timeZone:l})).getTime()-W.getTime(),O=Math.round(E/3600000);return F1.info(`Converted time from ${v} to ${l}`),{content:[{type:"text",text:JSON.stringify({conversion:{source:{timezone:v,time:h,formatted:w.format(W)},target:{timezone:l,time_24h:D,formatted:$.format(W),date:`${z.month} ${z.day}, ${z.year}`,timezone_name:z.timeZoneName},time_difference_hours:O}},null,2)}]}}catch(v){let h=v instanceof Error?v.message:String(v);return F1.error("Error converting time",v),{content:[{type:"text",text:`❌ Error converting time: ${h}`}],isError:!0}}}function GP(f){f.registerTool("get_current_time",{description:"Get current time in a specific timezone or system timezone",inputSchema:{timezone:J.string().describe("IANA timezone name (e.g., 'America/New_York', 'Europe/London')")}},iJ),f.registerTool("convert_time",{description:"Convert time between timezones",inputSchema:{source_timezone:J.string().describe("Source IANA timezone name"),time:J.string().describe("Time in 24-hour format (HH:MM)"),target_timezone:J.string().describe("Target IANA timezone name")}},pJ)}import Sr from"node:fs";import Sh from"node:path";function dJ(f){let v=/^---\n([\s\S]*?)\n---\n([\s\S]*)$/,h=f.match(v);if(!h)return{metadata:{},content:f};let[,l,r]=h,Q={};for(let P of l.split(`
`)){let[W,...w]=P.split(":");if(W&&w.length>0)Q[W.trim()]=w.join(":").trim()}return{metadata:Q,content:r}}function qP(f,v){let h=[],l=Sr.readdirSync(f,{withFileTypes:!0});for(let r of l){let Q=Sh.join(f,r.name);if(r.isDirectory())h.push(...qP(Q,v));else if(r.isFile()&&r.name.endsWith(".md")){let P=Sh.relative(v,Q),W=P.replace(/\.md$/,"").replace(/\\/g,"/"),w=Sr.readFileSync(Q,"utf8"),{metadata:B}=dJ(w);h.push({relativePath:P,fullPath:Q,uri:`knowledge://${W}`,name:B.name||W,description:B.description||"",category:B.category||""})}}return h}function oJ(){let f=bh();if(!Sr.existsSync(f))return[];return qP(f,f)}function tJ(f){let v=f.replace(/^knowledge:\/\//,""),h=bh(),l=Sh.join(h,`${v}.md`);if(!Sr.existsSync(l))throw Error(`Knowledge resource not found: ${f}`);return Sr.readFileSync(l,"utf8")}function zP(f){let v=oJ();for(let h of v)f.registerResource(h.name,h.uri,{description:h.description,mimeType:"text/markdown"},async()=>{let l=tJ(h.uri);return{contents:[{uri:h.uri,text:l,mimeType:"text/markdown"}]}});console.error(`[INFO] Registered ${v.length} knowledge resources`)}var j1={name:"sylphx_flow",version:"1.0.0",description:"Sylphx Flow MCP server providing coordination tools for AI agents. Persistent SQLite-based storage with namespace support for agent coordination and state management."},Tf={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};Tf.info("\uD83D\uDE80 Starting Sylphx Flow MCP Server...");Tf.info(`\uD83D\uDCCB Description: ${j1.description.substring(0,100)}...`);var br=new gh({name:j1.name,version:j1.version,description:j1.description});WP(br);GP(br);BP(br);zP(br);async function sJ(){try{let f=new Fh;await br.connect(f),Tf.success("✅ MCP Server connected and ready")}catch(f){Tf.error("Failed to start MCP server",f),process.exit(1)}}process.on("SIGINT",()=>{Tf.info("\uD83D\uDED1 Shutting down MCP server..."),process.exit(0)});process.on("SIGTERM",()=>{Tf.info("\uD83D\uDED1 Shutting down MCP server..."),process.exit(0)});sJ().catch((f)=>{Tf.error("Fatal error starting server",f),process.exit(1)});
