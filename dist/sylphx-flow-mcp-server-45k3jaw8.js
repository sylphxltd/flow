#!/usr/bin/env node
import{c as hP}from"./index-6trre8s9.js";import{d as W8,e as i,f as Cw}from"./index-vkz1hhmk.js";var Kh=i((l1,Hh)=>{(function(f,v){typeof l1==="object"&&typeof Hh<"u"?v(l1):typeof define==="function"&&define.amd?define(["exports"],v):v(f.URI=f.URI||{})})(l1,function(f){function v(){for(var G=arguments.length,Y=Array(G),D=0;D<G;D++)Y[D]=arguments[D];if(Y.length>1){Y[0]=Y[0].slice(0,-1);var K=Y.length-1;for(var L=1;L<K;++L)Y[L]=Y[L].slice(1,-1);return Y[K]=Y[K].slice(1),Y.join("")}else return Y[0]}function l(G){return"(?:"+G+")"}function h(G){return G===void 0?"undefined":G===null?"null":Object.prototype.toString.call(G).split(" ").pop().split("]").shift().toLowerCase()}function r(G){return G.toUpperCase()}function Q(G){return G!==void 0&&G!==null?G instanceof Array?G:typeof G.length!=="number"||G.split||G.setInterval||G.call?[G]:Array.prototype.slice.call(G):[]}function P(G,Y){var D=G;if(Y)for(var K in Y)D[K]=Y[K];return D}function w(G){var Y="[A-Za-z]",D="[\\x0D]",K="[0-9]",L="[\\x22]",k=v(K,"[A-Fa-f]"),d="[\\x0A]",lv="[\\x20]",wv=l(l("%[EFef]"+k+"%"+k+k+"%"+k+k)+"|"+l("%[89A-Fa-f]"+k+"%"+k+k)+"|"+l("%"+k+k)),Ov="[\\:\\/\\?\\#\\[\\]\\@]",rv="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",zv=v(Ov,rv),gv=G?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Gv=G?"[\\uE000-\\uF8FF]":"[]",Qv=v(Y,K,"[\\-\\.\\_\\~]",gv),Ev=l(Y+v(Y,K,"[\\+\\-\\.]")+"*"),Jv=l(l(wv+"|"+v(Qv,rv,"[\\:]"))+"*"),jf=l(l("25[0-5]")+"|"+l("2[0-4]"+K)+"|"+l("1"+K+K)+"|"+l("[1-9]"+K)+"|"+K),uv=l(l("25[0-5]")+"|"+l("2[0-4]"+K)+"|"+l("1"+K+K)+"|"+l("0?[1-9]"+K)+"|0?0?"+K),xv=l(uv+"\\."+uv+"\\."+uv+"\\."+uv),Xv=l(k+"{1,4}"),Zv=l(l(Xv+"\\:"+Xv)+"|"+xv),mv=l(l(Xv+"\\:")+"{6}"+Zv),lf=l("\\:\\:"+l(Xv+"\\:")+"{5}"+Zv),yf=l(l(Xv)+"?\\:\\:"+l(Xv+"\\:")+"{4}"+Zv),Xf=l(l(l(Xv+"\\:")+"{0,1}"+Xv)+"?\\:\\:"+l(Xv+"\\:")+"{3}"+Zv),Gr=l(l(l(Xv+"\\:")+"{0,2}"+Xv)+"?\\:\\:"+l(Xv+"\\:")+"{2}"+Zv),Rr=l(l(l(Xv+"\\:")+"{0,3}"+Xv)+"?\\:\\:"+Xv+"\\:"+Zv),_r=l(l(l(Xv+"\\:")+"{0,4}"+Xv)+"?\\:\\:"+Zv),xf=l(l(l(Xv+"\\:")+"{0,5}"+Xv)+"?\\:\\:"+Xv),mf=l(l(l(Xv+"\\:")+"{0,6}"+Xv)+"?\\:\\:"),Yf=l([mv,lf,yf,Xf,Gr,Rr,_r,xf,mf].join("|")),nf=l(l(Qv+"|"+wv)+"+"),S1=l(Yf+"\\%25"+nf),Sf=l(Yf+l("\\%25|\\%(?!"+k+"{2})")+nf),LP=l("[vV]"+k+"+\\."+v(Qv,rv,"[\\:]")+"+"),OP=l("\\["+l(Sf+"|"+Yf+"|"+LP)+"\\]"),ul=l(l(wv+"|"+v(Qv,rv))+"*"),qr=l(OP+"|"+xv+"(?!"+ul+")|"+ul),zr=l(K+"*"),Zl=l(l(Jv+"@")+"?"+qr+l("\\:"+zr)+"?"),Er=l(wv+"|"+v(Qv,rv,"[\\:\\@]")),gP=l(Er+"*"),Tl=l(Er+"+"),VP=l(l(wv+"|"+v(Qv,rv,"[\\@]"))+"+"),Bf=l(l("\\/"+gP)+"*"),cf=l("\\/"+l(Tl+Bf)+"?"),b1=l(VP+Bf),kr=l(Tl+Bf),pf="(?!"+Er+")",x8=l(Bf+"|"+cf+"|"+b1+"|"+kr+"|"+pf),df=l(l(Er+"|"+v("[\\/\\?]",Gv))+"*"),$r=l(l(Er+"|[\\/\\?]")+"*"),xl=l(l("\\/\\/"+Zl+Bf)+"|"+cf+"|"+kr+"|"+pf),NP=l(Ev+"\\:"+xl+l("\\?"+df)+"?"+l("\\#"+$r)+"?"),UP=l(l("\\/\\/"+Zl+Bf)+"|"+cf+"|"+b1+"|"+pf),FP=l(UP+l("\\?"+df)+"?"+l("\\#"+$r)+"?"),m8=l(NP+"|"+FP),n8=l(Ev+"\\:"+xl+l("\\?"+df)+"?"),c8="^("+Ev+")\\:"+l(l("\\/\\/("+l("("+Jv+")@")+"?("+qr+")"+l("\\:("+zr+")")+"?)")+"?("+Bf+"|"+cf+"|"+kr+"|"+pf+")")+l("\\?("+df+")")+"?"+l("\\#("+$r+")")+"?$",i8="^(){0}"+l(l("\\/\\/("+l("("+Jv+")@")+"?("+qr+")"+l("\\:("+zr+")")+"?)")+"?("+Bf+"|"+cf+"|"+b1+"|"+pf+")")+l("\\?("+df+")")+"?"+l("\\#("+$r+")")+"?$",p8="^("+Ev+")\\:"+l(l("\\/\\/("+l("("+Jv+")@")+"?("+qr+")"+l("\\:("+zr+")")+"?)")+"?("+Bf+"|"+cf+"|"+kr+"|"+pf+")")+l("\\?("+df+")")+"?$",d8="^"+l("\\#("+$r+")")+"?$",o8="^"+l("("+Jv+")@")+"?("+qr+")"+l("\\:("+zr+")")+"?$";return{NOT_SCHEME:new RegExp(v("[^]",Y,K,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(v("[^\\%\\:]",Qv,rv),"g"),NOT_HOST:new RegExp(v("[^\\%\\[\\]\\:]",Qv,rv),"g"),NOT_PATH:new RegExp(v("[^\\%\\/\\:\\@]",Qv,rv),"g"),NOT_PATH_NOSCHEME:new RegExp(v("[^\\%\\/\\@]",Qv,rv),"g"),NOT_QUERY:new RegExp(v("[^\\%]",Qv,rv,"[\\:\\@\\/\\?]",Gv),"g"),NOT_FRAGMENT:new RegExp(v("[^\\%]",Qv,rv,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(v("[^]",Qv,rv),"g"),UNRESERVED:new RegExp(Qv,"g"),OTHER_CHARS:new RegExp(v("[^\\%]",Qv,zv),"g"),PCT_ENCODED:new RegExp(wv,"g"),IPV4ADDRESS:new RegExp("^("+xv+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Yf+")"+l(l("\\%25|\\%(?!"+k+"{2})")+"("+nf+")")+"?\\]?$")}}var J=w(!1),B=w(!0),z=function(){function G(Y,D){var K=[],L=!0,k=!1,d=void 0;try{for(var lv=Y[Symbol.iterator](),wv;!(L=(wv=lv.next()).done);L=!0)if(K.push(wv.value),D&&K.length===D)break}catch(Ov){k=!0,d=Ov}finally{try{if(!L&&lv.return)lv.return()}finally{if(k)throw d}}return K}return function(Y,D){if(Array.isArray(Y))return Y;else if(Symbol.iterator in Object(Y))return G(Y,D);else throw TypeError("Invalid attempt to destructure non-iterable instance")}}(),$=function(G){if(Array.isArray(G)){for(var Y=0,D=Array(G.length);Y<G.length;Y++)D[Y]=G[Y];return D}else return Array.from(G)},M=2147483647,X=36,q=1,H=26,E=38,O=700,N=72,g=128,V="-",j=/^xn--/,R=/[^\0-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},y=X-q,Z=Math.floor,C=String.fromCharCode;function a(G){throw RangeError(u[G])}function A(G,Y){var D=[],K=G.length;while(K--)D[K]=Y(G[K]);return D}function S(G,Y){var D=G.split("@"),K="";if(D.length>1)K=D[0]+"@",G=D[1];G=G.replace(x,".");var L=G.split("."),k=A(L,Y).join(".");return K+k}function I(G){var Y=[],D=0,K=G.length;while(D<K){var L=G.charCodeAt(D++);if(L>=55296&&L<=56319&&D<K){var k=G.charCodeAt(D++);if((k&64512)==56320)Y.push(((L&1023)<<10)+(k&1023)+65536);else Y.push(L),D--}else Y.push(L)}return Y}var Wv=function(Y){return String.fromCodePoint.apply(String,$(Y))},s=function(Y){if(Y-48<10)return Y-22;if(Y-65<26)return Y-65;if(Y-97<26)return Y-97;return X},fv=function(Y,D){return Y+22+75*(Y<26)-((D!=0)<<5)},t=function(Y,D,K){var L=0;Y=K?Z(Y/O):Y>>1,Y+=Z(Y/D);for(;Y>y*H>>1;L+=X)Y=Z(Y/y);return Z(L+(y+1)*Y/(Y+E))},m=function(Y){var D=[],K=Y.length,L=0,k=g,d=N,lv=Y.lastIndexOf(V);if(lv<0)lv=0;for(var wv=0;wv<lv;++wv){if(Y.charCodeAt(wv)>=128)a("not-basic");D.push(Y.charCodeAt(wv))}for(var Ov=lv>0?lv+1:0;Ov<K;){var rv=L;for(var zv=1,gv=X;;gv+=X){if(Ov>=K)a("invalid-input");var Gv=s(Y.charCodeAt(Ov++));if(Gv>=X||Gv>Z((M-L)/zv))a("overflow");L+=Gv*zv;var Qv=gv<=d?q:gv>=d+H?H:gv-d;if(Gv<Qv)break;var Ev=X-Qv;if(zv>Z(M/Ev))a("overflow");zv*=Ev}var Jv=D.length+1;if(d=t(L-rv,Jv,rv==0),Z(L/Jv)>M-k)a("overflow");k+=Z(L/Jv),L%=Jv,D.splice(L++,0,k)}return String.fromCodePoint.apply(String,D)},Dv=function(Y){var D=[];Y=I(Y);var K=Y.length,L=g,k=0,d=N,lv=!0,wv=!1,Ov=void 0;try{for(var rv=Y[Symbol.iterator](),zv;!(lv=(zv=rv.next()).done);lv=!0){var gv=zv.value;if(gv<128)D.push(C(gv))}}catch(Sf){wv=!0,Ov=Sf}finally{try{if(!lv&&rv.return)rv.return()}finally{if(wv)throw Ov}}var Gv=D.length,Qv=Gv;if(Gv)D.push(V);while(Qv<K){var Ev=M,Jv=!0,jf=!1,uv=void 0;try{for(var xv=Y[Symbol.iterator](),Xv;!(Jv=(Xv=xv.next()).done);Jv=!0){var Zv=Xv.value;if(Zv>=L&&Zv<Ev)Ev=Zv}}catch(Sf){jf=!0,uv=Sf}finally{try{if(!Jv&&xv.return)xv.return()}finally{if(jf)throw uv}}var mv=Qv+1;if(Ev-L>Z((M-k)/mv))a("overflow");k+=(Ev-L)*mv,L=Ev;var lf=!0,yf=!1,Xf=void 0;try{for(var Gr=Y[Symbol.iterator](),Rr;!(lf=(Rr=Gr.next()).done);lf=!0){var _r=Rr.value;if(_r<L&&++k>M)a("overflow");if(_r==L){var xf=k;for(var mf=X;;mf+=X){var Yf=mf<=d?q:mf>=d+H?H:mf-d;if(xf<Yf)break;var nf=xf-Yf,S1=X-Yf;D.push(C(fv(Yf+nf%S1,0))),xf=Z(nf/S1)}D.push(C(fv(xf,0))),d=t(k,mv,Qv==Gv),k=0,++Qv}}}catch(Sf){yf=!0,Xf=Sf}finally{try{if(!lf&&Gr.return)Gr.return()}finally{if(yf)throw Xf}}++k,++L}return D.join("")},Fv=function(Y){return S(Y,function(D){return j.test(D)?m(D.slice(4).toLowerCase()):D})},yv=function(Y){return S(Y,function(D){return R.test(D)?"xn--"+Dv(D):D})},hv={version:"2.1.0",ucs2:{decode:I,encode:Wv},decode:m,encode:Dv,toASCII:yv,toUnicode:Fv},Kv={};function Vv(G){var Y=G.charCodeAt(0),D=void 0;if(Y<16)D="%0"+Y.toString(16).toUpperCase();else if(Y<128)D="%"+Y.toString(16).toUpperCase();else if(Y<2048)D="%"+(Y>>6|192).toString(16).toUpperCase()+"%"+(Y&63|128).toString(16).toUpperCase();else D="%"+(Y>>12|224).toString(16).toUpperCase()+"%"+(Y>>6&63|128).toString(16).toUpperCase()+"%"+(Y&63|128).toString(16).toUpperCase();return D}function Sv(G){var Y="",D=0,K=G.length;while(D<K){var L=parseInt(G.substr(D+1,2),16);if(L<128)Y+=String.fromCharCode(L),D+=3;else if(L>=194&&L<224){if(K-D>=6){var k=parseInt(G.substr(D+4,2),16);Y+=String.fromCharCode((L&31)<<6|k&63)}else Y+=G.substr(D,6);D+=6}else if(L>=224){if(K-D>=9){var d=parseInt(G.substr(D+4,2),16),lv=parseInt(G.substr(D+7,2),16);Y+=String.fromCharCode((L&15)<<12|(d&63)<<6|lv&63)}else Y+=G.substr(D,9);D+=9}else Y+=G.substr(D,3),D+=3}return Y}function Ef(G,Y){function D(K){var L=Sv(K);return!L.match(Y.UNRESERVED)?K:L}if(G.scheme)G.scheme=String(G.scheme).replace(Y.PCT_ENCODED,D).toLowerCase().replace(Y.NOT_SCHEME,"");if(G.userinfo!==void 0)G.userinfo=String(G.userinfo).replace(Y.PCT_ENCODED,D).replace(Y.NOT_USERINFO,Vv).replace(Y.PCT_ENCODED,r);if(G.host!==void 0)G.host=String(G.host).replace(Y.PCT_ENCODED,D).toLowerCase().replace(Y.NOT_HOST,Vv).replace(Y.PCT_ENCODED,r);if(G.path!==void 0)G.path=String(G.path).replace(Y.PCT_ENCODED,D).replace(G.scheme?Y.NOT_PATH:Y.NOT_PATH_NOSCHEME,Vv).replace(Y.PCT_ENCODED,r);if(G.query!==void 0)G.query=String(G.query).replace(Y.PCT_ENCODED,D).replace(Y.NOT_QUERY,Vv).replace(Y.PCT_ENCODED,r);if(G.fragment!==void 0)G.fragment=String(G.fragment).replace(Y.PCT_ENCODED,D).replace(Y.NOT_FRAGMENT,Vv).replace(Y.PCT_ENCODED,r);return G}function Wf(G){return G.replace(/^0*(.*)/,"$1")||"0"}function Lv(G,Y){var D=G.match(Y.IPV4ADDRESS)||[],K=z(D,2),L=K[1];if(L)return L.split(".").map(Wf).join(".");else return G}function Mv(G,Y){var D=G.match(Y.IPV6ADDRESS)||[],K=z(D,3),L=K[1],k=K[2];if(L){var d=L.toLowerCase().split("::").reverse(),lv=z(d,2),wv=lv[0],Ov=lv[1],rv=Ov?Ov.split(":").map(Wf):[],zv=wv.split(":").map(Wf),gv=Y.IPV4ADDRESS.test(zv[zv.length-1]),Gv=gv?7:8,Qv=zv.length-Gv,Ev=Array(Gv);for(var Jv=0;Jv<Gv;++Jv)Ev[Jv]=rv[Jv]||zv[Qv+Jv]||"";if(gv)Ev[Gv-1]=Lv(Ev[Gv-1],Y);var jf=Ev.reduce(function(mv,lf,yf){if(!lf||lf==="0"){var Xf=mv[mv.length-1];if(Xf&&Xf.index+Xf.length===yf)Xf.length++;else mv.push({index:yf,length:1})}return mv},[]),uv=jf.sort(function(mv,lf){return lf.length-mv.length})[0],xv=void 0;if(uv&&uv.length>1){var Xv=Ev.slice(0,uv.index),Zv=Ev.slice(uv.index+uv.length);xv=Xv.join(":")+"::"+Zv.join(":")}else xv=Ev.join(":");if(k)xv+="%"+k;return xv}else return G}var Uf=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Av="".match(/(){0}/)[1]===void 0;function Pv(G){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D={},K=Y.iri!==!1?B:J;if(Y.reference==="suffix")G=(Y.scheme?Y.scheme+":":"")+"//"+G;var L=G.match(Uf);if(L){if(Av){if(D.scheme=L[1],D.userinfo=L[3],D.host=L[4],D.port=parseInt(L[5],10),D.path=L[6]||"",D.query=L[7],D.fragment=L[8],isNaN(D.port))D.port=L[5]}else if(D.scheme=L[1]||void 0,D.userinfo=G.indexOf("@")!==-1?L[3]:void 0,D.host=G.indexOf("//")!==-1?L[4]:void 0,D.port=parseInt(L[5],10),D.path=L[6]||"",D.query=G.indexOf("?")!==-1?L[7]:void 0,D.fragment=G.indexOf("#")!==-1?L[8]:void 0,isNaN(D.port))D.port=G.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?L[4]:void 0;if(D.host)D.host=Mv(Lv(D.host,K),K);if(D.scheme===void 0&&D.userinfo===void 0&&D.host===void 0&&D.port===void 0&&!D.path&&D.query===void 0)D.reference="same-document";else if(D.scheme===void 0)D.reference="relative";else if(D.fragment===void 0)D.reference="absolute";else D.reference="uri";if(Y.reference&&Y.reference!=="suffix"&&Y.reference!==D.reference)D.error=D.error||"URI is not a "+Y.reference+" reference.";var k=Kv[(Y.scheme||D.scheme||"").toLowerCase()];if(!Y.unicodeSupport&&(!k||!k.unicodeSupport)){if(D.host&&(Y.domainHost||k&&k.domainHost))try{D.host=hv.toASCII(D.host.replace(K.PCT_ENCODED,Sv).toLowerCase())}catch(d){D.error=D.error||"Host's domain name can not be converted to ASCII via punycode: "+d}Ef(D,J)}else Ef(D,K);if(k&&k.parse)k.parse(D,Y)}else D.error=D.error||"URI can not be parsed.";return D}function $f(G,Y){var D=Y.iri!==!1?B:J,K=[];if(G.userinfo!==void 0)K.push(G.userinfo),K.push("@");if(G.host!==void 0)K.push(Mv(Lv(String(G.host),D),D).replace(D.IPV6ADDRESS,function(L,k,d){return"["+k+(d?"%25"+d:"")+"]"}));if(typeof G.port==="number"||typeof G.port==="string")K.push(":"),K.push(String(G.port));return K.length?K.join(""):void 0}var Jf=/^\.\.?\//,Ff=/^\/\.(\/|$)/,Af=/^\/\.\.(\/|$)/,Nv=/^\/?(?:.|\n)*?(?=\/|$)/;function Tv(G){var Y=[];while(G.length)if(G.match(Jf))G=G.replace(Jf,"");else if(G.match(Ff))G=G.replace(Ff,"/");else if(G.match(Af))G=G.replace(Af,"/"),Y.pop();else if(G==="."||G==="..")G="";else{var D=G.match(Nv);if(D){var K=D[0];G=G.slice(K.length),Y.push(K)}else throw Error("Unexpected dot segment condition")}return Y.join("")}function _v(G){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},D=Y.iri?B:J,K=[],L=Kv[(Y.scheme||G.scheme||"").toLowerCase()];if(L&&L.serialize)L.serialize(G,Y);if(G.host){if(D.IPV6ADDRESS.test(G.host));else if(Y.domainHost||L&&L.domainHost)try{G.host=!Y.iri?hv.toASCII(G.host.replace(D.PCT_ENCODED,Sv).toLowerCase()):hv.toUnicode(G.host)}catch(lv){G.error=G.error||"Host's domain name can not be converted to "+(!Y.iri?"ASCII":"Unicode")+" via punycode: "+lv}}if(Ef(G,D),Y.reference!=="suffix"&&G.scheme)K.push(G.scheme),K.push(":");var k=$f(G,Y);if(k!==void 0){if(Y.reference!=="suffix")K.push("//");if(K.push(k),G.path&&G.path.charAt(0)!=="/")K.push("/")}if(G.path!==void 0){var d=G.path;if(!Y.absolutePath&&(!L||!L.absolutePath))d=Tv(d);if(k===void 0)d=d.replace(/^\/\//,"/%2F");K.push(d)}if(G.query!==void 0)K.push("?"),K.push(G.query);if(G.fragment!==void 0)K.push("#"),K.push(G.fragment);return K.join("")}function bv(G,Y){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},K=arguments[3],L={};if(!K)G=Pv(_v(G,D),D),Y=Pv(_v(Y,D),D);if(D=D||{},!D.tolerant&&Y.scheme)L.scheme=Y.scheme,L.userinfo=Y.userinfo,L.host=Y.host,L.port=Y.port,L.path=Tv(Y.path||""),L.query=Y.query;else{if(Y.userinfo!==void 0||Y.host!==void 0||Y.port!==void 0)L.userinfo=Y.userinfo,L.host=Y.host,L.port=Y.port,L.path=Tv(Y.path||""),L.query=Y.query;else{if(!Y.path)if(L.path=G.path,Y.query!==void 0)L.query=Y.query;else L.query=G.query;else{if(Y.path.charAt(0)==="/")L.path=Tv(Y.path);else{if((G.userinfo!==void 0||G.host!==void 0||G.port!==void 0)&&!G.path)L.path="/"+Y.path;else if(!G.path)L.path=Y.path;else L.path=G.path.slice(0,G.path.lastIndexOf("/")+1)+Y.path;L.path=Tv(L.path)}L.query=Y.query}L.userinfo=G.userinfo,L.host=G.host,L.port=G.port}L.scheme=G.scheme}return L.fragment=Y.fragment,L}function ff(G,Y,D){var K=P({scheme:"null"},D);return _v(bv(Pv(G,K),Pv(Y,K),K,!0),K)}function Cv(G,Y){if(typeof G==="string")G=_v(Pv(G,Y),Y);else if(h(G)==="object")G=Pv(_v(G,Y),Y);return G}function br(G,Y,D){if(typeof G==="string")G=_v(Pv(G,D),D);else if(h(G)==="object")G=_v(G,D);if(typeof Y==="string")Y=_v(Pv(Y,D),D);else if(h(Y)==="object")Y=_v(Y,D);return G===Y}function j1(G,Y){return G&&G.toString().replace(!Y||!Y.iri?J.ESCAPE:B.ESCAPE,Vv)}function iv(G,Y){return G&&G.toString().replace(!Y||!Y.iri?J.PCT_ENCODED:B.PCT_ENCODED,Sv)}var Yr={scheme:"http",domainHost:!0,parse:function(Y,D){if(!Y.host)Y.error=Y.error||"HTTP URIs must have a host.";return Y},serialize:function(Y,D){var K=String(Y.scheme).toLowerCase()==="https";if(Y.port===(K?443:80)||Y.port==="")Y.port=void 0;if(!Y.path)Y.path="/";return Y}},Sl={scheme:"https",domainHost:Yr.domainHost,parse:Yr.parse,serialize:Yr.serialize};function bl(G){return typeof G.secure==="boolean"?G.secure:String(G.scheme).toLowerCase()==="wss"}var Br={scheme:"ws",domainHost:!0,parse:function(Y,D){var K=Y;return K.secure=bl(K),K.resourceName=(K.path||"/")+(K.query?"?"+K.query:""),K.path=void 0,K.query=void 0,K},serialize:function(Y,D){if(Y.port===(bl(Y)?443:80)||Y.port==="")Y.port=void 0;if(typeof Y.secure==="boolean")Y.scheme=Y.secure?"wss":"ws",Y.secure=void 0;if(Y.resourceName){var K=Y.resourceName.split("?"),L=z(K,2),k=L[0],d=L[1];Y.path=k&&k!=="/"?k:void 0,Y.query=d,Y.resourceName=void 0}return Y.fragment=void 0,Y}},Rl={scheme:"wss",domainHost:Br.domainHost,parse:Br.parse,serialize:Br.serialize},XP={},YP=!0,_l="[A-Za-z0-9\\-\\.\\_\\~"+(YP?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",rf="[0-9A-Fa-f]",BP=l(l("%[EFef]"+rf+"%"+rf+rf+"%"+rf+rf)+"|"+l("%[89A-Fa-f]"+rf+"%"+rf+rf)+"|"+l("%"+rf+rf)),GP="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",qP="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",zP=v(qP,"[\\\"\\\\]"),EP="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",$P=new RegExp(_l,"g"),Tf=new RegExp(BP,"g"),DP=new RegExp(v("[^]",GP,"[\\.]","[\\\"]",zP),"g"),kl=new RegExp(v("[^]",_l,EP),"g"),MP=kl;function y1(G){var Y=Sv(G);return!Y.match($P)?G:Y}var al={scheme:"mailto",parse:function(Y,D){var K=Y,L=K.to=K.path?K.path.split(","):[];if(K.path=void 0,K.query){var k=!1,d={},lv=K.query.split("&");for(var wv=0,Ov=lv.length;wv<Ov;++wv){var rv=lv[wv].split("=");switch(rv[0]){case"to":var zv=rv[1].split(",");for(var gv=0,Gv=zv.length;gv<Gv;++gv)L.push(zv[gv]);break;case"subject":K.subject=iv(rv[1],D);break;case"body":K.body=iv(rv[1],D);break;default:k=!0,d[iv(rv[0],D)]=iv(rv[1],D);break}}if(k)K.headers=d}K.query=void 0;for(var Qv=0,Ev=L.length;Qv<Ev;++Qv){var Jv=L[Qv].split("@");if(Jv[0]=iv(Jv[0]),!D.unicodeSupport)try{Jv[1]=hv.toASCII(iv(Jv[1],D).toLowerCase())}catch(jf){K.error=K.error||"Email address's domain name can not be converted to ASCII via punycode: "+jf}else Jv[1]=iv(Jv[1],D).toLowerCase();L[Qv]=Jv.join("@")}return K},serialize:function(Y,D){var K=Y,L=Q(Y.to);if(L){for(var k=0,d=L.length;k<d;++k){var lv=String(L[k]),wv=lv.lastIndexOf("@"),Ov=lv.slice(0,wv).replace(Tf,y1).replace(Tf,r).replace(DP,Vv),rv=lv.slice(wv+1);try{rv=!D.iri?hv.toASCII(iv(rv,D).toLowerCase()):hv.toUnicode(rv)}catch(Qv){K.error=K.error||"Email address's domain name can not be converted to "+(!D.iri?"ASCII":"Unicode")+" via punycode: "+Qv}L[k]=Ov+"@"+rv}K.path=L.join(",")}var zv=Y.headers=Y.headers||{};if(Y.subject)zv.subject=Y.subject;if(Y.body)zv.body=Y.body;var gv=[];for(var Gv in zv)if(zv[Gv]!==XP[Gv])gv.push(Gv.replace(Tf,y1).replace(Tf,r).replace(kl,Vv)+"="+zv[Gv].replace(Tf,y1).replace(Tf,r).replace(MP,Vv));if(gv.length)K.query=gv.join("&");return K}},HP=/^([^\:]+)\:(.*)/,Il={scheme:"urn",parse:function(Y,D){var K=Y.path&&Y.path.match(HP),L=Y;if(K){var k=D.scheme||L.scheme||"urn",d=K[1].toLowerCase(),lv=K[2],wv=k+":"+(D.nid||d),Ov=Kv[wv];if(L.nid=d,L.nss=lv,L.path=void 0,Ov)L=Ov.parse(L,D)}else L.error=L.error||"URN can not be parsed.";return L},serialize:function(Y,D){var K=D.scheme||Y.scheme||"urn",L=Y.nid,k=K+":"+(D.nid||L),d=Kv[k];if(d)Y=d.serialize(Y,D);var lv=Y,wv=Y.nss;return lv.path=(L||D.nid)+":"+wv,lv}},KP=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Cl={scheme:"urn:uuid",parse:function(Y,D){var K=Y;if(K.uuid=K.nss,K.nss=void 0,!D.tolerant&&(!K.uuid||!K.uuid.match(KP)))K.error=K.error||"UUID is not valid.";return K},serialize:function(Y,D){var K=Y;return K.nss=(Y.uuid||"").toLowerCase(),K}};Kv[Yr.scheme]=Yr,Kv[Sl.scheme]=Sl,Kv[Br.scheme]=Br,Kv[Rl.scheme]=Rl,Kv[al.scheme]=al,Kv[Il.scheme]=Il,Kv[Cl.scheme]=Cl,f.SCHEMES=Kv,f.pctEncChar=Vv,f.pctDecChars=Sv,f.parse=Pv,f.removeDotSegments=Tv,f.serialize=_v,f.resolveComponents=bv,f.resolve=ff,f.normalize=Cv,f.equal=br,f.escapeComponent=j1,f.unescapeComponent=iv,Object.defineProperty(f,"__esModule",{value:!0})})});var h1=i((RJ,Lh)=>{Lh.exports=function f(v,l){if(v===l)return!0;if(v&&l&&typeof v=="object"&&typeof l=="object"){if(v.constructor!==l.constructor)return!1;var h,r,Q;if(Array.isArray(v)){if(h=v.length,h!=l.length)return!1;for(r=h;r--!==0;)if(!f(v[r],l[r]))return!1;return!0}if(v.constructor===RegExp)return v.source===l.source&&v.flags===l.flags;if(v.valueOf!==Object.prototype.valueOf)return v.valueOf()===l.valueOf();if(v.toString!==Object.prototype.toString)return v.toString()===l.toString();if(Q=Object.keys(v),h=Q.length,h!==Object.keys(l).length)return!1;for(r=h;r--!==0;)if(!Object.prototype.hasOwnProperty.call(l,Q[r]))return!1;for(r=h;r--!==0;){var P=Q[r];if(!f(v[P],l[P]))return!1}return!0}return v!==v&&l!==l}});var gh=i((_J,Oh)=>{Oh.exports=function(v){var l=0,h=v.length,r=0,Q;while(r<h)if(l++,Q=v.charCodeAt(r++),Q>=55296&&Q<=56319&&r<h){if(Q=v.charCodeAt(r),(Q&64512)==56320)r++}return l}});var If=i((kJ,Uh)=>{Uh.exports={copy:jW,checkDataType:o1,checkDataTypes:yW,coerceToTypes:SW,toHash:s1,getProperty:e1,escapeQuotes:vl,equal:h1(),ucs2length:gh(),varOccurences:_W,varReplace:kW,schemaHasRules:aW,schemaHasRulesExcept:IW,schemaUnknownRules:CW,toQuotedString:t1,getPathExpr:uW,getPath:ZW,getData:mW,unescapeFragment:nW,unescapeJsonPointer:rl,escapeFragment:cW,escapeJsonPointer:fl};function jW(f,v){v=v||{};for(var l in f)v[l]=f[l];return v}function o1(f,v,l,h){var r=h?" !== ":" === ",Q=h?" || ":" && ",P=h?"!":"",w=h?"":"!";switch(f){case"null":return v+r+"null";case"array":return P+"Array.isArray("+v+")";case"object":return"("+P+v+Q+"typeof "+v+r+'"object"'+Q+w+"Array.isArray("+v+"))";case"integer":return"(typeof "+v+r+'"number"'+Q+w+"("+v+" % 1)"+Q+v+r+v+(l?Q+P+"isFinite("+v+")":"")+")";case"number":return"(typeof "+v+r+'"'+f+'"'+(l?Q+P+"isFinite("+v+")":"")+")";default:return"typeof "+v+r+'"'+f+'"'}}function yW(f,v,l){switch(f.length){case 1:return o1(f[0],v,l,!0);default:var h="",r=s1(f);if(r.array&&r.object)h=r.null?"(":"(!"+v+" || ",h+="typeof "+v+' !== "object")',delete r.null,delete r.array,delete r.object;if(r.number)delete r.integer;for(var Q in r)h+=(h?" && ":"")+o1(Q,v,l,!0);return h}}var Vh=s1(["string","number","integer","boolean","null"]);function SW(f,v){if(Array.isArray(v)){var l=[];for(var h=0;h<v.length;h++){var r=v[h];if(Vh[r])l[l.length]=r;else if(f==="array"&&r==="array")l[l.length]=r}if(l.length)return l}else if(Vh[v])return[v];else if(f==="array"&&v==="array")return["array"]}function s1(f){var v={};for(var l=0;l<f.length;l++)v[f[l]]=!0;return v}var bW=/^[a-z$_][a-z$_0-9]*$/i,RW=/'|\\/g;function e1(f){return typeof f=="number"?"["+f+"]":bW.test(f)?"."+f:"['"+vl(f)+"']"}function vl(f){return f.replace(RW,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function _W(f,v){v+="[^0-9]";var l=f.match(new RegExp(v,"g"));return l?l.length:0}function kW(f,v,l){return v+="([^0-9])",l=l.replace(/\$/g,"$$$$"),f.replace(new RegExp(v,"g"),l+"$1")}function aW(f,v){if(typeof f=="boolean")return!f;for(var l in f)if(v[l])return!0}function IW(f,v,l){if(typeof f=="boolean")return!f&&l!="not";for(var h in f)if(h!=l&&v[h])return!0}function CW(f,v){if(typeof f=="boolean")return;for(var l in f)if(!v[l])return l}function t1(f){return"'"+vl(f)+"'"}function uW(f,v,l,h){var r=l?"'/' + "+v+(h?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):h?"'[' + "+v+" + ']'":"'[\\'' + "+v+" + '\\']'";return Nh(f,r)}function ZW(f,v,l){var h=l?t1("/"+fl(v)):t1(e1(v));return Nh(f,h)}var TW=/^\/(?:[^~]|~0|~1)*$/,xW=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function mW(f,v,l){var h,r,Q,P;if(f==="")return"rootData";if(f[0]=="/"){if(!TW.test(f))throw Error("Invalid JSON-pointer: "+f);r=f,Q="rootData"}else{if(P=f.match(xW),!P)throw Error("Invalid JSON-pointer: "+f);if(h=+P[1],r=P[2],r=="#"){if(h>=v)throw Error("Cannot access property/index "+h+" levels up, current level is "+v);return l[v-h]}if(h>v)throw Error("Cannot access data "+h+" levels up, current level is "+v);if(Q="data"+(v-h||""),!r)return Q}var w=Q,J=r.split("/");for(var B=0;B<J.length;B++){var z=J[B];if(z)Q+=e1(rl(z)),w+=" && "+Q}return w}function Nh(f,v){if(f=='""')return v;return(f+" + "+v).replace(/([^\\])' \+ '/g,"$1")}function nW(f){return rl(decodeURIComponent(f))}function cW(f){return encodeURIComponent(fl(f))}function fl(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}function rl(f){return f.replace(/~1/g,"/").replace(/~0/g,"~")}});var ll=i((aJ,Fh)=>{var iW=If();Fh.exports=pW;function pW(f){iW.copy(f,this)}});var jh=i((IJ,Ah)=>{var Of=Ah.exports=function(f,v,l){if(typeof v=="function")l=v,v={};l=v.cb||l;var h=typeof l=="function"?l:l.pre||function(){},r=l.post||function(){};Q1(v,h,r,f,"",f)};Of.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0};Of.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Of.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Of.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Q1(f,v,l,h,r,Q,P,w,J,B){if(h&&typeof h=="object"&&!Array.isArray(h)){v(h,r,Q,P,w,J,B);for(var z in h){var $=h[z];if(Array.isArray($)){if(z in Of.arrayKeywords)for(var M=0;M<$.length;M++)Q1(f,v,l,$[M],r+"/"+z+"/"+M,Q,r,z,h,M)}else if(z in Of.propsKeywords){if($&&typeof $=="object")for(var X in $)Q1(f,v,l,$[X],r+"/"+z+"/"+dW(X),Q,r,z,h,X)}else if(z in Of.keywords||f.allKeys&&!(z in Of.skipKeywords))Q1(f,v,l,$,r+"/"+z,Q,r,z,h)}l(h,r,Q,P,w,J,B)}}function dW(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}});var Y1=i((CJ,Rh)=>{var Ar=Kh(),yh=h1(),J1=If(),P1=ll(),oW=jh();Rh.exports=Vf;Vf.normalizeId=gf;Vf.fullPath=w1;Vf.url=W1;Vf.ids=f9;Vf.inlineRef=hl;Vf.schema=X1;function Vf(f,v,l){var h=this._refs[l];if(typeof h=="string")if(this._refs[h])h=this._refs[h];else return Vf.call(this,f,v,h);if(h=h||this._schemas[l],h instanceof P1)return hl(h.schema,this._opts.inlineRefs)?h.schema:h.validate||this._compile(h);var r=X1.call(this,v,l),Q,P,w;if(r)Q=r.schema,v=r.root,w=r.baseId;if(Q instanceof P1)P=Q.validate||f.call(this,Q.schema,v,void 0,w);else if(Q!==void 0)P=hl(Q,this._opts.inlineRefs)?Q:f.call(this,Q,v,void 0,w);return P}function X1(f,v){var l=Ar.parse(v),h=bh(l),r=w1(this._getId(f.schema));if(Object.keys(f.schema).length===0||h!==r){var Q=gf(h),P=this._refs[Q];if(typeof P=="string")return tW.call(this,f,P,l);else if(P instanceof P1){if(!P.validate)this._compile(P);f=P}else if(P=this._schemas[Q],P instanceof P1){if(!P.validate)this._compile(P);if(Q==gf(v))return{schema:P,root:f,baseId:r};f=P}else return;if(!f.schema)return;r=w1(this._getId(f.schema))}return Sh.call(this,l,r,f.schema,f)}function tW(f,v,l){var h=X1.call(this,f,v);if(h){var{schema:r,baseId:Q}=h;f=h.root;var P=this._getId(r);if(P)Q=W1(Q,P);return Sh.call(this,l,Q,r,f)}}var sW=J1.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function Sh(f,v,l,h){if(f.fragment=f.fragment||"",f.fragment.slice(0,1)!="/")return;var r=f.fragment.split("/");for(var Q=1;Q<r.length;Q++){var P=r[Q];if(P){if(P=J1.unescapeFragment(P),l=l[P],l===void 0)break;var w;if(!sW[P]){if(w=this._getId(l),w)v=W1(v,w);if(l.$ref){var J=W1(v,l.$ref),B=X1.call(this,h,J);if(B)l=B.schema,h=B.root,v=B.baseId}}}}if(l!==void 0&&l!==h.schema)return{schema:l,root:h,baseId:v}}var eW=J1.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function hl(f,v){if(v===!1)return!1;if(v===void 0||v===!0)return Ql(f);else if(v)return Pl(f)<=v}function Ql(f){var v;if(Array.isArray(f)){for(var l=0;l<f.length;l++)if(v=f[l],typeof v=="object"&&!Ql(v))return!1}else for(var h in f){if(h=="$ref")return!1;if(v=f[h],typeof v=="object"&&!Ql(v))return!1}return!0}function Pl(f){var v=0,l;if(Array.isArray(f))for(var h=0;h<f.length;h++){if(l=f[h],typeof l=="object")v+=Pl(l);if(v==1/0)return 1/0}else for(var r in f){if(r=="$ref")return 1/0;if(eW[r])v++;else{if(l=f[r],typeof l=="object")v+=Pl(l)+1;if(v==1/0)return 1/0}}return v}function w1(f,v){if(v!==!1)f=gf(f);var l=Ar.parse(f);return bh(l)}function bh(f){return Ar.serialize(f).split("#")[0]+"#"}var v9=/#\/?$/;function gf(f){return f?f.replace(v9,""):""}function W1(f,v){return v=gf(v),Ar.resolve(f,v)}function f9(f){var v=gf(this._getId(f)),l={"":v},h={"":w1(v,!1)},r={},Q=this;return oW(f,{allKeys:!0},function(P,w,J,B,z,$,M){if(w==="")return;var X=Q._getId(P),q=l[B],H=h[B]+"/"+z;if(M!==void 0)H+="/"+(typeof M=="number"?M:J1.escapeFragment(M));if(typeof X=="string"){X=q=gf(q?Ar.resolve(q,X):X);var E=Q._refs[X];if(typeof E=="string")E=Q._refs[E];if(E&&E.schema){if(!yh(P,E.schema))throw Error('id "'+X+'" resolves to more than one schema')}else if(X!=gf(H))if(X[0]=="#"){if(r[X]&&!yh(P,r[X]))throw Error('id "'+X+'" resolves to more than one schema');r[X]=P}else Q._refs[X]=H}l[w]=q,h[w]=H}),r}});var B1=i((uJ,kh)=>{var wl=Y1();kh.exports={Validation:_h(r9),MissingRef:_h(Wl)};function r9(f){this.message="validation failed",this.errors=f,this.ajv=this.validation=!0}Wl.message=function(f,v){return"can't resolve reference "+v+" from id "+f};function Wl(f,v,l){this.message=l||Wl.message(f,v),this.missingRef=wl.url(f,v),this.missingSchema=wl.normalizeId(wl.fullPath(this.missingRef))}function _h(f){return f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f}});var Jl=i((ZJ,ah)=>{ah.exports=function(f,v){if(!v)v={};if(typeof v==="function")v={cmp:v};var l=typeof v.cycles==="boolean"?v.cycles:!1,h=v.cmp&&function(Q){return function(P){return function(w,J){var B={key:w,value:P[w]},z={key:J,value:P[J]};return Q(B,z)}}}(v.cmp),r=[];return function Q(P){if(P&&P.toJSON&&typeof P.toJSON==="function")P=P.toJSON();if(P===void 0)return;if(typeof P=="number")return isFinite(P)?""+P:"null";if(typeof P!=="object")return JSON.stringify(P);var w,J;if(Array.isArray(P)){J="[";for(w=0;w<P.length;w++){if(w)J+=",";J+=Q(P[w])||"null"}return J+"]"}if(P===null)return"null";if(r.indexOf(P)!==-1){if(l)return JSON.stringify("__cycle__");throw TypeError("Converting circular structure to JSON")}var B=r.push(P)-1,z=Object.keys(P).sort(h&&h(P));J="";for(w=0;w<z.length;w++){var $=z[w],M=Q(P[$]);if(!M)continue;if(J)J+=",";J+=JSON.stringify($)+":"+M}return r.splice(B,1),"{"+J+"}"}(f)}});var Xl=i((TJ,Ih)=>{Ih.exports=function(v,l,h){var r="",Q=v.schema.$async===!0,P=v.util.schemaHasRulesExcept(v.schema,v.RULES.all,"$ref"),w=v.self._getId(v.schema);if(v.opts.strictKeywords){var J=v.util.schemaUnknownRules(v.schema,v.RULES.keywords);if(J){var B="unknown keyword: "+J;if(v.opts.strictKeywords==="log")v.logger.warn(B);else throw Error(B)}}if(v.isTop){if(r+=" var validate = ",Q)v.async=!0,r+="async ";if(r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",w&&(v.opts.sourceCode||v.opts.processCode))r+=" "+("/*# sourceURL="+w+" */")+" "}if(typeof v.schema=="boolean"||!(P||v.schema.$ref)){var l="false schema",z=v.level,$=v.dataLevel,M=v.schema[l],X=v.schemaPath+v.util.getProperty(l),q=v.errSchemaPath+"/"+l,j=!v.opts.allErrors,u,H="data"+($||""),V="valid"+z;if(v.schema===!1){if(v.isTop)j=!0;else r+=" var "+V+" = false; ";var E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(u||"false schema")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(q)+" , params: {} ",v.opts.messages!==!1)r+=" , message: 'boolean schema is false' ";if(v.opts.verbose)r+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+H+" ";r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&j)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else if(v.isTop)if(Q)r+=" return data; ";else r+=" validate.errors = null; return true; ";else r+=" var "+V+" = true; ";if(v.isTop)r+=" }; return validate; ";return r}if(v.isTop){var N=v.isTop,z=v.level=0,$=v.dataLevel=0,H="data";if(v.rootId=v.resolve.fullPath(v.self._getId(v.root.schema)),v.baseId=v.baseId||v.rootId,delete v.isTop,v.dataPathArr=[""],v.schema.default!==void 0&&v.opts.useDefaults&&v.opts.strictDefaults){var g="default is ignored in the schema root";if(v.opts.strictDefaults==="log")v.logger.warn(g);else throw Error(g)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var{level:z,dataLevel:$}=v,H="data"+($||"");if(w)v.baseId=v.resolve.url(v.baseId,w);if(Q&&!v.async)throw Error("async schema in sync schema");r+=" var errs_"+z+" = errors;"}var V="valid"+z,j=!v.opts.allErrors,R="",x="",u,y=v.schema.type,Z=Array.isArray(y);if(y&&v.opts.nullable&&v.schema.nullable===!0){if(Z){if(y.indexOf("null")==-1)y=y.concat("null")}else if(y!="null")y=[y,"null"],Z=!0}if(Z&&y.length==1)y=y[0],Z=!1;if(v.schema.$ref&&P){if(v.opts.extendRefs=="fail")throw Error('$ref: validation keywords used in schema at path "'+v.errSchemaPath+'" (see option extendRefs)');else if(v.opts.extendRefs!==!0)P=!1,v.logger.warn('$ref: keywords ignored in schema at path "'+v.errSchemaPath+'"')}if(v.schema.$comment&&v.opts.$comment)r+=" "+v.RULES.all.$comment.code(v,"$comment");if(y){if(v.opts.coerceTypes)var C=v.util.coerceToTypes(v.opts.coerceTypes,y);var a=v.RULES.types[y];if(C||Z||a===!0||a&&!Nv(a)){var X=v.schemaPath+".type",q=v.errSchemaPath+"/type",X=v.schemaPath+".type",q=v.errSchemaPath+"/type",A=Z?"checkDataTypes":"checkDataType";if(r+=" if ("+v.util[A](y,H,v.opts.strictNumbers,!0)+") { ",C){var S="dataType"+z,I="coerced"+z;if(r+=" var "+S+" = typeof "+H+"; var "+I+" = undefined; ",v.opts.coerceTypes=="array")r+=" if ("+S+" == 'object' && Array.isArray("+H+") && "+H+".length == 1) { "+H+" = "+H+"[0]; "+S+" = typeof "+H+"; if ("+v.util.checkDataType(v.schema.type,H,v.opts.strictNumbers)+") "+I+" = "+H+"; } ";r+=" if ("+I+" !== undefined) ; ";var Wv=C;if(Wv){var s,fv=-1,t=Wv.length-1;while(fv<t)if(s=Wv[fv+=1],s=="string")r+=" else if ("+S+" == 'number' || "+S+" == 'boolean') "+I+" = '' + "+H+"; else if ("+H+" === null) "+I+" = ''; ";else if(s=="number"||s=="integer"){if(r+=" else if ("+S+" == 'boolean' || "+H+" === null || ("+S+" == 'string' && "+H+" && "+H+" == +"+H+" ",s=="integer")r+=" && !("+H+" % 1)";r+=")) "+I+" = +"+H+"; "}else if(s=="boolean")r+=" else if ("+H+" === 'false' || "+H+" === 0 || "+H+" === null) "+I+" = false; else if ("+H+" === 'true' || "+H+" === 1) "+I+" = true; ";else if(s=="null")r+=" else if ("+H+" === '' || "+H+" === 0 || "+H+" === false) "+I+" = null; ";else if(v.opts.coerceTypes=="array"&&s=="array")r+=" else if ("+S+" == 'string' || "+S+" == 'number' || "+S+" == 'boolean' || "+H+" == null) "+I+" = ["+H+"]; "}r+=" else {   ";var E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(u||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(q)+" , params: { type: '",Z)r+=""+y.join(",");else r+=""+y;if(r+="' } ",v.opts.messages!==!1){if(r+=" , message: 'should be ",Z)r+=""+y.join(",");else r+=""+y;r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+X+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+H+" ";r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&j)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";r+=" } if ("+I+" !== undefined) {  ";var m=$?"data"+($-1||""):"parentData",Dv=$?v.dataPathArr[$]:"parentDataProperty";if(r+=" "+H+" = "+I+"; ",!$)r+="if ("+m+" !== undefined)";r+=" "+m+"["+Dv+"] = "+I+"; } "}else{var E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(u||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(q)+" , params: { type: '",Z)r+=""+y.join(",");else r+=""+y;if(r+="' } ",v.opts.messages!==!1){if(r+=" , message: 'should be ",Z)r+=""+y.join(",");else r+=""+y;r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+X+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+H+" ";r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&j)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(v.schema.$ref&&!P){if(r+=" "+v.RULES.all.$ref.code(v,"$ref")+" ",j){if(r+=" } if (errors === ",N)r+="0";else r+="errs_"+z;r+=") { ",x+="}"}}else{var Fv=v.RULES;if(Fv){var a,yv=-1,hv=Fv.length-1;while(yv<hv)if(a=Fv[yv+=1],Nv(a)){if(a.type)r+=" if ("+v.util.checkDataType(a.type,H,v.opts.strictNumbers)+") { ";if(v.opts.useDefaults){if(a.type=="object"&&v.schema.properties){var M=v.schema.properties,Kv=Object.keys(M),Vv=Kv;if(Vv){var Sv,Ef=-1,Wf=Vv.length-1;while(Ef<Wf){Sv=Vv[Ef+=1];var Lv=M[Sv];if(Lv.default!==void 0){var Mv=H+v.util.getProperty(Sv);if(v.compositeRule){if(v.opts.strictDefaults){var g="default is ignored for: "+Mv;if(v.opts.strictDefaults==="log")v.logger.warn(g);else throw Error(g)}}else{if(r+=" if ("+Mv+" === undefined ",v.opts.useDefaults=="empty")r+=" || "+Mv+" === null || "+Mv+" === '' ";if(r+=" ) "+Mv+" = ",v.opts.useDefaults=="shared")r+=" "+v.useDefault(Lv.default)+" ";else r+=" "+JSON.stringify(Lv.default)+" ";r+="; "}}}}}else if(a.type=="array"&&Array.isArray(v.schema.items)){var Uf=v.schema.items;if(Uf){var Lv,fv=-1,Av=Uf.length-1;while(fv<Av)if(Lv=Uf[fv+=1],Lv.default!==void 0){var Mv=H+"["+fv+"]";if(v.compositeRule){if(v.opts.strictDefaults){var g="default is ignored for: "+Mv;if(v.opts.strictDefaults==="log")v.logger.warn(g);else throw Error(g)}}else{if(r+=" if ("+Mv+" === undefined ",v.opts.useDefaults=="empty")r+=" || "+Mv+" === null || "+Mv+" === '' ";if(r+=" ) "+Mv+" = ",v.opts.useDefaults=="shared")r+=" "+v.useDefault(Lv.default)+" ";else r+=" "+JSON.stringify(Lv.default)+" ";r+="; "}}}}}var Pv=a.rules;if(Pv){var $f,Jf=-1,Ff=Pv.length-1;while(Jf<Ff)if($f=Pv[Jf+=1],Tv($f)){var Af=$f.code(v,$f.keyword,a.type);if(Af){if(r+=" "+Af+" ",j)R+="}"}}}if(j)r+=" "+R+" ",R="";if(a.type){if(r+=" } ",y&&y===a.type&&!C){r+=" else { ";var X=v.schemaPath+".type",q=v.errSchemaPath+"/type",E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(u||"type")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(q)+" , params: { type: '",Z)r+=""+y.join(",");else r+=""+y;if(r+="' } ",v.opts.messages!==!1){if(r+=" , message: 'should be ",Z)r+=""+y.join(",");else r+=""+y;r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+X+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+H+" ";r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&j)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";r+=" } "}}if(j){if(r+=" if (errors === ",N)r+="0";else r+="errs_"+z;r+=") { ",x+="}"}}}}if(j)r+=" "+x+" ";if(N){if(Q)r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; ",r+=" return errors === 0;       ";r+=" }; return validate;"}else r+=" var "+V+" = errors === errs_"+z+";";function Nv(bv){var ff=bv.rules;for(var Cv=0;Cv<ff.length;Cv++)if(Tv(ff[Cv]))return!0}function Tv(bv){return v.schema[bv.keyword]!==void 0||bv.implements&&_v(bv)}function _v(bv){var ff=bv.implements;for(var Cv=0;Cv<ff.length;Cv++)if(v.schema[ff[Cv]]!==void 0)return!0}return r}});var xh=i((xJ,Th)=>{var G1=Y1(),z1=If(),uh=B1(),l9=Jl(),Ch=Xl(),h9=z1.ucs2length,Q9=h1(),P9=uh.Validation;Th.exports=Yl;function Yl(f,v,l,h){var r=this,Q=this._opts,P=[void 0],w={},J=[],B={},z=[],$={},M=[];v=v||{schema:f,refVal:P,refs:w};var X=w9.call(this,f,v,h),q=this._compilations[X.index];if(X.compiling)return q.callValidate=g;var H=this._formats,E=this.RULES;try{var O=V(f,v,l,h);q.validate=O;var N=q.callValidate;if(N){if(N.schema=O.schema,N.errors=null,N.refs=O.refs,N.refVal=O.refVal,N.root=O.root,N.$async=O.$async,Q.sourceCode)N.source=O.source}return O}finally{W9.call(this,f,v,h)}function g(){var A=q.validate,S=A.apply(this,arguments);return g.errors=A.errors,S}function V(A,S,I,Wv){var s=!S||S&&S.schema==A;if(S.schema!=v.schema)return Yl.call(r,A,S,I,Wv);var fv=A.$async===!0,t=Ch({isTop:!0,schema:A,isRoot:s,baseId:Wv,root:S,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:uh.MissingRef,RULES:E,validate:Ch,util:z1,resolve:G1,resolveRef:j,usePattern:Z,useDefault:C,useCustomRule:a,opts:Q,formats:H,logger:r.logger,self:r});if(t=q1(P,Y9)+q1(J,J9)+q1(z,X9)+q1(M,B9)+t,Q.processCode)t=Q.processCode(t,A);var m;try{var Dv=Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",t);m=Dv(r,E,H,v,P,z,M,Q9,h9,P9),P[0]=m}catch(Fv){throw r.logger.error("Error compiling schema, function code:",t),Fv}if(m.schema=A,m.errors=null,m.refs=w,m.refVal=P,m.root=s?m:S,fv)m.$async=!0;if(Q.sourceCode===!0)m.source={code:t,patterns:J,defaults:z};return m}function j(A,S,I){S=G1.url(A,S);var Wv=w[S],s,fv;if(Wv!==void 0)return s=P[Wv],fv="refVal["+Wv+"]",y(s,fv);if(!I&&v.refs){var t=v.refs[S];if(t!==void 0)return s=v.refVal[t],fv=R(S,s),y(s,fv)}fv=R(S);var m=G1.call(r,V,v,S);if(m===void 0){var Dv=l&&l[S];if(Dv)m=G1.inlineRef(Dv,Q.inlineRefs)?Dv:Yl.call(r,Dv,v,l,A)}if(m===void 0)x(S);else return u(S,m),y(m,fv)}function R(A,S){var I=P.length;return P[I]=S,w[A]=I,"refVal"+I}function x(A){delete w[A]}function u(A,S){var I=w[A];P[I]=S}function y(A,S){return typeof A=="object"||typeof A=="boolean"?{code:S,schema:A,inline:!0}:{code:S,$async:A&&!!A.$async}}function Z(A){var S=B[A];if(S===void 0)S=B[A]=J.length,J[S]=A;return"pattern"+S}function C(A){switch(typeof A){case"boolean":case"number":return""+A;case"string":return z1.toQuotedString(A);case"object":if(A===null)return"null";var S=l9(A),I=$[S];if(I===void 0)I=$[S]=z.length,z[I]=A;return"default"+I}}function a(A,S,I,Wv){if(r._opts.validateSchema!==!1){var s=A.definition.dependencies;if(s&&!s.every(function(Vv){return Object.prototype.hasOwnProperty.call(I,Vv)}))throw Error("parent schema must have all required keywords: "+s.join(","));var fv=A.definition.validateSchema;if(fv){var t=fv(S);if(!t){var m="keyword schema is invalid: "+r.errorsText(fv.errors);if(r._opts.validateSchema=="log")r.logger.error(m);else throw Error(m)}}}var Dv=A.definition.compile,Fv=A.definition.inline,yv=A.definition.macro,hv;if(Dv)hv=Dv.call(r,S,I,Wv);else if(yv){if(hv=yv.call(r,S,I,Wv),Q.validateSchema!==!1)r.validateSchema(hv,!0)}else if(Fv)hv=Fv.call(r,Wv,A.keyword,S,I);else if(hv=A.definition.validate,!hv)return;if(hv===void 0)throw Error('custom keyword "'+A.keyword+'"failed to compile');var Kv=M.length;return M[Kv]=hv,{code:"customRule"+Kv,validate:hv}}}function w9(f,v,l){var h=Zh.call(this,f,v,l);if(h>=0)return{index:h,compiling:!0};return h=this._compilations.length,this._compilations[h]={schema:f,root:v,baseId:l},{index:h,compiling:!1}}function W9(f,v,l){var h=Zh.call(this,f,v,l);if(h>=0)this._compilations.splice(h,1)}function Zh(f,v,l){for(var h=0;h<this._compilations.length;h++){var r=this._compilations[h];if(r.schema==f&&r.root==v&&r.baseId==l)return h}return-1}function J9(f,v){return"var pattern"+f+" = new RegExp("+z1.toQuotedString(v[f])+");"}function X9(f){return"var default"+f+" = defaults["+f+"];"}function Y9(f,v){return v[f]===void 0?"":"var refVal"+f+" = refVal["+f+"];"}function B9(f){return"var customRule"+f+" = customRules["+f+"];"}function q1(f,v){if(!f.length)return"";var l="";for(var h=0;h<f.length;h++)l+=v(h,f);return l}});var nh=i((mJ,mh)=>{var E1=mh.exports=function(){this._cache={}};E1.prototype.put=function(v,l){this._cache[v]=l};E1.prototype.get=function(v){return this._cache[v]};E1.prototype.del=function(v){delete this._cache[v]};E1.prototype.clear=function(){this._cache={}}});var l0=i((nJ,r0)=>{var G9=If(),q9=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,z9=[0,31,28,31,30,31,30,31,31,30,31,30,31],E9=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,ch=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,$9=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,D9=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,ih=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,ph=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,dh=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,oh=/^(?:\/(?:[^~/]|~0|~1)*)*$/,th=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,sh=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;r0.exports=$1;function $1(f){return f=f=="full"?"full":"fast",G9.copy($1[f])}$1.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":ih,url:ph,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:ch,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:f0,uuid:dh,"json-pointer":oh,"json-pointer-uri-fragment":th,"relative-json-pointer":sh};$1.full={date:eh,time:v0,"date-time":K9,uri:O9,"uri-reference":D9,"uri-template":ih,url:ph,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:ch,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:f0,uuid:dh,"json-pointer":oh,"json-pointer-uri-fragment":th,"relative-json-pointer":sh};function M9(f){return f%4===0&&(f%100!==0||f%400===0)}function eh(f){var v=f.match(q9);if(!v)return!1;var l=+v[1],h=+v[2],r=+v[3];return h>=1&&h<=12&&r>=1&&r<=(h==2&&M9(l)?29:z9[h])}function v0(f,v){var l=f.match(E9);if(!l)return!1;var h=l[1],r=l[2],Q=l[3],P=l[5];return(h<=23&&r<=59&&Q<=59||h==23&&r==59&&Q==60)&&(!v||P)}var H9=/t|\s/i;function K9(f){var v=f.split(H9);return v.length==2&&eh(v[0])&&v0(v[1],!0)}var L9=/\/|:/;function O9(f){return L9.test(f)&&$9.test(f)}var g9=/[^\\]\\Z/;function f0(f){if(g9.test(f))return!1;try{return new RegExp(f),!0}catch(v){return!1}}});var Q0=i((cJ,h0)=>{h0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.errSchemaPath+"/"+l,B=!v.opts.allErrors,z="data"+(P||""),$="valid"+Q,M,X;if(w=="#"||w=="#/")if(v.isRoot)M=v.async,X="validate";else M=v.root.schema.$async===!0,X="root.refVal[0]";else{var q=v.resolveRef(v.baseId,w,v.isRoot);if(q===void 0){var H=v.MissingRefError.message(v.baseId,w);if(v.opts.missingRefs=="fail"){v.logger.error(H);var E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(J)+" , params: { ref: '"+v.util.escapeQuotes(w)+"' } ",v.opts.messages!==!1)r+=" , message: 'can\\'t resolve reference "+v.util.escapeQuotes(w)+"' ";if(v.opts.verbose)r+=" , schema: "+v.util.toQuotedString(w)+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+z+" ";r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&B)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(B)r+=" if (false) { "}else if(v.opts.missingRefs=="ignore"){if(v.logger.warn(H),B)r+=" if (true) { "}else throw new v.MissingRefError(v.baseId,w,H)}else if(q.inline){var N=v.util.copy(v);N.level++;var g="valid"+N.level;N.schema=q.schema,N.schemaPath="",N.errSchemaPath=w;var V=v.validate(N).replace(/validate\.schema/g,q.code);if(r+=" "+V+" ",B)r+=" if ("+g+") { "}else M=q.$async===!0||v.async&&q.$async!==!1,X=q.code}if(X){var E=E||[];if(E.push(r),r="",v.opts.passContext)r+=" "+X+".call(this, ";else r+=" "+X+"( ";if(r+=" "+z+", (dataPath || '')",v.errorPath!='""')r+=" + "+v.errorPath;var j=P?"data"+(P-1||""):"parentData",R=P?v.dataPathArr[P]:"parentDataProperty";r+=" , "+j+" , "+R+", rootData)  ";var x=r;if(r=E.pop(),M){if(!v.async)throw Error("async schema referenced by sync schema");if(B)r+=" var "+$+"; ";if(r+=" try { await "+x+"; ",B)r+=" "+$+" = true; ";if(r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",B)r+=" "+$+" = false; ";if(r+=" } ",B)r+=" if ("+$+") { "}else if(r+=" if (!"+x+") { if (vErrors === null) vErrors = "+X+".errors; else vErrors = vErrors.concat("+X+".errors); errors = vErrors.length; } ",B)r+=" else { "}return r}});var w0=i((iJ,P0)=>{P0.exports=function(v,l,h){var r=" ",Q=v.schema[l],P=v.schemaPath+v.util.getProperty(l),w=v.errSchemaPath+"/"+l,J=!v.opts.allErrors,B=v.util.copy(v),z="";B.level++;var $="valid"+B.level,M=B.baseId,X=!0,q=Q;if(q){var H,E=-1,O=q.length-1;while(E<O)if(H=q[E+=1],v.opts.strictKeywords?typeof H=="object"&&Object.keys(H).length>0||H===!1:v.util.schemaHasRules(H,v.RULES.all)){if(X=!1,B.schema=H,B.schemaPath=P+"["+E+"]",B.errSchemaPath=w+"/"+E,r+="  "+v.validate(B)+" ",B.baseId=M,J)r+=" if ("+$+") { ",z+="}"}}if(J)if(X)r+=" if (true) { ";else r+=" "+z.slice(0,-1)+" ";return r}});var J0=i((pJ,W0)=>{W0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="valid"+Q,X="errs__"+Q,q=v.util.copy(v),H="";q.level++;var E="valid"+q.level,O=w.every(function(u){return v.opts.strictKeywords?typeof u=="object"&&Object.keys(u).length>0||u===!1:v.util.schemaHasRules(u,v.RULES.all)});if(O){var N=q.baseId;r+=" var "+X+" = errors; var "+M+" = false;  ";var g=v.compositeRule;v.compositeRule=q.compositeRule=!0;var V=w;if(V){var j,R=-1,x=V.length-1;while(R<x)j=V[R+=1],q.schema=j,q.schemaPath=J+"["+R+"]",q.errSchemaPath=B+"/"+R,r+="  "+v.validate(q)+" ",q.baseId=N,r+=" "+M+" = "+M+" || "+E+"; if (!"+M+") { ",H+="}"}if(v.compositeRule=q.compositeRule=g,r+=" "+H+" if (!"+M+") {   var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: {} ",v.opts.messages!==!1)r+=" , message: 'should match some schema in anyOf' ";if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; return false; ";if(r+=" } else {  errors = "+X+"; if (vErrors !== null) { if ("+X+") vErrors.length = "+X+"; else vErrors = null; } ",v.opts.allErrors)r+=" } "}else if(z)r+=" if (true) { ";return r}});var Y0=i((dJ,X0)=>{X0.exports=function(v,l,h){var r=" ",Q=v.schema[l],P=v.errSchemaPath+"/"+l,w=!v.opts.allErrors,J=v.util.toQuotedString(Q);if(v.opts.$comment===!0)r+=" console.log("+J+");";else if(typeof v.opts.$comment=="function")r+=" self._opts.$comment("+J+", "+v.util.toQuotedString(P)+", validate.root.schema);";return r}});var G0=i((oJ,B0)=>{B0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="valid"+Q,X=v.opts.$data&&w&&w.$data,q;if(X)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",q="schema"+Q;else q=w;if(!X)r+=" var schema"+Q+" = validate.schema"+J+";";r+="var "+M+" = equal("+$+", schema"+Q+"); if (!"+M+") {   ";var H=H||[];if(H.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { allowedValue: schema"+Q+" } ",v.opts.messages!==!1)r+=" , message: 'should be equal to constant' ";if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var E=r;if(r=H.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+E+"]); ";else r+=" validate.errors = ["+E+"]; return false; ";else r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" }",z)r+=" else { ";return r}});var z0=i((tJ,q0)=>{q0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="valid"+Q,X="errs__"+Q,q=v.util.copy(v),H="";q.level++;var E="valid"+q.level,O="i"+Q,N=q.dataLevel=v.dataLevel+1,g="data"+N,V=v.baseId,j=v.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:v.util.schemaHasRules(w,v.RULES.all);if(r+="var "+X+" = errors;var "+M+";",j){var R=v.compositeRule;v.compositeRule=q.compositeRule=!0,q.schema=w,q.schemaPath=J,q.errSchemaPath=B,r+=" var "+E+" = false; for (var "+O+" = 0; "+O+" < "+$+".length; "+O+"++) { ",q.errorPath=v.util.getPathExpr(v.errorPath,O,v.opts.jsonPointers,!0);var x=$+"["+O+"]";q.dataPathArr[N]=O;var u=v.validate(q);if(q.baseId=V,v.util.varOccurences(u,g)<2)r+=" "+v.util.varReplace(u,g,x)+" ";else r+=" var "+g+" = "+x+"; "+u+" ";r+=" if ("+E+") break; }  ",v.compositeRule=q.compositeRule=R,r+=" "+H+" if (!"+E+") {"}else r+=" if ("+$+".length == 0) {";var y=y||[];if(y.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: {} ",v.opts.messages!==!1)r+=" , message: 'should contain a valid item' ";if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var Z=r;if(r=y.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+Z+"]); ";else r+=" validate.errors = ["+Z+"]; return false; ";else r+=" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } else { ",j)r+="  errors = "+X+"; if (vErrors !== null) { if ("+X+") vErrors.length = "+X+"; else vErrors = null; } ";if(v.opts.allErrors)r+=" } ";return r}});var $0=i((sJ,E0)=>{E0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="errs__"+Q,X=v.util.copy(v),q="";X.level++;var H="valid"+X.level,E={},O={},N=v.opts.ownProperties;for(R in w){if(R=="__proto__")continue;var g=w[R],V=Array.isArray(g)?O:E;V[R]=g}r+="var "+M+" = errors;";var j=v.errorPath;r+="var missing"+Q+";";for(var R in O)if(V=O[R],V.length){if(r+=" if ( "+$+v.util.getProperty(R)+" !== undefined ",N)r+=" && Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(R)+"') ";if(z){r+=" && ( ";var x=V;if(x){var u,y=-1,Z=x.length-1;while(y<Z){if(u=x[y+=1],y)r+=" || ";var C=v.util.getProperty(u),a=$+C;if(r+=" ( ( "+a+" === undefined ",N)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(u)+"') ";r+=") && (missing"+Q+" = "+v.util.toQuotedString(v.opts.jsonPointers?u:C)+") ) "}}r+=")) {  ";var A="missing"+Q,S="' + "+A+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(j,A,!0):j+" + "+A;var I=I||[];if(I.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { property: '"+v.util.escapeQuotes(R)+"', missingProperty: '"+S+"', depsCount: "+V.length+", deps: '"+v.util.escapeQuotes(V.length==1?V[0]:V.join(", "))+"' } ",v.opts.messages!==!1){if(r+=" , message: 'should have ",V.length==1)r+="property "+v.util.escapeQuotes(V[0]);else r+="properties "+v.util.escapeQuotes(V.join(", "));r+=" when property "+v.util.escapeQuotes(R)+" is present' "}if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var Wv=r;if(r=I.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+Wv+"]); ";else r+=" validate.errors = ["+Wv+"]; return false; ";else r+=" var err = "+Wv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var s=V;if(s){var u,fv=-1,t=s.length-1;while(fv<t){u=s[fv+=1];var C=v.util.getProperty(u),S=v.util.escapeQuotes(u),a=$+C;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(j,u,v.opts.jsonPointers);if(r+=" if ( "+a+" === undefined ",N)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(u)+"') ";if(r+=") {  var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { property: '"+v.util.escapeQuotes(R)+"', missingProperty: '"+S+"', depsCount: "+V.length+", deps: '"+v.util.escapeQuotes(V.length==1?V[0]:V.join(", "))+"' } ",v.opts.messages!==!1){if(r+=" , message: 'should have ",V.length==1)r+="property "+v.util.escapeQuotes(V[0]);else r+="properties "+v.util.escapeQuotes(V.join(", "));r+=" when property "+v.util.escapeQuotes(R)+" is present' "}if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}if(r+=" }   ",z)q+="}",r+=" else { "}v.errorPath=j;var m=X.baseId;for(var R in E){var g=E[R];if(v.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:v.util.schemaHasRules(g,v.RULES.all)){if(r+=" "+H+" = true; if ( "+$+v.util.getProperty(R)+" !== undefined ",N)r+=" && Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(R)+"') ";if(r+=") { ",X.schema=g,X.schemaPath=J+v.util.getProperty(R),X.errSchemaPath=B+"/"+v.util.escapeFragment(R),r+="  "+v.validate(X)+" ",X.baseId=m,r+=" }  ",z)r+=" if ("+H+") { ",q+="}"}}if(z)r+="   "+q+" if ("+M+" == errors) {";return r}});var M0=i((eJ,D0)=>{D0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="valid"+Q,X=v.opts.$data&&w&&w.$data,q;if(X)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",q="schema"+Q;else q=w;var H="i"+Q,E="schema"+Q;if(!X)r+=" var "+E+" = validate.schema"+J+";";if(r+="var "+M+";",X)r+=" if (schema"+Q+" === undefined) "+M+" = true; else if (!Array.isArray(schema"+Q+")) "+M+" = false; else {";if(r+=""+M+" = false;for (var "+H+"=0; "+H+"<"+E+".length; "+H+"++) if (equal("+$+", "+E+"["+H+"])) { "+M+" = true; break; }",X)r+="  }  ";r+=" if (!"+M+") {   ";var O=O||[];if(O.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { allowedValues: schema"+Q+" } ",v.opts.messages!==!1)r+=" , message: 'should be equal to one of the allowed values' ";if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var N=r;if(r=O.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+N+"]); ";else r+=" validate.errors = ["+N+"]; return false; ";else r+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" }",z)r+=" else { ";return r}});var K0=i((v6,H0)=>{H0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||"");if(v.opts.format===!1){if(z)r+=" if (true) { ";return r}var M=v.opts.$data&&w&&w.$data,X;if(M)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=w;var q=v.opts.unknownFormats,H=Array.isArray(q);if(M){var E="format"+Q,O="isObject"+Q,N="formatType"+Q;if(r+=" var "+E+" = formats["+X+"]; var "+O+" = typeof "+E+" == 'object' && !("+E+" instanceof RegExp) && "+E+".validate; var "+N+" = "+O+" && "+E+".type || 'string'; if ("+O+") { ",v.async)r+=" var async"+Q+" = "+E+".async; ";if(r+=" "+E+" = "+E+".validate; } if (  ",M)r+=" ("+X+" !== undefined && typeof "+X+" != 'string') || ";if(r+=" (",q!="ignore"){if(r+=" ("+X+" && !"+E+" ",H)r+=" && self._opts.unknownFormats.indexOf("+X+") == -1 ";r+=") || "}if(r+=" ("+E+" && "+N+" == '"+h+"' && !(typeof "+E+" == 'function' ? ",v.async)r+=" (async"+Q+" ? await "+E+"("+$+") : "+E+"("+$+")) ";else r+=" "+E+"("+$+") ";r+=" : "+E+".test("+$+"))))) {"}else{var E=v.formats[w];if(!E)if(q=="ignore"){if(v.logger.warn('unknown format "'+w+'" ignored in schema at path "'+v.errSchemaPath+'"'),z)r+=" if (true) { ";return r}else if(H&&q.indexOf(w)>=0){if(z)r+=" if (true) { ";return r}else throw Error('unknown format "'+w+'" is used in schema at path "'+v.errSchemaPath+'"');var O=typeof E=="object"&&!(E instanceof RegExp)&&E.validate,N=O&&E.type||"string";if(O){var g=E.async===!0;E=E.validate}if(N!=h){if(z)r+=" if (true) { ";return r}if(g){if(!v.async)throw Error("async format in sync schema");var V="formats"+v.util.getProperty(w)+".validate";r+=" if (!(await "+V+"("+$+"))) { "}else{r+=" if (! ";var V="formats"+v.util.getProperty(w);if(O)V+=".validate";if(typeof E=="function")r+=" "+V+"("+$+") ";else r+=" "+V+".test("+$+") ";r+=") { "}}var j=j||[];if(j.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { format:  ",M)r+=""+X;else r+=""+v.util.toQuotedString(w);if(r+="  } ",v.opts.messages!==!1){if(r+=` , message: 'should match format "`,M)r+="' + "+X+" + '";else r+=""+v.util.escapeQuotes(w);r+=`"' `}if(v.opts.verbose){if(r+=" , schema:  ",M)r+="validate.schema"+J;else r+=""+v.util.toQuotedString(w);r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var R=r;if(r=j.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+R+"]); ";else r+=" validate.errors = ["+R+"]; return false; ";else r+=" var err = "+R+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } ",z)r+=" else { ";return r}});var O0=i((f6,L0)=>{L0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="valid"+Q,X="errs__"+Q,q=v.util.copy(v);q.level++;var H="valid"+q.level,E=v.schema.then,O=v.schema.else,N=E!==void 0&&(v.opts.strictKeywords?typeof E=="object"&&Object.keys(E).length>0||E===!1:v.util.schemaHasRules(E,v.RULES.all)),g=O!==void 0&&(v.opts.strictKeywords?typeof O=="object"&&Object.keys(O).length>0||O===!1:v.util.schemaHasRules(O,v.RULES.all)),V=q.baseId;if(N||g){var j;q.createErrors=!1,q.schema=w,q.schemaPath=J,q.errSchemaPath=B,r+=" var "+X+" = errors; var "+M+" = true;  ";var R=v.compositeRule;if(v.compositeRule=q.compositeRule=!0,r+="  "+v.validate(q)+" ",q.baseId=V,q.createErrors=!0,r+="  errors = "+X+"; if (vErrors !== null) { if ("+X+") vErrors.length = "+X+"; else vErrors = null; }  ",v.compositeRule=q.compositeRule=R,N){if(r+=" if ("+H+") {  ",q.schema=v.schema.then,q.schemaPath=v.schemaPath+".then",q.errSchemaPath=v.errSchemaPath+"/then",r+="  "+v.validate(q)+" ",q.baseId=V,r+=" "+M+" = "+H+"; ",N&&g)j="ifClause"+Q,r+=" var "+j+" = 'then'; ";else j="'then'";if(r+=" } ",g)r+=" else { "}else r+=" if (!"+H+") { ";if(g){if(q.schema=v.schema.else,q.schemaPath=v.schemaPath+".else",q.errSchemaPath=v.errSchemaPath+"/else",r+="  "+v.validate(q)+" ",q.baseId=V,r+=" "+M+" = "+H+"; ",N&&g)j="ifClause"+Q,r+=" var "+j+" = 'else'; ";else j="'else'";r+=" } "}if(r+=" if (!"+M+") {   var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { failingKeyword: "+j+" } ",v.opts.messages!==!1)r+=` , message: 'should match "' + `+j+` + '" schema' `;if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; return false; ";if(r+=" }   ",z)r+=" else { "}else if(z)r+=" if (true) { ";return r}});var V0=i((r6,g0)=>{g0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="valid"+Q,X="errs__"+Q,q=v.util.copy(v),H="";q.level++;var E="valid"+q.level,O="i"+Q,N=q.dataLevel=v.dataLevel+1,g="data"+N,V=v.baseId;if(r+="var "+X+" = errors;var "+M+";",Array.isArray(w)){var j=v.schema.additionalItems;if(j===!1){r+=" "+M+" = "+$+".length <= "+w.length+"; ";var R=B;B=v.errSchemaPath+"/additionalItems",r+="  if (!"+M+") {   ";var x=x||[];if(x.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { limit: "+w.length+" } ",v.opts.messages!==!1)r+=" , message: 'should NOT have more than "+w.length+" items' ";if(v.opts.verbose)r+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var u=r;if(r=x.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+u+"]); ";else r+=" validate.errors = ["+u+"]; return false; ";else r+=" var err = "+u+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } ",B=R,z)H+="}",r+=" else { "}var y=w;if(y){var Z,C=-1,a=y.length-1;while(C<a)if(Z=y[C+=1],v.opts.strictKeywords?typeof Z=="object"&&Object.keys(Z).length>0||Z===!1:v.util.schemaHasRules(Z,v.RULES.all)){r+=" "+E+" = true; if ("+$+".length > "+C+") { ";var A=$+"["+C+"]";q.schema=Z,q.schemaPath=J+"["+C+"]",q.errSchemaPath=B+"/"+C,q.errorPath=v.util.getPathExpr(v.errorPath,C,v.opts.jsonPointers,!0),q.dataPathArr[N]=C;var S=v.validate(q);if(q.baseId=V,v.util.varOccurences(S,g)<2)r+=" "+v.util.varReplace(S,g,A)+" ";else r+=" var "+g+" = "+A+"; "+S+" ";if(r+=" }  ",z)r+=" if ("+E+") { ",H+="}"}}if(typeof j=="object"&&(v.opts.strictKeywords?typeof j=="object"&&Object.keys(j).length>0||j===!1:v.util.schemaHasRules(j,v.RULES.all))){q.schema=j,q.schemaPath=v.schemaPath+".additionalItems",q.errSchemaPath=v.errSchemaPath+"/additionalItems",r+=" "+E+" = true; if ("+$+".length > "+w.length+") {  for (var "+O+" = "+w.length+"; "+O+" < "+$+".length; "+O+"++) { ",q.errorPath=v.util.getPathExpr(v.errorPath,O,v.opts.jsonPointers,!0);var A=$+"["+O+"]";q.dataPathArr[N]=O;var S=v.validate(q);if(q.baseId=V,v.util.varOccurences(S,g)<2)r+=" "+v.util.varReplace(S,g,A)+" ";else r+=" var "+g+" = "+A+"; "+S+" ";if(z)r+=" if (!"+E+") break; ";if(r+=" } }  ",z)r+=" if ("+E+") { ",H+="}"}}else if(v.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:v.util.schemaHasRules(w,v.RULES.all)){q.schema=w,q.schemaPath=J,q.errSchemaPath=B,r+="  for (var "+O+" = 0; "+O+" < "+$+".length; "+O+"++) { ",q.errorPath=v.util.getPathExpr(v.errorPath,O,v.opts.jsonPointers,!0);var A=$+"["+O+"]";q.dataPathArr[N]=O;var S=v.validate(q);if(q.baseId=V,v.util.varOccurences(S,g)<2)r+=" "+v.util.varReplace(S,g,A)+" ";else r+=" var "+g+" = "+A+"; "+S+" ";if(z)r+=" if (!"+E+") break; ";r+=" }"}if(z)r+=" "+H+" if ("+X+" == errors) {";return r}});var Bl=i((l6,N0)=>{N0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,V,$="data"+(P||""),M=v.opts.$data&&w&&w.$data,X;if(M)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=w;var q=l=="maximum",H=q?"exclusiveMaximum":"exclusiveMinimum",E=v.schema[H],O=v.opts.$data&&E&&E.$data,N=q?"<":">",g=q?">":"<",V=void 0;if(!(M||typeof w=="number"||w===void 0))throw Error(l+" must be number");if(!(O||E===void 0||typeof E=="number"||typeof E=="boolean"))throw Error(H+" must be number or boolean");if(O){var j=v.util.getData(E.$data,P,v.dataPathArr),R="exclusive"+Q,x="exclType"+Q,u="exclIsNumber"+Q,y="op"+Q,Z="' + "+y+" + '";r+=" var schemaExcl"+Q+" = "+j+"; ",j="schemaExcl"+Q,r+=" var "+R+"; var "+x+" = typeof "+j+"; if ("+x+" != 'boolean' && "+x+" != 'undefined' && "+x+" != 'number') { ";var V=H,C=C||[];if(C.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(V||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: {} ",v.opts.messages!==!1)r+=" , message: '"+H+" should be boolean' ";if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var a=r;if(r=C.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+a+"]); ";else r+=" validate.errors = ["+a+"]; return false; ";else r+=" var err = "+a+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } else if ( ",M)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";if(r+=" "+x+" == 'number' ? ( ("+R+" = "+X+" === undefined || "+j+" "+N+"= "+X+") ? "+$+" "+g+"= "+j+" : "+$+" "+g+" "+X+" ) : ( ("+R+" = "+j+" === true) ? "+$+" "+g+"= "+X+" : "+$+" "+g+" "+X+" ) || "+$+" !== "+$+") { var op"+Q+" = "+R+" ? '"+N+"' : '"+N+"='; ",w===void 0)V=H,B=v.errSchemaPath+"/"+H,X=j,M=O}else{var u=typeof E=="number",Z=N;if(u&&M){var y="'"+Z+"'";if(r+=" if ( ",M)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";r+=" ( "+X+" === undefined || "+E+" "+N+"= "+X+" ? "+$+" "+g+"= "+E+" : "+$+" "+g+" "+X+" ) || "+$+" !== "+$+") { "}else{if(u&&w===void 0)R=!0,V=H,B=v.errSchemaPath+"/"+H,X=E,g+="=";else{if(u)X=Math[q?"min":"max"](E,w);if(E===(u?X:!0))R=!0,V=H,B=v.errSchemaPath+"/"+H,g+="=";else R=!1,Z+="="}var y="'"+Z+"'";if(r+=" if ( ",M)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";r+=" "+$+" "+g+" "+X+" || "+$+" !== "+$+") { "}}V=V||l;var C=C||[];if(C.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(V||"_limit")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { comparison: "+y+", limit: "+X+", exclusive: "+R+" } ",v.opts.messages!==!1)if(r+=" , message: 'should be "+Z+" ",M)r+="' + "+X;else r+=""+X+"'";if(v.opts.verbose){if(r+=" , schema:  ",M)r+="validate.schema"+J;else r+=""+w;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var a=r;if(r=C.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+a+"]); ";else r+=" validate.errors = ["+a+"]; return false; ";else r+=" var err = "+a+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } ",z)r+=" else { ";return r}});var Gl=i((h6,U0)=>{U0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,H,$="data"+(P||""),M=v.opts.$data&&w&&w.$data,X;if(M)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=w;if(!(M||typeof w=="number"))throw Error(l+" must be number");var q=l=="maxItems"?">":"<";if(r+="if ( ",M)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";r+=" "+$+".length "+q+" "+X+") { ";var H=l,E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(H||"_limitItems")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { limit: "+X+" } ",v.opts.messages!==!1){if(r+=" , message: 'should NOT have ",l=="maxItems")r+="more";else r+="fewer";if(r+=" than ",M)r+="' + "+X+" + '";else r+=""+w;r+=" items' "}if(v.opts.verbose){if(r+=" , schema:  ",M)r+="validate.schema"+J;else r+=""+w;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+="} ",z)r+=" else { ";return r}});var ql=i((Q6,F0)=>{F0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,H,$="data"+(P||""),M=v.opts.$data&&w&&w.$data,X;if(M)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=w;if(!(M||typeof w=="number"))throw Error(l+" must be number");var q=l=="maxLength"?">":"<";if(r+="if ( ",M)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";if(v.opts.unicode===!1)r+=" "+$+".length ";else r+=" ucs2length("+$+") ";r+=" "+q+" "+X+") { ";var H=l,E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(H||"_limitLength")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { limit: "+X+" } ",v.opts.messages!==!1){if(r+=" , message: 'should NOT be ",l=="maxLength")r+="longer";else r+="shorter";if(r+=" than ",M)r+="' + "+X+" + '";else r+=""+w;r+=" characters' "}if(v.opts.verbose){if(r+=" , schema:  ",M)r+="validate.schema"+J;else r+=""+w;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+="} ",z)r+=" else { ";return r}});var zl=i((P6,A0)=>{A0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,H,$="data"+(P||""),M=v.opts.$data&&w&&w.$data,X;if(M)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=w;if(!(M||typeof w=="number"))throw Error(l+" must be number");var q=l=="maxProperties"?">":"<";if(r+="if ( ",M)r+=" ("+X+" !== undefined && typeof "+X+" != 'number') || ";r+=" Object.keys("+$+").length "+q+" "+X+") { ";var H=l,E=E||[];if(E.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+(H||"_limitProperties")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { limit: "+X+" } ",v.opts.messages!==!1){if(r+=" , message: 'should NOT have ",l=="maxProperties")r+="more";else r+="fewer";if(r+=" than ",M)r+="' + "+X+" + '";else r+=""+w;r+=" properties' "}if(v.opts.verbose){if(r+=" , schema:  ",M)r+="validate.schema"+J;else r+=""+w;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var O=r;if(r=E.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+O+"]); ";else r+=" validate.errors = ["+O+"]; return false; ";else r+=" var err = "+O+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+="} ",z)r+=" else { ";return r}});var y0=i((w6,j0)=>{j0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M=v.opts.$data&&w&&w.$data,X;if(M)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=w;if(!(M||typeof w=="number"))throw Error(l+" must be number");if(r+="var division"+Q+";if (",M)r+=" "+X+" !== undefined && ( typeof "+X+" != 'number' || ";if(r+=" (division"+Q+" = "+$+" / "+X+", ",v.opts.multipleOfPrecision)r+=" Math.abs(Math.round(division"+Q+") - division"+Q+") > 1e-"+v.opts.multipleOfPrecision+" ";else r+=" division"+Q+" !== parseInt(division"+Q+") ";if(r+=" ) ",M)r+="  )  ";r+=" ) {   ";var q=q||[];if(q.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { multipleOf: "+X+" } ",v.opts.messages!==!1)if(r+=" , message: 'should be multiple of ",M)r+="' + "+X;else r+=""+X+"'";if(v.opts.verbose){if(r+=" , schema:  ",M)r+="validate.schema"+J;else r+=""+w;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var H=r;if(r=q.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+H+"]); ";else r+=" validate.errors = ["+H+"]; return false; ";else r+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+="} ",z)r+=" else { ";return r}});var b0=i((W6,S0)=>{S0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="errs__"+Q,X=v.util.copy(v);X.level++;var q="valid"+X.level;if(v.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:v.util.schemaHasRules(w,v.RULES.all)){X.schema=w,X.schemaPath=J,X.errSchemaPath=B,r+=" var "+M+" = errors;  ";var H=v.compositeRule;v.compositeRule=X.compositeRule=!0,X.createErrors=!1;var E;if(X.opts.allErrors)E=X.opts.allErrors,X.opts.allErrors=!1;if(r+=" "+v.validate(X)+" ",X.createErrors=!0,E)X.opts.allErrors=E;v.compositeRule=X.compositeRule=H,r+=" if ("+q+") {   ";var O=O||[];if(O.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: {} ",v.opts.messages!==!1)r+=" , message: 'should NOT be valid' ";if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var N=r;if(r=O.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+N+"]); ";else r+=" validate.errors = ["+N+"]; return false; ";else r+=" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } else {  errors = "+M+"; if (vErrors !== null) { if ("+M+") vErrors.length = "+M+"; else vErrors = null; } ",v.opts.allErrors)r+=" } "}else{if(r+="  var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: {} ",v.opts.messages!==!1)r+=" , message: 'should NOT be valid' ";if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",z)r+=" if (false) { "}return r}});var _0=i((J6,R0)=>{R0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="valid"+Q,X="errs__"+Q,q=v.util.copy(v),H="";q.level++;var E="valid"+q.level,O=q.baseId,N="prevValid"+Q,g="passingSchemas"+Q;r+="var "+X+" = errors , "+N+" = false , "+M+" = false , "+g+" = null; ";var V=v.compositeRule;v.compositeRule=q.compositeRule=!0;var j=w;if(j){var R,x=-1,u=j.length-1;while(x<u){if(R=j[x+=1],v.opts.strictKeywords?typeof R=="object"&&Object.keys(R).length>0||R===!1:v.util.schemaHasRules(R,v.RULES.all))q.schema=R,q.schemaPath=J+"["+x+"]",q.errSchemaPath=B+"/"+x,r+="  "+v.validate(q)+" ",q.baseId=O;else r+=" var "+E+" = true; ";if(x)r+=" if ("+E+" && "+N+") { "+M+" = false; "+g+" = ["+g+", "+x+"]; } else { ",H+="}";r+=" if ("+E+") { "+M+" = "+N+" = true; "+g+" = "+x+"; }"}}if(v.compositeRule=q.compositeRule=V,r+=""+H+"if (!"+M+") {   var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { passingSchemas: "+g+" } ",v.opts.messages!==!1)r+=" , message: 'should match exactly one schema in oneOf' ";if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; return false; ";if(r+="} else {  errors = "+X+"; if (vErrors !== null) { if ("+X+") vErrors.length = "+X+"; else vErrors = null; }",v.opts.allErrors)r+=" } ";return r}});var a0=i((X6,k0)=>{k0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M=v.opts.$data&&w&&w.$data,X;if(M)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",X="schema"+Q;else X=w;var q=M?"(new RegExp("+X+"))":v.usePattern(w);if(r+="if ( ",M)r+=" ("+X+" !== undefined && typeof "+X+" != 'string') || ";r+=" !"+q+".test("+$+") ) {   ";var H=H||[];if(H.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { pattern:  ",M)r+=""+X;else r+=""+v.util.toQuotedString(w);if(r+="  } ",v.opts.messages!==!1){if(r+=` , message: 'should match pattern "`,M)r+="' + "+X+" + '";else r+=""+v.util.escapeQuotes(w);r+=`"' `}if(v.opts.verbose){if(r+=" , schema:  ",M)r+="validate.schema"+J;else r+=""+v.util.toQuotedString(w);r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var E=r;if(r=H.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+E+"]); ";else r+=" validate.errors = ["+E+"]; return false; ";else r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+="} ",z)r+=" else { ";return r}});var C0=i((Y6,I0)=>{I0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="errs__"+Q,X=v.util.copy(v),q="";X.level++;var H="valid"+X.level,E="key"+Q,O="idx"+Q,N=X.dataLevel=v.dataLevel+1,g="data"+N,V="dataProperties"+Q,j=Object.keys(w||{}).filter(fv),R=v.schema.patternProperties||{},x=Object.keys(R).filter(fv),u=v.schema.additionalProperties,y=j.length||x.length,Z=u===!1,C=typeof u=="object"&&Object.keys(u).length,a=v.opts.removeAdditional,A=Z||C||a,S=v.opts.ownProperties,I=v.baseId,Wv=v.schema.required;if(Wv&&!(v.opts.$data&&Wv.$data)&&Wv.length<v.opts.loopRequired)var s=v.util.toHash(Wv);function fv(iv){return iv!=="__proto__"}if(r+="var "+M+" = errors;var "+H+" = true;",S)r+=" var "+V+" = undefined;";if(A){if(S)r+=" "+V+" = "+V+" || Object.keys("+$+"); for (var "+O+"=0; "+O+"<"+V+".length; "+O+"++) { var "+E+" = "+V+"["+O+"]; ";else r+=" for (var "+E+" in "+$+") { ";if(y){if(r+=" var isAdditional"+Q+" = !(false ",j.length)if(j.length>8)r+=" || validate.schema"+J+".hasOwnProperty("+E+") ";else{var t=j;if(t){var m,Dv=-1,Fv=t.length-1;while(Dv<Fv)m=t[Dv+=1],r+=" || "+E+" == "+v.util.toQuotedString(m)+" "}}if(x.length){var yv=x;if(yv){var hv,Kv=-1,Vv=yv.length-1;while(Kv<Vv)hv=yv[Kv+=1],r+=" || "+v.usePattern(hv)+".test("+E+") "}}r+=" ); if (isAdditional"+Q+") { "}if(a=="all")r+=" delete "+$+"["+E+"]; ";else{var Sv=v.errorPath,Ef="' + "+E+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(v.errorPath,E,v.opts.jsonPointers);if(Z)if(a)r+=" delete "+$+"["+E+"]; ";else{r+=" "+H+" = false; ";var Wf=B;B=v.errSchemaPath+"/additionalProperties";var Lv=Lv||[];if(Lv.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { additionalProperty: '"+Ef+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is an invalid additional property";else r+="should NOT have additional properties";r+="' "}if(v.opts.verbose)r+=" , schema: false , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var Mv=r;if(r=Lv.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+Mv+"]); ";else r+=" validate.errors = ["+Mv+"]; return false; ";else r+=" var err = "+Mv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(B=Wf,z)r+=" break; "}else if(C)if(a=="failing"){r+=" var "+M+" = errors;  ";var Uf=v.compositeRule;v.compositeRule=X.compositeRule=!0,X.schema=u,X.schemaPath=v.schemaPath+".additionalProperties",X.errSchemaPath=v.errSchemaPath+"/additionalProperties",X.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,E,v.opts.jsonPointers);var Av=$+"["+E+"]";X.dataPathArr[N]=E;var Pv=v.validate(X);if(X.baseId=I,v.util.varOccurences(Pv,g)<2)r+=" "+v.util.varReplace(Pv,g,Av)+" ";else r+=" var "+g+" = "+Av+"; "+Pv+" ";r+=" if (!"+H+") { errors = "+M+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+$+"["+E+"]; }  ",v.compositeRule=X.compositeRule=Uf}else{X.schema=u,X.schemaPath=v.schemaPath+".additionalProperties",X.errSchemaPath=v.errSchemaPath+"/additionalProperties",X.errorPath=v.opts._errorDataPathProperty?v.errorPath:v.util.getPathExpr(v.errorPath,E,v.opts.jsonPointers);var Av=$+"["+E+"]";X.dataPathArr[N]=E;var Pv=v.validate(X);if(X.baseId=I,v.util.varOccurences(Pv,g)<2)r+=" "+v.util.varReplace(Pv,g,Av)+" ";else r+=" var "+g+" = "+Av+"; "+Pv+" ";if(z)r+=" if (!"+H+") break; "}v.errorPath=Sv}if(y)r+=" } ";if(r+=" }  ",z)r+=" if ("+H+") { ",q+="}"}var $f=v.opts.useDefaults&&!v.compositeRule;if(j.length){var Jf=j;if(Jf){var m,Ff=-1,Af=Jf.length-1;while(Ff<Af){m=Jf[Ff+=1];var Nv=w[m];if(v.opts.strictKeywords?typeof Nv=="object"&&Object.keys(Nv).length>0||Nv===!1:v.util.schemaHasRules(Nv,v.RULES.all)){var Tv=v.util.getProperty(m),Av=$+Tv,_v=$f&&Nv.default!==void 0;X.schema=Nv,X.schemaPath=J+Tv,X.errSchemaPath=B+"/"+v.util.escapeFragment(m),X.errorPath=v.util.getPath(v.errorPath,m,v.opts.jsonPointers),X.dataPathArr[N]=v.util.toQuotedString(m);var Pv=v.validate(X);if(X.baseId=I,v.util.varOccurences(Pv,g)<2){Pv=v.util.varReplace(Pv,g,Av);var bv=Av}else{var bv=g;r+=" var "+g+" = "+Av+"; "}if(_v)r+=" "+Pv+" ";else{if(s&&s[m]){if(r+=" if ( "+bv+" === undefined ",S)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(m)+"') ";r+=") { "+H+" = false; ";var Sv=v.errorPath,Wf=B,ff=v.util.escapeQuotes(m);if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(Sv,m,v.opts.jsonPointers);B=v.errSchemaPath+"/required";var Lv=Lv||[];if(Lv.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+ff+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+ff+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var Mv=r;if(r=Lv.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+Mv+"]); ";else r+=" validate.errors = ["+Mv+"]; return false; ";else r+=" var err = "+Mv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";B=Wf,v.errorPath=Sv,r+=" } else { "}else if(z){if(r+=" if ( "+bv+" === undefined ",S)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(m)+"') ";r+=") { "+H+" = true; } else { "}else{if(r+=" if ("+bv+" !== undefined ",S)r+=" &&   Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(m)+"') ";r+=" ) { "}r+=" "+Pv+" } "}}if(z)r+=" if ("+H+") { ",q+="}"}}}if(x.length){var Cv=x;if(Cv){var hv,br=-1,j1=Cv.length-1;while(br<j1){hv=Cv[br+=1];var Nv=R[hv];if(v.opts.strictKeywords?typeof Nv=="object"&&Object.keys(Nv).length>0||Nv===!1:v.util.schemaHasRules(Nv,v.RULES.all)){if(X.schema=Nv,X.schemaPath=v.schemaPath+".patternProperties"+v.util.getProperty(hv),X.errSchemaPath=v.errSchemaPath+"/patternProperties/"+v.util.escapeFragment(hv),S)r+=" "+V+" = "+V+" || Object.keys("+$+"); for (var "+O+"=0; "+O+"<"+V+".length; "+O+"++) { var "+E+" = "+V+"["+O+"]; ";else r+=" for (var "+E+" in "+$+") { ";r+=" if ("+v.usePattern(hv)+".test("+E+")) { ",X.errorPath=v.util.getPathExpr(v.errorPath,E,v.opts.jsonPointers);var Av=$+"["+E+"]";X.dataPathArr[N]=E;var Pv=v.validate(X);if(X.baseId=I,v.util.varOccurences(Pv,g)<2)r+=" "+v.util.varReplace(Pv,g,Av)+" ";else r+=" var "+g+" = "+Av+"; "+Pv+" ";if(z)r+=" if (!"+H+") break; ";if(r+=" } ",z)r+=" else "+H+" = true; ";if(r+=" }  ",z)r+=" if ("+H+") { ",q+="}"}}}}if(z)r+=" "+q+" if ("+M+" == errors) {";return r}});var Z0=i((B6,u0)=>{u0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="errs__"+Q,X=v.util.copy(v),q="";X.level++;var H="valid"+X.level;if(r+="var "+M+" = errors;",v.opts.strictKeywords?typeof w=="object"&&Object.keys(w).length>0||w===!1:v.util.schemaHasRules(w,v.RULES.all)){X.schema=w,X.schemaPath=J,X.errSchemaPath=B;var E="key"+Q,O="idx"+Q,N="i"+Q,g="' + "+E+" + '",V=X.dataLevel=v.dataLevel+1,j="data"+V,R="dataProperties"+Q,x=v.opts.ownProperties,u=v.baseId;if(x)r+=" var "+R+" = undefined; ";if(x)r+=" "+R+" = "+R+" || Object.keys("+$+"); for (var "+O+"=0; "+O+"<"+R+".length; "+O+"++) { var "+E+" = "+R+"["+O+"]; ";else r+=" for (var "+E+" in "+$+") { ";r+=" var startErrs"+Q+" = errors; ";var y=E,Z=v.compositeRule;v.compositeRule=X.compositeRule=!0;var C=v.validate(X);if(X.baseId=u,v.util.varOccurences(C,j)<2)r+=" "+v.util.varReplace(C,j,y)+" ";else r+=" var "+j+" = "+y+"; "+C+" ";if(v.compositeRule=X.compositeRule=Z,r+=" if (!"+H+") { for (var "+N+"=startErrs"+Q+"; "+N+"<errors; "+N+"++) { vErrors["+N+"].propertyName = "+E+"; }   var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { propertyName: '"+g+"' } ",v.opts.messages!==!1)r+=" , message: 'property name \\'"+g+"\\' is invalid' ";if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; return false; ";if(z)r+=" break; ";r+=" } }"}if(z)r+=" "+q+" if ("+M+" == errors) {";return r}});var x0=i((G6,T0)=>{T0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="valid"+Q,X=v.opts.$data&&w&&w.$data,q;if(X)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",q="schema"+Q;else q=w;var H="schema"+Q;if(!X)if(w.length<v.opts.loopRequired&&v.schema.properties&&Object.keys(v.schema.properties).length){var E=[],O=w;if(O){var N,g=-1,V=O.length-1;while(g<V){N=O[g+=1];var j=v.schema.properties[N];if(!(j&&(v.opts.strictKeywords?typeof j=="object"&&Object.keys(j).length>0||j===!1:v.util.schemaHasRules(j,v.RULES.all))))E[E.length]=N}}}else var E=w;if(X||E.length){var R=v.errorPath,x=X||E.length>=v.opts.loopRequired,u=v.opts.ownProperties;if(z)if(r+=" var missing"+Q+"; ",x){if(!X)r+=" var "+H+" = validate.schema"+J+"; ";var y="i"+Q,Z="schema"+Q+"["+y+"]",C="' + "+Z+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(R,Z,v.opts.jsonPointers);if(r+=" var "+M+" = true; ",X)r+=" if (schema"+Q+" === undefined) "+M+" = true; else if (!Array.isArray(schema"+Q+")) "+M+" = false; else {";if(r+=" for (var "+y+" = 0; "+y+" < "+H+".length; "+y+"++) { "+M+" = "+$+"["+H+"["+y+"]] !== undefined ",u)r+=" &&   Object.prototype.hasOwnProperty.call("+$+", "+H+"["+y+"]) ";if(r+="; if (!"+M+") break; } ",X)r+="  }  ";r+="  if (!"+M+") {   ";var a=a||[];if(a.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+C+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+C+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var A=r;if(r=a.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+A+"]); ";else r+=" validate.errors = ["+A+"]; return false; ";else r+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";r+=" } else { "}else{r+=" if ( ";var S=E;if(S){var I,y=-1,Wv=S.length-1;while(y<Wv){if(I=S[y+=1],y)r+=" || ";var s=v.util.getProperty(I),fv=$+s;if(r+=" ( ( "+fv+" === undefined ",u)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(I)+"') ";r+=") && (missing"+Q+" = "+v.util.toQuotedString(v.opts.jsonPointers?I:s)+") ) "}}r+=") {  ";var Z="missing"+Q,C="' + "+Z+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.opts.jsonPointers?v.util.getPathExpr(R,Z,!0):R+" + "+Z;var a=a||[];if(a.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+C+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+C+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";var A=r;if(r=a.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+A+"]); ";else r+=" validate.errors = ["+A+"]; return false; ";else r+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";r+=" } else { "}else if(x){if(!X)r+=" var "+H+" = validate.schema"+J+"; ";var y="i"+Q,Z="schema"+Q+"["+y+"]",C="' + "+Z+" + '";if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPathExpr(R,Z,v.opts.jsonPointers);if(X){if(r+=" if ("+H+" && !Array.isArray("+H+")) {  var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+C+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+C+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+H+" !== undefined) { "}if(r+=" for (var "+y+" = 0; "+y+" < "+H+".length; "+y+"++) { if ("+$+"["+H+"["+y+"]] === undefined ",u)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", "+H+"["+y+"]) ";if(r+=") {  var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+C+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+C+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",X)r+="  }  "}else{var t=E;if(t){var I,m=-1,Dv=t.length-1;while(m<Dv){I=t[m+=1];var s=v.util.getProperty(I),C=v.util.escapeQuotes(I),fv=$+s;if(v.opts._errorDataPathProperty)v.errorPath=v.util.getPath(R,I,v.opts.jsonPointers);if(r+=" if ( "+fv+" === undefined ",u)r+=" || ! Object.prototype.hasOwnProperty.call("+$+", '"+v.util.escapeQuotes(I)+"') ";if(r+=") {  var err =   ",v.createErrors!==!1){if(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { missingProperty: '"+C+"' } ",v.opts.messages!==!1){if(r+=" , message: '",v.opts._errorDataPathProperty)r+="is a required property";else r+="should have required property \\'"+C+"\\'";r+="' "}if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" ";r+=" } "}else r+=" {} ";r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}}v.errorPath=R}else if(z)r+=" if (true) {";return r}});var n0=i((q6,m0)=>{m0.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$="data"+(P||""),M="valid"+Q,X=v.opts.$data&&w&&w.$data,q;if(X)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",q="schema"+Q;else q=w;if((w||X)&&v.opts.uniqueItems!==!1){if(X)r+=" var "+M+"; if ("+q+" === false || "+q+" === undefined) "+M+" = true; else if (typeof "+q+" != 'boolean') "+M+" = false; else { ";r+=" var i = "+$+".length , "+M+" = true , j; if (i > 1) { ";var H=v.schema.items&&v.schema.items.type,E=Array.isArray(H);if(!H||H=="object"||H=="array"||E&&(H.indexOf("object")>=0||H.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+$+"[i], "+$+"[j])) { "+M+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+$+"[i]; ";var O="checkDataType"+(E?"s":"");if(r+=" if ("+v.util[O](H,"item",v.opts.strictNumbers,!0)+") continue; ",E)r+=` if (typeof item == 'string') item = '"' + item; `;r+=" if (typeof itemIndices[item] == 'number') { "+M+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}if(r+=" } ",X)r+="  }  ";r+=" if (!"+M+") {   ";var N=N||[];if(N.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { i: i, j: j } ",v.opts.messages!==!1)r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' ";if(v.opts.verbose){if(r+=" , schema:  ",X)r+="validate.schema"+J;else r+=""+w;r+="         , parentSchema: validate.schema"+v.schemaPath+" , data: "+$+" "}r+=" } "}else r+=" {} ";var g=r;if(r=N.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+g+"]); ";else r+=" validate.errors = ["+g+"]; return false; ";else r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(r+=" } ",z)r+=" else { "}else if(z)r+=" if (true) { ";return r}});var i0=i((z6,c0)=>{c0.exports={$ref:Q0(),allOf:w0(),anyOf:J0(),$comment:Y0(),const:G0(),contains:z0(),dependencies:$0(),enum:M0(),format:K0(),if:O0(),items:V0(),maximum:Bl(),minimum:Bl(),maxItems:Gl(),minItems:Gl(),maxLength:ql(),minLength:ql(),maxProperties:zl(),minProperties:zl(),multipleOf:y0(),not:b0(),oneOf:_0(),pattern:a0(),properties:C0(),propertyNames:Z0(),required:x0(),uniqueItems:n0(),validate:Xl()}});var o0=i((E6,d0)=>{var p0=i0(),El=If().toHash;d0.exports=function(){var v=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],l=["type","$comment"],h=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return v.all=El(l),v.types=El(r),v.forEach(function(Q){if(Q.rules=Q.rules.map(function(P){var w;if(typeof P=="object"){var J=Object.keys(P)[0];w=P[J],P=J,w.forEach(function(z){l.push(z),v.all[z]=!0})}l.push(P);var B=v.all[P]={keyword:P,code:p0[P],implements:w};return B}),v.all.$comment={keyword:"$comment",code:p0.$comment},Q.type)v.types[Q.type]=Q}),v.keywords=El(l.concat(h)),v.custom={},v}});var e0=i(($6,s0)=>{var t0=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];s0.exports=function(f,v){for(var l=0;l<v.length;l++){f=JSON.parse(JSON.stringify(f));var h=v[l].split("/"),r=f,Q;for(Q=1;Q<h.length;Q++)r=r[h[Q]];for(Q=0;Q<t0.length;Q++){var P=t0[Q],w=r[P];if(w)r[P]={anyOf:[w,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}}}return f}});var rQ=i((D6,fQ)=>{var V9=B1().MissingRef;fQ.exports=vQ;function vQ(f,v,l){var h=this;if(typeof this._opts.loadSchema!="function")throw Error("options.loadSchema should be a function");if(typeof v=="function")l=v,v=void 0;var r=Q(f).then(function(){var w=h._addSchema(f,void 0,v);return w.validate||P(w)});if(l)r.then(function(w){l(null,w)},l);return r;function Q(w){var J=w.$schema;return J&&!h.getSchema(J)?vQ.call(h,{$ref:J},!0):Promise.resolve()}function P(w){try{return h._compile(w)}catch(B){if(B instanceof V9)return J(B);throw B}function J(B){var z=B.missingSchema;if(X(z))throw Error("Schema "+z+" is loaded but "+B.missingRef+" cannot be resolved");var $=h._loadingSchemas[z];if(!$)$=h._loadingSchemas[z]=h._opts.loadSchema(z),$.then(M,M);return $.then(function(q){if(!X(z))return Q(q).then(function(){if(!X(z))h.addSchema(q,z,void 0,v)})}).then(function(){return P(w)});function M(){delete h._loadingSchemas[z]}function X(q){return h._refs[q]||h._schemas[q]}}}}});var hQ=i((M6,lQ)=>{lQ.exports=function(v,l,h){var r=" ",Q=v.level,P=v.dataLevel,w=v.schema[l],J=v.schemaPath+v.util.getProperty(l),B=v.errSchemaPath+"/"+l,z=!v.opts.allErrors,$,M="data"+(P||""),X="valid"+Q,q="errs__"+Q,H=v.opts.$data&&w&&w.$data,E;if(H)r+=" var schema"+Q+" = "+v.util.getData(w.$data,P,v.dataPathArr)+"; ",E="schema"+Q;else E=w;var O=this,N="definition"+Q,g=O.definition,V="",j,R,x,u,y;if(H&&g.$data){y="keywordValidate"+Q;var Z=g.validateSchema;r+=" var "+N+" = RULES.custom['"+l+"'].definition; var "+y+" = "+N+".validate;"}else{if(u=v.useCustomRule(O,w,v.schema,v),!u)return;E="validate.schema"+J,y=u.code,j=g.compile,R=g.inline,x=g.macro}var C=y+".errors",a="i"+Q,A="ruleErr"+Q,S=g.async;if(S&&!v.async)throw Error("async keyword in sync schema");if(!(R||x))r+=""+C+" = null;";if(r+="var "+q+" = errors;var "+X+";",H&&g.$data){if(V+="}",r+=" if ("+E+" === undefined) { "+X+" = true; } else { ",Z)V+="}",r+=" "+X+" = "+N+".validateSchema("+E+"); if ("+X+") { "}if(R)if(g.statements)r+=" "+u.validate+" ";else r+=" "+X+" = "+u.validate+"; ";else if(x){var I=v.util.copy(v),V="";I.level++;var Wv="valid"+I.level;I.schema=u.validate,I.schemaPath="";var s=v.compositeRule;v.compositeRule=I.compositeRule=!0;var fv=v.validate(I).replace(/validate\.schema/g,y);v.compositeRule=I.compositeRule=s,r+=" "+fv}else{var t=t||[];if(t.push(r),r="",r+="  "+y+".call( ",v.opts.passContext)r+="this";else r+="self";if(j||g.schema===!1)r+=" , "+M+" ";else r+=" , "+E+" , "+M+" , validate.schema"+v.schemaPath+" ";if(r+=" , (dataPath || '')",v.errorPath!='""')r+=" + "+v.errorPath;var m=P?"data"+(P-1||""):"parentData",Dv=P?v.dataPathArr[P]:"parentDataProperty";r+=" , "+m+" , "+Dv+" , rootData )  ";var Fv=r;if(r=t.pop(),g.errors===!1){if(r+=" "+X+" = ",S)r+="await ";r+=""+Fv+"; "}else if(S)C="customErrors"+Q,r+=" var "+C+" = null; try { "+X+" = await "+Fv+"; } catch (e) { "+X+" = false; if (e instanceof ValidationError) "+C+" = e.errors; else throw e; } ";else r+=" "+C+" = null; "+X+" = "+Fv+"; "}if(g.modifying)r+=" if ("+m+") "+M+" = "+m+"["+Dv+"];";if(r+=""+V,g.valid){if(z)r+=" if (true) { "}else{if(r+=" if ( ",g.valid===void 0)if(r+=" !",x)r+=""+Wv;else r+=""+X;else r+=" "+!g.valid+" ";r+=") { ",$=O.keyword;var t=t||[];t.push(r),r="";var t=t||[];if(t.push(r),r="",v.createErrors!==!1){if(r+=" { keyword: '"+($||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { keyword: '"+O.keyword+"' } ",v.opts.messages!==!1)r+=` , message: 'should pass "`+O.keyword+`" keyword validation' `;if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";r+=" } "}else r+=" {} ";var yv=r;if(r=t.pop(),!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(["+yv+"]); ";else r+=" validate.errors = ["+yv+"]; return false; ";else r+=" var err = "+yv+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var hv=r;if(r=t.pop(),R)if(g.errors){if(g.errors!="full"){if(r+="  for (var "+a+"="+q+"; "+a+"<errors; "+a+"++) { var "+A+" = vErrors["+a+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+B+'"; } ',v.opts.verbose)r+=" "+A+".schema = "+E+"; "+A+".data = "+M+"; ";r+=" } "}}else if(g.errors===!1)r+=" "+hv+" ";else{if(r+=" if ("+q+" == errors) { "+hv+" } else {  for (var "+a+"="+q+"; "+a+"<errors; "+a+"++) { var "+A+" = vErrors["+a+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+v.errorPath+"; if ("+A+".schemaPath === undefined) { "+A+'.schemaPath = "'+B+'"; } ',v.opts.verbose)r+=" "+A+".schema = "+E+"; "+A+".data = "+M+"; ";r+=" } } "}else if(x){if(r+="   var err =   ",v.createErrors!==!1){if(r+=" { keyword: '"+($||"custom")+"' , dataPath: (dataPath || '') + "+v.errorPath+" , schemaPath: "+v.util.toQuotedString(B)+" , params: { keyword: '"+O.keyword+"' } ",v.opts.messages!==!1)r+=` , message: 'should pass "`+O.keyword+`" keyword validation' `;if(v.opts.verbose)r+=" , schema: validate.schema"+J+" , parentSchema: validate.schema"+v.schemaPath+" , data: "+M+" ";r+=" } "}else r+=" {} ";if(r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!v.compositeRule&&z)if(v.async)r+=" throw new ValidationError(vErrors); ";else r+=" validate.errors = vErrors; return false; "}else if(g.errors===!1)r+=" "+hv+" ";else{if(r+=" if (Array.isArray("+C+")) { if (vErrors === null) vErrors = "+C+"; else vErrors = vErrors.concat("+C+"); errors = vErrors.length;  for (var "+a+"="+q+"; "+a+"<errors; "+a+"++) { var "+A+" = vErrors["+a+"]; if ("+A+".dataPath === undefined) "+A+".dataPath = (dataPath || '') + "+v.errorPath+";  "+A+'.schemaPath = "'+B+'";  ',v.opts.verbose)r+=" "+A+".schema = "+E+"; "+A+".data = "+M+"; ";r+=" } } else { "+hv+" } "}if(r+=" } ",z)r+=" else { "}return r}});var $l=i((H6,N9)=>{N9.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var wQ=i((K6,PQ)=>{var QQ=$l();PQ.exports={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:QQ.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:QQ.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}});var JQ=i((L6,WQ)=>{var U9=/^[a-z_$][a-z0-9_$-]*$/i,F9=hQ(),A9=wQ();WQ.exports={add:j9,get:y9,remove:S9,validate:Dl};function j9(f,v){var l=this.RULES;if(l.keywords[f])throw Error("Keyword "+f+" is already defined");if(!U9.test(f))throw Error("Keyword "+f+" is not a valid identifier");if(v){this.validateKeyword(v,!0);var h=v.type;if(Array.isArray(h))for(var r=0;r<h.length;r++)P(f,h[r],v);else P(f,h,v);var Q=v.metaSchema;if(Q){if(v.$data&&this._opts.$data)Q={anyOf:[Q,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]};v.validateSchema=this.compile(Q,!0)}}l.keywords[f]=l.all[f]=!0;function P(w,J,B){var z;for(var $=0;$<l.length;$++){var M=l[$];if(M.type==J){z=M;break}}if(!z)z={type:J,rules:[]},l.push(z);var X={keyword:w,definition:B,custom:!0,code:F9,implements:B.implements};z.rules.push(X),l.custom[w]=X}return this}function y9(f){var v=this.RULES.custom[f];return v?v.definition:this.RULES.keywords[f]||!1}function S9(f){var v=this.RULES;delete v.keywords[f],delete v.all[f],delete v.custom[f];for(var l=0;l<v.length;l++){var h=v[l].rules;for(var r=0;r<h.length;r++)if(h[r].keyword==f){h.splice(r,1);break}}return this}function Dl(f,v){Dl.errors=null;var l=this._validateKeyword=this._validateKeyword||this.compile(A9,!0);if(l(f))return!0;if(Dl.errors=l.errors,v)throw Error("custom keyword definition is invalid: "+this.errorsText(l.errors));else return!1}});var XQ=i((O6,b9)=>{b9.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var HQ=i((g6,MQ)=>{var BQ=xh(),Cf=Y1(),R9=nh(),GQ=ll(),_9=Jl(),k9=l0(),a9=o0(),qQ=e0(),zQ=If();MQ.exports=Hv;Hv.prototype.validate=C9;Hv.prototype.compile=u9;Hv.prototype.addSchema=Z9;Hv.prototype.addMetaSchema=T9;Hv.prototype.validateSchema=x9;Hv.prototype.getSchema=n9;Hv.prototype.removeSchema=i9;Hv.prototype.addFormat=f8;Hv.prototype.errorsText=v8;Hv.prototype._addSchema=p9;Hv.prototype._compile=d9;Hv.prototype.compileAsync=rQ();var H1=JQ();Hv.prototype.addKeyword=H1.add;Hv.prototype.getKeyword=H1.get;Hv.prototype.removeKeyword=H1.remove;Hv.prototype.validateKeyword=H1.validate;var EQ=B1();Hv.ValidationError=EQ.Validation;Hv.MissingRefError=EQ.MissingRef;Hv.$dataMetaSchema=qQ;var M1="http://json-schema.org/draft-07/schema",YQ=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],I9=["/properties"];function Hv(f){if(!(this instanceof Hv))return new Hv(f);if(f=this._opts=zQ.copy(f)||{},w8(this),this._schemas={},this._refs={},this._fragments={},this._formats=k9(f.format),this._cache=f.cache||new R9,this._loadingSchemas={},this._compilations=[],this.RULES=a9(),this._getId=o9(f),f.loopRequired=f.loopRequired||1/0,f.errorDataPath=="property")f._errorDataPathProperty=!0;if(f.serialize===void 0)f.serialize=_9;if(this._metaOpts=P8(this),f.formats)h8(this);if(f.keywords)Q8(this);if(r8(this),typeof f.meta=="object")this.addMetaSchema(f.meta);if(f.nullable)this.addKeyword("nullable",{metaSchema:{type:"boolean"}});l8(this)}function C9(f,v){var l;if(typeof f=="string"){if(l=this.getSchema(f),!l)throw Error('no schema with key or ref "'+f+'"')}else{var h=this._addSchema(f);l=h.validate||this._compile(h)}var r=l(v);if(l.$async!==!0)this.errors=l.errors;return r}function u9(f,v){var l=this._addSchema(f,void 0,v);return l.validate||this._compile(l)}function Z9(f,v,l,h){if(Array.isArray(f)){for(var r=0;r<f.length;r++)this.addSchema(f[r],void 0,l,h);return this}var Q=this._getId(f);if(Q!==void 0&&typeof Q!="string")throw Error("schema id must be string");return v=Cf.normalizeId(v||Q),DQ(this,v),this._schemas[v]=this._addSchema(f,l,h,!0),this}function T9(f,v,l){return this.addSchema(f,v,l,!0),this}function x9(f,v){var l=f.$schema;if(l!==void 0&&typeof l!="string")throw Error("$schema must be a string");if(l=l||this._opts.defaultMeta||m9(this),!l)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var h=this.validate(l,f);if(!h&&v){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw Error(r)}return h}function m9(f){var v=f._opts.meta;return f._opts.defaultMeta=typeof v=="object"?f._getId(v)||v:f.getSchema(M1)?M1:void 0,f._opts.defaultMeta}function n9(f){var v=$Q(this,f);switch(typeof v){case"object":return v.validate||this._compile(v);case"string":return this.getSchema(v);case"undefined":return c9(this,f)}}function c9(f,v){var l=Cf.schema.call(f,{schema:{}},v);if(l){var{schema:h,root:r,baseId:Q}=l,P=BQ.call(f,h,r,void 0,Q);return f._fragments[v]=new GQ({ref:v,fragment:!0,schema:h,root:r,baseId:Q,validate:P}),P}}function $Q(f,v){return v=Cf.normalizeId(v),f._schemas[v]||f._refs[v]||f._fragments[v]}function i9(f){if(f instanceof RegExp)return D1(this,this._schemas,f),D1(this,this._refs,f),this;switch(typeof f){case"undefined":return D1(this,this._schemas),D1(this,this._refs),this._cache.clear(),this;case"string":var v=$Q(this,f);if(v)this._cache.del(v.cacheKey);return delete this._schemas[f],delete this._refs[f],this;case"object":var l=this._opts.serialize,h=l?l(f):f;this._cache.del(h);var r=this._getId(f);if(r)r=Cf.normalizeId(r),delete this._schemas[r],delete this._refs[r]}return this}function D1(f,v,l){for(var h in v){var r=v[h];if(!r.meta&&(!l||l.test(h)))f._cache.del(r.cacheKey),delete v[h]}}function p9(f,v,l,h){if(typeof f!="object"&&typeof f!="boolean")throw Error("schema should be object or boolean");var r=this._opts.serialize,Q=r?r(f):f,P=this._cache.get(Q);if(P)return P;h=h||this._opts.addUsedSchema!==!1;var w=Cf.normalizeId(this._getId(f));if(w&&h)DQ(this,w);var J=this._opts.validateSchema!==!1&&!v,B;if(J&&!(B=w&&w==Cf.normalizeId(f.$schema)))this.validateSchema(f,!0);var z=Cf.ids.call(this,f),$=new GQ({id:w,schema:f,localRefs:z,cacheKey:Q,meta:l});if(w[0]!="#"&&h)this._refs[w]=$;if(this._cache.put(Q,$),J&&B)this.validateSchema(f,!0);return $}function d9(f,v){if(f.compiling){if(f.validate=r,r.schema=f.schema,r.errors=null,r.root=v?v:r,f.schema.$async===!0)r.$async=!0;return r}f.compiling=!0;var l;if(f.meta)l=this._opts,this._opts=this._metaOpts;var h;try{h=BQ.call(this,f.schema,v,f.localRefs)}catch(Q){throw delete f.validate,Q}finally{if(f.compiling=!1,f.meta)this._opts=l}return f.validate=h,f.refs=h.refs,f.refVal=h.refVal,f.root=h.root,h;function r(){var Q=f.validate,P=Q.apply(this,arguments);return r.errors=Q.errors,P}}function o9(f){switch(f.schemaId){case"auto":return e9;case"id":return t9;default:return s9}}function t9(f){if(f.$id)this.logger.warn("schema $id ignored",f.$id);return f.id}function s9(f){if(f.id)this.logger.warn("schema id ignored",f.id);return f.$id}function e9(f){if(f.$id&&f.id&&f.$id!=f.id)throw Error("schema $id is different from id");return f.$id||f.id}function v8(f,v){if(f=f||this.errors,!f)return"No errors";v=v||{};var l=v.separator===void 0?", ":v.separator,h=v.dataVar===void 0?"data":v.dataVar,r="";for(var Q=0;Q<f.length;Q++){var P=f[Q];if(P)r+=h+P.dataPath+" "+P.message+l}return r.slice(0,-l.length)}function f8(f,v){if(typeof v=="string")v=new RegExp(v);return this._formats[f]=v,this}function r8(f){var v;if(f._opts.$data)v=XQ(),f.addMetaSchema(v,v.$id,!0);if(f._opts.meta===!1)return;var l=$l();if(f._opts.$data)l=qQ(l,I9);f.addMetaSchema(l,M1,!0),f._refs["http://json-schema.org/schema"]=M1}function l8(f){var v=f._opts.schemas;if(!v)return;if(Array.isArray(v))f.addSchema(v);else for(var l in v)f.addSchema(v[l],l)}function h8(f){for(var v in f._opts.formats){var l=f._opts.formats[v];f.addFormat(v,l)}}function Q8(f){for(var v in f._opts.keywords){var l=f._opts.keywords[v];f.addKeyword(v,l)}}function DQ(f,v){if(f._schemas[v]||f._refs[v])throw Error('schema with key or id "'+v+'" already exists')}function P8(f){var v=zQ.copy(f._opts);for(var l=0;l<YQ.length;l++)delete v[YQ[l]];return v}function w8(f){var v=f._opts.logger;if(v===!1)f.logger={log:Ml,warn:Ml,error:Ml};else{if(v===void 0)v=console;if(!(typeof v=="object"&&v.log&&v.warn&&v.error))throw Error("logger must implement log, warn and error methods");f.logger=v}}function Ml(){}});var W={};Cw(W,{void:()=>Bw,util:()=>e,unknown:()=>Xw,union:()=>Ew,undefined:()=>ww,tuple:()=>Mw,transformer:()=>Aw,symbol:()=>Pw,string:()=>sl,strictObject:()=>zw,setErrorMap:()=>yP,set:()=>Lw,record:()=>Hw,quotelessJson:()=>AP,promise:()=>Fw,preprocess:()=>Sw,pipeline:()=>bw,ostring:()=>Rw,optional:()=>jw,onumber:()=>_w,oboolean:()=>kw,objectUtil:()=>R1,object:()=>qw,number:()=>el,nullable:()=>yw,null:()=>Ww,never:()=>Yw,nativeEnum:()=>Uw,nan:()=>lw,map:()=>Kw,makeIssue:()=>Dr,literal:()=>Vw,lazy:()=>gw,late:()=>fw,isValid:()=>Df,isDirty:()=>Ir,isAsync:()=>tf,isAborted:()=>ar,intersection:()=>Dw,instanceof:()=>rw,getParsedType:()=>hf,getErrorMap:()=>of,function:()=>Ow,enum:()=>Nw,effect:()=>Aw,discriminatedUnion:()=>$w,defaultErrorMap:()=>Gf,datetimeRegex:()=>dl,date:()=>Qw,custom:()=>tl,coerce:()=>aw,boolean:()=>vh,bigint:()=>hw,array:()=>Gw,any:()=>Jw,addIssueToContext:()=>_,ZodVoid:()=>Hr,ZodUnknown:()=>Mf,ZodUnion:()=>lr,ZodUndefined:()=>fr,ZodType:()=>o,ZodTuple:()=>Pf,ZodTransformer:()=>sv,ZodSymbol:()=>Mr,ZodString:()=>pv,ZodSet:()=>kf,ZodSchema:()=>o,ZodRecord:()=>Kr,ZodReadonly:()=>Xr,ZodPromise:()=>af,ZodPipeline:()=>gr,ZodParsedType:()=>b,ZodOptional:()=>ov,ZodObject:()=>$v,ZodNumber:()=>Hf,ZodNullable:()=>zf,ZodNull:()=>rr,ZodNever:()=>Qf,ZodNativeEnum:()=>wr,ZodNaN:()=>Or,ZodMap:()=>Lr,ZodLiteral:()=>Pr,ZodLazy:()=>Qr,ZodIssueCode:()=>U,ZodIntersection:()=>hr,ZodFunction:()=>ef,ZodFirstPartyTypeKind:()=>F,ZodError:()=>kv,ZodEnum:()=>Lf,ZodEffects:()=>sv,ZodDiscriminatedUnion:()=>Cr,ZodDefault:()=>Wr,ZodDate:()=>Rf,ZodCatch:()=>Jr,ZodBranded:()=>ur,ZodBoolean:()=>vr,ZodBigInt:()=>Kf,ZodArray:()=>dv,ZodAny:()=>_f,Schema:()=>o,ParseStatus:()=>Uv,OK:()=>jv,NEVER:()=>Iw,INVALID:()=>n,EMPTY_PATH:()=>SP,DIRTY:()=>bf,BRAND:()=>vw});var e;(function(f){f.assertEqual=(r)=>{};function v(r){}f.assertIs=v;function l(r){throw Error()}f.assertNever=l,f.arrayToEnum=(r)=>{let Q={};for(let P of r)Q[P]=P;return Q},f.getValidEnumValues=(r)=>{let Q=f.objectKeys(r).filter((w)=>typeof r[r[w]]!=="number"),P={};for(let w of Q)P[w]=r[w];return f.objectValues(P)},f.objectValues=(r)=>{return f.objectKeys(r).map(function(Q){return r[Q]})},f.objectKeys=typeof Object.keys==="function"?(r)=>Object.keys(r):(r)=>{let Q=[];for(let P in r)if(Object.prototype.hasOwnProperty.call(r,P))Q.push(P);return Q},f.find=(r,Q)=>{for(let P of r)if(Q(P))return P;return},f.isInteger=typeof Number.isInteger==="function"?(r)=>Number.isInteger(r):(r)=>typeof r==="number"&&Number.isFinite(r)&&Math.floor(r)===r;function h(r,Q=" | "){return r.map((P)=>typeof P==="string"?`'${P}'`:P).join(Q)}f.joinValues=h,f.jsonStringifyReplacer=(r,Q)=>{if(typeof Q==="bigint")return Q.toString();return Q}})(e||(e={}));var R1;(function(f){f.mergeShapes=(v,l)=>{return{...v,...l}}})(R1||(R1={}));var b=e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),hf=(f)=>{switch(typeof f){case"undefined":return b.undefined;case"string":return b.string;case"number":return Number.isNaN(f)?b.nan:b.number;case"boolean":return b.boolean;case"function":return b.function;case"bigint":return b.bigint;case"symbol":return b.symbol;case"object":if(Array.isArray(f))return b.array;if(f===null)return b.null;if(f.then&&typeof f.then==="function"&&f.catch&&typeof f.catch==="function")return b.promise;if(typeof Map<"u"&&f instanceof Map)return b.map;if(typeof Set<"u"&&f instanceof Set)return b.set;if(typeof Date<"u"&&f instanceof Date)return b.date;return b.object;default:return b.unknown}};var U=e.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),AP=(f)=>{return JSON.stringify(f,null,2).replace(/"([^"]+)":/g,"$1:")};class kv extends Error{get errors(){return this.issues}constructor(f){super();this.issues=[],this.addIssue=(l)=>{this.issues=[...this.issues,l]},this.addIssues=(l=[])=>{this.issues=[...this.issues,...l]};let v=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,v);else this.__proto__=v;this.name="ZodError",this.issues=f}format(f){let v=f||function(r){return r.message},l={_errors:[]},h=(r)=>{for(let Q of r.issues)if(Q.code==="invalid_union")Q.unionErrors.map(h);else if(Q.code==="invalid_return_type")h(Q.returnTypeError);else if(Q.code==="invalid_arguments")h(Q.argumentsError);else if(Q.path.length===0)l._errors.push(v(Q));else{let P=l,w=0;while(w<Q.path.length){let J=Q.path[w];if(w!==Q.path.length-1)P[J]=P[J]||{_errors:[]};else P[J]=P[J]||{_errors:[]},P[J]._errors.push(v(Q));P=P[J],w++}}};return h(this),l}static assert(f){if(!(f instanceof kv))throw Error(`Not a ZodError: ${f}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,e.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(f=(v)=>v.message){let v={},l=[];for(let h of this.issues)if(h.path.length>0){let r=h.path[0];v[r]=v[r]||[],v[r].push(f(h))}else l.push(f(h));return{formErrors:l,fieldErrors:v}}get formErrors(){return this.flatten()}}kv.create=(f)=>{return new kv(f)};var jP=(f,v)=>{let l;switch(f.code){case U.invalid_type:if(f.received===b.undefined)l="Required";else l=`Expected ${f.expected}, received ${f.received}`;break;case U.invalid_literal:l=`Invalid literal value, expected ${JSON.stringify(f.expected,e.jsonStringifyReplacer)}`;break;case U.unrecognized_keys:l=`Unrecognized key(s) in object: ${e.joinValues(f.keys,", ")}`;break;case U.invalid_union:l="Invalid input";break;case U.invalid_union_discriminator:l=`Invalid discriminator value. Expected ${e.joinValues(f.options)}`;break;case U.invalid_enum_value:l=`Invalid enum value. Expected ${e.joinValues(f.options)}, received '${f.received}'`;break;case U.invalid_arguments:l="Invalid function arguments";break;case U.invalid_return_type:l="Invalid function return type";break;case U.invalid_date:l="Invalid date";break;case U.invalid_string:if(typeof f.validation==="object")if("includes"in f.validation){if(l=`Invalid input: must include "${f.validation.includes}"`,typeof f.validation.position==="number")l=`${l} at one or more positions greater than or equal to ${f.validation.position}`}else if("startsWith"in f.validation)l=`Invalid input: must start with "${f.validation.startsWith}"`;else if("endsWith"in f.validation)l=`Invalid input: must end with "${f.validation.endsWith}"`;else e.assertNever(f.validation);else if(f.validation!=="regex")l=`Invalid ${f.validation}`;else l="Invalid";break;case U.too_small:if(f.type==="array")l=`Array must contain ${f.exact?"exactly":f.inclusive?"at least":"more than"} ${f.minimum} element(s)`;else if(f.type==="string")l=`String must contain ${f.exact?"exactly":f.inclusive?"at least":"over"} ${f.minimum} character(s)`;else if(f.type==="number")l=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="bigint")l=`Number must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${f.minimum}`;else if(f.type==="date")l=`Date must be ${f.exact?"exactly equal to ":f.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(f.minimum))}`;else l="Invalid input";break;case U.too_big:if(f.type==="array")l=`Array must contain ${f.exact?"exactly":f.inclusive?"at most":"less than"} ${f.maximum} element(s)`;else if(f.type==="string")l=`String must contain ${f.exact?"exactly":f.inclusive?"at most":"under"} ${f.maximum} character(s)`;else if(f.type==="number")l=`Number must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="bigint")l=`BigInt must be ${f.exact?"exactly":f.inclusive?"less than or equal to":"less than"} ${f.maximum}`;else if(f.type==="date")l=`Date must be ${f.exact?"exactly":f.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(f.maximum))}`;else l="Invalid input";break;case U.custom:l="Invalid input";break;case U.invalid_intersection_types:l="Intersection results could not be merged";break;case U.not_multiple_of:l=`Number must be a multiple of ${f.multipleOf}`;break;case U.not_finite:l="Number must be finite";break;default:l=v.defaultError,e.assertNever(f)}return{message:l}},Gf=jP;var ml=Gf;function yP(f){ml=f}function of(){return ml}var Dr=(f)=>{let{data:v,path:l,errorMaps:h,issueData:r}=f,Q=[...l,...r.path||[]],P={...r,path:Q};if(r.message!==void 0)return{...r,path:Q,message:r.message};let w="",J=h.filter((B)=>!!B).slice().reverse();for(let B of J)w=B(P,{data:v,defaultError:w}).message;return{...r,path:Q,message:w}},SP=[];function _(f,v){let l=of(),h=Dr({issueData:v,data:f.data,path:f.path,errorMaps:[f.common.contextualErrorMap,f.schemaErrorMap,l,l===Gf?void 0:Gf].filter((r)=>!!r)});f.common.issues.push(h)}class Uv{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(f,v){let l=[];for(let h of v){if(h.status==="aborted")return n;if(h.status==="dirty")f.dirty();l.push(h.value)}return{status:f.value,value:l}}static async mergeObjectAsync(f,v){let l=[];for(let h of v){let r=await h.key,Q=await h.value;l.push({key:r,value:Q})}return Uv.mergeObjectSync(f,l)}static mergeObjectSync(f,v){let l={};for(let h of v){let{key:r,value:Q}=h;if(r.status==="aborted")return n;if(Q.status==="aborted")return n;if(r.status==="dirty")f.dirty();if(Q.status==="dirty")f.dirty();if(r.value!=="__proto__"&&(typeof Q.value<"u"||h.alwaysSet))l[r.value]=Q.value}return{status:f.value,value:l}}}var n=Object.freeze({status:"aborted"}),bf=(f)=>({status:"dirty",value:f}),jv=(f)=>({status:"valid",value:f}),ar=(f)=>f.status==="aborted",Ir=(f)=>f.status==="dirty",Df=(f)=>f.status==="valid",tf=(f)=>typeof Promise<"u"&&f instanceof Promise;var T;(function(f){f.errToObj=(v)=>typeof v==="string"?{message:v}:v||{},f.toString=(v)=>typeof v==="string"?v:v?.message})(T||(T={}));class tv{constructor(f,v,l,h){this._cachedPath=[],this.parent=f,this.data=v,this._path=l,this._key=h}get path(){if(!this._cachedPath.length)if(Array.isArray(this._key))this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}var nl=(f,v)=>{if(Df(v))return{success:!0,data:v.value};else{if(!f.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let l=new kv(f.common.issues);return this._error=l,this._error}}}};function p(f){if(!f)return{};let{errorMap:v,invalid_type_error:l,required_error:h,description:r}=f;if(v&&(l||h))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:r};return{errorMap:(P,w)=>{let{message:J}=f;if(P.code==="invalid_enum_value")return{message:J??w.defaultError};if(typeof w.data>"u")return{message:J??h??w.defaultError};if(P.code!=="invalid_type")return{message:w.defaultError};return{message:J??l??w.defaultError}},description:r}}class o{get description(){return this._def.description}_getType(f){return hf(f.data)}_getOrReturnCtx(f,v){return v||{common:f.parent.common,data:f.data,parsedType:hf(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}_processInputParams(f){return{status:new Uv,ctx:{common:f.parent.common,data:f.data,parsedType:hf(f.data),schemaErrorMap:this._def.errorMap,path:f.path,parent:f.parent}}}_parseSync(f){let v=this._parse(f);if(tf(v))throw Error("Synchronous parse encountered promise.");return v}_parseAsync(f){let v=this._parse(f);return Promise.resolve(v)}parse(f,v){let l=this.safeParse(f,v);if(l.success)return l.data;throw l.error}safeParse(f,v){let l={common:{issues:[],async:v?.async??!1,contextualErrorMap:v?.errorMap},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:hf(f)},h=this._parseSync({data:f,path:l.path,parent:l});return nl(l,h)}"~validate"(f){let v={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:hf(f)};if(!this["~standard"].async)try{let l=this._parseSync({data:f,path:[],parent:v});return Df(l)?{value:l.value}:{issues:v.common.issues}}catch(l){if(l?.message?.toLowerCase()?.includes("encountered"))this["~standard"].async=!0;v.common={issues:[],async:!0}}return this._parseAsync({data:f,path:[],parent:v}).then((l)=>Df(l)?{value:l.value}:{issues:v.common.issues})}async parseAsync(f,v){let l=await this.safeParseAsync(f,v);if(l.success)return l.data;throw l.error}async safeParseAsync(f,v){let l={common:{issues:[],contextualErrorMap:v?.errorMap,async:!0},path:v?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:f,parsedType:hf(f)},h=this._parse({data:f,path:l.path,parent:l}),r=await(tf(h)?h:Promise.resolve(h));return nl(l,r)}refine(f,v){let l=(h)=>{if(typeof v==="string"||typeof v>"u")return{message:v};else if(typeof v==="function")return v(h);else return v};return this._refinement((h,r)=>{let Q=f(h),P=()=>r.addIssue({code:U.custom,...l(h)});if(typeof Promise<"u"&&Q instanceof Promise)return Q.then((w)=>{if(!w)return P(),!1;else return!0});if(!Q)return P(),!1;else return!0})}refinement(f,v){return this._refinement((l,h)=>{if(!f(l))return h.addIssue(typeof v==="function"?v(l,h):v),!1;else return!0})}_refinement(f){return new sv({schema:this,typeName:F.ZodEffects,effect:{type:"refinement",refinement:f}})}superRefine(f){return this._refinement(f)}constructor(f){this.spa=this.safeParseAsync,this._def=f,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(v)=>this["~validate"](v)}}optional(){return ov.create(this,this._def)}nullable(){return zf.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return dv.create(this)}promise(){return af.create(this,this._def)}or(f){return lr.create([this,f],this._def)}and(f){return hr.create(this,f,this._def)}transform(f){return new sv({...p(this._def),schema:this,typeName:F.ZodEffects,effect:{type:"transform",transform:f}})}default(f){let v=typeof f==="function"?f:()=>f;return new Wr({...p(this._def),innerType:this,defaultValue:v,typeName:F.ZodDefault})}brand(){return new ur({typeName:F.ZodBranded,type:this,...p(this._def)})}catch(f){let v=typeof f==="function"?f:()=>f;return new Jr({...p(this._def),innerType:this,catchValue:v,typeName:F.ZodCatch})}describe(f){return new this.constructor({...this._def,description:f})}pipe(f){return gr.create(this,f)}readonly(){return Xr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}var bP=/^c[^\s-]{8,}$/i,RP=/^[0-9a-z]+$/,_P=/^[0-9A-HJKMNP-TV-Z]{26}$/i,kP=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,aP=/^[a-z0-9_-]{21}$/i,IP=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,CP=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,uP=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ZP="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",_1,TP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xP=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,mP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,nP=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,cP=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iP=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,il="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",pP=new RegExp(`^${il}$`);function pl(f){let v="[0-5]\\d";if(f.precision)v=`${v}\\.\\d{${f.precision}}`;else if(f.precision==null)v=`${v}(\\.\\d+)?`;let l=f.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${v})${l}`}function dP(f){return new RegExp(`^${pl(f)}$`)}function dl(f){let v=`${il}T${pl(f)}`,l=[];if(l.push(f.local?"Z?":"Z"),f.offset)l.push("([+-]\\d{2}:?\\d{2})");return v=`${v}(${l.join("|")})`,new RegExp(`^${v}$`)}function oP(f,v){if((v==="v4"||!v)&&TP.test(f))return!0;if((v==="v6"||!v)&&mP.test(f))return!0;return!1}function tP(f,v){if(!IP.test(f))return!1;try{let[l]=f.split(".");if(!l)return!1;let h=l.replace(/-/g,"+").replace(/_/g,"/").padEnd(l.length+(4-l.length%4)%4,"="),r=JSON.parse(atob(h));if(typeof r!=="object"||r===null)return!1;if("typ"in r&&r?.typ!=="JWT")return!1;if(!r.alg)return!1;if(v&&r.alg!==v)return!1;return!0}catch{return!1}}function sP(f,v){if((v==="v4"||!v)&&xP.test(f))return!0;if((v==="v6"||!v)&&nP.test(f))return!0;return!1}class pv extends o{_parse(f){if(this._def.coerce)f.data=String(f.data);if(this._getType(f)!==b.string){let r=this._getOrReturnCtx(f);return _(r,{code:U.invalid_type,expected:b.string,received:r.parsedType}),n}let l=new Uv,h=void 0;for(let r of this._def.checks)if(r.kind==="min"){if(f.data.length<r.value)h=this._getOrReturnCtx(f,h),_(h,{code:U.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),l.dirty()}else if(r.kind==="max"){if(f.data.length>r.value)h=this._getOrReturnCtx(f,h),_(h,{code:U.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),l.dirty()}else if(r.kind==="length"){let Q=f.data.length>r.value,P=f.data.length<r.value;if(Q||P){if(h=this._getOrReturnCtx(f,h),Q)_(h,{code:U.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message});else if(P)_(h,{code:U.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message});l.dirty()}}else if(r.kind==="email"){if(!uP.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{validation:"email",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="emoji"){if(!_1)_1=new RegExp(ZP,"u");if(!_1.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{validation:"emoji",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="uuid"){if(!kP.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{validation:"uuid",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="nanoid"){if(!aP.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{validation:"nanoid",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="cuid"){if(!bP.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{validation:"cuid",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="cuid2"){if(!RP.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{validation:"cuid2",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="ulid"){if(!_P.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{validation:"ulid",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="url")try{new URL(f.data)}catch{h=this._getOrReturnCtx(f,h),_(h,{validation:"url",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="regex"){if(r.regex.lastIndex=0,!r.regex.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{validation:"regex",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="trim")f.data=f.data.trim();else if(r.kind==="includes"){if(!f.data.includes(r.value,r.position))h=this._getOrReturnCtx(f,h),_(h,{code:U.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),l.dirty()}else if(r.kind==="toLowerCase")f.data=f.data.toLowerCase();else if(r.kind==="toUpperCase")f.data=f.data.toUpperCase();else if(r.kind==="startsWith"){if(!f.data.startsWith(r.value))h=this._getOrReturnCtx(f,h),_(h,{code:U.invalid_string,validation:{startsWith:r.value},message:r.message}),l.dirty()}else if(r.kind==="endsWith"){if(!f.data.endsWith(r.value))h=this._getOrReturnCtx(f,h),_(h,{code:U.invalid_string,validation:{endsWith:r.value},message:r.message}),l.dirty()}else if(r.kind==="datetime"){if(!dl(r).test(f.data))h=this._getOrReturnCtx(f,h),_(h,{code:U.invalid_string,validation:"datetime",message:r.message}),l.dirty()}else if(r.kind==="date"){if(!pP.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{code:U.invalid_string,validation:"date",message:r.message}),l.dirty()}else if(r.kind==="time"){if(!dP(r).test(f.data))h=this._getOrReturnCtx(f,h),_(h,{code:U.invalid_string,validation:"time",message:r.message}),l.dirty()}else if(r.kind==="duration"){if(!CP.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{validation:"duration",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="ip"){if(!oP(f.data,r.version))h=this._getOrReturnCtx(f,h),_(h,{validation:"ip",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="jwt"){if(!tP(f.data,r.alg))h=this._getOrReturnCtx(f,h),_(h,{validation:"jwt",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="cidr"){if(!sP(f.data,r.version))h=this._getOrReturnCtx(f,h),_(h,{validation:"cidr",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="base64"){if(!cP.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{validation:"base64",code:U.invalid_string,message:r.message}),l.dirty()}else if(r.kind==="base64url"){if(!iP.test(f.data))h=this._getOrReturnCtx(f,h),_(h,{validation:"base64url",code:U.invalid_string,message:r.message}),l.dirty()}else e.assertNever(r);return{status:l.value,value:f.data}}_regex(f,v,l){return this.refinement((h)=>f.test(h),{validation:v,code:U.invalid_string,...T.errToObj(l)})}_addCheck(f){return new pv({...this._def,checks:[...this._def.checks,f]})}email(f){return this._addCheck({kind:"email",...T.errToObj(f)})}url(f){return this._addCheck({kind:"url",...T.errToObj(f)})}emoji(f){return this._addCheck({kind:"emoji",...T.errToObj(f)})}uuid(f){return this._addCheck({kind:"uuid",...T.errToObj(f)})}nanoid(f){return this._addCheck({kind:"nanoid",...T.errToObj(f)})}cuid(f){return this._addCheck({kind:"cuid",...T.errToObj(f)})}cuid2(f){return this._addCheck({kind:"cuid2",...T.errToObj(f)})}ulid(f){return this._addCheck({kind:"ulid",...T.errToObj(f)})}base64(f){return this._addCheck({kind:"base64",...T.errToObj(f)})}base64url(f){return this._addCheck({kind:"base64url",...T.errToObj(f)})}jwt(f){return this._addCheck({kind:"jwt",...T.errToObj(f)})}ip(f){return this._addCheck({kind:"ip",...T.errToObj(f)})}cidr(f){return this._addCheck({kind:"cidr",...T.errToObj(f)})}datetime(f){if(typeof f==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:f});return this._addCheck({kind:"datetime",precision:typeof f?.precision>"u"?null:f?.precision,offset:f?.offset??!1,local:f?.local??!1,...T.errToObj(f?.message)})}date(f){return this._addCheck({kind:"date",message:f})}time(f){if(typeof f==="string")return this._addCheck({kind:"time",precision:null,message:f});return this._addCheck({kind:"time",precision:typeof f?.precision>"u"?null:f?.precision,...T.errToObj(f?.message)})}duration(f){return this._addCheck({kind:"duration",...T.errToObj(f)})}regex(f,v){return this._addCheck({kind:"regex",regex:f,...T.errToObj(v)})}includes(f,v){return this._addCheck({kind:"includes",value:f,position:v?.position,...T.errToObj(v?.message)})}startsWith(f,v){return this._addCheck({kind:"startsWith",value:f,...T.errToObj(v)})}endsWith(f,v){return this._addCheck({kind:"endsWith",value:f,...T.errToObj(v)})}min(f,v){return this._addCheck({kind:"min",value:f,...T.errToObj(v)})}max(f,v){return this._addCheck({kind:"max",value:f,...T.errToObj(v)})}length(f,v){return this._addCheck({kind:"length",value:f,...T.errToObj(v)})}nonempty(f){return this.min(1,T.errToObj(f))}trim(){return new pv({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new pv({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new pv({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((f)=>f.kind==="datetime")}get isDate(){return!!this._def.checks.find((f)=>f.kind==="date")}get isTime(){return!!this._def.checks.find((f)=>f.kind==="time")}get isDuration(){return!!this._def.checks.find((f)=>f.kind==="duration")}get isEmail(){return!!this._def.checks.find((f)=>f.kind==="email")}get isURL(){return!!this._def.checks.find((f)=>f.kind==="url")}get isEmoji(){return!!this._def.checks.find((f)=>f.kind==="emoji")}get isUUID(){return!!this._def.checks.find((f)=>f.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((f)=>f.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((f)=>f.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((f)=>f.kind==="cuid2")}get isULID(){return!!this._def.checks.find((f)=>f.kind==="ulid")}get isIP(){return!!this._def.checks.find((f)=>f.kind==="ip")}get isCIDR(){return!!this._def.checks.find((f)=>f.kind==="cidr")}get isBase64(){return!!this._def.checks.find((f)=>f.kind==="base64")}get isBase64url(){return!!this._def.checks.find((f)=>f.kind==="base64url")}get minLength(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxLength(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}pv.create=(f)=>{return new pv({checks:[],typeName:F.ZodString,coerce:f?.coerce??!1,...p(f)})};function eP(f,v){let l=(f.toString().split(".")[1]||"").length,h=(v.toString().split(".")[1]||"").length,r=l>h?l:h,Q=Number.parseInt(f.toFixed(r).replace(".","")),P=Number.parseInt(v.toFixed(r).replace(".",""));return Q%P/10**r}class Hf extends o{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(f){if(this._def.coerce)f.data=Number(f.data);if(this._getType(f)!==b.number){let r=this._getOrReturnCtx(f);return _(r,{code:U.invalid_type,expected:b.number,received:r.parsedType}),n}let l=void 0,h=new Uv;for(let r of this._def.checks)if(r.kind==="int"){if(!e.isInteger(f.data))l=this._getOrReturnCtx(f,l),_(l,{code:U.invalid_type,expected:"integer",received:"float",message:r.message}),h.dirty()}else if(r.kind==="min"){if(r.inclusive?f.data<r.value:f.data<=r.value)l=this._getOrReturnCtx(f,l),_(l,{code:U.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),h.dirty()}else if(r.kind==="max"){if(r.inclusive?f.data>r.value:f.data>=r.value)l=this._getOrReturnCtx(f,l),_(l,{code:U.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),h.dirty()}else if(r.kind==="multipleOf"){if(eP(f.data,r.value)!==0)l=this._getOrReturnCtx(f,l),_(l,{code:U.not_multiple_of,multipleOf:r.value,message:r.message}),h.dirty()}else if(r.kind==="finite"){if(!Number.isFinite(f.data))l=this._getOrReturnCtx(f,l),_(l,{code:U.not_finite,message:r.message}),h.dirty()}else e.assertNever(r);return{status:h.value,value:f.data}}gte(f,v){return this.setLimit("min",f,!0,T.toString(v))}gt(f,v){return this.setLimit("min",f,!1,T.toString(v))}lte(f,v){return this.setLimit("max",f,!0,T.toString(v))}lt(f,v){return this.setLimit("max",f,!1,T.toString(v))}setLimit(f,v,l,h){return new Hf({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:l,message:T.toString(h)}]})}_addCheck(f){return new Hf({...this._def,checks:[...this._def.checks,f]})}int(f){return this._addCheck({kind:"int",message:T.toString(f)})}positive(f){return this._addCheck({kind:"min",value:0,inclusive:!1,message:T.toString(f)})}negative(f){return this._addCheck({kind:"max",value:0,inclusive:!1,message:T.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:0,inclusive:!0,message:T.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:0,inclusive:!0,message:T.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:T.toString(v)})}finite(f){return this._addCheck({kind:"finite",message:T.toString(f)})}safe(f){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:T.toString(f)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:T.toString(f)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}get isInt(){return!!this._def.checks.find((f)=>f.kind==="int"||f.kind==="multipleOf"&&e.isInteger(f.value))}get isFinite(){let f=null,v=null;for(let l of this._def.checks)if(l.kind==="finite"||l.kind==="int"||l.kind==="multipleOf")return!0;else if(l.kind==="min"){if(v===null||l.value>v)v=l.value}else if(l.kind==="max"){if(f===null||l.value<f)f=l.value}return Number.isFinite(v)&&Number.isFinite(f)}}Hf.create=(f)=>{return new Hf({checks:[],typeName:F.ZodNumber,coerce:f?.coerce||!1,...p(f)})};class Kf extends o{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(f){if(this._def.coerce)try{f.data=BigInt(f.data)}catch{return this._getInvalidInput(f)}if(this._getType(f)!==b.bigint)return this._getInvalidInput(f);let l=void 0,h=new Uv;for(let r of this._def.checks)if(r.kind==="min"){if(r.inclusive?f.data<r.value:f.data<=r.value)l=this._getOrReturnCtx(f,l),_(l,{code:U.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),h.dirty()}else if(r.kind==="max"){if(r.inclusive?f.data>r.value:f.data>=r.value)l=this._getOrReturnCtx(f,l),_(l,{code:U.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),h.dirty()}else if(r.kind==="multipleOf"){if(f.data%r.value!==BigInt(0))l=this._getOrReturnCtx(f,l),_(l,{code:U.not_multiple_of,multipleOf:r.value,message:r.message}),h.dirty()}else e.assertNever(r);return{status:h.value,value:f.data}}_getInvalidInput(f){let v=this._getOrReturnCtx(f);return _(v,{code:U.invalid_type,expected:b.bigint,received:v.parsedType}),n}gte(f,v){return this.setLimit("min",f,!0,T.toString(v))}gt(f,v){return this.setLimit("min",f,!1,T.toString(v))}lte(f,v){return this.setLimit("max",f,!0,T.toString(v))}lt(f,v){return this.setLimit("max",f,!1,T.toString(v))}setLimit(f,v,l,h){return new Kf({...this._def,checks:[...this._def.checks,{kind:f,value:v,inclusive:l,message:T.toString(h)}]})}_addCheck(f){return new Kf({...this._def,checks:[...this._def.checks,f]})}positive(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:T.toString(f)})}negative(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:T.toString(f)})}nonpositive(f){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:T.toString(f)})}nonnegative(f){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:T.toString(f)})}multipleOf(f,v){return this._addCheck({kind:"multipleOf",value:f,message:T.toString(v)})}get minValue(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f}get maxValue(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f}}Kf.create=(f)=>{return new Kf({checks:[],typeName:F.ZodBigInt,coerce:f?.coerce??!1,...p(f)})};class vr extends o{_parse(f){if(this._def.coerce)f.data=Boolean(f.data);if(this._getType(f)!==b.boolean){let l=this._getOrReturnCtx(f);return _(l,{code:U.invalid_type,expected:b.boolean,received:l.parsedType}),n}return jv(f.data)}}vr.create=(f)=>{return new vr({typeName:F.ZodBoolean,coerce:f?.coerce||!1,...p(f)})};class Rf extends o{_parse(f){if(this._def.coerce)f.data=new Date(f.data);if(this._getType(f)!==b.date){let r=this._getOrReturnCtx(f);return _(r,{code:U.invalid_type,expected:b.date,received:r.parsedType}),n}if(Number.isNaN(f.data.getTime())){let r=this._getOrReturnCtx(f);return _(r,{code:U.invalid_date}),n}let l=new Uv,h=void 0;for(let r of this._def.checks)if(r.kind==="min"){if(f.data.getTime()<r.value)h=this._getOrReturnCtx(f,h),_(h,{code:U.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),l.dirty()}else if(r.kind==="max"){if(f.data.getTime()>r.value)h=this._getOrReturnCtx(f,h),_(h,{code:U.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),l.dirty()}else e.assertNever(r);return{status:l.value,value:new Date(f.data.getTime())}}_addCheck(f){return new Rf({...this._def,checks:[...this._def.checks,f]})}min(f,v){return this._addCheck({kind:"min",value:f.getTime(),message:T.toString(v)})}max(f,v){return this._addCheck({kind:"max",value:f.getTime(),message:T.toString(v)})}get minDate(){let f=null;for(let v of this._def.checks)if(v.kind==="min"){if(f===null||v.value>f)f=v.value}return f!=null?new Date(f):null}get maxDate(){let f=null;for(let v of this._def.checks)if(v.kind==="max"){if(f===null||v.value<f)f=v.value}return f!=null?new Date(f):null}}Rf.create=(f)=>{return new Rf({checks:[],coerce:f?.coerce||!1,typeName:F.ZodDate,...p(f)})};class Mr extends o{_parse(f){if(this._getType(f)!==b.symbol){let l=this._getOrReturnCtx(f);return _(l,{code:U.invalid_type,expected:b.symbol,received:l.parsedType}),n}return jv(f.data)}}Mr.create=(f)=>{return new Mr({typeName:F.ZodSymbol,...p(f)})};class fr extends o{_parse(f){if(this._getType(f)!==b.undefined){let l=this._getOrReturnCtx(f);return _(l,{code:U.invalid_type,expected:b.undefined,received:l.parsedType}),n}return jv(f.data)}}fr.create=(f)=>{return new fr({typeName:F.ZodUndefined,...p(f)})};class rr extends o{_parse(f){if(this._getType(f)!==b.null){let l=this._getOrReturnCtx(f);return _(l,{code:U.invalid_type,expected:b.null,received:l.parsedType}),n}return jv(f.data)}}rr.create=(f)=>{return new rr({typeName:F.ZodNull,...p(f)})};class _f extends o{constructor(){super(...arguments);this._any=!0}_parse(f){return jv(f.data)}}_f.create=(f)=>{return new _f({typeName:F.ZodAny,...p(f)})};class Mf extends o{constructor(){super(...arguments);this._unknown=!0}_parse(f){return jv(f.data)}}Mf.create=(f)=>{return new Mf({typeName:F.ZodUnknown,...p(f)})};class Qf extends o{_parse(f){let v=this._getOrReturnCtx(f);return _(v,{code:U.invalid_type,expected:b.never,received:v.parsedType}),n}}Qf.create=(f)=>{return new Qf({typeName:F.ZodNever,...p(f)})};class Hr extends o{_parse(f){if(this._getType(f)!==b.undefined){let l=this._getOrReturnCtx(f);return _(l,{code:U.invalid_type,expected:b.void,received:l.parsedType}),n}return jv(f.data)}}Hr.create=(f)=>{return new Hr({typeName:F.ZodVoid,...p(f)})};class dv extends o{_parse(f){let{ctx:v,status:l}=this._processInputParams(f),h=this._def;if(v.parsedType!==b.array)return _(v,{code:U.invalid_type,expected:b.array,received:v.parsedType}),n;if(h.exactLength!==null){let Q=v.data.length>h.exactLength.value,P=v.data.length<h.exactLength.value;if(Q||P)_(v,{code:Q?U.too_big:U.too_small,minimum:P?h.exactLength.value:void 0,maximum:Q?h.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:h.exactLength.message}),l.dirty()}if(h.minLength!==null){if(v.data.length<h.minLength.value)_(v,{code:U.too_small,minimum:h.minLength.value,type:"array",inclusive:!0,exact:!1,message:h.minLength.message}),l.dirty()}if(h.maxLength!==null){if(v.data.length>h.maxLength.value)_(v,{code:U.too_big,maximum:h.maxLength.value,type:"array",inclusive:!0,exact:!1,message:h.maxLength.message}),l.dirty()}if(v.common.async)return Promise.all([...v.data].map((Q,P)=>{return h.type._parseAsync(new tv(v,Q,v.path,P))})).then((Q)=>{return Uv.mergeArray(l,Q)});let r=[...v.data].map((Q,P)=>{return h.type._parseSync(new tv(v,Q,v.path,P))});return Uv.mergeArray(l,r)}get element(){return this._def.type}min(f,v){return new dv({...this._def,minLength:{value:f,message:T.toString(v)}})}max(f,v){return new dv({...this._def,maxLength:{value:f,message:T.toString(v)}})}length(f,v){return new dv({...this._def,exactLength:{value:f,message:T.toString(v)}})}nonempty(f){return this.min(1,f)}}dv.create=(f,v)=>{return new dv({type:f,minLength:null,maxLength:null,exactLength:null,typeName:F.ZodArray,...p(v)})};function sf(f){if(f instanceof $v){let v={};for(let l in f.shape){let h=f.shape[l];v[l]=ov.create(sf(h))}return new $v({...f._def,shape:()=>v})}else if(f instanceof dv)return new dv({...f._def,type:sf(f.element)});else if(f instanceof ov)return ov.create(sf(f.unwrap()));else if(f instanceof zf)return zf.create(sf(f.unwrap()));else if(f instanceof Pf)return Pf.create(f.items.map((v)=>sf(v)));else return f}class $v extends o{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let f=this._def.shape(),v=e.objectKeys(f);return this._cached={shape:f,keys:v},this._cached}_parse(f){if(this._getType(f)!==b.object){let J=this._getOrReturnCtx(f);return _(J,{code:U.invalid_type,expected:b.object,received:J.parsedType}),n}let{status:l,ctx:h}=this._processInputParams(f),{shape:r,keys:Q}=this._getCached(),P=[];if(!(this._def.catchall instanceof Qf&&this._def.unknownKeys==="strip")){for(let J in h.data)if(!Q.includes(J))P.push(J)}let w=[];for(let J of Q){let B=r[J],z=h.data[J];w.push({key:{status:"valid",value:J},value:B._parse(new tv(h,z,h.path,J)),alwaysSet:J in h.data})}if(this._def.catchall instanceof Qf){let J=this._def.unknownKeys;if(J==="passthrough")for(let B of P)w.push({key:{status:"valid",value:B},value:{status:"valid",value:h.data[B]}});else if(J==="strict"){if(P.length>0)_(h,{code:U.unrecognized_keys,keys:P}),l.dirty()}else if(J==="strip");else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let J=this._def.catchall;for(let B of P){let z=h.data[B];w.push({key:{status:"valid",value:B},value:J._parse(new tv(h,z,h.path,B)),alwaysSet:B in h.data})}}if(h.common.async)return Promise.resolve().then(async()=>{let J=[];for(let B of w){let z=await B.key,$=await B.value;J.push({key:z,value:$,alwaysSet:B.alwaysSet})}return J}).then((J)=>{return Uv.mergeObjectSync(l,J)});else return Uv.mergeObjectSync(l,w)}get shape(){return this._def.shape()}strict(f){return T.errToObj,new $v({...this._def,unknownKeys:"strict",...f!==void 0?{errorMap:(v,l)=>{let h=this._def.errorMap?.(v,l).message??l.defaultError;if(v.code==="unrecognized_keys")return{message:T.errToObj(f).message??h};return{message:h}}}:{}})}strip(){return new $v({...this._def,unknownKeys:"strip"})}passthrough(){return new $v({...this._def,unknownKeys:"passthrough"})}extend(f){return new $v({...this._def,shape:()=>({...this._def.shape(),...f})})}merge(f){return new $v({unknownKeys:f._def.unknownKeys,catchall:f._def.catchall,shape:()=>({...this._def.shape(),...f._def.shape()}),typeName:F.ZodObject})}setKey(f,v){return this.augment({[f]:v})}catchall(f){return new $v({...this._def,catchall:f})}pick(f){let v={};for(let l of e.objectKeys(f))if(f[l]&&this.shape[l])v[l]=this.shape[l];return new $v({...this._def,shape:()=>v})}omit(f){let v={};for(let l of e.objectKeys(this.shape))if(!f[l])v[l]=this.shape[l];return new $v({...this._def,shape:()=>v})}deepPartial(){return sf(this)}partial(f){let v={};for(let l of e.objectKeys(this.shape)){let h=this.shape[l];if(f&&!f[l])v[l]=h;else v[l]=h.optional()}return new $v({...this._def,shape:()=>v})}required(f){let v={};for(let l of e.objectKeys(this.shape))if(f&&!f[l])v[l]=this.shape[l];else{let r=this.shape[l];while(r instanceof ov)r=r._def.innerType;v[l]=r}return new $v({...this._def,shape:()=>v})}keyof(){return ol(e.objectKeys(this.shape))}}$v.create=(f,v)=>{return new $v({shape:()=>f,unknownKeys:"strip",catchall:Qf.create(),typeName:F.ZodObject,...p(v)})};$v.strictCreate=(f,v)=>{return new $v({shape:()=>f,unknownKeys:"strict",catchall:Qf.create(),typeName:F.ZodObject,...p(v)})};$v.lazycreate=(f,v)=>{return new $v({shape:f,unknownKeys:"strip",catchall:Qf.create(),typeName:F.ZodObject,...p(v)})};class lr extends o{_parse(f){let{ctx:v}=this._processInputParams(f),l=this._def.options;function h(r){for(let P of r)if(P.result.status==="valid")return P.result;for(let P of r)if(P.result.status==="dirty")return v.common.issues.push(...P.ctx.common.issues),P.result;let Q=r.map((P)=>new kv(P.ctx.common.issues));return _(v,{code:U.invalid_union,unionErrors:Q}),n}if(v.common.async)return Promise.all(l.map(async(r)=>{let Q={...v,common:{...v.common,issues:[]},parent:null};return{result:await r._parseAsync({data:v.data,path:v.path,parent:Q}),ctx:Q}})).then(h);else{let r=void 0,Q=[];for(let w of l){let J={...v,common:{...v.common,issues:[]},parent:null},B=w._parseSync({data:v.data,path:v.path,parent:J});if(B.status==="valid")return B;else if(B.status==="dirty"&&!r)r={result:B,ctx:J};if(J.common.issues.length)Q.push(J.common.issues)}if(r)return v.common.issues.push(...r.ctx.common.issues),r.result;let P=Q.map((w)=>new kv(w));return _(v,{code:U.invalid_union,unionErrors:P}),n}}get options(){return this._def.options}}lr.create=(f,v)=>{return new lr({options:f,typeName:F.ZodUnion,...p(v)})};var qf=(f)=>{if(f instanceof Qr)return qf(f.schema);else if(f instanceof sv)return qf(f.innerType());else if(f instanceof Pr)return[f.value];else if(f instanceof Lf)return f.options;else if(f instanceof wr)return e.objectValues(f.enum);else if(f instanceof Wr)return qf(f._def.innerType);else if(f instanceof fr)return[void 0];else if(f instanceof rr)return[null];else if(f instanceof ov)return[void 0,...qf(f.unwrap())];else if(f instanceof zf)return[null,...qf(f.unwrap())];else if(f instanceof ur)return qf(f.unwrap());else if(f instanceof Xr)return qf(f.unwrap());else if(f instanceof Jr)return qf(f._def.innerType);else return[]};class Cr extends o{_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==b.object)return _(v,{code:U.invalid_type,expected:b.object,received:v.parsedType}),n;let l=this.discriminator,h=v.data[l],r=this.optionsMap.get(h);if(!r)return _(v,{code:U.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[l]}),n;if(v.common.async)return r._parseAsync({data:v.data,path:v.path,parent:v});else return r._parseSync({data:v.data,path:v.path,parent:v})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(f,v,l){let h=new Map;for(let r of v){let Q=qf(r.shape[f]);if(!Q.length)throw Error(`A discriminator value for key \`${f}\` could not be extracted from all schema options`);for(let P of Q){if(h.has(P))throw Error(`Discriminator property ${String(f)} has duplicate value ${String(P)}`);h.set(P,r)}}return new Cr({typeName:F.ZodDiscriminatedUnion,discriminator:f,options:v,optionsMap:h,...p(l)})}}function k1(f,v){let l=hf(f),h=hf(v);if(f===v)return{valid:!0,data:f};else if(l===b.object&&h===b.object){let r=e.objectKeys(v),Q=e.objectKeys(f).filter((w)=>r.indexOf(w)!==-1),P={...f,...v};for(let w of Q){let J=k1(f[w],v[w]);if(!J.valid)return{valid:!1};P[w]=J.data}return{valid:!0,data:P}}else if(l===b.array&&h===b.array){if(f.length!==v.length)return{valid:!1};let r=[];for(let Q=0;Q<f.length;Q++){let P=f[Q],w=v[Q],J=k1(P,w);if(!J.valid)return{valid:!1};r.push(J.data)}return{valid:!0,data:r}}else if(l===b.date&&h===b.date&&+f===+v)return{valid:!0,data:f};else return{valid:!1}}class hr extends o{_parse(f){let{status:v,ctx:l}=this._processInputParams(f),h=(r,Q)=>{if(ar(r)||ar(Q))return n;let P=k1(r.value,Q.value);if(!P.valid)return _(l,{code:U.invalid_intersection_types}),n;if(Ir(r)||Ir(Q))v.dirty();return{status:v.value,value:P.data}};if(l.common.async)return Promise.all([this._def.left._parseAsync({data:l.data,path:l.path,parent:l}),this._def.right._parseAsync({data:l.data,path:l.path,parent:l})]).then(([r,Q])=>h(r,Q));else return h(this._def.left._parseSync({data:l.data,path:l.path,parent:l}),this._def.right._parseSync({data:l.data,path:l.path,parent:l}))}}hr.create=(f,v,l)=>{return new hr({left:f,right:v,typeName:F.ZodIntersection,...p(l)})};class Pf extends o{_parse(f){let{status:v,ctx:l}=this._processInputParams(f);if(l.parsedType!==b.array)return _(l,{code:U.invalid_type,expected:b.array,received:l.parsedType}),n;if(l.data.length<this._def.items.length)return _(l,{code:U.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n;if(!this._def.rest&&l.data.length>this._def.items.length)_(l,{code:U.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),v.dirty();let r=[...l.data].map((Q,P)=>{let w=this._def.items[P]||this._def.rest;if(!w)return null;return w._parse(new tv(l,Q,l.path,P))}).filter((Q)=>!!Q);if(l.common.async)return Promise.all(r).then((Q)=>{return Uv.mergeArray(v,Q)});else return Uv.mergeArray(v,r)}get items(){return this._def.items}rest(f){return new Pf({...this._def,rest:f})}}Pf.create=(f,v)=>{if(!Array.isArray(f))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new Pf({items:f,typeName:F.ZodTuple,rest:null,...p(v)})};class Kr extends o{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:l}=this._processInputParams(f);if(l.parsedType!==b.object)return _(l,{code:U.invalid_type,expected:b.object,received:l.parsedType}),n;let h=[],r=this._def.keyType,Q=this._def.valueType;for(let P in l.data)h.push({key:r._parse(new tv(l,P,l.path,P)),value:Q._parse(new tv(l,l.data[P],l.path,P)),alwaysSet:P in l.data});if(l.common.async)return Uv.mergeObjectAsync(v,h);else return Uv.mergeObjectSync(v,h)}get element(){return this._def.valueType}static create(f,v,l){if(v instanceof o)return new Kr({keyType:f,valueType:v,typeName:F.ZodRecord,...p(l)});return new Kr({keyType:pv.create(),valueType:f,typeName:F.ZodRecord,...p(v)})}}class Lr extends o{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(f){let{status:v,ctx:l}=this._processInputParams(f);if(l.parsedType!==b.map)return _(l,{code:U.invalid_type,expected:b.map,received:l.parsedType}),n;let h=this._def.keyType,r=this._def.valueType,Q=[...l.data.entries()].map(([P,w],J)=>{return{key:h._parse(new tv(l,P,l.path,[J,"key"])),value:r._parse(new tv(l,w,l.path,[J,"value"]))}});if(l.common.async){let P=new Map;return Promise.resolve().then(async()=>{for(let w of Q){let J=await w.key,B=await w.value;if(J.status==="aborted"||B.status==="aborted")return n;if(J.status==="dirty"||B.status==="dirty")v.dirty();P.set(J.value,B.value)}return{status:v.value,value:P}})}else{let P=new Map;for(let w of Q){let{key:J,value:B}=w;if(J.status==="aborted"||B.status==="aborted")return n;if(J.status==="dirty"||B.status==="dirty")v.dirty();P.set(J.value,B.value)}return{status:v.value,value:P}}}}Lr.create=(f,v,l)=>{return new Lr({valueType:v,keyType:f,typeName:F.ZodMap,...p(l)})};class kf extends o{_parse(f){let{status:v,ctx:l}=this._processInputParams(f);if(l.parsedType!==b.set)return _(l,{code:U.invalid_type,expected:b.set,received:l.parsedType}),n;let h=this._def;if(h.minSize!==null){if(l.data.size<h.minSize.value)_(l,{code:U.too_small,minimum:h.minSize.value,type:"set",inclusive:!0,exact:!1,message:h.minSize.message}),v.dirty()}if(h.maxSize!==null){if(l.data.size>h.maxSize.value)_(l,{code:U.too_big,maximum:h.maxSize.value,type:"set",inclusive:!0,exact:!1,message:h.maxSize.message}),v.dirty()}let r=this._def.valueType;function Q(w){let J=new Set;for(let B of w){if(B.status==="aborted")return n;if(B.status==="dirty")v.dirty();J.add(B.value)}return{status:v.value,value:J}}let P=[...l.data.values()].map((w,J)=>r._parse(new tv(l,w,l.path,J)));if(l.common.async)return Promise.all(P).then((w)=>Q(w));else return Q(P)}min(f,v){return new kf({...this._def,minSize:{value:f,message:T.toString(v)}})}max(f,v){return new kf({...this._def,maxSize:{value:f,message:T.toString(v)}})}size(f,v){return this.min(f,v).max(f,v)}nonempty(f){return this.min(1,f)}}kf.create=(f,v)=>{return new kf({valueType:f,minSize:null,maxSize:null,typeName:F.ZodSet,...p(v)})};class ef extends o{constructor(){super(...arguments);this.validate=this.implement}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==b.function)return _(v,{code:U.invalid_type,expected:b.function,received:v.parsedType}),n;function l(P,w){return Dr({data:P,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,of(),Gf].filter((J)=>!!J),issueData:{code:U.invalid_arguments,argumentsError:w}})}function h(P,w){return Dr({data:P,path:v.path,errorMaps:[v.common.contextualErrorMap,v.schemaErrorMap,of(),Gf].filter((J)=>!!J),issueData:{code:U.invalid_return_type,returnTypeError:w}})}let r={errorMap:v.common.contextualErrorMap},Q=v.data;if(this._def.returns instanceof af){let P=this;return jv(async function(...w){let J=new kv([]),B=await P._def.args.parseAsync(w,r).catch((M)=>{throw J.addIssue(l(w,M)),J}),z=await Reflect.apply(Q,this,B);return await P._def.returns._def.type.parseAsync(z,r).catch((M)=>{throw J.addIssue(h(z,M)),J})})}else{let P=this;return jv(function(...w){let J=P._def.args.safeParse(w,r);if(!J.success)throw new kv([l(w,J.error)]);let B=Reflect.apply(Q,this,J.data),z=P._def.returns.safeParse(B,r);if(!z.success)throw new kv([h(B,z.error)]);return z.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...f){return new ef({...this._def,args:Pf.create(f).rest(Mf.create())})}returns(f){return new ef({...this._def,returns:f})}implement(f){return this.parse(f)}strictImplement(f){return this.parse(f)}static create(f,v,l){return new ef({args:f?f:Pf.create([]).rest(Mf.create()),returns:v||Mf.create(),typeName:F.ZodFunction,...p(l)})}}class Qr extends o{get schema(){return this._def.getter()}_parse(f){let{ctx:v}=this._processInputParams(f);return this._def.getter()._parse({data:v.data,path:v.path,parent:v})}}Qr.create=(f,v)=>{return new Qr({getter:f,typeName:F.ZodLazy,...p(v)})};class Pr extends o{_parse(f){if(f.data!==this._def.value){let v=this._getOrReturnCtx(f);return _(v,{received:v.data,code:U.invalid_literal,expected:this._def.value}),n}return{status:"valid",value:f.data}}get value(){return this._def.value}}Pr.create=(f,v)=>{return new Pr({value:f,typeName:F.ZodLiteral,...p(v)})};function ol(f,v){return new Lf({values:f,typeName:F.ZodEnum,...p(v)})}class Lf extends o{_parse(f){if(typeof f.data!=="string"){let v=this._getOrReturnCtx(f),l=this._def.values;return _(v,{expected:e.joinValues(l),received:v.parsedType,code:U.invalid_type}),n}if(!this._cache)this._cache=new Set(this._def.values);if(!this._cache.has(f.data)){let v=this._getOrReturnCtx(f),l=this._def.values;return _(v,{received:v.data,code:U.invalid_enum_value,options:l}),n}return jv(f.data)}get options(){return this._def.values}get enum(){let f={};for(let v of this._def.values)f[v]=v;return f}get Values(){let f={};for(let v of this._def.values)f[v]=v;return f}get Enum(){let f={};for(let v of this._def.values)f[v]=v;return f}extract(f,v=this._def){return Lf.create(f,{...this._def,...v})}exclude(f,v=this._def){return Lf.create(this.options.filter((l)=>!f.includes(l)),{...this._def,...v})}}Lf.create=ol;class wr extends o{_parse(f){let v=e.getValidEnumValues(this._def.values),l=this._getOrReturnCtx(f);if(l.parsedType!==b.string&&l.parsedType!==b.number){let h=e.objectValues(v);return _(l,{expected:e.joinValues(h),received:l.parsedType,code:U.invalid_type}),n}if(!this._cache)this._cache=new Set(e.getValidEnumValues(this._def.values));if(!this._cache.has(f.data)){let h=e.objectValues(v);return _(l,{received:l.data,code:U.invalid_enum_value,options:h}),n}return jv(f.data)}get enum(){return this._def.values}}wr.create=(f,v)=>{return new wr({values:f,typeName:F.ZodNativeEnum,...p(v)})};class af extends o{unwrap(){return this._def.type}_parse(f){let{ctx:v}=this._processInputParams(f);if(v.parsedType!==b.promise&&v.common.async===!1)return _(v,{code:U.invalid_type,expected:b.promise,received:v.parsedType}),n;let l=v.parsedType===b.promise?v.data:Promise.resolve(v.data);return jv(l.then((h)=>{return this._def.type.parseAsync(h,{path:v.path,errorMap:v.common.contextualErrorMap})}))}}af.create=(f,v)=>{return new af({type:f,typeName:F.ZodPromise,...p(v)})};class sv extends o{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===F.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(f){let{status:v,ctx:l}=this._processInputParams(f),h=this._def.effect||null,r={addIssue:(Q)=>{if(_(l,Q),Q.fatal)v.abort();else v.dirty()},get path(){return l.path}};if(r.addIssue=r.addIssue.bind(r),h.type==="preprocess"){let Q=h.transform(l.data,r);if(l.common.async)return Promise.resolve(Q).then(async(P)=>{if(v.value==="aborted")return n;let w=await this._def.schema._parseAsync({data:P,path:l.path,parent:l});if(w.status==="aborted")return n;if(w.status==="dirty")return bf(w.value);if(v.value==="dirty")return bf(w.value);return w});else{if(v.value==="aborted")return n;let P=this._def.schema._parseSync({data:Q,path:l.path,parent:l});if(P.status==="aborted")return n;if(P.status==="dirty")return bf(P.value);if(v.value==="dirty")return bf(P.value);return P}}if(h.type==="refinement"){let Q=(P)=>{let w=h.refinement(P,r);if(l.common.async)return Promise.resolve(w);if(w instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return P};if(l.common.async===!1){let P=this._def.schema._parseSync({data:l.data,path:l.path,parent:l});if(P.status==="aborted")return n;if(P.status==="dirty")v.dirty();return Q(P.value),{status:v.value,value:P.value}}else return this._def.schema._parseAsync({data:l.data,path:l.path,parent:l}).then((P)=>{if(P.status==="aborted")return n;if(P.status==="dirty")v.dirty();return Q(P.value).then(()=>{return{status:v.value,value:P.value}})})}if(h.type==="transform")if(l.common.async===!1){let Q=this._def.schema._parseSync({data:l.data,path:l.path,parent:l});if(!Df(Q))return n;let P=h.transform(Q.value,r);if(P instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:v.value,value:P}}else return this._def.schema._parseAsync({data:l.data,path:l.path,parent:l}).then((Q)=>{if(!Df(Q))return n;return Promise.resolve(h.transform(Q.value,r)).then((P)=>({status:v.value,value:P}))});e.assertNever(h)}}sv.create=(f,v,l)=>{return new sv({schema:f,typeName:F.ZodEffects,effect:v,...p(l)})};sv.createWithPreprocess=(f,v,l)=>{return new sv({schema:v,effect:{type:"preprocess",transform:f},typeName:F.ZodEffects,...p(l)})};class ov extends o{_parse(f){if(this._getType(f)===b.undefined)return jv(void 0);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}ov.create=(f,v)=>{return new ov({innerType:f,typeName:F.ZodOptional,...p(v)})};class zf extends o{_parse(f){if(this._getType(f)===b.null)return jv(null);return this._def.innerType._parse(f)}unwrap(){return this._def.innerType}}zf.create=(f,v)=>{return new zf({innerType:f,typeName:F.ZodNullable,...p(v)})};class Wr extends o{_parse(f){let{ctx:v}=this._processInputParams(f),l=v.data;if(v.parsedType===b.undefined)l=this._def.defaultValue();return this._def.innerType._parse({data:l,path:v.path,parent:v})}removeDefault(){return this._def.innerType}}Wr.create=(f,v)=>{return new Wr({innerType:f,typeName:F.ZodDefault,defaultValue:typeof v.default==="function"?v.default:()=>v.default,...p(v)})};class Jr extends o{_parse(f){let{ctx:v}=this._processInputParams(f),l={...v,common:{...v.common,issues:[]}},h=this._def.innerType._parse({data:l.data,path:l.path,parent:{...l}});if(tf(h))return h.then((r)=>{return{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new kv(l.common.issues)},input:l.data})}});else return{status:"valid",value:h.status==="valid"?h.value:this._def.catchValue({get error(){return new kv(l.common.issues)},input:l.data})}}removeCatch(){return this._def.innerType}}Jr.create=(f,v)=>{return new Jr({innerType:f,typeName:F.ZodCatch,catchValue:typeof v.catch==="function"?v.catch:()=>v.catch,...p(v)})};class Or extends o{_parse(f){if(this._getType(f)!==b.nan){let l=this._getOrReturnCtx(f);return _(l,{code:U.invalid_type,expected:b.nan,received:l.parsedType}),n}return{status:"valid",value:f.data}}}Or.create=(f)=>{return new Or({typeName:F.ZodNaN,...p(f)})};var vw=Symbol("zod_brand");class ur extends o{_parse(f){let{ctx:v}=this._processInputParams(f),l=v.data;return this._def.type._parse({data:l,path:v.path,parent:v})}unwrap(){return this._def.type}}class gr extends o{_parse(f){let{status:v,ctx:l}=this._processInputParams(f);if(l.common.async)return(async()=>{let r=await this._def.in._parseAsync({data:l.data,path:l.path,parent:l});if(r.status==="aborted")return n;if(r.status==="dirty")return v.dirty(),bf(r.value);else return this._def.out._parseAsync({data:r.value,path:l.path,parent:l})})();else{let h=this._def.in._parseSync({data:l.data,path:l.path,parent:l});if(h.status==="aborted")return n;if(h.status==="dirty")return v.dirty(),{status:"dirty",value:h.value};else return this._def.out._parseSync({data:h.value,path:l.path,parent:l})}}static create(f,v){return new gr({in:f,out:v,typeName:F.ZodPipeline})}}class Xr extends o{_parse(f){let v=this._def.innerType._parse(f),l=(h)=>{if(Df(h))h.value=Object.freeze(h.value);return h};return tf(v)?v.then((h)=>l(h)):l(v)}unwrap(){return this._def.innerType}}Xr.create=(f,v)=>{return new Xr({innerType:f,typeName:F.ZodReadonly,...p(v)})};function cl(f,v){let l=typeof f==="function"?f(v):typeof f==="string"?{message:f}:f;return typeof l==="string"?{message:l}:l}function tl(f,v={},l){if(f)return _f.create().superRefine((h,r)=>{let Q=f(h);if(Q instanceof Promise)return Q.then((P)=>{if(!P){let w=cl(v,h),J=w.fatal??l??!0;r.addIssue({code:"custom",...w,fatal:J})}});if(!Q){let P=cl(v,h),w=P.fatal??l??!0;r.addIssue({code:"custom",...P,fatal:w})}return});return _f.create()}var fw={object:$v.lazycreate},F;(function(f){f.ZodString="ZodString",f.ZodNumber="ZodNumber",f.ZodNaN="ZodNaN",f.ZodBigInt="ZodBigInt",f.ZodBoolean="ZodBoolean",f.ZodDate="ZodDate",f.ZodSymbol="ZodSymbol",f.ZodUndefined="ZodUndefined",f.ZodNull="ZodNull",f.ZodAny="ZodAny",f.ZodUnknown="ZodUnknown",f.ZodNever="ZodNever",f.ZodVoid="ZodVoid",f.ZodArray="ZodArray",f.ZodObject="ZodObject",f.ZodUnion="ZodUnion",f.ZodDiscriminatedUnion="ZodDiscriminatedUnion",f.ZodIntersection="ZodIntersection",f.ZodTuple="ZodTuple",f.ZodRecord="ZodRecord",f.ZodMap="ZodMap",f.ZodSet="ZodSet",f.ZodFunction="ZodFunction",f.ZodLazy="ZodLazy",f.ZodLiteral="ZodLiteral",f.ZodEnum="ZodEnum",f.ZodEffects="ZodEffects",f.ZodNativeEnum="ZodNativeEnum",f.ZodOptional="ZodOptional",f.ZodNullable="ZodNullable",f.ZodDefault="ZodDefault",f.ZodCatch="ZodCatch",f.ZodPromise="ZodPromise",f.ZodBranded="ZodBranded",f.ZodPipeline="ZodPipeline",f.ZodReadonly="ZodReadonly"})(F||(F={}));var rw=(f,v={message:`Input not instance of ${f.name}`})=>tl((l)=>l instanceof f,v),sl=pv.create,el=Hf.create,lw=Or.create,hw=Kf.create,vh=vr.create,Qw=Rf.create,Pw=Mr.create,ww=fr.create,Ww=rr.create,Jw=_f.create,Xw=Mf.create,Yw=Qf.create,Bw=Hr.create,Gw=dv.create,qw=$v.create,zw=$v.strictCreate,Ew=lr.create,$w=Cr.create,Dw=hr.create,Mw=Pf.create,Hw=Kr.create,Kw=Lr.create,Lw=kf.create,Ow=ef.create,gw=Qr.create,Vw=Pr.create,Nw=Lf.create,Uw=wr.create,Fw=af.create,Aw=sv.create,jw=ov.create,yw=zf.create,Sw=sv.createWithPreprocess,bw=gr.create,Rw=()=>sl().optional(),_w=()=>el().optional(),kw=()=>vh().optional(),aw={string:(f)=>pv.create({...f,coerce:!0}),number:(f)=>Hf.create({...f,coerce:!0}),boolean:(f)=>vr.create({...f,coerce:!0}),bigint:(f)=>Kf.create({...f,coerce:!0}),date:(f)=>Rf.create({...f,coerce:!0})};var Iw=n;var a1="2025-06-18";var fh=[a1,"2025-03-26","2024-11-05","2024-10-07"],Zr="2.0",rh=W.union([W.string(),W.number().int()]),lh=W.string(),uw=W.object({progressToken:W.optional(rh)}).passthrough(),nv=W.object({_meta:W.optional(uw)}).passthrough(),av=W.object({method:W.string(),params:W.optional(nv)}),Vr=W.object({_meta:W.optional(W.object({}).passthrough())}).passthrough(),wf=W.object({method:W.string(),params:W.optional(Vr)}),cv=W.object({_meta:W.optional(W.object({}).passthrough())}).passthrough(),Tr=W.union([W.string(),W.number().int()]),hh=W.object({jsonrpc:W.literal(Zr),id:Tr}).merge(av).strict(),Qh=(f)=>hh.safeParse(f).success,Ph=W.object({jsonrpc:W.literal(Zr)}).merge(wf).strict(),wh=(f)=>Ph.safeParse(f).success,Wh=W.object({jsonrpc:W.literal(Zr),id:Tr,result:cv}).strict(),I1=(f)=>Wh.safeParse(f).success,Yv;(function(f){f[f.ConnectionClosed=-32000]="ConnectionClosed",f[f.RequestTimeout=-32001]="RequestTimeout",f[f.ParseError=-32700]="ParseError",f[f.InvalidRequest=-32600]="InvalidRequest",f[f.MethodNotFound=-32601]="MethodNotFound",f[f.InvalidParams=-32602]="InvalidParams",f[f.InternalError=-32603]="InternalError"})(Yv||(Yv={}));var Jh=W.object({jsonrpc:W.literal(Zr),id:Tr,error:W.object({code:W.number().int(),message:W.string(),data:W.optional(W.unknown())})}).strict(),Xh=(f)=>Jh.safeParse(f).success,Yh=W.union([hh,Ph,Wh,Jh]),xr=cv.strict(),mr=wf.extend({method:W.literal("notifications/cancelled"),params:Vr.extend({requestId:Tr,reason:W.string().optional()})}),Zw=W.object({src:W.string(),mimeType:W.optional(W.string()),sizes:W.optional(W.array(W.string()))}).passthrough(),Nr=W.object({icons:W.array(Zw).optional()}).passthrough(),Ur=W.object({name:W.string(),title:W.optional(W.string())}).passthrough(),Bh=Ur.extend({version:W.string(),websiteUrl:W.optional(W.string())}).merge(Nr),Tw=W.object({experimental:W.optional(W.object({}).passthrough()),sampling:W.optional(W.object({}).passthrough()),elicitation:W.optional(W.object({}).passthrough()),roots:W.optional(W.object({listChanged:W.optional(W.boolean())}).passthrough())}).passthrough(),C1=av.extend({method:W.literal("initialize"),params:nv.extend({protocolVersion:W.string(),capabilities:Tw,clientInfo:Bh})});var xw=W.object({experimental:W.optional(W.object({}).passthrough()),logging:W.optional(W.object({}).passthrough()),completions:W.optional(W.object({}).passthrough()),prompts:W.optional(W.object({listChanged:W.optional(W.boolean())}).passthrough()),resources:W.optional(W.object({subscribe:W.optional(W.boolean()),listChanged:W.optional(W.boolean())}).passthrough()),tools:W.optional(W.object({listChanged:W.optional(W.boolean())}).passthrough())}).passthrough(),mw=cv.extend({protocolVersion:W.string(),capabilities:xw,serverInfo:Bh,instructions:W.optional(W.string())}),u1=wf.extend({method:W.literal("notifications/initialized")});var nr=av.extend({method:W.literal("ping")}),nw=W.object({progress:W.number(),total:W.optional(W.number()),message:W.optional(W.string())}).passthrough(),cr=wf.extend({method:W.literal("notifications/progress"),params:Vr.merge(nw).extend({progressToken:rh})}),ir=av.extend({params:nv.extend({cursor:W.optional(lh)}).optional()}),pr=cv.extend({nextCursor:W.optional(lh)}),Gh=W.object({uri:W.string(),mimeType:W.optional(W.string()),_meta:W.optional(W.object({}).passthrough())}).passthrough(),qh=Gh.extend({text:W.string()}),Z1=W.string().refine((f)=>{try{return atob(f),!0}catch(v){return!1}},{message:"Invalid Base64 string"}),zh=Gh.extend({blob:Z1}),Eh=Ur.extend({uri:W.string(),description:W.optional(W.string()),mimeType:W.optional(W.string()),_meta:W.optional(W.object({}).passthrough())}).merge(Nr),cw=Ur.extend({uriTemplate:W.string(),description:W.optional(W.string()),mimeType:W.optional(W.string()),_meta:W.optional(W.object({}).passthrough())}).merge(Nr),dr=ir.extend({method:W.literal("resources/list")}),iw=pr.extend({resources:W.array(Eh)}),or=ir.extend({method:W.literal("resources/templates/list")}),pw=pr.extend({resourceTemplates:W.array(cw)}),tr=av.extend({method:W.literal("resources/read"),params:nv.extend({uri:W.string()})}),dw=cv.extend({contents:W.array(W.union([qh,zh]))}),ow=wf.extend({method:W.literal("notifications/resources/list_changed")}),tw=av.extend({method:W.literal("resources/subscribe"),params:nv.extend({uri:W.string()})}),sw=av.extend({method:W.literal("resources/unsubscribe"),params:nv.extend({uri:W.string()})}),ew=wf.extend({method:W.literal("notifications/resources/updated"),params:Vr.extend({uri:W.string()})}),vW=W.object({name:W.string(),description:W.optional(W.string()),required:W.optional(W.boolean())}).passthrough(),fW=Ur.extend({description:W.optional(W.string()),arguments:W.optional(W.array(vW)),_meta:W.optional(W.object({}).passthrough())}).merge(Nr),sr=ir.extend({method:W.literal("prompts/list")}),rW=pr.extend({prompts:W.array(fW)}),er=av.extend({method:W.literal("prompts/get"),params:nv.extend({name:W.string(),arguments:W.optional(W.record(W.string()))})}),T1=W.object({type:W.literal("text"),text:W.string(),_meta:W.optional(W.object({}).passthrough())}).passthrough(),x1=W.object({type:W.literal("image"),data:Z1,mimeType:W.string(),_meta:W.optional(W.object({}).passthrough())}).passthrough(),m1=W.object({type:W.literal("audio"),data:Z1,mimeType:W.string(),_meta:W.optional(W.object({}).passthrough())}).passthrough(),lW=W.object({type:W.literal("resource"),resource:W.union([qh,zh]),_meta:W.optional(W.object({}).passthrough())}).passthrough(),hW=Eh.extend({type:W.literal("resource_link")}),$h=W.union([T1,x1,m1,hW,lW]),QW=W.object({role:W.enum(["user","assistant"]),content:$h}).passthrough(),PW=cv.extend({description:W.optional(W.string()),messages:W.array(QW)}),wW=wf.extend({method:W.literal("notifications/prompts/list_changed")}),WW=W.object({title:W.optional(W.string()),readOnlyHint:W.optional(W.boolean()),destructiveHint:W.optional(W.boolean()),idempotentHint:W.optional(W.boolean()),openWorldHint:W.optional(W.boolean())}).passthrough(),JW=Ur.extend({description:W.optional(W.string()),inputSchema:W.object({type:W.literal("object"),properties:W.optional(W.object({}).passthrough()),required:W.optional(W.array(W.string()))}).passthrough(),outputSchema:W.optional(W.object({type:W.literal("object"),properties:W.optional(W.object({}).passthrough()),required:W.optional(W.array(W.string()))}).passthrough()),annotations:W.optional(WW),_meta:W.optional(W.object({}).passthrough())}).merge(Nr),v1=ir.extend({method:W.literal("tools/list")}),XW=pr.extend({tools:W.array(JW)}),Dh=cv.extend({content:W.array($h).default([]),structuredContent:W.object({}).passthrough().optional(),isError:W.optional(W.boolean())}),gJ=Dh.or(cv.extend({toolResult:W.unknown()})),f1=av.extend({method:W.literal("tools/call"),params:nv.extend({name:W.string(),arguments:W.optional(W.record(W.unknown()))})}),YW=wf.extend({method:W.literal("notifications/tools/list_changed")}),Fr=W.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),n1=av.extend({method:W.literal("logging/setLevel"),params:nv.extend({level:Fr})}),BW=wf.extend({method:W.literal("notifications/message"),params:Vr.extend({level:Fr,logger:W.optional(W.string()),data:W.unknown()})}),GW=W.object({name:W.string().optional()}).passthrough(),qW=W.object({hints:W.optional(W.array(GW)),costPriority:W.optional(W.number().min(0).max(1)),speedPriority:W.optional(W.number().min(0).max(1)),intelligencePriority:W.optional(W.number().min(0).max(1))}).passthrough(),zW=W.object({role:W.enum(["user","assistant"]),content:W.union([T1,x1,m1])}).passthrough(),EW=av.extend({method:W.literal("sampling/createMessage"),params:nv.extend({messages:W.array(zW),systemPrompt:W.optional(W.string()),includeContext:W.optional(W.enum(["none","thisServer","allServers"])),temperature:W.optional(W.number()),maxTokens:W.number().int(),stopSequences:W.optional(W.array(W.string())),metadata:W.optional(W.object({}).passthrough()),modelPreferences:W.optional(qW)})}),c1=cv.extend({model:W.string(),stopReason:W.optional(W.enum(["endTurn","stopSequence","maxTokens"]).or(W.string())),role:W.enum(["user","assistant"]),content:W.discriminatedUnion("type",[T1,x1,m1])}),$W=W.object({type:W.literal("boolean"),title:W.optional(W.string()),description:W.optional(W.string()),default:W.optional(W.boolean())}).passthrough(),DW=W.object({type:W.literal("string"),title:W.optional(W.string()),description:W.optional(W.string()),minLength:W.optional(W.number()),maxLength:W.optional(W.number()),format:W.optional(W.enum(["email","uri","date","date-time"]))}).passthrough(),MW=W.object({type:W.enum(["number","integer"]),title:W.optional(W.string()),description:W.optional(W.string()),minimum:W.optional(W.number()),maximum:W.optional(W.number())}).passthrough(),HW=W.object({type:W.literal("string"),title:W.optional(W.string()),description:W.optional(W.string()),enum:W.array(W.string()),enumNames:W.optional(W.array(W.string()))}).passthrough(),KW=W.union([$W,DW,MW,HW]),LW=av.extend({method:W.literal("elicitation/create"),params:nv.extend({message:W.string(),requestedSchema:W.object({type:W.literal("object"),properties:W.record(W.string(),KW),required:W.optional(W.array(W.string()))}).passthrough()})}),i1=cv.extend({action:W.enum(["accept","decline","cancel"]),content:W.optional(W.record(W.string(),W.unknown()))}),OW=W.object({type:W.literal("ref/resource"),uri:W.string()}).passthrough();var gW=W.object({type:W.literal("ref/prompt"),name:W.string()}).passthrough(),r1=av.extend({method:W.literal("completion/complete"),params:nv.extend({ref:W.union([gW,OW]),argument:W.object({name:W.string(),value:W.string()}).passthrough(),context:W.optional(W.object({arguments:W.optional(W.record(W.string(),W.string()))}))})}),VW=cv.extend({completion:W.object({values:W.array(W.string()).max(100),total:W.optional(W.number().int()),hasMore:W.optional(W.boolean())}).passthrough()}),NW=W.object({uri:W.string().startsWith("file://"),name:W.optional(W.string()),_meta:W.optional(W.object({}).passthrough())}).passthrough(),UW=av.extend({method:W.literal("roots/list")}),p1=cv.extend({roots:W.array(NW)}),FW=wf.extend({method:W.literal("notifications/roots/list_changed")}),VJ=W.union([nr,C1,r1,n1,er,sr,dr,or,tr,tw,sw,f1,v1]),NJ=W.union([mr,cr,u1,FW]),UJ=W.union([xr,c1,i1,p1]),FJ=W.union([nr,EW,LW,UW]),AJ=W.union([mr,cr,BW,ew,ow,YW,wW]),jJ=W.union([xr,mw,VW,PW,rW,iw,pw,dw,Dh,XW]);class Bv extends Error{constructor(f,v,l){super(`MCP error ${f}: ${v}`);this.code=f,this.data=l,this.name="McpError"}}var AW=60000;class d1{constructor(f){this._options=f,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this.setNotificationHandler(mr,(v)=>{let l=this._requestHandlerAbortControllers.get(v.params.requestId);l===null||l===void 0||l.abort(v.params.reason)}),this.setNotificationHandler(cr,(v)=>{this._onprogress(v)}),this.setRequestHandler(nr,(v)=>({}))}_setupTimeout(f,v,l,h,r=!1){this._timeoutInfo.set(f,{timeoutId:setTimeout(h,v),startTime:Date.now(),timeout:v,maxTotalTimeout:l,resetTimeoutOnProgress:r,onTimeout:h})}_resetTimeout(f){let v=this._timeoutInfo.get(f);if(!v)return!1;let l=Date.now()-v.startTime;if(v.maxTotalTimeout&&l>=v.maxTotalTimeout)throw this._timeoutInfo.delete(f),new Bv(Yv.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:v.maxTotalTimeout,totalElapsed:l});return clearTimeout(v.timeoutId),v.timeoutId=setTimeout(v.onTimeout,v.timeout),!0}_cleanupTimeout(f){let v=this._timeoutInfo.get(f);if(v)clearTimeout(v.timeoutId),this._timeoutInfo.delete(f)}async connect(f){var v,l,h;this._transport=f;let r=(v=this.transport)===null||v===void 0?void 0:v.onclose;this._transport.onclose=()=>{r===null||r===void 0||r(),this._onclose()};let Q=(l=this.transport)===null||l===void 0?void 0:l.onerror;this._transport.onerror=(w)=>{Q===null||Q===void 0||Q(w),this._onerror(w)};let P=(h=this._transport)===null||h===void 0?void 0:h.onmessage;this._transport.onmessage=(w,J)=>{if(P===null||P===void 0||P(w,J),I1(w)||Xh(w))this._onresponse(w);else if(Qh(w))this._onrequest(w,J);else if(wh(w))this._onnotification(w);else this._onerror(Error(`Unknown message type: ${JSON.stringify(w)}`))},await this._transport.start()}_onclose(){var f;let v=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._pendingDebouncedNotifications.clear(),this._transport=void 0,(f=this.onclose)===null||f===void 0||f.call(this);let l=new Bv(Yv.ConnectionClosed,"Connection closed");for(let h of v.values())h(l)}_onerror(f){var v;(v=this.onerror)===null||v===void 0||v.call(this,f)}_onnotification(f){var v;let l=(v=this._notificationHandlers.get(f.method))!==null&&v!==void 0?v:this.fallbackNotificationHandler;if(l===void 0)return;Promise.resolve().then(()=>l(f)).catch((h)=>this._onerror(Error(`Uncaught error in notification handler: ${h}`)))}_onrequest(f,v){var l,h;let r=(l=this._requestHandlers.get(f.method))!==null&&l!==void 0?l:this.fallbackRequestHandler,Q=this._transport;if(r===void 0){Q===null||Q===void 0||Q.send({jsonrpc:"2.0",id:f.id,error:{code:Yv.MethodNotFound,message:"Method not found"}}).catch((J)=>this._onerror(Error(`Failed to send an error response: ${J}`)));return}let P=new AbortController;this._requestHandlerAbortControllers.set(f.id,P);let w={signal:P.signal,sessionId:Q===null||Q===void 0?void 0:Q.sessionId,_meta:(h=f.params)===null||h===void 0?void 0:h._meta,sendNotification:(J)=>this.notification(J,{relatedRequestId:f.id}),sendRequest:(J,B,z)=>this.request(J,B,{...z,relatedRequestId:f.id}),authInfo:v===null||v===void 0?void 0:v.authInfo,requestId:f.id,requestInfo:v===null||v===void 0?void 0:v.requestInfo};Promise.resolve().then(()=>r(f,w)).then((J)=>{if(P.signal.aborted)return;return Q===null||Q===void 0?void 0:Q.send({result:J,jsonrpc:"2.0",id:f.id})},(J)=>{var B;if(P.signal.aborted)return;return Q===null||Q===void 0?void 0:Q.send({jsonrpc:"2.0",id:f.id,error:{code:Number.isSafeInteger(J.code)?J.code:Yv.InternalError,message:(B=J.message)!==null&&B!==void 0?B:"Internal error"}})}).catch((J)=>this._onerror(Error(`Failed to send response: ${J}`))).finally(()=>{this._requestHandlerAbortControllers.delete(f.id)})}_onprogress(f){let{progressToken:v,...l}=f.params,h=Number(v),r=this._progressHandlers.get(h);if(!r){this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(f)}`));return}let Q=this._responseHandlers.get(h),P=this._timeoutInfo.get(h);if(P&&Q&&P.resetTimeoutOnProgress)try{this._resetTimeout(h)}catch(w){Q(w);return}r(l)}_onresponse(f){let v=Number(f.id),l=this._responseHandlers.get(v);if(l===void 0){this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(f)}`));return}if(this._responseHandlers.delete(v),this._progressHandlers.delete(v),this._cleanupTimeout(v),I1(f))l(f);else{let h=new Bv(f.error.code,f.error.message,f.error.data);l(h)}}get transport(){return this._transport}async close(){var f;await((f=this._transport)===null||f===void 0?void 0:f.close())}request(f,v,l){let{relatedRequestId:h,resumptionToken:r,onresumptiontoken:Q}=l!==null&&l!==void 0?l:{};return new Promise((P,w)=>{var J,B,z,$,M,X;if(!this._transport){w(Error("Not connected"));return}if(((J=this._options)===null||J===void 0?void 0:J.enforceStrictCapabilities)===!0)this.assertCapabilityForMethod(f.method);(B=l===null||l===void 0?void 0:l.signal)===null||B===void 0||B.throwIfAborted();let q=this._requestMessageId++,H={...f,jsonrpc:"2.0",id:q};if(l===null||l===void 0?void 0:l.onprogress)this._progressHandlers.set(q,l.onprogress),H.params={...f.params,_meta:{...((z=f.params)===null||z===void 0?void 0:z._meta)||{},progressToken:q}};let E=(g)=>{var V;this._responseHandlers.delete(q),this._progressHandlers.delete(q),this._cleanupTimeout(q),(V=this._transport)===null||V===void 0||V.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:q,reason:String(g)}},{relatedRequestId:h,resumptionToken:r,onresumptiontoken:Q}).catch((j)=>this._onerror(Error(`Failed to send cancellation: ${j}`))),w(g)};this._responseHandlers.set(q,(g)=>{var V;if((V=l===null||l===void 0?void 0:l.signal)===null||V===void 0?void 0:V.aborted)return;if(g instanceof Error)return w(g);try{let j=v.parse(g.result);P(j)}catch(j){w(j)}}),($=l===null||l===void 0?void 0:l.signal)===null||$===void 0||$.addEventListener("abort",()=>{var g;E((g=l===null||l===void 0?void 0:l.signal)===null||g===void 0?void 0:g.reason)});let O=(M=l===null||l===void 0?void 0:l.timeout)!==null&&M!==void 0?M:AW,N=()=>E(new Bv(Yv.RequestTimeout,"Request timed out",{timeout:O}));this._setupTimeout(q,O,l===null||l===void 0?void 0:l.maxTotalTimeout,N,(X=l===null||l===void 0?void 0:l.resetTimeoutOnProgress)!==null&&X!==void 0?X:!1),this._transport.send(H,{relatedRequestId:h,resumptionToken:r,onresumptiontoken:Q}).catch((g)=>{this._cleanupTimeout(q),w(g)})})}async notification(f,v){var l,h;if(!this._transport)throw Error("Not connected");if(this.assertNotificationCapability(f.method),((h=(l=this._options)===null||l===void 0?void 0:l.debouncedNotificationMethods)!==null&&h!==void 0?h:[]).includes(f.method)&&!f.params&&!(v===null||v===void 0?void 0:v.relatedRequestId)){if(this._pendingDebouncedNotifications.has(f.method))return;this._pendingDebouncedNotifications.add(f.method),Promise.resolve().then(()=>{var w;if(this._pendingDebouncedNotifications.delete(f.method),!this._transport)return;let J={...f,jsonrpc:"2.0"};(w=this._transport)===null||w===void 0||w.send(J,v).catch((B)=>this._onerror(B))});return}let P={...f,jsonrpc:"2.0"};await this._transport.send(P,v)}setRequestHandler(f,v){let l=f.shape.method.value;this.assertRequestHandlerCapability(l),this._requestHandlers.set(l,(h,r)=>{return Promise.resolve(v(f.parse(h),r))})}removeRequestHandler(f){this._requestHandlers.delete(f)}assertCanSetRequestHandler(f){if(this._requestHandlers.has(f))throw Error(`A request handler for ${f} already exists, which would be overridden`)}setNotificationHandler(f,v){this._notificationHandlers.set(f.shape.method.value,(l)=>Promise.resolve(v(f.parse(l))))}removeNotificationHandler(f){this._notificationHandlers.delete(f)}}function Mh(f,v){return Object.entries(v).reduce((l,[h,r])=>{if(r&&typeof r==="object")l[h]=l[h]?{...l[h],...r}:r;else l[h]=r;return l},{...f})}var KQ=W8(HQ(),1);class Hl extends d1{constructor(f,v){var l;super(v);if(this._serverInfo=f,this._loggingLevels=new Map,this.LOG_LEVEL_SEVERITY=new Map(Fr.options.map((h,r)=>[h,r])),this.isMessageIgnored=(h,r)=>{let Q=this._loggingLevels.get(r);return Q?this.LOG_LEVEL_SEVERITY.get(h)<this.LOG_LEVEL_SEVERITY.get(Q):!1},this._capabilities=(l=v===null||v===void 0?void 0:v.capabilities)!==null&&l!==void 0?l:{},this._instructions=v===null||v===void 0?void 0:v.instructions,this.setRequestHandler(C1,(h)=>this._oninitialize(h)),this.setNotificationHandler(u1,()=>{var h;return(h=this.oninitialized)===null||h===void 0?void 0:h.call(this)}),this._capabilities.logging)this.setRequestHandler(n1,async(h,r)=>{var Q;let P=r.sessionId||((Q=r.requestInfo)===null||Q===void 0?void 0:Q.headers["mcp-session-id"])||void 0,{level:w}=h.params,J=Fr.safeParse(w);if(J.success)this._loggingLevels.set(P,J.data);return{}})}registerCapabilities(f){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=Mh(this._capabilities,f)}assertCapabilityForMethod(f){var v,l,h;switch(f){case"sampling/createMessage":if(!((v=this._clientCapabilities)===null||v===void 0?void 0:v.sampling))throw Error(`Client does not support sampling (required for ${f})`);break;case"elicitation/create":if(!((l=this._clientCapabilities)===null||l===void 0?void 0:l.elicitation))throw Error(`Client does not support elicitation (required for ${f})`);break;case"roots/list":if(!((h=this._clientCapabilities)===null||h===void 0?void 0:h.roots))throw Error(`Client does not support listing roots (required for ${f})`);break;case"ping":break}}assertNotificationCapability(f){switch(f){case"notifications/message":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${f})`);break;case"notifications/resources/updated":case"notifications/resources/list_changed":if(!this._capabilities.resources)throw Error(`Server does not support notifying about resources (required for ${f})`);break;case"notifications/tools/list_changed":if(!this._capabilities.tools)throw Error(`Server does not support notifying of tool list changes (required for ${f})`);break;case"notifications/prompts/list_changed":if(!this._capabilities.prompts)throw Error(`Server does not support notifying of prompt list changes (required for ${f})`);break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(f){switch(f){case"sampling/createMessage":if(!this._capabilities.sampling)throw Error(`Server does not support sampling (required for ${f})`);break;case"logging/setLevel":if(!this._capabilities.logging)throw Error(`Server does not support logging (required for ${f})`);break;case"prompts/get":case"prompts/list":if(!this._capabilities.prompts)throw Error(`Server does not support prompts (required for ${f})`);break;case"resources/list":case"resources/templates/list":case"resources/read":if(!this._capabilities.resources)throw Error(`Server does not support resources (required for ${f})`);break;case"tools/call":case"tools/list":if(!this._capabilities.tools)throw Error(`Server does not support tools (required for ${f})`);break;case"ping":case"initialize":break}}async _oninitialize(f){let v=f.params.protocolVersion;return this._clientCapabilities=f.params.capabilities,this._clientVersion=f.params.clientInfo,{protocolVersion:fh.includes(v)?v:a1,capabilities:this.getCapabilities(),serverInfo:this._serverInfo,...this._instructions&&{instructions:this._instructions}}}getClientCapabilities(){return this._clientCapabilities}getClientVersion(){return this._clientVersion}getCapabilities(){return this._capabilities}async ping(){return this.request({method:"ping"},xr)}async createMessage(f,v){return this.request({method:"sampling/createMessage",params:f},c1,v)}async elicitInput(f,v){let l=await this.request({method:"elicitation/create",params:f},i1,v);if(l.action==="accept"&&l.content)try{let h=new KQ.default,r=h.compile(f.requestedSchema);if(!r(l.content))throw new Bv(Yv.InvalidParams,`Elicitation response content does not match requested schema: ${h.errorsText(r.errors)}`)}catch(h){if(h instanceof Bv)throw h;throw new Bv(Yv.InternalError,`Error validating elicitation response: ${h}`)}return l}async listRoots(f,v){return this.request({method:"roots/list",params:f},p1,v)}async sendLoggingMessage(f,v){if(this._capabilities.logging){if(!this.isMessageIgnored(f.level,v))return this.notification({method:"notifications/message",params:f})}}async sendResourceUpdated(f){return this.notification({method:"notifications/resources/updated",params:f})}async sendResourceListChanged(){return this.notification({method:"notifications/resources/list_changed"})}async sendToolListChanged(){return this.notification({method:"notifications/tools/list_changed"})}async sendPromptListChanged(){return this.notification({method:"notifications/prompts/list_changed"})}}var OQ=Symbol("Let zodToJsonSchema decide on which parser to use");var LQ={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},gQ=(f)=>typeof f==="string"?{...LQ,name:f}:{...LQ,...f};var VQ=(f)=>{let v=gQ(f),l=v.name!==void 0?[...v.basePath,v.definitionPath,v.name]:v.basePath;return{...v,flags:{hasReferencedOpenAiAnyType:!1},currentPath:l,propertyPath:void 0,seen:new Map(Object.entries(v.definitions).map(([h,r])=>[r._def,{def:r._def,path:[...v.basePath,v.definitionPath,h],jsonSchema:void 0}]))}};function Kl(f,v,l,h){if(!h?.errorMessages)return;if(l)f.errorMessage={...f.errorMessage,[v]:l}}function vv(f,v,l,h,r){f[v]=l,Kl(f,v,h,r)}var K1=(f,v)=>{let l=0;for(;l<f.length&&l<v.length;l++)if(f[l]!==v[l])break;return[(f.length-l).toString(),...v.slice(l)].join("/")};function qv(f){if(f.target!=="openAi")return{};let v=[...f.basePath,f.definitionPath,f.openAiAnyTypeName];return f.flags.hasReferencedOpenAiAnyType=!0,{$ref:f.$refStrategy==="relative"?K1(v,f.currentPath):v.join("/")}}function NQ(f,v){let l={type:"array"};if(f.type?._def&&f.type?._def?.typeName!==F.ZodAny)l.items=c(f.type._def,{...v,currentPath:[...v.currentPath,"items"]});if(f.minLength)vv(l,"minItems",f.minLength.value,f.minLength.message,v);if(f.maxLength)vv(l,"maxItems",f.maxLength.value,f.maxLength.message,v);if(f.exactLength)vv(l,"minItems",f.exactLength.value,f.exactLength.message,v),vv(l,"maxItems",f.exactLength.value,f.exactLength.message,v);return l}function UQ(f,v){let l={type:"integer",format:"int64"};if(!f.checks)return l;for(let h of f.checks)switch(h.kind){case"min":if(v.target==="jsonSchema7")if(h.inclusive)vv(l,"minimum",h.value,h.message,v);else vv(l,"exclusiveMinimum",h.value,h.message,v);else{if(!h.inclusive)l.exclusiveMinimum=!0;vv(l,"minimum",h.value,h.message,v)}break;case"max":if(v.target==="jsonSchema7")if(h.inclusive)vv(l,"maximum",h.value,h.message,v);else vv(l,"exclusiveMaximum",h.value,h.message,v);else{if(!h.inclusive)l.exclusiveMaximum=!0;vv(l,"maximum",h.value,h.message,v)}break;case"multipleOf":vv(l,"multipleOf",h.value,h.message,v);break}return l}function FQ(){return{type:"boolean"}}function L1(f,v){return c(f.type._def,v)}var AQ=(f,v)=>{return c(f.innerType._def,v)};function Ll(f,v,l){let h=l??v.dateStrategy;if(Array.isArray(h))return{anyOf:h.map((r,Q)=>Ll(f,v,r))};switch(h){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return J8(f,v)}}var J8=(f,v)=>{let l={type:"integer",format:"unix-time"};if(v.target==="openApi3")return l;for(let h of f.checks)switch(h.kind){case"min":vv(l,"minimum",h.value,h.message,v);break;case"max":vv(l,"maximum",h.value,h.message,v);break}return l};function jQ(f,v){return{...c(f.innerType._def,v),default:f.defaultValue()}}function yQ(f,v){return v.effectStrategy==="input"?c(f.schema._def,v):qv(v)}function SQ(f){return{type:"string",enum:Array.from(f.values)}}var X8=(f)=>{if("type"in f&&f.type==="string")return!1;return"allOf"in f};function bQ(f,v){let l=[c(f.left._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),c(f.right._def,{...v,currentPath:[...v.currentPath,"allOf","1"]})].filter((Q)=>!!Q),h=v.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,r=[];return l.forEach((Q)=>{if(X8(Q)){if(r.push(...Q.allOf),Q.unevaluatedProperties===void 0)h=void 0}else{let P=Q;if("additionalProperties"in Q&&Q.additionalProperties===!1){let{additionalProperties:w,...J}=Q;P=J}else h=void 0;r.push(P)}}),r.length?{allOf:r,...h}:void 0}function RQ(f,v){let l=typeof f.value;if(l!=="bigint"&&l!=="number"&&l!=="boolean"&&l!=="string")return{type:Array.isArray(f.value)?"array":"object"};if(v.target==="openApi3")return{type:l==="bigint"?"integer":l,enum:[f.value]};return{type:l==="bigint"?"integer":l,const:f.value}}var Ol=void 0,ev={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(Ol===void 0)Ol=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");return Ol},uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function O1(f,v){let l={type:"string"};if(f.checks)for(let h of f.checks)switch(h.kind){case"min":vv(l,"minLength",typeof l.minLength==="number"?Math.max(l.minLength,h.value):h.value,h.message,v);break;case"max":vv(l,"maxLength",typeof l.maxLength==="number"?Math.min(l.maxLength,h.value):h.value,h.message,v);break;case"email":switch(v.emailStrategy){case"format:email":vf(l,"email",h.message,v);break;case"format:idn-email":vf(l,"idn-email",h.message,v);break;case"pattern:zod":Rv(l,ev.email,h.message,v);break}break;case"url":vf(l,"uri",h.message,v);break;case"uuid":vf(l,"uuid",h.message,v);break;case"regex":Rv(l,h.regex,h.message,v);break;case"cuid":Rv(l,ev.cuid,h.message,v);break;case"cuid2":Rv(l,ev.cuid2,h.message,v);break;case"startsWith":Rv(l,RegExp(`^${gl(h.value,v)}`),h.message,v);break;case"endsWith":Rv(l,RegExp(`${gl(h.value,v)}$`),h.message,v);break;case"datetime":vf(l,"date-time",h.message,v);break;case"date":vf(l,"date",h.message,v);break;case"time":vf(l,"time",h.message,v);break;case"duration":vf(l,"duration",h.message,v);break;case"length":vv(l,"minLength",typeof l.minLength==="number"?Math.max(l.minLength,h.value):h.value,h.message,v),vv(l,"maxLength",typeof l.maxLength==="number"?Math.min(l.maxLength,h.value):h.value,h.message,v);break;case"includes":{Rv(l,RegExp(gl(h.value,v)),h.message,v);break}case"ip":{if(h.version!=="v6")vf(l,"ipv4",h.message,v);if(h.version!=="v4")vf(l,"ipv6",h.message,v);break}case"base64url":Rv(l,ev.base64url,h.message,v);break;case"jwt":Rv(l,ev.jwt,h.message,v);break;case"cidr":{if(h.version!=="v6")Rv(l,ev.ipv4Cidr,h.message,v);if(h.version!=="v4")Rv(l,ev.ipv6Cidr,h.message,v);break}case"emoji":Rv(l,ev.emoji(),h.message,v);break;case"ulid":{Rv(l,ev.ulid,h.message,v);break}case"base64":{switch(v.base64Strategy){case"format:binary":{vf(l,"binary",h.message,v);break}case"contentEncoding:base64":{vv(l,"contentEncoding","base64",h.message,v);break}case"pattern:zod":{Rv(l,ev.base64,h.message,v);break}}break}case"nanoid":Rv(l,ev.nanoid,h.message,v);case"toLowerCase":case"toUpperCase":case"trim":break;default:((r)=>{})(h)}return l}function gl(f,v){return v.patternStrategy==="escape"?B8(f):f}var Y8=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function B8(f){let v="";for(let l=0;l<f.length;l++){if(!Y8.has(f[l]))v+="\\";v+=f[l]}return v}function vf(f,v,l,h){if(f.format||f.anyOf?.some((r)=>r.format)){if(!f.anyOf)f.anyOf=[];if(f.format){if(f.anyOf.push({format:f.format,...f.errorMessage&&h.errorMessages&&{errorMessage:{format:f.errorMessage.format}}}),delete f.format,f.errorMessage){if(delete f.errorMessage.format,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.anyOf.push({format:v,...l&&h.errorMessages&&{errorMessage:{format:l}}})}else vv(f,"format",v,l,h)}function Rv(f,v,l,h){if(f.pattern||f.allOf?.some((r)=>r.pattern)){if(!f.allOf)f.allOf=[];if(f.pattern){if(f.allOf.push({pattern:f.pattern,...f.errorMessage&&h.errorMessages&&{errorMessage:{pattern:f.errorMessage.pattern}}}),delete f.pattern,f.errorMessage){if(delete f.errorMessage.pattern,Object.keys(f.errorMessage).length===0)delete f.errorMessage}}f.allOf.push({pattern:_Q(v,h),...l&&h.errorMessages&&{errorMessage:{pattern:l}}})}else vv(f,"pattern",_Q(v,h),l,h)}function _Q(f,v){if(!v.applyRegexFlags||!f.flags)return f.source;let l={i:f.flags.includes("i"),m:f.flags.includes("m"),s:f.flags.includes("s")},h=l.i?f.source.toLowerCase():f.source,r="",Q=!1,P=!1,w=!1;for(let J=0;J<h.length;J++){if(Q){r+=h[J],Q=!1;continue}if(l.i){if(P){if(h[J].match(/[a-z]/)){if(w)r+=h[J],r+=`${h[J-2]}-${h[J]}`.toUpperCase(),w=!1;else if(h[J+1]==="-"&&h[J+2]?.match(/[a-z]/))r+=h[J],w=!0;else r+=`${h[J]}${h[J].toUpperCase()}`;continue}}else if(h[J].match(/[a-z]/)){r+=`[${h[J]}${h[J].toUpperCase()}]`;continue}}if(l.m){if(h[J]==="^"){r+=`(^|(?<=[\r
]))`;continue}else if(h[J]==="$"){r+=`($|(?=[\r
]))`;continue}}if(l.s&&h[J]==="."){r+=P?`${h[J]}\r
`:`[${h[J]}\r
]`;continue}if(r+=h[J],h[J]==="\\")Q=!0;else if(P&&h[J]==="]")P=!1;else if(!P&&h[J]==="[")P=!0}try{new RegExp(r)}catch{return console.warn(`Could not convert regex pattern at ${v.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),f.source}return r}function g1(f,v){if(v.target==="openAi")console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.");if(v.target==="openApi3"&&f.keyType?._def.typeName===F.ZodEnum)return{type:"object",required:f.keyType._def.values,properties:f.keyType._def.values.reduce((h,r)=>({...h,[r]:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"properties",r]})??qv(v)}),{}),additionalProperties:v.rejectedAdditionalProperties};let l={type:"object",additionalProperties:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]})??v.allowedAdditionalProperties};if(v.target==="openApi3")return l;if(f.keyType?._def.typeName===F.ZodString&&f.keyType._def.checks?.length){let{type:h,...r}=O1(f.keyType._def,v);return{...l,propertyNames:r}}else if(f.keyType?._def.typeName===F.ZodEnum)return{...l,propertyNames:{enum:f.keyType._def.values}};else if(f.keyType?._def.typeName===F.ZodBranded&&f.keyType._def.type._def.typeName===F.ZodString&&f.keyType._def.type._def.checks?.length){let{type:h,...r}=L1(f.keyType._def,v);return{...l,propertyNames:r}}return l}function kQ(f,v){if(v.mapStrategy==="record")return g1(f,v);let l=c(f.keyType._def,{...v,currentPath:[...v.currentPath,"items","items","0"]})||qv(v),h=c(f.valueType._def,{...v,currentPath:[...v.currentPath,"items","items","1"]})||qv(v);return{type:"array",maxItems:125,items:{type:"array",items:[l,h],minItems:2,maxItems:2}}}function aQ(f){let v=f.values,h=Object.keys(f.values).filter((Q)=>{return typeof v[v[Q]]!=="number"}).map((Q)=>v[Q]),r=Array.from(new Set(h.map((Q)=>typeof Q)));return{type:r.length===1?r[0]==="string"?"string":"number":["string","number"],enum:h}}function IQ(f){return f.target==="openAi"?void 0:{not:qv({...f,currentPath:[...f.currentPath,"not"]})}}function CQ(f){return f.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var jr={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function ZQ(f,v){if(v.target==="openApi3")return uQ(f,v);let l=f.options instanceof Map?Array.from(f.options.values()):f.options;if(l.every((h)=>(h._def.typeName in jr)&&(!h._def.checks||!h._def.checks.length))){let h=l.reduce((r,Q)=>{let P=jr[Q._def.typeName];return P&&!r.includes(P)?[...r,P]:r},[]);return{type:h.length>1?h:h[0]}}else if(l.every((h)=>h._def.typeName==="ZodLiteral"&&!h.description)){let h=l.reduce((r,Q)=>{let P=typeof Q._def.value;switch(P){case"string":case"number":case"boolean":return[...r,P];case"bigint":return[...r,"integer"];case"object":if(Q._def.value===null)return[...r,"null"];case"symbol":case"undefined":case"function":default:return r}},[]);if(h.length===l.length){let r=h.filter((Q,P,w)=>w.indexOf(Q)===P);return{type:r.length>1?r:r[0],enum:l.reduce((Q,P)=>{return Q.includes(P._def.value)?Q:[...Q,P._def.value]},[])}}}else if(l.every((h)=>h._def.typeName==="ZodEnum"))return{type:"string",enum:l.reduce((h,r)=>[...h,...r._def.values.filter((Q)=>!h.includes(Q))],[])};return uQ(f,v)}var uQ=(f,v)=>{let l=(f.options instanceof Map?Array.from(f.options.values()):f.options).map((h,r)=>c(h._def,{...v,currentPath:[...v.currentPath,"anyOf",`${r}`]})).filter((h)=>!!h&&(!v.strictUnions||typeof h==="object"&&Object.keys(h).length>0));return l.length?{anyOf:l}:void 0};function TQ(f,v){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(f.innerType._def.typeName)&&(!f.innerType._def.checks||!f.innerType._def.checks.length)){if(v.target==="openApi3")return{type:jr[f.innerType._def.typeName],nullable:!0};return{type:[jr[f.innerType._def.typeName],"null"]}}if(v.target==="openApi3"){let h=c(f.innerType._def,{...v,currentPath:[...v.currentPath]});if(h&&"$ref"in h)return{allOf:[h],nullable:!0};return h&&{...h,nullable:!0}}let l=c(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","0"]});return l&&{anyOf:[l,{type:"null"}]}}function xQ(f,v){let l={type:"number"};if(!f.checks)return l;for(let h of f.checks)switch(h.kind){case"int":l.type="integer",Kl(l,"type",h.message,v);break;case"min":if(v.target==="jsonSchema7")if(h.inclusive)vv(l,"minimum",h.value,h.message,v);else vv(l,"exclusiveMinimum",h.value,h.message,v);else{if(!h.inclusive)l.exclusiveMinimum=!0;vv(l,"minimum",h.value,h.message,v)}break;case"max":if(v.target==="jsonSchema7")if(h.inclusive)vv(l,"maximum",h.value,h.message,v);else vv(l,"exclusiveMaximum",h.value,h.message,v);else{if(!h.inclusive)l.exclusiveMaximum=!0;vv(l,"maximum",h.value,h.message,v)}break;case"multipleOf":vv(l,"multipleOf",h.value,h.message,v);break}return l}function mQ(f,v){let l=v.target==="openAi",h={type:"object",properties:{}},r=[],Q=f.shape();for(let w in Q){let J=Q[w];if(J===void 0||J._def===void 0)continue;let B=q8(J);if(B&&l){if(J._def.typeName==="ZodOptional")J=J._def.innerType;if(!J.isNullable())J=J.nullable();B=!1}let z=c(J._def,{...v,currentPath:[...v.currentPath,"properties",w],propertyPath:[...v.currentPath,"properties",w]});if(z===void 0)continue;if(h.properties[w]=z,!B)r.push(w)}if(r.length)h.required=r;let P=G8(f,v);if(P!==void 0)h.additionalProperties=P;return h}function G8(f,v){if(f.catchall._def.typeName!=="ZodNever")return c(f.catchall._def,{...v,currentPath:[...v.currentPath,"additionalProperties"]});switch(f.unknownKeys){case"passthrough":return v.allowedAdditionalProperties;case"strict":return v.rejectedAdditionalProperties;case"strip":return v.removeAdditionalStrategy==="strict"?v.allowedAdditionalProperties:v.rejectedAdditionalProperties}}function q8(f){try{return f.isOptional()}catch{return!0}}var nQ=(f,v)=>{if(v.currentPath.toString()===v.propertyPath?.toString())return c(f.innerType._def,v);let l=c(f.innerType._def,{...v,currentPath:[...v.currentPath,"anyOf","1"]});return l?{anyOf:[{not:qv(v)},l]}:qv(v)};var cQ=(f,v)=>{if(v.pipeStrategy==="input")return c(f.in._def,v);else if(v.pipeStrategy==="output")return c(f.out._def,v);let l=c(f.in._def,{...v,currentPath:[...v.currentPath,"allOf","0"]}),h=c(f.out._def,{...v,currentPath:[...v.currentPath,"allOf",l?"1":"0"]});return{allOf:[l,h].filter((r)=>r!==void 0)}};function iQ(f,v){return c(f.type._def,v)}function pQ(f,v){let h={type:"array",uniqueItems:!0,items:c(f.valueType._def,{...v,currentPath:[...v.currentPath,"items"]})};if(f.minSize)vv(h,"minItems",f.minSize.value,f.minSize.message,v);if(f.maxSize)vv(h,"maxItems",f.maxSize.value,f.maxSize.message,v);return h}function dQ(f,v){if(f.rest)return{type:"array",minItems:f.items.length,items:f.items.map((l,h)=>c(l._def,{...v,currentPath:[...v.currentPath,"items",`${h}`]})).reduce((l,h)=>h===void 0?l:[...l,h],[]),additionalItems:c(f.rest._def,{...v,currentPath:[...v.currentPath,"additionalItems"]})};else return{type:"array",minItems:f.items.length,maxItems:f.items.length,items:f.items.map((l,h)=>c(l._def,{...v,currentPath:[...v.currentPath,"items",`${h}`]})).reduce((l,h)=>h===void 0?l:[...l,h],[])}}function oQ(f){return{not:qv(f)}}function tQ(f){return qv(f)}var sQ=(f,v)=>{return c(f.innerType._def,v)};var eQ=(f,v,l)=>{switch(v){case F.ZodString:return O1(f,l);case F.ZodNumber:return xQ(f,l);case F.ZodObject:return mQ(f,l);case F.ZodBigInt:return UQ(f,l);case F.ZodBoolean:return FQ();case F.ZodDate:return Ll(f,l);case F.ZodUndefined:return oQ(l);case F.ZodNull:return CQ(l);case F.ZodArray:return NQ(f,l);case F.ZodUnion:case F.ZodDiscriminatedUnion:return ZQ(f,l);case F.ZodIntersection:return bQ(f,l);case F.ZodTuple:return dQ(f,l);case F.ZodRecord:return g1(f,l);case F.ZodLiteral:return RQ(f,l);case F.ZodEnum:return SQ(f);case F.ZodNativeEnum:return aQ(f);case F.ZodNullable:return TQ(f,l);case F.ZodOptional:return nQ(f,l);case F.ZodMap:return kQ(f,l);case F.ZodSet:return pQ(f,l);case F.ZodLazy:return()=>f.getter()._def;case F.ZodPromise:return iQ(f,l);case F.ZodNaN:case F.ZodNever:return IQ(l);case F.ZodEffects:return yQ(f,l);case F.ZodAny:return qv(l);case F.ZodUnknown:return tQ(l);case F.ZodDefault:return jQ(f,l);case F.ZodBranded:return L1(f,l);case F.ZodReadonly:return sQ(f,l);case F.ZodCatch:return AQ(f,l);case F.ZodPipeline:return cQ(f,l);case F.ZodFunction:case F.ZodVoid:case F.ZodSymbol:return;default:return((h)=>{return})(v)}};function c(f,v,l=!1){let h=v.seen.get(f);if(v.override){let w=v.override?.(f,v,h,l);if(w!==OQ)return w}if(h&&!l){let w=z8(h,v);if(w!==void 0)return w}let r={def:f,path:v.currentPath,jsonSchema:void 0};v.seen.set(f,r);let Q=eQ(f,f.typeName,v),P=typeof Q==="function"?c(Q(),v):Q;if(P)E8(f,v,P);if(v.postProcess){let w=v.postProcess(P,f,v);return r.jsonSchema=P,w}return r.jsonSchema=P,P}var z8=(f,v)=>{switch(v.$refStrategy){case"root":return{$ref:f.path.join("/")};case"relative":return{$ref:K1(v.currentPath,f.path)};case"none":case"seen":{if(f.path.length<v.currentPath.length&&f.path.every((l,h)=>v.currentPath[h]===l))return console.warn(`Recursive reference detected at ${v.currentPath.join("/")}! Defaulting to any`),qv(v);return v.$refStrategy==="seen"?qv(v):void 0}}},E8=(f,v,l)=>{if(f.description){if(l.description=f.description,v.markdownDescription)l.markdownDescription=f.description}return l};var V1=(f,v)=>{let l=VQ(v),h=typeof v==="object"&&v.definitions?Object.entries(v.definitions).reduce((J,[B,z])=>({...J,[B]:c(z._def,{...l,currentPath:[...l.basePath,l.definitionPath,B]},!0)??qv(l)}),{}):void 0,r=typeof v==="string"?v:v?.nameStrategy==="title"?void 0:v?.name,Q=c(f._def,r===void 0?l:{...l,currentPath:[...l.basePath,l.definitionPath,r]},!1)??qv(l),P=typeof v==="object"&&v.name!==void 0&&v.nameStrategy==="title"?v.name:void 0;if(P!==void 0)Q.title=P;if(l.flags.hasReferencedOpenAiAnyType){if(!h)h={};if(!h[l.openAiAnyTypeName])h[l.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:l.$refStrategy==="relative"?"1":[...l.basePath,l.definitionPath,l.openAiAnyTypeName].join("/")}}}let w=r===void 0?h?{...Q,[l.definitionPath]:h}:Q:{$ref:[...l.$refStrategy==="relative"?[]:l.basePath,l.definitionPath,r].join("/"),[l.definitionPath]:{...h,[r]:Q}};if(l.target==="jsonSchema7")w.$schema="http://json-schema.org/draft-07/schema#";else if(l.target==="jsonSchema2019-09"||l.target==="openAi")w.$schema="https://json-schema.org/draft/2019-09/schema#";if(l.target==="openAi"&&(("anyOf"in w)||("oneOf"in w)||("allOf"in w)||("type"in w)&&Array.isArray(w.type)))console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.");return w};var Vl;(function(f){f.Completable="McpCompletable"})(Vl||(Vl={}));class yr extends o{_parse(f){let{ctx:v}=this._processInputParams(f),l=v.data;return this._def.type._parse({data:l,path:v.path,parent:v})}unwrap(){return this._def.type}}yr.create=(f,v)=>{return new yr({type:f,typeName:Vl.Completable,complete:v.complete,...$8(v)})};function $8(f){if(!f)return{};let{errorMap:v,invalid_type_error:l,required_error:h,description:r}=f;if(v&&(l||h))throw Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(v)return{errorMap:v,description:r};return{errorMap:(P,w)=>{var J,B;let{message:z}=f;if(P.code==="invalid_enum_value")return{message:z!==null&&z!==void 0?z:w.defaultError};if(typeof w.data>"u")return{message:(J=z!==null&&z!==void 0?z:h)!==null&&J!==void 0?J:w.defaultError};if(P.code!=="invalid_type")return{message:w.defaultError};return{message:(B=z!==null&&z!==void 0?z:l)!==null&&B!==void 0?B:w.defaultError}},description:r}}class Nl{constructor(f,v){this._registeredResources={},this._registeredResourceTemplates={},this._registeredTools={},this._registeredPrompts={},this._toolHandlersInitialized=!1,this._completionHandlerInitialized=!1,this._resourceHandlersInitialized=!1,this._promptHandlersInitialized=!1,this.server=new Hl(f,v)}async connect(f){return await this.server.connect(f)}async close(){await this.server.close()}setToolRequestHandlers(){if(this._toolHandlersInitialized)return;this.server.assertCanSetRequestHandler(v1.shape.method.value),this.server.assertCanSetRequestHandler(f1.shape.method.value),this.server.registerCapabilities({tools:{listChanged:!0}}),this.server.setRequestHandler(v1,()=>({tools:Object.entries(this._registeredTools).filter(([,f])=>f.enabled).map(([f,v])=>{let l={name:f,title:v.title,description:v.description,inputSchema:v.inputSchema?V1(v.inputSchema,{strictUnions:!0}):D8,annotations:v.annotations,_meta:v._meta};if(v.outputSchema)l.outputSchema=V1(v.outputSchema,{strictUnions:!0});return l})})),this.server.setRequestHandler(f1,async(f,v)=>{let l=this._registeredTools[f.params.name];if(!l)throw new Bv(Yv.InvalidParams,`Tool ${f.params.name} not found`);if(!l.enabled)throw new Bv(Yv.InvalidParams,`Tool ${f.params.name} disabled`);let h;if(l.inputSchema){let r=await l.inputSchema.safeParseAsync(f.params.arguments);if(!r.success)throw new Bv(Yv.InvalidParams,`Invalid arguments for tool ${f.params.name}: ${r.error.message}`);let Q=r.data,P=l.callback;try{h=await Promise.resolve(P(Q,v))}catch(w){h={content:[{type:"text",text:w instanceof Error?w.message:String(w)}],isError:!0}}}else{let r=l.callback;try{h=await Promise.resolve(r(v))}catch(Q){h={content:[{type:"text",text:Q instanceof Error?Q.message:String(Q)}],isError:!0}}}if(l.outputSchema&&!h.isError){if(!h.structuredContent)throw new Bv(Yv.InvalidParams,`Tool ${f.params.name} has an output schema but no structured content was provided`);let r=await l.outputSchema.safeParseAsync(h.structuredContent);if(!r.success)throw new Bv(Yv.InvalidParams,`Invalid structured content for tool ${f.params.name}: ${r.error.message}`)}return h}),this._toolHandlersInitialized=!0}setCompletionRequestHandler(){if(this._completionHandlerInitialized)return;this.server.assertCanSetRequestHandler(r1.shape.method.value),this.server.registerCapabilities({completions:{}}),this.server.setRequestHandler(r1,async(f)=>{switch(f.params.ref.type){case"ref/prompt":return this.handlePromptCompletion(f,f.params.ref);case"ref/resource":return this.handleResourceCompletion(f,f.params.ref);default:throw new Bv(Yv.InvalidParams,`Invalid completion reference: ${f.params.ref}`)}}),this._completionHandlerInitialized=!0}async handlePromptCompletion(f,v){let l=this._registeredPrompts[v.name];if(!l)throw new Bv(Yv.InvalidParams,`Prompt ${v.name} not found`);if(!l.enabled)throw new Bv(Yv.InvalidParams,`Prompt ${v.name} disabled`);if(!l.argsSchema)return N1;let h=l.argsSchema.shape[f.params.argument.name];if(!(h instanceof yr))return N1;let Q=await h._def.complete(f.params.argument.value,f.params.context);return fP(Q)}async handleResourceCompletion(f,v){let l=Object.values(this._registeredResourceTemplates).find((Q)=>Q.resourceTemplate.uriTemplate.toString()===v.uri);if(!l){if(this._registeredResources[v.uri])return N1;throw new Bv(Yv.InvalidParams,`Resource template ${f.params.ref.uri} not found`)}let h=l.resourceTemplate.completeCallback(f.params.argument.name);if(!h)return N1;let r=await h(f.params.argument.value,f.params.context);return fP(r)}setResourceRequestHandlers(){if(this._resourceHandlersInitialized)return;this.server.assertCanSetRequestHandler(dr.shape.method.value),this.server.assertCanSetRequestHandler(or.shape.method.value),this.server.assertCanSetRequestHandler(tr.shape.method.value),this.server.registerCapabilities({resources:{listChanged:!0}}),this.server.setRequestHandler(dr,async(f,v)=>{let l=Object.entries(this._registeredResources).filter(([r,Q])=>Q.enabled).map(([r,Q])=>({uri:r,name:Q.name,...Q.metadata})),h=[];for(let r of Object.values(this._registeredResourceTemplates)){if(!r.resourceTemplate.listCallback)continue;let Q=await r.resourceTemplate.listCallback(v);for(let P of Q.resources)h.push({...r.metadata,...P})}return{resources:[...l,...h]}}),this.server.setRequestHandler(or,async()=>{return{resourceTemplates:Object.entries(this._registeredResourceTemplates).map(([v,l])=>({name:v,uriTemplate:l.resourceTemplate.uriTemplate.toString(),...l.metadata}))}}),this.server.setRequestHandler(tr,async(f,v)=>{let l=new URL(f.params.uri),h=this._registeredResources[l.toString()];if(h){if(!h.enabled)throw new Bv(Yv.InvalidParams,`Resource ${l} disabled`);return h.readCallback(l,v)}for(let r of Object.values(this._registeredResourceTemplates)){let Q=r.resourceTemplate.uriTemplate.match(l.toString());if(Q)return r.readCallback(l,Q,v)}throw new Bv(Yv.InvalidParams,`Resource ${l} not found`)}),this.setCompletionRequestHandler(),this._resourceHandlersInitialized=!0}setPromptRequestHandlers(){if(this._promptHandlersInitialized)return;this.server.assertCanSetRequestHandler(sr.shape.method.value),this.server.assertCanSetRequestHandler(er.shape.method.value),this.server.registerCapabilities({prompts:{listChanged:!0}}),this.server.setRequestHandler(sr,()=>({prompts:Object.entries(this._registeredPrompts).filter(([,f])=>f.enabled).map(([f,v])=>{return{name:f,title:v.title,description:v.description,arguments:v.argsSchema?H8(v.argsSchema):void 0}})})),this.server.setRequestHandler(er,async(f,v)=>{let l=this._registeredPrompts[f.params.name];if(!l)throw new Bv(Yv.InvalidParams,`Prompt ${f.params.name} not found`);if(!l.enabled)throw new Bv(Yv.InvalidParams,`Prompt ${f.params.name} disabled`);if(l.argsSchema){let h=await l.argsSchema.safeParseAsync(f.params.arguments);if(!h.success)throw new Bv(Yv.InvalidParams,`Invalid arguments for prompt ${f.params.name}: ${h.error.message}`);let r=h.data,Q=l.callback;return await Promise.resolve(Q(r,v))}else{let h=l.callback;return await Promise.resolve(h(v))}}),this.setCompletionRequestHandler(),this._promptHandlersInitialized=!0}resource(f,v,...l){let h;if(typeof l[0]==="object")h=l.shift();let r=l[0];if(typeof v==="string"){if(this._registeredResources[v])throw Error(`Resource ${v} is already registered`);let Q=this._createRegisteredResource(f,void 0,v,h,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Q}else{if(this._registeredResourceTemplates[f])throw Error(`Resource template ${f} is already registered`);let Q=this._createRegisteredResourceTemplate(f,void 0,v,h,r);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),Q}}registerResource(f,v,l,h){if(typeof v==="string"){if(this._registeredResources[v])throw Error(`Resource ${v} is already registered`);let r=this._createRegisteredResource(f,l.title,v,l,h);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),r}else{if(this._registeredResourceTemplates[f])throw Error(`Resource template ${f} is already registered`);let r=this._createRegisteredResourceTemplate(f,l.title,v,l,h);return this.setResourceRequestHandlers(),this.sendResourceListChanged(),r}}_createRegisteredResource(f,v,l,h,r){let Q={name:f,title:v,metadata:h,readCallback:r,enabled:!0,disable:()=>Q.update({enabled:!1}),enable:()=>Q.update({enabled:!0}),remove:()=>Q.update({uri:null}),update:(P)=>{if(typeof P.uri<"u"&&P.uri!==l){if(delete this._registeredResources[l],P.uri)this._registeredResources[P.uri]=Q}if(typeof P.name<"u")Q.name=P.name;if(typeof P.title<"u")Q.title=P.title;if(typeof P.metadata<"u")Q.metadata=P.metadata;if(typeof P.callback<"u")Q.readCallback=P.callback;if(typeof P.enabled<"u")Q.enabled=P.enabled;this.sendResourceListChanged()}};return this._registeredResources[l]=Q,Q}_createRegisteredResourceTemplate(f,v,l,h,r){let Q={resourceTemplate:l,title:v,metadata:h,readCallback:r,enabled:!0,disable:()=>Q.update({enabled:!1}),enable:()=>Q.update({enabled:!0}),remove:()=>Q.update({name:null}),update:(P)=>{if(typeof P.name<"u"&&P.name!==f){if(delete this._registeredResourceTemplates[f],P.name)this._registeredResourceTemplates[P.name]=Q}if(typeof P.title<"u")Q.title=P.title;if(typeof P.template<"u")Q.resourceTemplate=P.template;if(typeof P.metadata<"u")Q.metadata=P.metadata;if(typeof P.callback<"u")Q.readCallback=P.callback;if(typeof P.enabled<"u")Q.enabled=P.enabled;this.sendResourceListChanged()}};return this._registeredResourceTemplates[f]=Q,Q}_createRegisteredPrompt(f,v,l,h,r){let Q={title:v,description:l,argsSchema:h===void 0?void 0:W.object(h),callback:r,enabled:!0,disable:()=>Q.update({enabled:!1}),enable:()=>Q.update({enabled:!0}),remove:()=>Q.update({name:null}),update:(P)=>{if(typeof P.name<"u"&&P.name!==f){if(delete this._registeredPrompts[f],P.name)this._registeredPrompts[P.name]=Q}if(typeof P.title<"u")Q.title=P.title;if(typeof P.description<"u")Q.description=P.description;if(typeof P.argsSchema<"u")Q.argsSchema=W.object(P.argsSchema);if(typeof P.callback<"u")Q.callback=P.callback;if(typeof P.enabled<"u")Q.enabled=P.enabled;this.sendPromptListChanged()}};return this._registeredPrompts[f]=Q,Q}_createRegisteredTool(f,v,l,h,r,Q,P,w){let J={title:v,description:l,inputSchema:h===void 0?void 0:W.object(h),outputSchema:r===void 0?void 0:W.object(r),annotations:Q,_meta:P,callback:w,enabled:!0,disable:()=>J.update({enabled:!1}),enable:()=>J.update({enabled:!0}),remove:()=>J.update({name:null}),update:(B)=>{if(typeof B.name<"u"&&B.name!==f){if(delete this._registeredTools[f],B.name)this._registeredTools[B.name]=J}if(typeof B.title<"u")J.title=B.title;if(typeof B.description<"u")J.description=B.description;if(typeof B.paramsSchema<"u")J.inputSchema=W.object(B.paramsSchema);if(typeof B.callback<"u")J.callback=B.callback;if(typeof B.annotations<"u")J.annotations=B.annotations;if(typeof B._meta<"u")J._meta=B._meta;if(typeof B.enabled<"u")J.enabled=B.enabled;this.sendToolListChanged()}};return this._registeredTools[f]=J,this.setToolRequestHandlers(),this.sendToolListChanged(),J}tool(f,...v){if(this._registeredTools[f])throw Error(`Tool ${f} is already registered`);let l,h,r,Q;if(typeof v[0]==="string")l=v.shift();if(v.length>1){let w=v[0];if(vP(w)){if(h=v.shift(),v.length>1&&typeof v[0]==="object"&&v[0]!==null&&!vP(v[0]))Q=v.shift()}else if(typeof w==="object"&&w!==null)Q=v.shift()}let P=v[0];return this._createRegisteredTool(f,void 0,l,h,r,Q,void 0,P)}registerTool(f,v,l){if(this._registeredTools[f])throw Error(`Tool ${f} is already registered`);let{title:h,description:r,inputSchema:Q,outputSchema:P,annotations:w,_meta:J}=v;return this._createRegisteredTool(f,h,r,Q,P,w,J,l)}prompt(f,...v){if(this._registeredPrompts[f])throw Error(`Prompt ${f} is already registered`);let l;if(typeof v[0]==="string")l=v.shift();let h;if(v.length>1)h=v.shift();let r=v[0],Q=this._createRegisteredPrompt(f,void 0,l,h,r);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),Q}registerPrompt(f,v,l){if(this._registeredPrompts[f])throw Error(`Prompt ${f} is already registered`);let{title:h,description:r,argsSchema:Q}=v,P=this._createRegisteredPrompt(f,h,r,Q,l);return this.setPromptRequestHandlers(),this.sendPromptListChanged(),P}isConnected(){return this.server.transport!==void 0}async sendLoggingMessage(f,v){return this.server.sendLoggingMessage(f,v)}sendResourceListChanged(){if(this.isConnected())this.server.sendResourceListChanged()}sendToolListChanged(){if(this.isConnected())this.server.sendToolListChanged()}sendPromptListChanged(){if(this.isConnected())this.server.sendPromptListChanged()}}var D8={type:"object",properties:{}};function vP(f){if(typeof f!=="object"||f===null)return!1;return Object.keys(f).length===0||Object.values(f).some(M8)}function M8(f){return f!==null&&typeof f==="object"&&"parse"in f&&typeof f.parse==="function"&&"safeParse"in f&&typeof f.safeParse==="function"}function H8(f){return Object.entries(f.shape).map(([v,l])=>({name:v,description:l.description,required:!l.isOptional()}))}function fP(f){return{completion:{values:f.slice(0,100),total:f.length,hasMore:f.length>100}}}var N1={completion:{values:[],hasMore:!1}};import lP from"node:process";class Ul{append(f){this._buffer=this._buffer?Buffer.concat([this._buffer,f]):f}readMessage(){if(!this._buffer)return null;let f=this._buffer.indexOf(`
`);if(f===-1)return null;let v=this._buffer.toString("utf8",0,f).replace(/\r$/,"");return this._buffer=this._buffer.subarray(f+1),K8(v)}clear(){this._buffer=void 0}}function K8(f){return Yh.parse(JSON.parse(f))}function rP(f){return JSON.stringify(f)+`
`}class Fl{constructor(f=lP.stdin,v=lP.stdout){this._stdin=f,this._stdout=v,this._readBuffer=new Ul,this._started=!1,this._ondata=(l)=>{this._readBuffer.append(l),this.processReadBuffer()},this._onerror=(l)=>{var h;(h=this.onerror)===null||h===void 0||h.call(this,l)}}async start(){if(this._started)throw Error("StdioServerTransport already started! If using Server class, note that connect() calls start() automatically.");this._started=!0,this._stdin.on("data",this._ondata),this._stdin.on("error",this._onerror)}processReadBuffer(){var f,v;while(!0)try{let l=this._readBuffer.readMessage();if(l===null)break;(f=this.onmessage)===null||f===void 0||f.call(this,l)}catch(l){(v=this.onerror)===null||v===void 0||v.call(this,l)}}async close(){var f;if(this._stdin.off("data",this._ondata),this._stdin.off("error",this._onerror),this._stdin.listenerCount("data")===0)this._stdin.pause();this._readBuffer.clear(),(f=this.onclose)===null||f===void 0||f.call(this)}send(f){return new Promise((v)=>{let l=rP(f);if(this._stdout.write(l))v();else this._stdout.once("drain",v)})}}var uf=new hP,Iv={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};async function L8(f){try{let{key:v,value:l,namespace:h="default"}=f,r=JSON.parse(l);return await uf.set(v,r,h),Iv.info(`Stored memory: ${h}:${v}`),{content:[{type:"text",text:`✅ Stored memory: ${h}:${v}`}]}}catch(v){let l=v instanceof Error?v.message:String(v);return Iv.error("Error storing memory",v),{content:[{type:"text",text:`❌ Error storing memory: ${l}`}],isError:!0}}}async function O8(f){try{let{key:v,namespace:l="default"}=f,h=await uf.get(v,l);if(!h)return{content:[{type:"text",text:`❌ Memory not found: ${l}:${v}`}],isError:!0};let r=Date.now()-h.timestamp;return Iv.info(`Retrieved memory: ${l}:${v}`),{content:[{type:"text",text:JSON.stringify({key:`${l}:${v}`,value:h.value,namespace:h.namespace,timestamp:h.timestamp,created_at:h.created_at,updated_at:h.updated_at,age_seconds:Math.floor(r/1000)},null,2)}]}}catch(v){let l=v instanceof Error?v.message:String(v);return Iv.error("Error retrieving memory",v),{content:[{type:"text",text:`❌ Error retrieving memory: ${l}`}],isError:!0}}}async function g8(f){try{let{pattern:v,namespace:l}=f,r=(await uf.getAll()).filter((Q)=>{let P=Q.key.toLowerCase().includes(v.toLowerCase())||Q.namespace.toLowerCase().includes(v.toLowerCase())||JSON.stringify(Q.value).toLowerCase().includes(v.toLowerCase()),w=!l||Q.namespace===l;return P&&w});return Iv.info(`Searched memory: "${v}" (${r.length} results)`),{content:[{type:"text",text:JSON.stringify({pattern:v,namespace:l||"all",count:r.length,results:r.map((Q)=>({key:Q.key,namespace:Q.namespace,value:Q.value,timestamp:Q.timestamp,updated_at:Q.updated_at}))},null,2)}]}}catch(v){let l=v instanceof Error?v.message:String(v);return Iv.error("Error searching memory",v),{content:[{type:"text",text:`❌ Error searching memory: ${l}`}],isError:!0}}}async function V8(f){try{let{namespace:v}=f,l=await uf.getAll();return Iv.info(`Listed memory: ${l.length} entries`),{content:[{type:"text",text:JSON.stringify({namespace:v||"all",count:l.length,entries:l.map((h)=>({key:h.key,namespace:h.namespace,value:h.value,timestamp:h.timestamp,updated_at:h.updated_at}))},null,2)}]}}catch(v){let l=v instanceof Error?v.message:String(v);return Iv.error("Error listing memory",v),{content:[{type:"text",text:`❌ Error listing memory: ${l}`}],isError:!0}}}async function N8(f){try{let{key:v,namespace:l="default"}=f;if(!await uf.delete(v,l))return{content:[{type:"text",text:`❌ Memory not found: ${l}:${v}`}],isError:!0};return Iv.info(`Deleted memory: ${l}:${v}`),{content:[{type:"text",text:`✅ Deleted memory: ${l}:${v}`}]}}catch(v){let l=v instanceof Error?v.message:String(v);return Iv.error("Error deleting memory",v),{content:[{type:"text",text:`❌ Error deleting memory: ${l}`}],isError:!0}}}async function U8(f){try{let{namespace:v}=f;return await uf.clear(v),Iv.info(`Cleared memory: ${v||"all"}`),{content:[{type:"text",text:`✅ Cleared memory: ${v||"all namespaces"}`}]}}catch(v){let l=v instanceof Error?v.message:String(v);return Iv.error("Error clearing memory",v),{content:[{type:"text",text:`❌ Error clearing memory: ${l}`}],isError:!0}}}async function F8(){try{let f=await uf.getStats();return Iv.info("Retrieved memory stats"),{content:[{type:"text",text:JSON.stringify({total_entries:f.totalEntries,namespaces:f.namespaces,oldest_entry:f.oldestEntry,newest_entry:f.newestEntry,database_path:".sylphx-flow/memory.db"},null,2)}]}}catch(f){let v=f instanceof Error?f.message:String(f);return Iv.error("Error getting memory stats",f),{content:[{type:"text",text:`❌ Error getting memory stats: ${v}`}],isError:!0}}}function QP(f){f.registerTool("memory_set",{description:"Store a value in persistent memory for agent coordination",inputSchema:{key:W.string().describe("Memory key (e.g., 'swarm/coder/status')"),value:W.string().describe("Value to store (will be JSON stringified)"),namespace:W.string().optional().describe("Optional namespace for organization")}},L8),f.registerTool("memory_get",{description:"Retrieve a value from persistent memory",inputSchema:{key:W.string().describe("Memory key to retrieve"),namespace:W.string().optional().describe("Optional namespace")}},O8),f.registerTool("memory_search",{description:"Search memory entries by pattern",inputSchema:{pattern:W.string().describe("Search pattern (matches keys, namespaces, and values)"),namespace:W.string().optional().describe("Optional namespace to limit search")}},g8),f.registerTool("memory_list",{description:"List all memory entries",inputSchema:{namespace:W.string().optional().describe("Optional namespace to filter by")}},V8),f.registerTool("memory_delete",{description:"Delete a memory entry",inputSchema:{key:W.string().describe("Memory key to delete"),namespace:W.string().optional().describe("Optional namespace")}},N8),f.registerTool("memory_clear",{description:"Clear memory entries",inputSchema:{namespace:W.string().optional().describe("Optional namespace to clear (omits to clear all)")}},U8),f.registerTool("memory_stats",{description:"Get memory storage statistics",inputSchema:{}},F8)}import{execSync as j8}from"node:child_process";import{existsSync as y8,mkdirSync as S8,writeFileSync as b8}from"node:fs";import{join as jl}from"node:path";import{readFileSync as PP,writeFileSync as A8}from"node:fs";import{join as wP}from"node:path";class Al{templatesDir;mode;constructor(f,v="coordinator"){this.templatesDir=f,this.mode=v}loadTemplate(f){if(["spec","plan","validation","reviews"].includes(f)){let h=wP(this.templatesDir,"shared",`${f}-template.md`);return PP(h,"utf8")}let l=wP(this.templatesDir,this.mode,`${f}-template.md`);return PP(l,"utf8")}replaceVariables(f,v){let l=f;for(let[h,r]of Object.entries(v)){let Q=new RegExp(`{{${h}}}`,"g");l=l.replace(Q,String(r))}return l=l.replace(/{{#if (\w+)}}([\s\S]*?){{\/if}}/g,(h,r,Q)=>{let P=v[r];return P&&P!=="false"&&P!=="0"&&P!==""?Q:""}),l=l.replace(/{{#each (\w+)}}([\s\S]*?){{\/each}}/g,(h,r,Q)=>{let P=v[r];if(!Array.isArray(P))return"";return P.map((w,J)=>{let B=Q;return B=B.replace(/{{this}}/g,String(w)),B=B.replace(/{{@index}}/g,String(J)),B}).join(`
`)}),l}generateTemplate(f,v){let l=this.loadTemplate(f);return this.replaceVariables(l,v)}createFile(f,v,l){let h=this.generateTemplate(f,v);A8(l,h,"utf8")}generateAllProjectTemplates(f){let v={},l=["spec","progress","plan","tasks","validation","reviews"];for(let h of l)v[h]=this.generateTemplate(h,f);return v}}var Nf={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};function R8(f,v){let l=`${f}/${v}`,h=Sr('git branch --list --format="%(refname:short)"');if(!h.success)return"";let Q=h.output.split(`
`).filter((J)=>J.trim()).filter((J)=>J.startsWith(l));if(Q.length===0)return"";let P=Q.map((J)=>{let B=J.match(new RegExp(`^${l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(?:-(\\d+))?$`));return B?.[1]?Number.parseInt(B[1],10):1});return`-${Math.max(...P,0)+1}`}function _8(f,v){let l={feature:`New feature implementation for ${v}`,bugfix:`Bug fix for ${v} issue`,hotfix:`Critical hotfix for ${v}`,refactor:`Code refactoring for ${v}`,migration:`Migration project for ${v}`},h={feature:["Define feature specifications","Implement core functionality","Write comprehensive tests","Update documentation","Code review and validation"],bugfix:["Identify root cause","Implement fix","Add regression tests","Verify fix resolves issue","Update documentation if needed"],hotfix:["Implement immediate fix","Test critical path","Deploy hotfix","Schedule proper fix follow-up"],refactor:["Analyze current code structure","Plan refactoring approach","Implement refactored code","Ensure all tests pass","Update documentation"],migration:["Analyze current system","Plan migration strategy","Implement migration code","Test migration process","Deploy and verify"]},r={feature:`Successfully implement the ${v} feature with full functionality and testing`,bugfix:`Resolve the ${v} issue completely and prevent recurrence`,hotfix:`Quickly address critical ${v} issue to restore system stability`,refactor:`Improve code quality and maintainability for ${v}`,migration:`Successfully migrate ${v} to new system with minimal disruption`},Q={feature:"Implementation of new feature including frontend, backend, tests, and documentation",bugfix:"Fix for specific issue including root cause analysis and prevention measures",hotfix:"Minimal change to address critical issue with immediate deployment",refactor:"Code structure improvements without changing external behavior",migration:"Complete migration of existing functionality to new system or platform"};return{description:l[f]||`Project for ${v}`,requirements:h[f]||["Define requirements","Implement solution","Test and validate"],objective:r[f]||`Complete ${v} project successfully`,scope:Q[f]||"Project scope to be defined"}}function Sr(f){try{return{success:!0,output:j8(f,{encoding:"utf8",cwd:process.cwd()}).trim(),error:""}}catch(v){return{success:!1,output:"",error:v instanceof Error?v.message:"Unknown error"}}}function k8(f){if(!y8(f))S8(f,{recursive:!0}),Nf.info(`Created directory: ${f}`)}function a8(f,v){b8(f,v,"utf8"),Nf.info(`Created file: ${f}`)}function WP(f){f.registerTool("project_startup",{description:"Initialize a new project with comprehensive templates and workspace structure",inputSchema:{project_type:W.enum(["feature","bugfix","hotfix","refactor","migration"]).describe("Type of project"),project_name:W.string().describe("Name of the project (use letters, numbers, hyphens, underscores only)"),create_branch:W.boolean().optional().describe("Whether to create a git branch (default: true)"),mode:W.enum(["coordinator","implementer"]).optional().describe("Execution mode: coordinator (delegation-based) or implementer (direct execution). Default: coordinator")}},I8)}function I8(f){try{let{project_type:v,project_name:l,create_branch:h=!0,mode:r="coordinator"}=f,Q=_8(v,l),{description:P,requirements:w,objective:J,scope:B}=Q;if(!/^[a-zA-Z0-9-_]+$/.test(l))return{content:[{type:"text",text:`❌ Invalid project name: "${l}". Use only letters, numbers, hyphens, and underscores.`}],isError:!0};let z=R8(v,l),$=`${v}/${l}${z}`,M=jl("specs",v,l),X=new Date().toISOString().split("T")[0];Nf.info(`\uD83D\uDE80 Starting project initialization: ${$}`);let q={success:!0,output:"",error:""};if(h){let V=Sr("git rev-parse --abbrev-ref HEAD");if(V.success&&V.output!=="main")return{content:[{type:"text",text:`❌ Not on main branch. Current branch: ${V.output}. Please switch to main first.`}],isError:!0};if(q=Sr(`git checkout -b ${$}`),!q.success)return{content:[{type:"text",text:`❌ Failed to create branch "${$}": ${q.error}`}],isError:!0};Nf.success(`✅ Created and checked out branch: ${$}`)}k8(M);let H={PROJECT_NAME:l,PROJECT_TYPE:v,DESCRIPTION:P,REQUIREMENTS:w,TIMESTAMP:X,BRANCH_NAME:$,CURRENT_PHASE:"Phase 1: Requirements Analysis",LAST_UPDATED:new Date().toISOString(),NEXT_ACTION:"Complete requirements specification and proceed to Phase 2",STATUS:"Not Started",PHASE_1_STATUS:"In Progress",PHASE_1_COMPLETE:"0",PHASE_1_UPDATED:new Date().toISOString(),PHASE_1_NOTES:"Starting requirements analysis (0% complete)",PHASE_2_STATUS:"Not Started",PHASE_2_COMPLETE:"0",PHASE_2_UPDATED:new Date().toISOString(),PHASE_2_NOTES:"Awaiting research and clarification",PHASE_3_STATUS:"Not Started",PHASE_3_COMPLETE:"0",PHASE_3_UPDATED:new Date().toISOString(),PHASE_3_NOTES:"Awaiting design phase",PHASE_4_STATUS:"Not Started",PHASE_4_COMPLETE:"0",PHASE_4_UPDATED:new Date().toISOString(),PHASE_4_NOTES:"Awaiting task breakdown",PHASE_5_STATUS:"Not Started",PHASE_5_COMPLETE:"0",PHASE_5_UPDATED:new Date().toISOString(),PHASE_5_NOTES:"Awaiting validation",PHASE_6_STATUS:"Not Started",PHASE_6_COMPLETE:"0",PHASE_6_UPDATED:new Date().toISOString(),PHASE_6_NOTES:"Awaiting implementation",PHASE_7_STATUS:"Not Started",PHASE_7_COMPLETE:"0",PHASE_7_UPDATED:new Date().toISOString(),PHASE_7_NOTES:"Awaiting testing and review",PHASE_8_STATUS:"Not Started",PHASE_8_COMPLETE:"0",PHASE_8_UPDATED:new Date().toISOString(),PHASE_8_NOTES:"Awaiting final merge",OBJECTIVE:J||`Implement ${l}`,SCOPE:B||"To be defined",CRITICAL_PATH:"To be defined during task breakdown",PARALLEL_OPPORTUNITIES:"To be identified during planning",RESOURCE_CONFLICTS:"To be resolved during planning",INTEGRATION_POINTS:"To be identified during design",VALIDATED_BY:"To be assigned",VALIDATION_DATE:X,OVERALL_STATUS:"Pending",REVIEW_PERIOD:`${X} onwards`,TOTAL_REVIEWS:"0",QUALITY_SCORE:"0",REVIEW_DATE:X,REVIEWER:"To be assigned",REVIEW_SCOPE:"Full implementation review",IMPLEMENTATION_STATUS:"Not Started",VALIDATOR:"To be assigned",VALIDATION_SCOPE:"Full project validation",REQUIREMENTS_COVERAGE_STATUS:"Pending",ACCEPTANCE_CRITERIA_MAPPED:"Pending",SUCCESS_CRITERIA_MEASURABLE:"Pending",SCOPE_CREEP_PREVENTION:"Pending",ARCHITECTURE_ALIGNMENT:"Pending",INTEGRATION_POINTS_VERIFIED:"Pending",DESIGN_CONFLICTS_RESOLVED:"Pending",TECHNICAL_FEASIBILITY:"Pending",TASK_COMPLETENESS:"Pending",DEPENDENCY_MAPPING_ACCURACY:"Pending",RESOURCE_ALLOCATION_ADEQUATE:"Pending",CRITICAL_PATH_IDENTIFIED:"Pending",TDD_STRATEGY_DEFINED:"Pending",TASK_1_ID:"TASK-001",TASK_1_DESC:"To be defined",TASK_1_STATUS:"Not Started",TASK_1_COMPLETION:"0",TASK_1_DELIVERABLE:"To be defined",TASK_1_QUALITY:"Pending",TASK_2_ID:"TASK-002",TASK_2_DESC:"To be defined",TASK_2_STATUS:"Not Started",TASK_2_COMPLETION:"0",TASK_2_DELIVERABLE:"To be defined",TASK_2_QUALITY:"Pending",TASK_3_ID:"TASK-003",TASK_3_DESC:"To be defined",TASK_3_STATUS:"Not Started",TASK_3_COMPLETION:"0",TASK_3_DELIVERABLE:"To be defined",TASK_3_QUALITY:"Pending",OVERALL_TASK_COMPLETION:"0",ALL_TASKS_COMPLETED:"No",TOTAL_COMMITS:"0",COMMITS_PER_TASK:"0",COMMIT_QUALITY:"Pending",BRANCH_STRATEGY_COMPLIANCE:"Pending"},E=jl(process.cwd(),"src","templates"),N=new Al(E,r).generateAllProjectTemplates(H),g=[];for(let[V,j]of Object.entries(N)){let R=jl(M,`${V}.md`);a8(R,j),g.push(`${V}.md`)}if(h){let V=Sr("git add ."),j=Sr(`git commit -m "feat(${l}): initialize project workspace and comprehensive templates"`);if(!V.success||!j.success)Nf.error("Warning: Failed to create initial commit");else Nf.success("✅ Created initial commit with project templates")}return Nf.success(`✅ Project "${l}" initialized successfully!`),{content:[{type:"text",text:JSON.stringify({success:!0,project:{type:v,name:l,branch:$,workspace:M,description:P,requirements:w,objective:J,scope:B},setup:{branch_created:h&&q.success,workspace_created:!0,templates_created:g,initial_commit:h},next_steps:[`1. Review and update specs/${v}/${l}/spec.md with detailed requirements`,"2. Fill in project-specific data in all template files","3. Proceed with Phase 1: SPECIFY & CLARIFY","4. Follow the workflow in progress.md"]},null,2)}]}}catch(v){let l=v instanceof Error?v.message:String(v);return Nf.error("Error in project startup",v),{content:[{type:"text",text:`❌ Error initializing project: ${l}`}],isError:!0}}}var U1={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};function yl(f){try{return Intl.DateTimeFormat(void 0,{timeZone:f}),!0}catch{return!1}}function C8(f){return/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(f)}function u8(f){try{let{timezone:v}=f;if(!yl(v))return{content:[{type:"text",text:`❌ Invalid timezone: ${v}. Please use a valid IANA timezone name (e.g., 'America/New_York', 'Europe/London', 'Asia/Tokyo').`}],isError:!0};let l=new Date,h=new Intl.DateTimeFormat("en-US",{timeZone:v,year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"long",hour12:!1}),r=h.formatToParts(l),Q={};for(let J of r)Q[J.type]=J.value;let P=new Intl.DateTimeFormat("en-US",{timeZone:v,hour:"2-digit",minute:"2-digit",hour12:!1}).format(l),w=l.toLocaleString("sv-SE",{timeZone:v});return U1.info(`Retrieved current time for timezone: ${v}`),{content:[{type:"text",text:JSON.stringify({timezone:v,current_time:{date:`${Q.month} ${Q.day}, ${Q.year}`,time_24h:P,time_with_seconds:h.format(l),timezone_name:Q.timeZoneName,iso_format:`${w.replace(" ","T")}Z`,unix_timestamp:Math.floor(l.getTime()/1000)}},null,2)}]}}catch(v){let l=v instanceof Error?v.message:String(v);return U1.error("Error getting current time",v),{content:[{type:"text",text:`❌ Error getting current time: ${l}`}],isError:!0}}}function Z8(f){try{let{source_timezone:v,time:l,target_timezone:h}=f;if(!yl(v))return{content:[{type:"text",text:`❌ Invalid source timezone: ${v}. Please use a valid IANA timezone name.`}],isError:!0};if(!yl(h))return{content:[{type:"text",text:`❌ Invalid target timezone: ${h}. Please use a valid IANA timezone name.`}],isError:!0};if(!C8(l))return{content:[{type:"text",text:`❌ Invalid time format: ${l}. Please use 24-hour format (HH:MM).`}],isError:!0};let[r,Q]=l.split(":").map(Number),P=new Date,w=new Date(P.getFullYear(),P.getMonth(),P.getDate(),r,Q),J=new Intl.DateTimeFormat("en-US",{timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),B=J.formatToParts(w),z={};for(let N of B)z[N.type]=N.value;let $=new Intl.DateTimeFormat("en-US",{timeZone:h,year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"long",hour12:!1}),M=new Intl.DateTimeFormat("en-US",{timeZone:h,hour:"2-digit",minute:"2-digit",hour12:!1}).format(w),X=$.formatToParts(w),q={};for(let N of X)q[N.type]=N.value;let E=new Date(w.toLocaleString("en-US",{timeZone:h})).getTime()-w.getTime(),O=Math.round(E/3600000);return U1.info(`Converted time from ${v} to ${h}`),{content:[{type:"text",text:JSON.stringify({conversion:{source:{timezone:v,time:l,formatted:J.format(w)},target:{timezone:h,time_24h:M,formatted:$.format(w),date:`${q.month} ${q.day}, ${q.year}`,timezone_name:q.timeZoneName},time_difference_hours:O}},null,2)}]}}catch(v){let l=v instanceof Error?v.message:String(v);return U1.error("Error converting time",v),{content:[{type:"text",text:`❌ Error converting time: ${l}`}],isError:!0}}}function JP(f){f.registerTool("get_current_time",{description:"Get current time in a specific timezone or system timezone",inputSchema:{timezone:W.string().describe("IANA timezone name (e.g., 'America/New_York', 'Europe/London')")}},u8),f.registerTool("convert_time",{description:"Convert time between timezones",inputSchema:{source_timezone:W.string().describe("Source IANA timezone name"),time:W.string().describe("Time in 24-hour format (HH:MM)"),target_timezone:W.string().describe("Target IANA timezone name")}},Z8)}var F1={name:"sylphx_flow",version:"1.0.0",description:"Sylphx Flow MCP server providing coordination tools for AI agents. Persistent SQLite-based storage with namespace support for agent coordination and state management."},Zf={info:(f)=>console.error(`[INFO] ${f}`),success:(f)=>console.error(`[SUCCESS] ${f}`),error:(f,v)=>{if(console.error(`[ERROR] ${f}`),v)console.error(v)}};Zf.info("\uD83D\uDE80 Starting Sylphx Flow MCP Server...");Zf.info(`\uD83D\uDCCB Description: ${F1.description.substring(0,100)}...`);var A1=new Nl({name:F1.name,version:F1.version,description:F1.description});QP(A1);JP(A1);WP(A1);async function T8(){try{let f=new Fl;await A1.connect(f),Zf.success("✅ MCP Server connected and ready")}catch(f){Zf.error("Failed to start MCP server",f),process.exit(1)}}process.on("SIGINT",()=>{Zf.info("\uD83D\uDED1 Shutting down MCP server..."),process.exit(0)});process.on("SIGTERM",()=>{Zf.info("\uD83D\uDED1 Shutting down MCP server..."),process.exit(0)});T8().catch((f)=>{Zf.error("Fatal error starting server",f),process.exit(1)});
